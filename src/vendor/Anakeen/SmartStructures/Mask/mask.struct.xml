<?xml version="1.0" encoding="UTF-8"?>
<smart:config xmlns:smart="http://www.anakeen.com/ns/smart/1.0">
    <smart:structure-configuration name="MASK" label="Masque de saisie" extends="BASE">
        <smart:icon file="se-mask.png"/>
        <smart:class>Anakeen\SmartStructures\Mask\Mask</smart:class>
        <smart:revisable>false</smart:revisable>
        <smart:usefor>S</smart:usefor>
        <smart:fields>
            <smart:field-set name="msk_fr_rest" type="frame" label="Famille" visibility="W">
                <smart:field-docid name="msk_famid" label="Famille" visibility="W" needed="true" relation="-1"/>
                <smart:field-text name="msk_fam" label="Famille (titre)" visibility="H" is-title="true"/>
                <smart:field-set name="msk_t_contain" type="array" label="Contenu" visibility="W">
                    <smart:field-text name="msk_attrids" label="Attrid" visibility="W"/>
                    <smart:field-text name="msk_visibilities" label="VisibilitÃ©" visibility="W"/>
                    <smart:field-text name="msk_needeeds" label="Obligatoire" visibility="W"/>
                </smart:field-set>
            </smart:field-set>
        </smart:fields>

        <smart:hooks>
            <smart:field-hook event="onPreRefresh" attr="msk_fam">
                <smart:field-callable function="::getTitle"/>
                <smart:field-argument type="attribute">msk_famid</smart:field-argument>
            </smart:field-hook>
        </smart:hooks>

    </smart:structure-configuration>
</smart:config>
