(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["wDocument"],{

/***/ "a2b1083ba5d095ec0632":
/*!*******************************************!*\
  !*** ./src/Apps/DOCUMENT/IHM/document.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*global define, console*/\n(function umdRequire(root, factory) {\n  \"use strict\";\n\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"127c8cf59f228bb01a21\"), __webpack_require__(/*! underscore */ \"8e08e542008e4aef1f58\"), __webpack_require__(/*! dcpDocument/widgets/widget */ \"f562ab9f022eef93542c\")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {}\n})(window, function require_document($, _) {\n  \"use strict\";\n\n  var eventList = [\n    \"beforeRender\",\n    \"ready\",\n    \"change\",\n    \"displayMessage\",\n    \"displayError\",\n    \"validate\",\n    \"attributeBeforeRender\",\n    \"attributeReady\",\n    \"attributeHelperSearch\",\n    \"attributeHelperResponse\",\n    \"attributeHelperSelect\",\n    \"attributeArrayChange\",\n    \"actionClick\",\n    \"attributeAnchorClick\",\n    \"beforeClose\",\n    \"close\",\n    \"beforeSave\",\n    \"afterSave\",\n    \"attributeDownloadFile\",\n    \"attributeUploadFile\",\n    \"attributeUploadFileDone\",\n    \"beforeDelete\",\n    \"afterDelete\",\n    \"beforeRestore\",\n    \"afterRestore\",\n    \"attributeBeforeTabSelect\",\n    \"attributeAfterTabSelect\",\n    \"attributeTabChange\",\n    \"failTransition\",\n    \"successTransition\",\n    \"beforeDisplayTransition\",\n    \"afterDisplayTransition\",\n    \"beforeTransition\",\n    \"beforeTransitionClose\",\n    \"destroy\",\n    \"attributeCreateDialogDocumentBeforeSetFormValues\",\n    \"attributeCreateDialogDocumentBeforeSetTargetValue\",\n    \"attributeCreateDialogDocumentReady\",\n    \"attributeCreateDialogDocumentBeforeClose\",\n    \"attributeCreateDialogDocumentBeforeDestroy\"\n  ];\n\n  //Create a new kind of event\n  var ErrorNotLoaded = function dcpDocument_ErrorNotLoaded(message) {\n    this.name = \"WidgetDocumentNotLoaded\";\n    this.message =\n      message ||\n      \"The document widget is not loaded, wait for the documentloaded event\";\n  };\n  ErrorNotLoaded.prototype = Object.create(Error.prototype);\n  ErrorNotLoaded.prototype.constructor = ErrorNotLoaded;\n\n  $.widget(\"dcp.document\", {\n    _template: _.template(\n      '<iframe class=\"dcpDocumentWrapper\" name=\"<%- options.iframeName %>\" style=\"border : 0;\" data-src=\"<%- base %>api/v2/documents/0.html#widgetValue<%- options.json_encode %>\"></iframe>'\n    ),\n\n    defaults: {\n      resizeMarginHeight: 3,\n      resizeMarginWidth: 0,\n      resizeDebounceTime: 50,\n      withoutResize: false,\n      iframeName: _.uniqueId(\"documentFrame\"),\n      noRouter: true,\n      eventPrefix: \"document\"\n    },\n\n    /**\n     * Create the widget\n     *\n     * Check if initid is present\n     */\n    _create: function dcpDocument_create() {\n      this.options = _.extend({}, this.defaults, this.options);\n      this.options.eventListener = {};\n      this.options.constraintList = {};\n      this.options.cssToInject = [];\n      this.options.jsToInject = [];\n      this._render();\n      this._bindEvents();\n    },\n\n    /**\n     * Create the iframe with the content and register to load event\n     */\n    _render: function dcpDocument_render() {\n      var $iframe,\n        currentWidget = this,\n        documentWindow,\n        options_encode;\n      //inject the iframe\n      options_encode = JSON.stringify(\n        _.omit(\n          this.options,\n          \"resizeMarginHeight\",\n          \"resizeMarginWidth\",\n          \"resizeDebounceTime\",\n          \"withoutResize\",\n          \"iframeName\",\n          \"eventPrefix\",\n          \"eventListener\",\n          \"constraintList\"\n        )\n      );\n      this.element.empty().append(\n        this._template({\n          options: {\n            iframeName: this.options.iframeName,\n            json_encode: options_encode\n          },\n          base: $(\"base\").attr(\"href\") || \"\"\n        })\n      );\n      //bind the internal controller to the documentWidget\n      $iframe = this.element.find(\".dcpDocumentWrapper\");\n      //Listen the load to the iframe (initial JS added and page loaded)\n\n      if ($iframe.length > 0) {\n        documentWindow = $iframe[0].contentWindow;\n        //Use this way to set url for firefox (when the document is in iframe in another document)\n        documentWindow.location.href = $iframe.data(\"src\");\n        // This event is used when use a hard link (aka href anchor) to change document\n        // It is load also the first time\n        $iframe.on(\"load\", function dcpDocument_setReadyEvent() {\n          documentWindow.documentLoaded = function dcpDocument_loadedCallback(\n            domNode,\n            viewData\n          ) {\n            // Re Bind the internalController function to the current widget\n            currentWidget._bindInternalWidget.call(\n              currentWidget,\n              domNode.data(\"dcpDocumentController\"),\n              viewData\n            );\n            // voidLoaded is true when document 0 is loaded\n            currentWidget.element.data(\n              \"voidLoaded\",\n              !viewData || !viewData.initid\n            );\n          };\n\n          $(documentWindow).on(\"unload\", function dcpDocument_setUnloadEvent() {\n            currentWidget._unbindInternalWidget.call(currentWidget);\n          });\n          if (\n            documentWindow.dcp &&\n            documentWindow.dcp.triggerReload &&\n            documentWindow.dcp.documentReady === false\n          ) {\n            documentWindow.dcp.triggerReload();\n          }\n        });\n      }\n      this._resize();\n    },\n\n    /**\n     * Suppress internal widget reference\n     */\n    _unbindInternalWidget: function dcpDocument_unbindInternalWidget() {\n      this.element.data(\"internalWidgetInitialised\", false);\n      this.element.data(\"internalWidget\", false);\n      this._trigger(\"internalWidgetUnloaded\");\n      this._trigger(\"unloaded\");\n    },\n\n    rebindEvents: function dcpDocument_rebindEvents() {\n      var internalController = this.element.data(\"internalWidget\");\n      if (internalController) {\n        //Rebind event\n        _.each(this.options.eventListener, function dcpDocument_bindEvent(\n          currentEvent\n        ) {\n          internalController.addEventListener(currentEvent);\n        });\n        //Rebind constraint\n        _.each(this.options.constraintList, function dcpDocument_bindEvent(\n          currentConstaint\n        ) {\n          internalController.addConstraint(currentConstaint);\n        });\n      }\n    },\n\n    reinjectCSSAndJS: function dcpDocument_reinjectCSSAndJS() {\n      var internalController = this.element.data(\"internalWidget\");\n      if (internalController) {\n        try {\n          internalController.injectCSS(this.options.cssToInject);\n          internalController.injectJS(this.options.jsToInject);\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    },\n\n    /**\n     * Bind the internal controller to the current widget\n     * Reinit the constraint and the event\n     *\n     * @param internalController\n     * @param voidLoaded\n     */\n    _bindInternalWidget: function dcpDocument_bindInternalWidget(\n      internalController,\n      voidLoaded\n    ) {\n      this.element.data(\"internalWidget\", internalController);\n      if (!voidLoaded) {\n        this.rebindEvents();\n        this.reinjectCSSAndJS();\n      }\n      this.element.data(\"internalWidgetInitialised\", true);\n      if (voidLoaded) {\n        this._trigger(\"loaded\", {}, { isEmpty: true });\n        return this;\n      }\n      this._trigger(\"loaded\");\n      return this;\n    },\n\n    /**\n     * Add resize event\n     */\n    _bindEvents: function dcpDocument_bindEvents() {\n      if (!this.options.withoutResize) {\n        $(window).on(\n          \"resize\" + this.eventNamespace,\n          _.debounce(\n            _.bind(this._resize, this),\n            parseInt(this.options.resizeDebounceTime, 10)\n          )\n        );\n        this._resize();\n      }\n    },\n\n    /**\n     * Compute the size of the widget\n     */\n    _resize: function dcpDocument_resize() {\n      var event = this._trigger(\"autoresize\"),\n        $documentWrapper = this.element.find(\".dcpDocumentWrapper\"),\n        currentWidget = this,\n        element = this.element;\n      //the computation can be done by an external function and default prevented\n      if (!this.options.withoutResize && event) {\n        //compute two times height (one for disapear horizontal scrollbar, two to get the actual size)\n        //noinspection JSValidateTypes\n        $documentWrapper.height(\n          element.innerHeight() -\n            parseInt(currentWidget.options.resizeMarginHeight, 10)\n        );\n        //noinspection JSValidateTypes\n        $documentWrapper.width(\n          element.innerWidth() -\n            parseInt(currentWidget.options.resizeMarginWidth, 10)\n        );\n        //defer height computation to let the time to scrollbar disapear\n        _.defer(function dcpDocument_computeHeight() {\n          //noinspection JSValidateTypes\n          $documentWrapper.height(\n            element.innerHeight() -\n              parseInt(currentWidget.options.resizeMarginHeight, 10)\n          );\n        });\n      }\n    },\n\n    tryToDestroy: function dcpDocument_tryToDestroy() {\n      var currentWidget = this;\n      return new Promise(function dcpDocument_tryToDestroy_promise(\n        resolve,\n        reject\n      ) {\n        var internalWidget;\n        if (currentWidget.isLoaded()) {\n          internalWidget = currentWidget.element.data(\"internalWidget\");\n          internalWidget\n            .tryToDestroy()\n            .then(function dcpDocument_destroy_then() {\n              resolve();\n              currentWidget._destroy();\n            })\n            .catch(function dcpDocument_destroy_catch(errorMessage) {\n              reject(errorMessage);\n            });\n          return;\n        }\n        resolve();\n        currentWidget._destroy();\n      });\n    },\n\n    /**\n     * Destroy the widget\n     */\n    _destroy: function dcpDocument_destroy() {\n      $(window).off(this.eventNamespace);\n      this.element.empty();\n      this._unbindInternalWidget();\n      this._trigger(\"destroy\");\n      this._super();\n    },\n\n    /**\n     * Check if event name is valid\n     *\n     * @param eventName string\n     * @private\n     */\n    _checkEventName: function documentController_checkEventName(eventName) {\n      if (\n        _.isString(eventName) &&\n        (eventName.indexOf(\"custom:\") === 0 ||\n          _.find(eventList, function documentController_CheckEventType(\n            currentEventType\n          ) {\n            return currentEventType === eventName;\n          }))\n      ) {\n        return true;\n      }\n      throw new Error(\n        \"The event type \" +\n          eventName +\n          \" is not known. It must be one of \" +\n          eventList.join(\" ,\")\n      );\n    },\n\n    /**\n     * Update options\n     */\n    options: function dcpDocument_options() {\n      throw new Error(\n        \"You cannot modify the options, you need to suppress the widget\"\n      );\n    },\n\n    /**\n     * Fetch a new document\n     *\n     * Use internal controller if ready\n     * Re-render the widget if internal is not ready\n     *\n     * @param values\n     * @param options\n     */\n    fetchDocument: function dcpDocument_fetchDocument(values, options) {\n      var internalWidget,\n        currentWidget = this,\n        fetchPromise = null,\n        initWidget = function dpcDocument_successWidget() {\n          currentWidget.rebindEvents.call(currentWidget);\n          currentWidget.element.data(\"voidLoaded\", false);\n        };\n      options = options || {};\n\n      if (!values.initid) {\n        throw new Error(\"You need to set the initid to fetch the document\");\n      }\n      _.each(\n        _.pick(values, \"initid\", \"revision\", \"viewId\", \"customClientData\"),\n        function dcpDocument_setNewOptions(value, key) {\n          currentWidget.options[key] = value;\n        }\n      );\n\n      if (this.element.data(\"internalWidgetInitialised\")) {\n        internalWidget = this.element.data(\"internalWidget\");\n\n        if (options.success) {\n          // @deprecated : use promise instead\n          options.success = _.wrap(\n            options.success,\n            function dcpDocument_success(success) {\n              initWidget.apply(this, _.rest(arguments));\n              return success.apply(this, _.rest(arguments));\n            }\n          );\n        }\n        if (options.error) {\n          // @deprecated : use promise instead\n          options.error = _.wrap(options.error, function dcpDocument_error(\n            error\n          ) {\n            initWidget.apply(this, _.rest(arguments));\n            return error.apply(this, _.rest(arguments));\n          });\n        }\n        fetchPromise = internalWidget.fetchDocument.call(\n          internalWidget,\n          values,\n          options\n        );\n\n        if (!options.success) {\n          fetchPromise.then(initWidget);\n        }\n        if (!options.error) {\n          fetchPromise.catch(initWidget);\n        }\n        return fetchPromise;\n      } else {\n        this._render();\n      }\n    },\n\n    /**\n     * Add a new external event\n     * The event is added in the widget and is auto-rebinded when the internal widget is reloaded\n     *\n     * @param eventType string|object type of the widget or an object event\n     * @param options object|function conf of the event or callback\n     * @param callback function callback\n     * @returns {*}\n     */\n    addEventListener: function dcpDocument_addEventListener(\n      eventType,\n      options,\n      callback\n    ) {\n      var currentEvent,\n        currentWidget = this;\n      if (_.isUndefined(callback) && _.isFunction(options)) {\n        callback = options;\n        options = {};\n      }\n      // the first parameters can be the final object (chain removeEvent and addEvent)\n      if (\n        _.isObject(eventType) &&\n        _.isUndefined(options) &&\n        _.isUndefined(callback)\n      ) {\n        currentEvent = eventType;\n        if (!currentEvent.name) {\n          throw new Error(\n            \"When an event is initiated with a single object, this object needs to have the name property \".JSON.stringify(\n              currentEvent\n            )\n          );\n        }\n      } else {\n        currentEvent = _.defaults(options, {\n          name: _.uniqueId(\"event_\" + eventType),\n          eventType: eventType,\n          eventCallback: callback,\n          externalEvent: true,\n          once: false\n        });\n      }\n      // the eventType must be one the list\n      this._checkEventName(currentEvent.eventType);\n      if (currentEvent.once === true) {\n        currentEvent.eventCallback = _.wrap(\n          currentEvent.eventCallback,\n          function dcpDocument_onceWrapper(callback) {\n            try {\n              callback.apply(this, _.rest(arguments));\n            } catch (e) {\n              console.error(e);\n            }\n            currentWidget.removeEventListener(currentEvent.name);\n          }\n        );\n      }\n      //Remove once property because already wrapped\n      currentEvent.once = false;\n      this.options.eventListener[currentEvent.name] = currentEvent;\n      if (\n        this.element.data(\"internalWidgetInitialised\") &&\n        !this.element.data(\"voidLoaded\")\n      ) {\n        this.element.data(\"internalWidget\").addEventListener(currentEvent);\n      }\n      return currentEvent.name;\n    },\n\n    /**\n     * List of the events of the current widget\n     *\n     * @returns {*}\n     */\n    listEventListeners: function documentControllerListEvents() {\n      if (\n        this.element.data(\"internalWidgetInitialised\") &&\n        !this.element.data(\"voidLoaded\")\n      ) {\n        return this.element.data(\"internalWidget\").listEventListeners();\n      } else {\n        return this.options.eventListener;\n      }\n    },\n\n    /**\n     * Remove the event of the widget list and the internal list (if internal is ready)\n     *\n     * @param eventName\n     * @returns {Array}\n     */\n    removeEventListener: function dcpDocument_removeEventListener(eventName) {\n      var removed = [],\n        testRegExp = new RegExp(\"\\\\\" + eventName + \"$\"),\n        newList,\n        eventList;\n      newList = _.filter(\n        this.options.eventListener,\n        function dcpDocument_removeCurrentEvent(currentEvent) {\n          if (\n            currentEvent.name === eventName ||\n            testRegExp.test(currentEvent.name)\n          ) {\n            removed.push(currentEvent);\n            return false;\n          }\n          return true;\n        }\n      );\n      eventList = {};\n      _.each(newList, function dcp_documentIterateEach(currentEvent) {\n        eventList[currentEvent.name] = currentEvent;\n      });\n      this.options.eventListener = eventList;\n      if (\n        this.element.data(\"internalWidgetInitialised\") &&\n        !this.element.data(\"voidLoaded\")\n      ) {\n        this.element\n          .data(\"internalWidget\")\n          .removeEventListener(eventName, true);\n      }\n      return removed;\n    },\n\n    /**\n     * Add a constraint\n     * The constraint is added in the widget and is auto-rebinded when the internal widget is reloaded\n     *\n     * @param options\n     * @param callback\n     * @returns {*}\n     */\n    addConstraint: function dcpDocument_addConstraint(options, callback) {\n      var parameters,\n        currentWidget = this;\n      if (_.isUndefined(callback) && _.isFunction(options)) {\n        callback = options;\n        options = {};\n      }\n      if (_.isObject(options) && _.isUndefined(callback)) {\n        if (!options.name) {\n          throw new Error(\n            \"When a constraint is initiated with a single object, this object needs to have the name property \".JSON.stringify(\n              options\n            )\n          );\n        }\n      } else {\n        parameters = _.defaults(options, {\n          documentCheck: function dcpDocument_defaultDocumentCheck() {\n            return true;\n          },\n          attributeCheck: function dcpDocument_defaultAttributeCheck() {\n            return true;\n          },\n          constraintCheck: callback,\n          name: _.uniqueId(\"constraint\"),\n          externalConstraint: false,\n          once: false\n        });\n      }\n      if (!_.isFunction(parameters.constraintCheck)) {\n        throw new Error(\"An event need a callback\");\n      }\n      if (parameters.once === true) {\n        parameters.eventCallback = _.wrap(\n          parameters.constraintCheck,\n          function dcpDocument_onceWrapper(callback) {\n            try {\n              callback.apply(this, _.rest(arguments));\n            } catch (e) {\n              console.error(e);\n            }\n            currentWidget.removeConstraint(\n              parameters.name,\n              parameters.externalConstraint\n            );\n          }\n        );\n      }\n      this.options.constraintList[parameters.name] = parameters;\n      if (\n        this.element.data(\"internalWidgetInitialised\") &&\n        !this.element.data(\"voidLoaded\")\n      ) {\n        this.element.data(\"internalWidget\").addConstraint(parameters);\n      }\n      return parameters.name;\n    },\n    /**\n     * List the constraint of the widget\n     *\n     * @returns {*}\n     */\n    listConstraints: function documentControllerListConstraint() {\n      if (\n        this.element.data(\"internalWidgetInitialised\") &&\n        !this.element.data(\"voidLoaded\")\n      ) {\n        return this.element.data(\"internalWidget\").listConstraints();\n      } else {\n        return this.options.constraintList;\n      }\n    },\n    /**\n     * Remove the constraint of the widget\n     *\n     * @param constraintName\n     * @returns {Array}\n     */\n    removeConstraint: function dcpDocument_removeConstraint(constraintName) {\n      var removed = [],\n        newConstraintList,\n        constraintList,\n        testRegExp = new RegExp(\"\\\\\" + constraintName + \"$\");\n      newConstraintList = _.filter(\n        this.options.constraintList,\n        function dcpDocument_removeConstraint(currentConstraint) {\n          if (\n            currentConstraint.name === constraintName ||\n            testRegExp.test(currentConstraint.name)\n          ) {\n            removed.push(currentConstraint);\n            return false;\n          }\n          return true;\n        }\n      );\n      constraintList = {};\n      _.each(newConstraintList, function dcpDocument_reinitConstraint(\n        currentConstraint\n      ) {\n        constraintList[currentConstraint.name] = currentConstraint;\n      });\n      this.options.constraintList = constraintList;\n      if (\n        this.element.data(\"internalWidgetInitialised\") &&\n        !this.element.data(\"voidLoaded\")\n      ) {\n        this.element\n          .data(\"internalWidget\")\n          .removeConstraint(constraintName, true);\n      }\n      return removed;\n    },\n\n    isLoaded: function dcpDocument_isLoaded() {\n      return (\n        this.element.data(\"internalWidgetInitialised\") &&\n        !this.element.data(\"voidLoaded\")\n      );\n    },\n\n    injectCSS: function documentController_injectCSS(cssToInject) {\n      if (!_.isArray(cssToInject) && !_.isString(cssToInject)) {\n        throw new Error(\n          \"The css to inject must be an array string or a string\"\n        );\n      }\n      if (_.isString(cssToInject)) {\n        cssToInject = [cssToInject];\n      }\n\n      this.options.cssToInject = _.union(this.options.cssToInject, cssToInject);\n\n      if (\n        this.element.data(\"internalWidgetInitialised\") &&\n        !this.element.data(\"voidLoaded\")\n      ) {\n        this.element.data(\"internalWidget\").injectCSS(cssToInject);\n      }\n    },\n\n    injectJS: function documentController_injectCSS(jsToInject) {\n      if (!_.isArray(jsToInject) && !_.isString(jsToInject)) {\n        throw new Error(\"The js to inject must be an array string or a string\");\n      }\n      if (_.isString(jsToInject)) {\n        jsToInject = [jsToInject];\n      }\n\n      this.options.jsToInject = _.union(this.options.jsToInject, jsToInject);\n\n      if (\n        this.element.data(\"internalWidgetInitialised\") &&\n        !this.element.data(\"voidLoaded\")\n      ) {\n        this.element.data(\"internalWidget\").injectJS(jsToInject);\n      }\n    }\n  });\n\n  //noinspection JSValidateJSDoc\n  /**\n   * Wrap the bridge that find the function to be executed\n   * Search in the current widget if the function is here\n   * Search in the internal widget (if ready to find the widget)\n   *\n   * @type {Function|function(): Function|function(): _Chain<T>|*}\n   */\n  //noinspection JSUnresolvedVariable\n  $.fn.document = _.wrap($.fn.document, function dcpDocument_wrap(\n    initialDocumentBridge,\n    methodName\n  ) {\n    // jshint ignore:line\n    var isMethodCall, internalWidget;\n    try {\n      return initialDocumentBridge.apply(this, _.rest(arguments));\n    } catch (error) {\n      if (error.name === \"noSuchMethodError\") {\n        isMethodCall = typeof methodName === \"string\";\n        if (isMethodCall && !this.data(\"internalWidgetInitialised\")) {\n          throw new ErrorNotLoaded();\n        }\n        internalWidget = this.data(\"internalWidget\");\n        if (\n          _.isFunction(internalWidget[methodName]) &&\n          methodName.charAt(0) !== \"_\"\n        ) {\n          return internalWidget[methodName].apply(\n            internalWidget,\n            _.rest(arguments, 2)\n          );\n        }\n      }\n      throw error;\n    }\n  });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYTJiMTA4M2JhNWQwOTVlYzA2MzIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9ET0NVTUVOVC9JSE0vZG9jdW1lbnQuanM/MTUyNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKmdsb2JhbCBkZWZpbmUsIGNvbnNvbGUqL1xuKGZ1bmN0aW9uIHVtZFJlcXVpcmUocm9vdCwgZmFjdG9yeSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW1wianF1ZXJ5XCIsIFwidW5kZXJzY29yZVwiLCBcImRjcERvY3VtZW50L3dpZGdldHMvd2lkZ2V0XCJdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIHtcbiAgICBmYWN0b3J5KHdpbmRvdy5qUXVlcnksIHdpbmRvdy5fKTtcbiAgfVxufSkod2luZG93LCBmdW5jdGlvbiByZXF1aXJlX2RvY3VtZW50KCQsIF8pIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIGV2ZW50TGlzdCA9IFtcbiAgICBcImJlZm9yZVJlbmRlclwiLFxuICAgIFwicmVhZHlcIixcbiAgICBcImNoYW5nZVwiLFxuICAgIFwiZGlzcGxheU1lc3NhZ2VcIixcbiAgICBcImRpc3BsYXlFcnJvclwiLFxuICAgIFwidmFsaWRhdGVcIixcbiAgICBcImF0dHJpYnV0ZUJlZm9yZVJlbmRlclwiLFxuICAgIFwiYXR0cmlidXRlUmVhZHlcIixcbiAgICBcImF0dHJpYnV0ZUhlbHBlclNlYXJjaFwiLFxuICAgIFwiYXR0cmlidXRlSGVscGVyUmVzcG9uc2VcIixcbiAgICBcImF0dHJpYnV0ZUhlbHBlclNlbGVjdFwiLFxuICAgIFwiYXR0cmlidXRlQXJyYXlDaGFuZ2VcIixcbiAgICBcImFjdGlvbkNsaWNrXCIsXG4gICAgXCJhdHRyaWJ1dGVBbmNob3JDbGlja1wiLFxuICAgIFwiYmVmb3JlQ2xvc2VcIixcbiAgICBcImNsb3NlXCIsXG4gICAgXCJiZWZvcmVTYXZlXCIsXG4gICAgXCJhZnRlclNhdmVcIixcbiAgICBcImF0dHJpYnV0ZURvd25sb2FkRmlsZVwiLFxuICAgIFwiYXR0cmlidXRlVXBsb2FkRmlsZVwiLFxuICAgIFwiYXR0cmlidXRlVXBsb2FkRmlsZURvbmVcIixcbiAgICBcImJlZm9yZURlbGV0ZVwiLFxuICAgIFwiYWZ0ZXJEZWxldGVcIixcbiAgICBcImJlZm9yZVJlc3RvcmVcIixcbiAgICBcImFmdGVyUmVzdG9yZVwiLFxuICAgIFwiYXR0cmlidXRlQmVmb3JlVGFiU2VsZWN0XCIsXG4gICAgXCJhdHRyaWJ1dGVBZnRlclRhYlNlbGVjdFwiLFxuICAgIFwiYXR0cmlidXRlVGFiQ2hhbmdlXCIsXG4gICAgXCJmYWlsVHJhbnNpdGlvblwiLFxuICAgIFwic3VjY2Vzc1RyYW5zaXRpb25cIixcbiAgICBcImJlZm9yZURpc3BsYXlUcmFuc2l0aW9uXCIsXG4gICAgXCJhZnRlckRpc3BsYXlUcmFuc2l0aW9uXCIsXG4gICAgXCJiZWZvcmVUcmFuc2l0aW9uXCIsXG4gICAgXCJiZWZvcmVUcmFuc2l0aW9uQ2xvc2VcIixcbiAgICBcImRlc3Ryb3lcIixcbiAgICBcImF0dHJpYnV0ZUNyZWF0ZURpYWxvZ0RvY3VtZW50QmVmb3JlU2V0Rm9ybVZhbHVlc1wiLFxuICAgIFwiYXR0cmlidXRlQ3JlYXRlRGlhbG9nRG9jdW1lbnRCZWZvcmVTZXRUYXJnZXRWYWx1ZVwiLFxuICAgIFwiYXR0cmlidXRlQ3JlYXRlRGlhbG9nRG9jdW1lbnRSZWFkeVwiLFxuICAgIFwiYXR0cmlidXRlQ3JlYXRlRGlhbG9nRG9jdW1lbnRCZWZvcmVDbG9zZVwiLFxuICAgIFwiYXR0cmlidXRlQ3JlYXRlRGlhbG9nRG9jdW1lbnRCZWZvcmVEZXN0cm95XCJcbiAgXTtcblxuICAvL0NyZWF0ZSBhIG5ldyBraW5kIG9mIGV2ZW50XG4gIHZhciBFcnJvck5vdExvYWRlZCA9IGZ1bmN0aW9uIGRjcERvY3VtZW50X0Vycm9yTm90TG9hZGVkKG1lc3NhZ2UpIHtcbiAgICB0aGlzLm5hbWUgPSBcIldpZGdldERvY3VtZW50Tm90TG9hZGVkXCI7XG4gICAgdGhpcy5tZXNzYWdlID1cbiAgICAgIG1lc3NhZ2UgfHxcbiAgICAgIFwiVGhlIGRvY3VtZW50IHdpZGdldCBpcyBub3QgbG9hZGVkLCB3YWl0IGZvciB0aGUgZG9jdW1lbnRsb2FkZWQgZXZlbnRcIjtcbiAgfTtcbiAgRXJyb3JOb3RMb2FkZWQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICBFcnJvck5vdExvYWRlZC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBFcnJvck5vdExvYWRlZDtcblxuICAkLndpZGdldChcImRjcC5kb2N1bWVudFwiLCB7XG4gICAgX3RlbXBsYXRlOiBfLnRlbXBsYXRlKFxuICAgICAgJzxpZnJhbWUgY2xhc3M9XCJkY3BEb2N1bWVudFdyYXBwZXJcIiBuYW1lPVwiPCUtIG9wdGlvbnMuaWZyYW1lTmFtZSAlPlwiIHN0eWxlPVwiYm9yZGVyIDogMDtcIiBkYXRhLXNyYz1cIjwlLSBiYXNlICU+YXBpL3YyL2RvY3VtZW50cy8wLmh0bWwjd2lkZ2V0VmFsdWU8JS0gb3B0aW9ucy5qc29uX2VuY29kZSAlPlwiPjwvaWZyYW1lPidcbiAgICApLFxuXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgIHJlc2l6ZU1hcmdpbkhlaWdodDogMyxcbiAgICAgIHJlc2l6ZU1hcmdpbldpZHRoOiAwLFxuICAgICAgcmVzaXplRGVib3VuY2VUaW1lOiA1MCxcbiAgICAgIHdpdGhvdXRSZXNpemU6IGZhbHNlLFxuICAgICAgaWZyYW1lTmFtZTogXy51bmlxdWVJZChcImRvY3VtZW50RnJhbWVcIiksXG4gICAgICBub1JvdXRlcjogdHJ1ZSxcbiAgICAgIGV2ZW50UHJlZml4OiBcImRvY3VtZW50XCJcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSB3aWRnZXRcbiAgICAgKlxuICAgICAqIENoZWNrIGlmIGluaXRpZCBpcyBwcmVzZW50XG4gICAgICovXG4gICAgX2NyZWF0ZTogZnVuY3Rpb24gZGNwRG9jdW1lbnRfY3JlYXRlKCkge1xuICAgICAgdGhpcy5vcHRpb25zID0gXy5leHRlbmQoe30sIHRoaXMuZGVmYXVsdHMsIHRoaXMub3B0aW9ucyk7XG4gICAgICB0aGlzLm9wdGlvbnMuZXZlbnRMaXN0ZW5lciA9IHt9O1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnN0cmFpbnRMaXN0ID0ge307XG4gICAgICB0aGlzLm9wdGlvbnMuY3NzVG9JbmplY3QgPSBbXTtcbiAgICAgIHRoaXMub3B0aW9ucy5qc1RvSW5qZWN0ID0gW107XG4gICAgICB0aGlzLl9yZW5kZXIoKTtcbiAgICAgIHRoaXMuX2JpbmRFdmVudHMoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBpZnJhbWUgd2l0aCB0aGUgY29udGVudCBhbmQgcmVnaXN0ZXIgdG8gbG9hZCBldmVudFxuICAgICAqL1xuICAgIF9yZW5kZXI6IGZ1bmN0aW9uIGRjcERvY3VtZW50X3JlbmRlcigpIHtcbiAgICAgIHZhciAkaWZyYW1lLFxuICAgICAgICBjdXJyZW50V2lkZ2V0ID0gdGhpcyxcbiAgICAgICAgZG9jdW1lbnRXaW5kb3csXG4gICAgICAgIG9wdGlvbnNfZW5jb2RlO1xuICAgICAgLy9pbmplY3QgdGhlIGlmcmFtZVxuICAgICAgb3B0aW9uc19lbmNvZGUgPSBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgXy5vbWl0KFxuICAgICAgICAgIHRoaXMub3B0aW9ucyxcbiAgICAgICAgICBcInJlc2l6ZU1hcmdpbkhlaWdodFwiLFxuICAgICAgICAgIFwicmVzaXplTWFyZ2luV2lkdGhcIixcbiAgICAgICAgICBcInJlc2l6ZURlYm91bmNlVGltZVwiLFxuICAgICAgICAgIFwid2l0aG91dFJlc2l6ZVwiLFxuICAgICAgICAgIFwiaWZyYW1lTmFtZVwiLFxuICAgICAgICAgIFwiZXZlbnRQcmVmaXhcIixcbiAgICAgICAgICBcImV2ZW50TGlzdGVuZXJcIixcbiAgICAgICAgICBcImNvbnN0cmFpbnRMaXN0XCJcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIHRoaXMuZWxlbWVudC5lbXB0eSgpLmFwcGVuZChcbiAgICAgICAgdGhpcy5fdGVtcGxhdGUoe1xuICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGlmcmFtZU5hbWU6IHRoaXMub3B0aW9ucy5pZnJhbWVOYW1lLFxuICAgICAgICAgICAganNvbl9lbmNvZGU6IG9wdGlvbnNfZW5jb2RlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBiYXNlOiAkKFwiYmFzZVwiKS5hdHRyKFwiaHJlZlwiKSB8fCBcIlwiXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgLy9iaW5kIHRoZSBpbnRlcm5hbCBjb250cm9sbGVyIHRvIHRoZSBkb2N1bWVudFdpZGdldFxuICAgICAgJGlmcmFtZSA9IHRoaXMuZWxlbWVudC5maW5kKFwiLmRjcERvY3VtZW50V3JhcHBlclwiKTtcbiAgICAgIC8vTGlzdGVuIHRoZSBsb2FkIHRvIHRoZSBpZnJhbWUgKGluaXRpYWwgSlMgYWRkZWQgYW5kIHBhZ2UgbG9hZGVkKVxuXG4gICAgICBpZiAoJGlmcmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGRvY3VtZW50V2luZG93ID0gJGlmcmFtZVswXS5jb250ZW50V2luZG93O1xuICAgICAgICAvL1VzZSB0aGlzIHdheSB0byBzZXQgdXJsIGZvciBmaXJlZm94ICh3aGVuIHRoZSBkb2N1bWVudCBpcyBpbiBpZnJhbWUgaW4gYW5vdGhlciBkb2N1bWVudClcbiAgICAgICAgZG9jdW1lbnRXaW5kb3cubG9jYXRpb24uaHJlZiA9ICRpZnJhbWUuZGF0YShcInNyY1wiKTtcbiAgICAgICAgLy8gVGhpcyBldmVudCBpcyB1c2VkIHdoZW4gdXNlIGEgaGFyZCBsaW5rIChha2EgaHJlZiBhbmNob3IpIHRvIGNoYW5nZSBkb2N1bWVudFxuICAgICAgICAvLyBJdCBpcyBsb2FkIGFsc28gdGhlIGZpcnN0IHRpbWVcbiAgICAgICAgJGlmcmFtZS5vbihcImxvYWRcIiwgZnVuY3Rpb24gZGNwRG9jdW1lbnRfc2V0UmVhZHlFdmVudCgpIHtcbiAgICAgICAgICBkb2N1bWVudFdpbmRvdy5kb2N1bWVudExvYWRlZCA9IGZ1bmN0aW9uIGRjcERvY3VtZW50X2xvYWRlZENhbGxiYWNrKFxuICAgICAgICAgICAgZG9tTm9kZSxcbiAgICAgICAgICAgIHZpZXdEYXRhXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBSZSBCaW5kIHRoZSBpbnRlcm5hbENvbnRyb2xsZXIgZnVuY3Rpb24gdG8gdGhlIGN1cnJlbnQgd2lkZ2V0XG4gICAgICAgICAgICBjdXJyZW50V2lkZ2V0Ll9iaW5kSW50ZXJuYWxXaWRnZXQuY2FsbChcbiAgICAgICAgICAgICAgY3VycmVudFdpZGdldCxcbiAgICAgICAgICAgICAgZG9tTm9kZS5kYXRhKFwiZGNwRG9jdW1lbnRDb250cm9sbGVyXCIpLFxuICAgICAgICAgICAgICB2aWV3RGF0YVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIHZvaWRMb2FkZWQgaXMgdHJ1ZSB3aGVuIGRvY3VtZW50IDAgaXMgbG9hZGVkXG4gICAgICAgICAgICBjdXJyZW50V2lkZ2V0LmVsZW1lbnQuZGF0YShcbiAgICAgICAgICAgICAgXCJ2b2lkTG9hZGVkXCIsXG4gICAgICAgICAgICAgICF2aWV3RGF0YSB8fCAhdmlld0RhdGEuaW5pdGlkXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAkKGRvY3VtZW50V2luZG93KS5vbihcInVubG9hZFwiLCBmdW5jdGlvbiBkY3BEb2N1bWVudF9zZXRVbmxvYWRFdmVudCgpIHtcbiAgICAgICAgICAgIGN1cnJlbnRXaWRnZXQuX3VuYmluZEludGVybmFsV2lkZ2V0LmNhbGwoY3VycmVudFdpZGdldCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZG9jdW1lbnRXaW5kb3cuZGNwICYmXG4gICAgICAgICAgICBkb2N1bWVudFdpbmRvdy5kY3AudHJpZ2dlclJlbG9hZCAmJlxuICAgICAgICAgICAgZG9jdW1lbnRXaW5kb3cuZGNwLmRvY3VtZW50UmVhZHkgPT09IGZhbHNlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBkb2N1bWVudFdpbmRvdy5kY3AudHJpZ2dlclJlbG9hZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9yZXNpemUoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3VwcHJlc3MgaW50ZXJuYWwgd2lkZ2V0IHJlZmVyZW5jZVxuICAgICAqL1xuICAgIF91bmJpbmRJbnRlcm5hbFdpZGdldDogZnVuY3Rpb24gZGNwRG9jdW1lbnRfdW5iaW5kSW50ZXJuYWxXaWRnZXQoKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuZGF0YShcImludGVybmFsV2lkZ2V0SW5pdGlhbGlzZWRcIiwgZmFsc2UpO1xuICAgICAgdGhpcy5lbGVtZW50LmRhdGEoXCJpbnRlcm5hbFdpZGdldFwiLCBmYWxzZSk7XG4gICAgICB0aGlzLl90cmlnZ2VyKFwiaW50ZXJuYWxXaWRnZXRVbmxvYWRlZFwiKTtcbiAgICAgIHRoaXMuX3RyaWdnZXIoXCJ1bmxvYWRlZFwiKTtcbiAgICB9LFxuXG4gICAgcmViaW5kRXZlbnRzOiBmdW5jdGlvbiBkY3BEb2N1bWVudF9yZWJpbmRFdmVudHMoKSB7XG4gICAgICB2YXIgaW50ZXJuYWxDb250cm9sbGVyID0gdGhpcy5lbGVtZW50LmRhdGEoXCJpbnRlcm5hbFdpZGdldFwiKTtcbiAgICAgIGlmIChpbnRlcm5hbENvbnRyb2xsZXIpIHtcbiAgICAgICAgLy9SZWJpbmQgZXZlbnRcbiAgICAgICAgXy5lYWNoKHRoaXMub3B0aW9ucy5ldmVudExpc3RlbmVyLCBmdW5jdGlvbiBkY3BEb2N1bWVudF9iaW5kRXZlbnQoXG4gICAgICAgICAgY3VycmVudEV2ZW50XG4gICAgICAgICkge1xuICAgICAgICAgIGludGVybmFsQ29udHJvbGxlci5hZGRFdmVudExpc3RlbmVyKGN1cnJlbnRFdmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvL1JlYmluZCBjb25zdHJhaW50XG4gICAgICAgIF8uZWFjaCh0aGlzLm9wdGlvbnMuY29uc3RyYWludExpc3QsIGZ1bmN0aW9uIGRjcERvY3VtZW50X2JpbmRFdmVudChcbiAgICAgICAgICBjdXJyZW50Q29uc3RhaW50XG4gICAgICAgICkge1xuICAgICAgICAgIGludGVybmFsQ29udHJvbGxlci5hZGRDb25zdHJhaW50KGN1cnJlbnRDb25zdGFpbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVpbmplY3RDU1NBbmRKUzogZnVuY3Rpb24gZGNwRG9jdW1lbnRfcmVpbmplY3RDU1NBbmRKUygpIHtcbiAgICAgIHZhciBpbnRlcm5hbENvbnRyb2xsZXIgPSB0aGlzLmVsZW1lbnQuZGF0YShcImludGVybmFsV2lkZ2V0XCIpO1xuICAgICAgaWYgKGludGVybmFsQ29udHJvbGxlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGludGVybmFsQ29udHJvbGxlci5pbmplY3RDU1ModGhpcy5vcHRpb25zLmNzc1RvSW5qZWN0KTtcbiAgICAgICAgICBpbnRlcm5hbENvbnRyb2xsZXIuaW5qZWN0SlModGhpcy5vcHRpb25zLmpzVG9JbmplY3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBCaW5kIHRoZSBpbnRlcm5hbCBjb250cm9sbGVyIHRvIHRoZSBjdXJyZW50IHdpZGdldFxuICAgICAqIFJlaW5pdCB0aGUgY29uc3RyYWludCBhbmQgdGhlIGV2ZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW50ZXJuYWxDb250cm9sbGVyXG4gICAgICogQHBhcmFtIHZvaWRMb2FkZWRcbiAgICAgKi9cbiAgICBfYmluZEludGVybmFsV2lkZ2V0OiBmdW5jdGlvbiBkY3BEb2N1bWVudF9iaW5kSW50ZXJuYWxXaWRnZXQoXG4gICAgICBpbnRlcm5hbENvbnRyb2xsZXIsXG4gICAgICB2b2lkTG9hZGVkXG4gICAgKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuZGF0YShcImludGVybmFsV2lkZ2V0XCIsIGludGVybmFsQ29udHJvbGxlcik7XG4gICAgICBpZiAoIXZvaWRMb2FkZWQpIHtcbiAgICAgICAgdGhpcy5yZWJpbmRFdmVudHMoKTtcbiAgICAgICAgdGhpcy5yZWluamVjdENTU0FuZEpTKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmVsZW1lbnQuZGF0YShcImludGVybmFsV2lkZ2V0SW5pdGlhbGlzZWRcIiwgdHJ1ZSk7XG4gICAgICBpZiAodm9pZExvYWRlZCkge1xuICAgICAgICB0aGlzLl90cmlnZ2VyKFwibG9hZGVkXCIsIHt9LCB7IGlzRW1wdHk6IHRydWUgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgdGhpcy5fdHJpZ2dlcihcImxvYWRlZFwiKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBZGQgcmVzaXplIGV2ZW50XG4gICAgICovXG4gICAgX2JpbmRFdmVudHM6IGZ1bmN0aW9uIGRjcERvY3VtZW50X2JpbmRFdmVudHMoKSB7XG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy53aXRob3V0UmVzaXplKSB7XG4gICAgICAgICQod2luZG93KS5vbihcbiAgICAgICAgICBcInJlc2l6ZVwiICsgdGhpcy5ldmVudE5hbWVzcGFjZSxcbiAgICAgICAgICBfLmRlYm91bmNlKFxuICAgICAgICAgICAgXy5iaW5kKHRoaXMuX3Jlc2l6ZSwgdGhpcyksXG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLm9wdGlvbnMucmVzaXplRGVib3VuY2VUaW1lLCAxMClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX3Jlc2l6ZSgpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIHRoZSBzaXplIG9mIHRoZSB3aWRnZXRcbiAgICAgKi9cbiAgICBfcmVzaXplOiBmdW5jdGlvbiBkY3BEb2N1bWVudF9yZXNpemUoKSB7XG4gICAgICB2YXIgZXZlbnQgPSB0aGlzLl90cmlnZ2VyKFwiYXV0b3Jlc2l6ZVwiKSxcbiAgICAgICAgJGRvY3VtZW50V3JhcHBlciA9IHRoaXMuZWxlbWVudC5maW5kKFwiLmRjcERvY3VtZW50V3JhcHBlclwiKSxcbiAgICAgICAgY3VycmVudFdpZGdldCA9IHRoaXMsXG4gICAgICAgIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAvL3RoZSBjb21wdXRhdGlvbiBjYW4gYmUgZG9uZSBieSBhbiBleHRlcm5hbCBmdW5jdGlvbiBhbmQgZGVmYXVsdCBwcmV2ZW50ZWRcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLndpdGhvdXRSZXNpemUgJiYgZXZlbnQpIHtcbiAgICAgICAgLy9jb21wdXRlIHR3byB0aW1lcyBoZWlnaHQgKG9uZSBmb3IgZGlzYXBlYXIgaG9yaXpvbnRhbCBzY3JvbGxiYXIsIHR3byB0byBnZXQgdGhlIGFjdHVhbCBzaXplKVxuICAgICAgICAvL25vaW5zcGVjdGlvbiBKU1ZhbGlkYXRlVHlwZXNcbiAgICAgICAgJGRvY3VtZW50V3JhcHBlci5oZWlnaHQoXG4gICAgICAgICAgZWxlbWVudC5pbm5lckhlaWdodCgpIC1cbiAgICAgICAgICAgIHBhcnNlSW50KGN1cnJlbnRXaWRnZXQub3B0aW9ucy5yZXNpemVNYXJnaW5IZWlnaHQsIDEwKVxuICAgICAgICApO1xuICAgICAgICAvL25vaW5zcGVjdGlvbiBKU1ZhbGlkYXRlVHlwZXNcbiAgICAgICAgJGRvY3VtZW50V3JhcHBlci53aWR0aChcbiAgICAgICAgICBlbGVtZW50LmlubmVyV2lkdGgoKSAtXG4gICAgICAgICAgICBwYXJzZUludChjdXJyZW50V2lkZ2V0Lm9wdGlvbnMucmVzaXplTWFyZ2luV2lkdGgsIDEwKVxuICAgICAgICApO1xuICAgICAgICAvL2RlZmVyIGhlaWdodCBjb21wdXRhdGlvbiB0byBsZXQgdGhlIHRpbWUgdG8gc2Nyb2xsYmFyIGRpc2FwZWFyXG4gICAgICAgIF8uZGVmZXIoZnVuY3Rpb24gZGNwRG9jdW1lbnRfY29tcHV0ZUhlaWdodCgpIHtcbiAgICAgICAgICAvL25vaW5zcGVjdGlvbiBKU1ZhbGlkYXRlVHlwZXNcbiAgICAgICAgICAkZG9jdW1lbnRXcmFwcGVyLmhlaWdodChcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIZWlnaHQoKSAtXG4gICAgICAgICAgICAgIHBhcnNlSW50KGN1cnJlbnRXaWRnZXQub3B0aW9ucy5yZXNpemVNYXJnaW5IZWlnaHQsIDEwKVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB0cnlUb0Rlc3Ryb3k6IGZ1bmN0aW9uIGRjcERvY3VtZW50X3RyeVRvRGVzdHJveSgpIHtcbiAgICAgIHZhciBjdXJyZW50V2lkZ2V0ID0gdGhpcztcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBkY3BEb2N1bWVudF90cnlUb0Rlc3Ryb3lfcHJvbWlzZShcbiAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0XG4gICAgICApIHtcbiAgICAgICAgdmFyIGludGVybmFsV2lkZ2V0O1xuICAgICAgICBpZiAoY3VycmVudFdpZGdldC5pc0xvYWRlZCgpKSB7XG4gICAgICAgICAgaW50ZXJuYWxXaWRnZXQgPSBjdXJyZW50V2lkZ2V0LmVsZW1lbnQuZGF0YShcImludGVybmFsV2lkZ2V0XCIpO1xuICAgICAgICAgIGludGVybmFsV2lkZ2V0XG4gICAgICAgICAgICAudHJ5VG9EZXN0cm95KClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIGRjcERvY3VtZW50X2Rlc3Ryb3lfdGhlbigpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICBjdXJyZW50V2lkZ2V0Ll9kZXN0cm95KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIGRjcERvY3VtZW50X2Rlc3Ryb3lfY2F0Y2goZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgIHJlamVjdChlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgY3VycmVudFdpZGdldC5fZGVzdHJveSgpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgdGhlIHdpZGdldFxuICAgICAqL1xuICAgIF9kZXN0cm95OiBmdW5jdGlvbiBkY3BEb2N1bWVudF9kZXN0cm95KCkge1xuICAgICAgJCh3aW5kb3cpLm9mZih0aGlzLmV2ZW50TmFtZXNwYWNlKTtcbiAgICAgIHRoaXMuZWxlbWVudC5lbXB0eSgpO1xuICAgICAgdGhpcy5fdW5iaW5kSW50ZXJuYWxXaWRnZXQoKTtcbiAgICAgIHRoaXMuX3RyaWdnZXIoXCJkZXN0cm95XCIpO1xuICAgICAgdGhpcy5fc3VwZXIoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgZXZlbnQgbmFtZSBpcyB2YWxpZFxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50TmFtZSBzdHJpbmdcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jaGVja0V2ZW50TmFtZTogZnVuY3Rpb24gZG9jdW1lbnRDb250cm9sbGVyX2NoZWNrRXZlbnROYW1lKGV2ZW50TmFtZSkge1xuICAgICAgaWYgKFxuICAgICAgICBfLmlzU3RyaW5nKGV2ZW50TmFtZSkgJiZcbiAgICAgICAgKGV2ZW50TmFtZS5pbmRleE9mKFwiY3VzdG9tOlwiKSA9PT0gMCB8fFxuICAgICAgICAgIF8uZmluZChldmVudExpc3QsIGZ1bmN0aW9uIGRvY3VtZW50Q29udHJvbGxlcl9DaGVja0V2ZW50VHlwZShcbiAgICAgICAgICAgIGN1cnJlbnRFdmVudFR5cGVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RXZlbnRUeXBlID09PSBldmVudE5hbWU7XG4gICAgICAgICAgfSkpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiVGhlIGV2ZW50IHR5cGUgXCIgK1xuICAgICAgICAgIGV2ZW50TmFtZSArXG4gICAgICAgICAgXCIgaXMgbm90IGtub3duLiBJdCBtdXN0IGJlIG9uZSBvZiBcIiArXG4gICAgICAgICAgZXZlbnRMaXN0LmpvaW4oXCIgLFwiKVxuICAgICAgKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIG9wdGlvbnNcbiAgICAgKi9cbiAgICBvcHRpb25zOiBmdW5jdGlvbiBkY3BEb2N1bWVudF9vcHRpb25zKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIllvdSBjYW5ub3QgbW9kaWZ5IHRoZSBvcHRpb25zLCB5b3UgbmVlZCB0byBzdXBwcmVzcyB0aGUgd2lkZ2V0XCJcbiAgICAgICk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEZldGNoIGEgbmV3IGRvY3VtZW50XG4gICAgICpcbiAgICAgKiBVc2UgaW50ZXJuYWwgY29udHJvbGxlciBpZiByZWFkeVxuICAgICAqIFJlLXJlbmRlciB0aGUgd2lkZ2V0IGlmIGludGVybmFsIGlzIG5vdCByZWFkeVxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlc1xuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICovXG4gICAgZmV0Y2hEb2N1bWVudDogZnVuY3Rpb24gZGNwRG9jdW1lbnRfZmV0Y2hEb2N1bWVudCh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBpbnRlcm5hbFdpZGdldCxcbiAgICAgICAgY3VycmVudFdpZGdldCA9IHRoaXMsXG4gICAgICAgIGZldGNoUHJvbWlzZSA9IG51bGwsXG4gICAgICAgIGluaXRXaWRnZXQgPSBmdW5jdGlvbiBkcGNEb2N1bWVudF9zdWNjZXNzV2lkZ2V0KCkge1xuICAgICAgICAgIGN1cnJlbnRXaWRnZXQucmViaW5kRXZlbnRzLmNhbGwoY3VycmVudFdpZGdldCk7XG4gICAgICAgICAgY3VycmVudFdpZGdldC5lbGVtZW50LmRhdGEoXCJ2b2lkTG9hZGVkXCIsIGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICBpZiAoIXZhbHVlcy5pbml0aWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG5lZWQgdG8gc2V0IHRoZSBpbml0aWQgdG8gZmV0Y2ggdGhlIGRvY3VtZW50XCIpO1xuICAgICAgfVxuICAgICAgXy5lYWNoKFxuICAgICAgICBfLnBpY2sodmFsdWVzLCBcImluaXRpZFwiLCBcInJldmlzaW9uXCIsIFwidmlld0lkXCIsIFwiY3VzdG9tQ2xpZW50RGF0YVwiKSxcbiAgICAgICAgZnVuY3Rpb24gZGNwRG9jdW1lbnRfc2V0TmV3T3B0aW9ucyh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgY3VycmVudFdpZGdldC5vcHRpb25zW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgaWYgKHRoaXMuZWxlbWVudC5kYXRhKFwiaW50ZXJuYWxXaWRnZXRJbml0aWFsaXNlZFwiKSkge1xuICAgICAgICBpbnRlcm5hbFdpZGdldCA9IHRoaXMuZWxlbWVudC5kYXRhKFwiaW50ZXJuYWxXaWRnZXRcIik7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuc3VjY2Vzcykge1xuICAgICAgICAgIC8vIEBkZXByZWNhdGVkIDogdXNlIHByb21pc2UgaW5zdGVhZFxuICAgICAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IF8ud3JhcChcbiAgICAgICAgICAgIG9wdGlvbnMuc3VjY2VzcyxcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRjcERvY3VtZW50X3N1Y2Nlc3Moc3VjY2Vzcykge1xuICAgICAgICAgICAgICBpbml0V2lkZ2V0LmFwcGx5KHRoaXMsIF8ucmVzdChhcmd1bWVudHMpKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MuYXBwbHkodGhpcywgXy5yZXN0KGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuZXJyb3IpIHtcbiAgICAgICAgICAvLyBAZGVwcmVjYXRlZCA6IHVzZSBwcm9taXNlIGluc3RlYWRcbiAgICAgICAgICBvcHRpb25zLmVycm9yID0gXy53cmFwKG9wdGlvbnMuZXJyb3IsIGZ1bmN0aW9uIGRjcERvY3VtZW50X2Vycm9yKFxuICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGluaXRXaWRnZXQuYXBwbHkodGhpcywgXy5yZXN0KGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yLmFwcGx5KHRoaXMsIF8ucmVzdChhcmd1bWVudHMpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmZXRjaFByb21pc2UgPSBpbnRlcm5hbFdpZGdldC5mZXRjaERvY3VtZW50LmNhbGwoXG4gICAgICAgICAgaW50ZXJuYWxXaWRnZXQsXG4gICAgICAgICAgdmFsdWVzLFxuICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIW9wdGlvbnMuc3VjY2Vzcykge1xuICAgICAgICAgIGZldGNoUHJvbWlzZS50aGVuKGluaXRXaWRnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3B0aW9ucy5lcnJvcikge1xuICAgICAgICAgIGZldGNoUHJvbWlzZS5jYXRjaChpbml0V2lkZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmV0Y2hQcm9taXNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFkZCBhIG5ldyBleHRlcm5hbCBldmVudFxuICAgICAqIFRoZSBldmVudCBpcyBhZGRlZCBpbiB0aGUgd2lkZ2V0IGFuZCBpcyBhdXRvLXJlYmluZGVkIHdoZW4gdGhlIGludGVybmFsIHdpZGdldCBpcyByZWxvYWRlZFxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZSBzdHJpbmd8b2JqZWN0IHR5cGUgb2YgdGhlIHdpZGdldCBvciBhbiBvYmplY3QgZXZlbnRcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBvYmplY3R8ZnVuY3Rpb24gY29uZiBvZiB0aGUgZXZlbnQgb3IgY2FsbGJhY2tcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgZnVuY3Rpb24gY2FsbGJhY2tcbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cbiAgICBhZGRFdmVudExpc3RlbmVyOiBmdW5jdGlvbiBkY3BEb2N1bWVudF9hZGRFdmVudExpc3RlbmVyKFxuICAgICAgZXZlbnRUeXBlLFxuICAgICAgb3B0aW9ucyxcbiAgICAgIGNhbGxiYWNrXG4gICAgKSB7XG4gICAgICB2YXIgY3VycmVudEV2ZW50LFxuICAgICAgICBjdXJyZW50V2lkZ2V0ID0gdGhpcztcbiAgICAgIGlmIChfLmlzVW5kZWZpbmVkKGNhbGxiYWNrKSAmJiBfLmlzRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICAvLyB0aGUgZmlyc3QgcGFyYW1ldGVycyBjYW4gYmUgdGhlIGZpbmFsIG9iamVjdCAoY2hhaW4gcmVtb3ZlRXZlbnQgYW5kIGFkZEV2ZW50KVxuICAgICAgaWYgKFxuICAgICAgICBfLmlzT2JqZWN0KGV2ZW50VHlwZSkgJiZcbiAgICAgICAgXy5pc1VuZGVmaW5lZChvcHRpb25zKSAmJlxuICAgICAgICBfLmlzVW5kZWZpbmVkKGNhbGxiYWNrKVxuICAgICAgKSB7XG4gICAgICAgIGN1cnJlbnRFdmVudCA9IGV2ZW50VHlwZTtcbiAgICAgICAgaWYgKCFjdXJyZW50RXZlbnQubmFtZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIFwiV2hlbiBhbiBldmVudCBpcyBpbml0aWF0ZWQgd2l0aCBhIHNpbmdsZSBvYmplY3QsIHRoaXMgb2JqZWN0IG5lZWRzIHRvIGhhdmUgdGhlIG5hbWUgcHJvcGVydHkgXCIuSlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICAgIGN1cnJlbnRFdmVudFxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRFdmVudCA9IF8uZGVmYXVsdHMob3B0aW9ucywge1xuICAgICAgICAgIG5hbWU6IF8udW5pcXVlSWQoXCJldmVudF9cIiArIGV2ZW50VHlwZSksXG4gICAgICAgICAgZXZlbnRUeXBlOiBldmVudFR5cGUsXG4gICAgICAgICAgZXZlbnRDYWxsYmFjazogY2FsbGJhY2ssXG4gICAgICAgICAgZXh0ZXJuYWxFdmVudDogdHJ1ZSxcbiAgICAgICAgICBvbmNlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIHRoZSBldmVudFR5cGUgbXVzdCBiZSBvbmUgdGhlIGxpc3RcbiAgICAgIHRoaXMuX2NoZWNrRXZlbnROYW1lKGN1cnJlbnRFdmVudC5ldmVudFR5cGUpO1xuICAgICAgaWYgKGN1cnJlbnRFdmVudC5vbmNlID09PSB0cnVlKSB7XG4gICAgICAgIGN1cnJlbnRFdmVudC5ldmVudENhbGxiYWNrID0gXy53cmFwKFxuICAgICAgICAgIGN1cnJlbnRFdmVudC5ldmVudENhbGxiYWNrLFxuICAgICAgICAgIGZ1bmN0aW9uIGRjcERvY3VtZW50X29uY2VXcmFwcGVyKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBfLnJlc3QoYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50V2lkZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoY3VycmVudEV2ZW50Lm5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vUmVtb3ZlIG9uY2UgcHJvcGVydHkgYmVjYXVzZSBhbHJlYWR5IHdyYXBwZWRcbiAgICAgIGN1cnJlbnRFdmVudC5vbmNlID0gZmFsc2U7XG4gICAgICB0aGlzLm9wdGlvbnMuZXZlbnRMaXN0ZW5lcltjdXJyZW50RXZlbnQubmFtZV0gPSBjdXJyZW50RXZlbnQ7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZWxlbWVudC5kYXRhKFwiaW50ZXJuYWxXaWRnZXRJbml0aWFsaXNlZFwiKSAmJlxuICAgICAgICAhdGhpcy5lbGVtZW50LmRhdGEoXCJ2b2lkTG9hZGVkXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmRhdGEoXCJpbnRlcm5hbFdpZGdldFwiKS5hZGRFdmVudExpc3RlbmVyKGN1cnJlbnRFdmVudCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VycmVudEV2ZW50Lm5hbWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgdGhlIGV2ZW50cyBvZiB0aGUgY3VycmVudCB3aWRnZXRcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqL1xuICAgIGxpc3RFdmVudExpc3RlbmVyczogZnVuY3Rpb24gZG9jdW1lbnRDb250cm9sbGVyTGlzdEV2ZW50cygpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5lbGVtZW50LmRhdGEoXCJpbnRlcm5hbFdpZGdldEluaXRpYWxpc2VkXCIpICYmXG4gICAgICAgICF0aGlzLmVsZW1lbnQuZGF0YShcInZvaWRMb2FkZWRcIilcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmRhdGEoXCJpbnRlcm5hbFdpZGdldFwiKS5saXN0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZXZlbnRMaXN0ZW5lcjtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBldmVudCBvZiB0aGUgd2lkZ2V0IGxpc3QgYW5kIHRoZSBpbnRlcm5hbCBsaXN0IChpZiBpbnRlcm5hbCBpcyByZWFkeSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudE5hbWVcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAgICovXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gZGNwRG9jdW1lbnRfcmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUpIHtcbiAgICAgIHZhciByZW1vdmVkID0gW10sXG4gICAgICAgIHRlc3RSZWdFeHAgPSBuZXcgUmVnRXhwKFwiXFxcXFwiICsgZXZlbnROYW1lICsgXCIkXCIpLFxuICAgICAgICBuZXdMaXN0LFxuICAgICAgICBldmVudExpc3Q7XG4gICAgICBuZXdMaXN0ID0gXy5maWx0ZXIoXG4gICAgICAgIHRoaXMub3B0aW9ucy5ldmVudExpc3RlbmVyLFxuICAgICAgICBmdW5jdGlvbiBkY3BEb2N1bWVudF9yZW1vdmVDdXJyZW50RXZlbnQoY3VycmVudEV2ZW50KSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VycmVudEV2ZW50Lm5hbWUgPT09IGV2ZW50TmFtZSB8fFxuICAgICAgICAgICAgdGVzdFJlZ0V4cC50ZXN0KGN1cnJlbnRFdmVudC5uYW1lKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKGN1cnJlbnRFdmVudCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgZXZlbnRMaXN0ID0ge307XG4gICAgICBfLmVhY2gobmV3TGlzdCwgZnVuY3Rpb24gZGNwX2RvY3VtZW50SXRlcmF0ZUVhY2goY3VycmVudEV2ZW50KSB7XG4gICAgICAgIGV2ZW50TGlzdFtjdXJyZW50RXZlbnQubmFtZV0gPSBjdXJyZW50RXZlbnQ7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub3B0aW9ucy5ldmVudExpc3RlbmVyID0gZXZlbnRMaXN0O1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmVsZW1lbnQuZGF0YShcImludGVybmFsV2lkZ2V0SW5pdGlhbGlzZWRcIikgJiZcbiAgICAgICAgIXRoaXMuZWxlbWVudC5kYXRhKFwidm9pZExvYWRlZFwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudFxuICAgICAgICAgIC5kYXRhKFwiaW50ZXJuYWxXaWRnZXRcIilcbiAgICAgICAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlbW92ZWQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFkZCBhIGNvbnN0cmFpbnRcbiAgICAgKiBUaGUgY29uc3RyYWludCBpcyBhZGRlZCBpbiB0aGUgd2lkZ2V0IGFuZCBpcyBhdXRvLXJlYmluZGVkIHdoZW4gdGhlIGludGVybmFsIHdpZGdldCBpcyByZWxvYWRlZFxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cbiAgICBhZGRDb25zdHJhaW50OiBmdW5jdGlvbiBkY3BEb2N1bWVudF9hZGRDb25zdHJhaW50KG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgcGFyYW1ldGVycyxcbiAgICAgICAgY3VycmVudFdpZGdldCA9IHRoaXM7XG4gICAgICBpZiAoXy5pc1VuZGVmaW5lZChjYWxsYmFjaykgJiYgXy5pc0Z1bmN0aW9uKG9wdGlvbnMpKSB7XG4gICAgICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKF8uaXNPYmplY3Qob3B0aW9ucykgJiYgXy5pc1VuZGVmaW5lZChjYWxsYmFjaykpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zLm5hbWUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBcIldoZW4gYSBjb25zdHJhaW50IGlzIGluaXRpYXRlZCB3aXRoIGEgc2luZ2xlIG9iamVjdCwgdGhpcyBvYmplY3QgbmVlZHMgdG8gaGF2ZSB0aGUgbmFtZSBwcm9wZXJ0eSBcIi5KU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtZXRlcnMgPSBfLmRlZmF1bHRzKG9wdGlvbnMsIHtcbiAgICAgICAgICBkb2N1bWVudENoZWNrOiBmdW5jdGlvbiBkY3BEb2N1bWVudF9kZWZhdWx0RG9jdW1lbnRDaGVjaygpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYXR0cmlidXRlQ2hlY2s6IGZ1bmN0aW9uIGRjcERvY3VtZW50X2RlZmF1bHRBdHRyaWJ1dGVDaGVjaygpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY29uc3RyYWludENoZWNrOiBjYWxsYmFjayxcbiAgICAgICAgICBuYW1lOiBfLnVuaXF1ZUlkKFwiY29uc3RyYWludFwiKSxcbiAgICAgICAgICBleHRlcm5hbENvbnN0cmFpbnQ6IGZhbHNlLFxuICAgICAgICAgIG9uY2U6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCFfLmlzRnVuY3Rpb24ocGFyYW1ldGVycy5jb25zdHJhaW50Q2hlY2spKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFuIGV2ZW50IG5lZWQgYSBjYWxsYmFja1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbWV0ZXJzLm9uY2UgPT09IHRydWUpIHtcbiAgICAgICAgcGFyYW1ldGVycy5ldmVudENhbGxiYWNrID0gXy53cmFwKFxuICAgICAgICAgIHBhcmFtZXRlcnMuY29uc3RyYWludENoZWNrLFxuICAgICAgICAgIGZ1bmN0aW9uIGRjcERvY3VtZW50X29uY2VXcmFwcGVyKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBfLnJlc3QoYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50V2lkZ2V0LnJlbW92ZUNvbnN0cmFpbnQoXG4gICAgICAgICAgICAgIHBhcmFtZXRlcnMubmFtZSxcbiAgICAgICAgICAgICAgcGFyYW1ldGVycy5leHRlcm5hbENvbnN0cmFpbnRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRpb25zLmNvbnN0cmFpbnRMaXN0W3BhcmFtZXRlcnMubmFtZV0gPSBwYXJhbWV0ZXJzO1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmVsZW1lbnQuZGF0YShcImludGVybmFsV2lkZ2V0SW5pdGlhbGlzZWRcIikgJiZcbiAgICAgICAgIXRoaXMuZWxlbWVudC5kYXRhKFwidm9pZExvYWRlZFwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5kYXRhKFwiaW50ZXJuYWxXaWRnZXRcIikuYWRkQ29uc3RyYWludChwYXJhbWV0ZXJzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJhbWV0ZXJzLm5hbWU7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBMaXN0IHRoZSBjb25zdHJhaW50IG9mIHRoZSB3aWRnZXRcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqL1xuICAgIGxpc3RDb25zdHJhaW50czogZnVuY3Rpb24gZG9jdW1lbnRDb250cm9sbGVyTGlzdENvbnN0cmFpbnQoKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZWxlbWVudC5kYXRhKFwiaW50ZXJuYWxXaWRnZXRJbml0aWFsaXNlZFwiKSAmJlxuICAgICAgICAhdGhpcy5lbGVtZW50LmRhdGEoXCJ2b2lkTG9hZGVkXCIpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5kYXRhKFwiaW50ZXJuYWxXaWRnZXRcIikubGlzdENvbnN0cmFpbnRzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNvbnN0cmFpbnRMaXN0O1xuICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBjb25zdHJhaW50IG9mIHRoZSB3aWRnZXRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25zdHJhaW50TmFtZVxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICAgKi9cbiAgICByZW1vdmVDb25zdHJhaW50OiBmdW5jdGlvbiBkY3BEb2N1bWVudF9yZW1vdmVDb25zdHJhaW50KGNvbnN0cmFpbnROYW1lKSB7XG4gICAgICB2YXIgcmVtb3ZlZCA9IFtdLFxuICAgICAgICBuZXdDb25zdHJhaW50TGlzdCxcbiAgICAgICAgY29uc3RyYWludExpc3QsXG4gICAgICAgIHRlc3RSZWdFeHAgPSBuZXcgUmVnRXhwKFwiXFxcXFwiICsgY29uc3RyYWludE5hbWUgKyBcIiRcIik7XG4gICAgICBuZXdDb25zdHJhaW50TGlzdCA9IF8uZmlsdGVyKFxuICAgICAgICB0aGlzLm9wdGlvbnMuY29uc3RyYWludExpc3QsXG4gICAgICAgIGZ1bmN0aW9uIGRjcERvY3VtZW50X3JlbW92ZUNvbnN0cmFpbnQoY3VycmVudENvbnN0cmFpbnQpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJyZW50Q29uc3RyYWludC5uYW1lID09PSBjb25zdHJhaW50TmFtZSB8fFxuICAgICAgICAgICAgdGVzdFJlZ0V4cC50ZXN0KGN1cnJlbnRDb25zdHJhaW50Lm5hbWUpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZW1vdmVkLnB1c2goY3VycmVudENvbnN0cmFpbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0cmFpbnRMaXN0ID0ge307XG4gICAgICBfLmVhY2gobmV3Q29uc3RyYWludExpc3QsIGZ1bmN0aW9uIGRjcERvY3VtZW50X3JlaW5pdENvbnN0cmFpbnQoXG4gICAgICAgIGN1cnJlbnRDb25zdHJhaW50XG4gICAgICApIHtcbiAgICAgICAgY29uc3RyYWludExpc3RbY3VycmVudENvbnN0cmFpbnQubmFtZV0gPSBjdXJyZW50Q29uc3RyYWludDtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnN0cmFpbnRMaXN0ID0gY29uc3RyYWludExpc3Q7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZWxlbWVudC5kYXRhKFwiaW50ZXJuYWxXaWRnZXRJbml0aWFsaXNlZFwiKSAmJlxuICAgICAgICAhdGhpcy5lbGVtZW50LmRhdGEoXCJ2b2lkTG9hZGVkXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5lbGVtZW50XG4gICAgICAgICAgLmRhdGEoXCJpbnRlcm5hbFdpZGdldFwiKVxuICAgICAgICAgIC5yZW1vdmVDb25zdHJhaW50KGNvbnN0cmFpbnROYW1lLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZW1vdmVkO1xuICAgIH0sXG5cbiAgICBpc0xvYWRlZDogZnVuY3Rpb24gZGNwRG9jdW1lbnRfaXNMb2FkZWQoKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLmVsZW1lbnQuZGF0YShcImludGVybmFsV2lkZ2V0SW5pdGlhbGlzZWRcIikgJiZcbiAgICAgICAgIXRoaXMuZWxlbWVudC5kYXRhKFwidm9pZExvYWRlZFwiKVxuICAgICAgKTtcbiAgICB9LFxuXG4gICAgaW5qZWN0Q1NTOiBmdW5jdGlvbiBkb2N1bWVudENvbnRyb2xsZXJfaW5qZWN0Q1NTKGNzc1RvSW5qZWN0KSB7XG4gICAgICBpZiAoIV8uaXNBcnJheShjc3NUb0luamVjdCkgJiYgIV8uaXNTdHJpbmcoY3NzVG9JbmplY3QpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIlRoZSBjc3MgdG8gaW5qZWN0IG11c3QgYmUgYW4gYXJyYXkgc3RyaW5nIG9yIGEgc3RyaW5nXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChfLmlzU3RyaW5nKGNzc1RvSW5qZWN0KSkge1xuICAgICAgICBjc3NUb0luamVjdCA9IFtjc3NUb0luamVjdF07XG4gICAgICB9XG5cbiAgICAgIHRoaXMub3B0aW9ucy5jc3NUb0luamVjdCA9IF8udW5pb24odGhpcy5vcHRpb25zLmNzc1RvSW5qZWN0LCBjc3NUb0luamVjdCk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5lbGVtZW50LmRhdGEoXCJpbnRlcm5hbFdpZGdldEluaXRpYWxpc2VkXCIpICYmXG4gICAgICAgICF0aGlzLmVsZW1lbnQuZGF0YShcInZvaWRMb2FkZWRcIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuZGF0YShcImludGVybmFsV2lkZ2V0XCIpLmluamVjdENTUyhjc3NUb0luamVjdCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGluamVjdEpTOiBmdW5jdGlvbiBkb2N1bWVudENvbnRyb2xsZXJfaW5qZWN0Q1NTKGpzVG9JbmplY3QpIHtcbiAgICAgIGlmICghXy5pc0FycmF5KGpzVG9JbmplY3QpICYmICFfLmlzU3RyaW5nKGpzVG9JbmplY3QpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBqcyB0byBpbmplY3QgbXVzdCBiZSBhbiBhcnJheSBzdHJpbmcgb3IgYSBzdHJpbmdcIik7XG4gICAgICB9XG4gICAgICBpZiAoXy5pc1N0cmluZyhqc1RvSW5qZWN0KSkge1xuICAgICAgICBqc1RvSW5qZWN0ID0gW2pzVG9JbmplY3RdO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9wdGlvbnMuanNUb0luamVjdCA9IF8udW5pb24odGhpcy5vcHRpb25zLmpzVG9JbmplY3QsIGpzVG9JbmplY3QpO1xuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZWxlbWVudC5kYXRhKFwiaW50ZXJuYWxXaWRnZXRJbml0aWFsaXNlZFwiKSAmJlxuICAgICAgICAhdGhpcy5lbGVtZW50LmRhdGEoXCJ2b2lkTG9hZGVkXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmRhdGEoXCJpbnRlcm5hbFdpZGdldFwiKS5pbmplY3RKUyhqc1RvSW5qZWN0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8vbm9pbnNwZWN0aW9uIEpTVmFsaWRhdGVKU0RvY1xuICAvKipcbiAgICogV3JhcCB0aGUgYnJpZGdlIHRoYXQgZmluZCB0aGUgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWRcbiAgICogU2VhcmNoIGluIHRoZSBjdXJyZW50IHdpZGdldCBpZiB0aGUgZnVuY3Rpb24gaXMgaGVyZVxuICAgKiBTZWFyY2ggaW4gdGhlIGludGVybmFsIHdpZGdldCAoaWYgcmVhZHkgdG8gZmluZCB0aGUgd2lkZ2V0KVxuICAgKlxuICAgKiBAdHlwZSB7RnVuY3Rpb258ZnVuY3Rpb24oKTogRnVuY3Rpb258ZnVuY3Rpb24oKTogX0NoYWluPFQ+fCp9XG4gICAqL1xuICAvL25vaW5zcGVjdGlvbiBKU1VucmVzb2x2ZWRWYXJpYWJsZVxuICAkLmZuLmRvY3VtZW50ID0gXy53cmFwKCQuZm4uZG9jdW1lbnQsIGZ1bmN0aW9uIGRjcERvY3VtZW50X3dyYXAoXG4gICAgaW5pdGlhbERvY3VtZW50QnJpZGdlLFxuICAgIG1ldGhvZE5hbWVcbiAgKSB7XG4gICAgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgdmFyIGlzTWV0aG9kQ2FsbCwgaW50ZXJuYWxXaWRnZXQ7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBpbml0aWFsRG9jdW1lbnRCcmlkZ2UuYXBwbHkodGhpcywgXy5yZXN0KGFyZ3VtZW50cykpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IubmFtZSA9PT0gXCJub1N1Y2hNZXRob2RFcnJvclwiKSB7XG4gICAgICAgIGlzTWV0aG9kQ2FsbCA9IHR5cGVvZiBtZXRob2ROYW1lID09PSBcInN0cmluZ1wiO1xuICAgICAgICBpZiAoaXNNZXRob2RDYWxsICYmICF0aGlzLmRhdGEoXCJpbnRlcm5hbFdpZGdldEluaXRpYWxpc2VkXCIpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yTm90TG9hZGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgaW50ZXJuYWxXaWRnZXQgPSB0aGlzLmRhdGEoXCJpbnRlcm5hbFdpZGdldFwiKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIF8uaXNGdW5jdGlvbihpbnRlcm5hbFdpZGdldFttZXRob2ROYW1lXSkgJiZcbiAgICAgICAgICBtZXRob2ROYW1lLmNoYXJBdCgwKSAhPT0gXCJfXCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIGludGVybmFsV2lkZ2V0W21ldGhvZE5hbWVdLmFwcGx5KFxuICAgICAgICAgICAgaW50ZXJuYWxXaWRnZXQsXG4gICAgICAgICAgICBfLnJlc3QoYXJndW1lbnRzLCAyKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0EsV0FFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///a2b1083ba5d095ec0632\n");

/***/ })

}]);