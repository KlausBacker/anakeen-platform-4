<?xml version="1.0"?>
<module  name="@moduleName@" release="@release@" version="@version@"  vendor="Anakeen"
         license="http://www.gnu.org/licenses/lgpl-3.0.txt GNU Lesser General Public License v3.0">

    <description>A4 : Document interfaces</description>
    <requires>
        <module name="smart-data-engine"/>
    </requires>
    <replaces>
        <module name="dynacase-document-uis-light"/>
        <module name="dynacase-document-uis"/>
        <module name="dynacase-less-installer"/>
        <module name="dynacase-search-ui-html5"/>
        <module name="anakeen-document-uis"/>
        <module name="anakeen-ui"/>
    </replaces>
    <post-install>
        <process command="programs/record_application DOCUMENT"/>


        <process command="./ank.php --system --resetRouteConfig"/>
        <process command="./ank.php --route=Ui:Admin:LoadParameters"/>


        <process command="programs/record_application SEARCH_UI_HTML5"/>
        <process command="programs/record_application DOCUMENT_GRID_HTML5"/>
        <process command="programs/ui_setHtmlAuthentMode"/>
        <process command="./ank.php --script=importDocuments --file=./vendor/Anakeen/Components/Authent/AuthentMail.csv"/>


        <process command="programs/update_catalog"/>
    </post-install>

    <post-upgrade>
        <process command="programs/ui_setHtmlAuthentMode"/>
        <process command="programs/record_application DOCUMENT"/>

        <process command="./ank.php --route=Ui:Admin:LoadParameters"/>
        <process command="programs/post_migration DOCUMENT">
            <label>Migration</label>
        </process>

        <process command="programs/pre_migration SEARCH_UI_HTML5"/>
        <process command="programs/record_application SEARCH_UI_HTML5"/>
        <process command="programs/post_migration SEARCH_UI_HTML5"/>

        <process command="programs/pre_migration DOCUMENT_GRID_HTML5"/>
        <process command="programs/record_application DOCUMENT_GRID_HTML5"/>
        <process command="programs/post_migration DOCUMENT_GRID_HTML5"/>

        <process command="programs/update_catalog"/>
    </post-upgrade>

</module>
