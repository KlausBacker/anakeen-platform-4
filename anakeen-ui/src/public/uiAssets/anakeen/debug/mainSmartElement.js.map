{"version":3,"sources":["webpack:///webpack/bootstrap adea519f95c5cc01c448","webpack:///./~/backbone/backbone.js","webpack:///./~/bootstrap/js/src/tooltip.js","webpack:///./~/bootstrap/js/src/util.js","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/kendo-ui-core/js/cultures/kendo.culture.fr-FR.js","webpack:///./~/little-loader/lib/little-loader.js","webpack:///./~/mustache/mustache.js","webpack:///./~/popper.js/dist/esm/popper.js","webpack:///./~/underscore/underscore.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/Apps/DOCUMENT/IHM/collections/attributes.js","webpack:///./src/Apps/DOCUMENT/IHM/collections/contentAttributes.js","webpack:///./src/Apps/DOCUMENT/IHM/collections/menus.js","webpack:///./src/Apps/DOCUMENT/IHM/controllerObjects/attributeInterface.js","webpack:///./src/Apps/DOCUMENT/IHM/controllerObjects/constraintHandler.js","webpack:///./src/Apps/DOCUMENT/IHM/controllerObjects/menuInterface.js","webpack:///./src/Apps/DOCUMENT/IHM/controllerObjects/transitionInterface.js","webpack:///./src/Apps/DOCUMENT/IHM/i18n/documentCatalog.js","webpack:///./src/Apps/DOCUMENT/IHM/i18n/translatorFactory.js","webpack:///./src/Apps/DOCUMENT/IHM/loading/loading.css","webpack:///./src/Apps/DOCUMENT/IHM/mainDocument.js","webpack:///./src/Apps/DOCUMENT/IHM/models/mAttribute.js","webpack:///./src/Apps/DOCUMENT/IHM/models/mAttributeArray.js","webpack:///./src/Apps/DOCUMENT/IHM/models/mAttributeData.js","webpack:///./src/Apps/DOCUMENT/IHM/models/mAttributeStructural.js","webpack:///./src/Apps/DOCUMENT/IHM/models/mDocument.js","webpack:///./src/Apps/DOCUMENT/IHM/models/mDocumentLock.js","webpack:///./src/Apps/DOCUMENT/IHM/models/mDocumentProperties.js","webpack:///./src/Apps/DOCUMENT/IHM/models/mDocumentTab.js","webpack:///./src/Apps/DOCUMENT/IHM/models/mFamilyStructure.js","webpack:///./src/Apps/DOCUMENT/IHM/models/mMenu.js","webpack:///./src/Apps/DOCUMENT/IHM/models/mTransition.js","webpack:///./src/Apps/DOCUMENT/IHM/models/mTransitionGraph.js","webpack:///./src/Apps/DOCUMENT/IHM/routers/router.js","webpack:///./src/Apps/DOCUMENT/IHM/views/attributes/array/vArray.js","webpack:///./src/Apps/DOCUMENT/IHM/views/attributes/array/vColumn.js","webpack:///./src/Apps/DOCUMENT/IHM/views/attributes/frame/vFrame.js","webpack:///./src/Apps/DOCUMENT/IHM/views/attributes/tab/vTabContent.js","webpack:///./src/Apps/DOCUMENT/IHM/views/attributes/tab/vTabLabel.js","webpack:///./src/Apps/DOCUMENT/IHM/views/attributes/vAttribute.js","webpack:///./src/Apps/DOCUMENT/IHM/views/document/attributeTemplate.js","webpack:///./src/Apps/DOCUMENT/IHM/views/document/header/vHeader.js","webpack:///./src/Apps/DOCUMENT/IHM/views/document/menu/vMenu.js","webpack:///./src/Apps/DOCUMENT/IHM/views/document/vDocument.js","webpack:///./src/Apps/DOCUMENT/IHM/views/workflow/vTransition.js","webpack:///./src/Apps/DOCUMENT/IHM/views/workflow/vTransitionGraph.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/array/wArray.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/color/wColor.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/date/wDate.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/docid/wDocid.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/double/wDouble.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/enum/wEnum.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/file/wFile.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/htmltext/wHtmltext.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/image/wImage.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/int/wInt.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/label/wLabel.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/longtext/wLongtext.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/money/wMoney.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/password/wPassword.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/text/wText.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/time/wTime.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/timestamp/wTimestamp.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/attributes/wAttribute.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/documentController/documentController.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/history/wHistory.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/history/wRevisionDiff.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/menu/wMenu.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/properties/wProperties.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/widget.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/window/wConfirm.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/window/wDialog.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/window/wLoading.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/window/wNotification.js","webpack:///./src/Apps/DOCUMENT/IHM/widgets/window/wWindow.js","webpack:///external \"jQuery\"","webpack:///external \"kendo\""],"names":["factory","root","self","global","define","_","$","exports","Backbone","require","e","jQuery","Zepto","ender","previousBackbone","slice","Array","prototype","VERSION","noConflict","emulateHTTP","emulateJSON","addMethod","length","method","attribute","value","iteratee","context","cb","defaultVal","args","call","arguments","unshift","apply","addUnderscoreMethods","Class","methods","each","instance","isFunction","isObject","_isModel","modelMatcher","isString","model","get","attrs","matcher","matches","attributes","Events","eventSplitter","eventsApi","events","name","callback","opts","i","names","keys","test","split","on","internalOn","obj","listening","_events","onApi","ctx","listeners","_listeners","id","listenTo","_listenId","uniqueId","listeningTo","_listeningTo","thisId","objId","count","options","handlers","push","off","offApi","stopListening","ids","remaining","j","handler","_callback","once","onceMap","bind","listenToOnce","map","offer","trigger","Math","max","triggerApi","objEvents","allEvents","all","triggerEvents","concat","ev","l","a1","a2","a3","unbind","extend","Model","cid","cidPrefix","collection","parse","defaults","result","set","changed","initialize","validationError","idAttribute","toJSON","clone","sync","attr","escape","has","key","val","_validate","unset","silent","changes","changing","_changing","_previousAttributes","current","prev","isEqual","_pending","clear","hasChanged","isEmpty","changedAttributes","diff","old","size","previous","previousAttributes","fetch","success","resp","serverAttrs","wrapError","save","validate","wait","isNew","patch","xhr","destroy","defer","url","base","urlError","replace","encodeURIComponent","constructor","isValid","error","modelMethods","values","pairs","invert","pick","omit","chain","Collection","models","comparator","_reset","reset","setOptions","add","remove","merge","addOptions","splice","array","insert","at","min","tail","singular","isArray","removed","_removeModels","added","merged","toAdd","toMerge","toRemove","modelMap","sort","sortable","sortAttr","existing","_prepareModel","_addReference","orderChanged","some","m","index","_removeReference","previousModels","pop","shift","_byId","modelId","where","first","findWhere","Error","sortBy","pluck","create","callbackOpts","indexOf","_onModelEvent","event","prevId","collectionMethods","forEach","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","any","include","includes","contains","invoke","toArray","head","take","initial","rest","drop","last","without","difference","shuffle","lastIndexOf","sample","partition","groupBy","countBy","indexBy","findIndex","findLastIndex","View","viewOptions","_ensureElement","delegateEventSplitter","tagName","selector","$el","render","_removeElement","setElement","element","undelegateEvents","_setElement","delegateEvents","el","match","delegate","eventName","listener","undelegate","_createElement","document","createElement","className","_setAttributes","type","methodMap","params","dataType","data","contentType","JSON","stringify","_method","beforeSend","setRequestHeader","processData","textStatus","errorThrown","ajax","Router","routes","_bindRoutes","optionalParam","namedParam","splatParam","escapeRegExp","route","isRegExp","_routeToRegExp","router","history","fragment","_extractParameters","execute","navigate","optional","RegExp","exec","param","decodeURIComponent","History","checkUrl","window","location","routeStripper","rootStripper","pathStripper","started","interval","atRoot","path","pathname","getSearch","matchRoot","decodeFragment","rootPath","decodeURI","href","getHash","getPath","charAt","getFragment","_usePushState","_wantsHashChange","start","hashChange","_hasHashChange","documentMode","_useHashChange","_wantsPushState","pushState","_hasPushState","iframe","src","style","display","tabIndex","body","iWindow","insertBefore","firstChild","contentWindow","open","close","hash","addEventListener","attachEvent","_checkUrlInterval","setInterval","loadUrl","stop","removeEventListener","detachEvent","removeChild","clearInterval","title","_updateHash","assign","protoProps","staticProps","parent","child","__super__","Tooltip","Popper","NAME","DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","fn","TRANSITION_DURATION","CLASS_PREFIX","BSCLS_PREFIX_REGEX","DefaultType","animation","template","delay","html","placement","offset","container","fallbackPlacement","AttachmentMap","AUTO","TOP","RIGHT","BOTTOM","LEFT","Default","HoverState","SHOW","OUT","Event","HIDE","HIDDEN","SHOWN","INSERTED","CLICK","FOCUSIN","FOCUSOUT","MOUSEENTER","MOUSELEAVE","ClassName","FADE","Selector","TOOLTIP","TOOLTIP_INNER","ARROW","Trigger","HOVER","FOCUS","MANUAL","config","_isEnabled","_timeout","_hoverState","_activeTrigger","_popper","_getConfig","tip","_setListeners","dataKey","currentTarget","_getDelegateConfig","click","_isWithActiveTrigger","_enter","_leave","getTipElement","hasClass","clearTimeout","removeData","closest","css","showEvent","isWithContent","isInTheDom","ownerDocument","documentElement","isDefaultPrevented","tipId","getUID","setAttribute","setContent","addClass","attachment","_getAttachment","addAttachmentClass","appendTo","modifiers","flip","behavior","arrow","onCreate","originalPlacement","_handlePopperPlacementChange","onUpdate","children","noop","complete","_fixTransition","prevHoverState","supportsTransitionEnd","one","TRANSITION_END","emulateTransitionEnd","_TRANSITION_DURATION","hideEvent","parentNode","_cleanTipClass","removeAttribute","removeClass","scheduleUpdate","Boolean","getTitle","$tip","setElementContent","$element","content","nodeType","jquery","is","empty","append","text","getAttribute","toUpperCase","triggers","toggle","eventIn","eventOut","hide","_fixTitle","titleType","show","setTimeout","toString","typeCheckConfig","tabClass","join","initConfigAnimation","_config","undefined","_jQueryInterface","Constructor","Util","transition","MAX_UID","TransitionEndEvent","WebkitTransition","MozTransition","OTransition","toType","toLowerCase","isElement","getSpecialTransitionEndEvent","bindType","end","delegateType","handle","target","handleObj","transitionEndTest","QUnit","transitionEndEmulator","duration","called","triggerTransitionEnd","setTransitionEndSupport","special","prefix","random","getElementById","getSelectorFromElement","$selector","reflow","offsetHeight","componentName","configTypes","property","hasOwnProperty","expectedTypes","valueType","module","useSourceMap","list","item","cssWithMappingToString","modules","mediaQuery","alreadyImportedModules","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","sourceMap","base64","unescape","installedModules","__webpack_require__","moduleId","loaded","c","p","kendo","cultures","numberFormat","pattern","decimals","groupSize","percent","symbol","currency","abbr","calendars","standard","days","namesAbbr","namesShort","months","AM","PM","patterns","d","D","F","g","G","M","s","t","T","u","y","Y","firstDay","pendingScripts","scriptCounter","_addScript","script","firstScript","getElementsByTagName","_lload","setup","done","err","_cleanup","_finish","_error","readyState","isReady","inserted","onreadystatechange","onerror","firstState","onload","async","charset","defineMustache","nodeName","Mustache","mustacheFactory","mustache","objectToString","Object","isArrayPolyfill","object","typeStr","string","hasProperty","propName","regExpTest","testRegExp","re","nonSpaceRe","isWhitespace","entityMap","escapeHtml","String","fromEntityMap","whiteRe","spaceRe","equalsRe","curlyRe","tagRe","parseTemplate","tags","sections","tokens","spaces","hasTag","nonSpace","stripSpace","openingTagRe","closingTagRe","closingCurlyRe","compileTags","tagsToCompile","scanner","Scanner","chr","token","openSection","eos","pos","scanUntil","valueLength","scan","nestTokens","squashTokens","squashedTokens","lastToken","numTokens","nestedTokens","collector","section","substring","search","Context","view","parentContext","cache","lookup","lookupHit","Writer","clearCache","partials","renderTokens","originalTemplate","buffer","renderSection","renderInverted","renderPartial","unescapedValue","escapedValue","rawValue","subRender","version","defaultWriter","TypeError","to_html","send","nativeHints","isNative","hint","isBrowser","longerTimeoutBrowsers","timeoutDuration","navigator","userAgent","microtaskDebounce","scheduled","elem","observer","MutationObserver","observe","taskDebounce","supportsNativeMutationObserver","debounce","functionToCheck","getType","getStyleComputedProperty","getComputedStyle","getParentNode","host","getScrollParent","_getStyleComputedProp","overflow","overflowX","overflowY","getOffsetParent","offsetParent","isOffsetContainer","firstElementChild","getRoot","node","findCommonOffsetParent","element1","element2","order","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","range","createRange","setStart","setEnd","commonAncestorContainer","element1root","getScroll","side","upperSide","scrollingElement","includeScroll","rect","subtract","scrollTop","scrollLeft","modifier","top","bottom","left","right","getBordersSize","styles","axis","sideA","sideB","isIE10","isIE10$1","appVersion","getSize","computedStyle","getWindowSizes","height","width","classCallCheck","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_extends","getClientRect","offsets","getBoundingClientRect","sizes","clientWidth","clientHeight","horizScrollbar","offsetWidth","vertScrollbar","getOffsetRectRelativeToArbitraryNode","isHTML","childrenRect","parentRect","scrollParent","borderTopWidth","borderLeftWidth","marginTop","marginLeft","getViewportOffsetRectRelativeToArtbitraryNode","relativeOffset","innerWidth","innerHeight","isFixed","getBoundaries","popper","reference","padding","boundariesElement","boundaries","boundariesNode","_getWindowSizes","getArea","_ref","computeAutoPlacement","refRect","rects","sortedAreas","area","a","b","filteredAreas","_ref2","computedPlacement","variation","getReferenceOffsets","state","commonOffsetParent","getOuterSizes","x","parseFloat","marginBottom","marginRight","getOppositePlacement","matched","getPopperOffsets","referenceOffsets","popperRect","popperOffsets","isHoriz","mainSide","secondarySide","measurement","secondaryMeasurement","arr","check","prop","cur","runModifiers","ends","modifiersToRun","function","console","warn","enabled","update","isDestroyed","arrowStyles","flipped","position","isCreated","isModifierEnabled","modifierName","getSupportedPropertyName","prefixes","upperProp","toCheck","disableEventListeners","removeOnDestroy","attachToScrollParents","scrollParents","isBody","passive","setupEventListeners","updateBound","scrollElement","eventsEnabled","enableEventListeners","removeEventListeners","cancelAnimationFrame","isNumeric","n","isNaN","isFinite","setStyles","unit","setAttributes","applyStyle","arrowElement","applyStyleOnLoad","modifierOptions","computeStyle","legacyGpuAccelerationOption","gpuAcceleration","offsetParentRect","floor","prefixedProperty","willChange","invertTop","invertLeft","isModifierRequired","requestingName","requestedName","requesting","isRequired","_requesting","requested","querySelector","_data$offsets","isVertical","len","sideCapitalized","altSide","opSide","arrowElementSize","center","popperMarginSide","sideValue","round","getOppositeVariation","placements","validPlacements","clockwise","counter","reverse","BEHAVIORS","FLIP","CLOCKWISE","COUNTERCLOCKWISE","placementOpposite","flipOrder","step","refOffsets","overlapsRef","overflowsLeft","overflowsRight","overflowsTop","overflowsBottom","overflowsBoundaries","flippedVariation","flipVariations","keepTogether","toValue","str","parseOffset","basePlacement","useHeight","fragments","frag","trim","divider","splitRegex","ops","op","mergeWithPrevious","index2","preventOverflow","priority","primary","escapeWithReference","secondary","shiftvariation","shiftOffsets","bound","inner","subtractLength","onLoad","Defaults","_this","requestAnimationFrame","update$$1","destroy$$1","enableEventListeners$$1","disableEventListeners$$1","Utils","PopperUtils","Function","eval","webpackPolyfill","deprecate","paths","ModelAttributeData","ModelAttributeStructural","ModelAttributeArray","CollectionAttributesSelectModel","CollectionAttributes_initialize","documentModel","renderOptions","renderMode","CollectionAttributes_destroy","toData","extended","elements","currentAttribute","propageEvent","currentModel","ModelMenu","CollectionMenu_destroy","_deepSearchMenu","CollectionMenu__deepSearchMenu","contents","scope","subMenu","subSubMenu","getMenu","CollectionMenu_getMenu","menuInfo","menuInfoItem","oneMenu","setMenu","CollectionMenu_setMenu","menuModel","newContent","attributeInterface","AttributPrototype","AttributePrototype","_attributeModel","getProperties","AttributeInterfaceGetProperties","properties","attributeInterface_convertChild","AttributeInterface","setLabel","AttributeInterfaceSetLabel","label","getWidgetData","AttributeInterfaceGetWidgetData","getOptions","AttributeInterfaceGetOptions","getOption","AttributeInterfaceGetOption","setOption","AttributeInterfaceSetOption","getValue","AttributeInterfaceGetValue","isUndefined","_initialAttributeValue","setValue","AttributeInterfaceSetValue","dryRun","currentValue","AttributeInterfaceSetValueVerify","singleValue","parseInt","isDoubleMultiple","displayValue","AttributeInterfacetoJSON","attributeModel","require_constraintHandler","ConstraintHandler","_messages","addConstraintMessage","message","isNumber","getConstraintMessages","hasConstraintMessages","deleteConstaintMessages","menuInterface","MenuError","stack","MenuPrototope","_menuModel","_set","MenuPrototope_set","strict","menuInterfaceGetProperties","disable","menuInterfaceDisable","enable","menuInterfaceEnable","menuInterfaceHide","menuInterfaceSetLabel","setHtmlLabel","menuInterfaceSetHtmlLabel","setIconUrl","menuInterfaceSetIconUrl","setCssClass","menuInterfaceSetCssClass","cssClass","setUrl","menuInterfaceSetUrl","redraw","menuInterfaceRedraw","MenuInterface","require_transitionInterface","TransitionInterfacePrototype","getValues","TransitionInterfacePrototype_getValues","_TransitionModel","TransitionInterfacePrototype_hide","TransitionInterfacePrototype_show","TransitionInterfacePrototype_close","TransitionInterface","transitionModel","nextState","dcp","umdRequire","translationLoaded","catalog","i18n","translatorFactory","documentCatalog","requireFunction","require_translatorFactory","translation","_catalog","_locale","locale","i18n_gettext","___","i18n_pgettext","ctxt","_msgctxt_","getLocale","i18n_getLocale","timeEnd","$document","currentValues","varWidgetValue","documentReady","viewData","ex1","ex2","documentController","triggerReload","documentLoaded","initid","launchReady","messages","msg","contentText","require_mAttribute","typeModel","isValueAttribute","mode","errorMessage","mAttributeinitialize","_computeMode","_computeValueMode","mAttributetoData","attributeValue","isDisplayable","labels","getDocumentModel","templates","getTemplates","deleteButton","sourceValues","sourceUri","mAttributeisDisplayable","canBeDisplayable","mAttribute_checkDisplayable","hasMultipleOption","mAttributehasMultipleOption","multiple","getParent","mAttributegetParent","hasValueChanged","mAttributehasReallyChanged","flatten","mAttribute_computeMode","visibility","mAttribute_computeValueMode","mAttributegetOptions","optionsCommon","optionsValue","optionsAttribute","_options","common","translatedLabels","types","mAttributegetOption","mAttributesetOption","mAttributegetDocumentModelgetDocumentModel","mAttributegetTemplatesgetTemplates","setErrorMessage","mAttributesetErrorMessage","parentId","mAttribute_reindex","indexMessage","parentModel","checkConstraint","mAttributecheckConstraint","haveView","mAttributeHaveView","mAttribute_isNew","AttributeStructuralModel","removeIndexedLine","mAttributeArrayRemoveIndexLine","addIndexedLine","mAttributeArrayaddIndexedLine","require_mAttributeData","AttributeModel","mAttributegetValue","mAttributesetValue","idx","addValue","mAttributeaddValue","removeIndexValue","mAttributeremoveIndexValue","oldValue","mAttributeRemoveIndex","currentIndex","removeUndefined","notUpdateArray","createIndexedValue","mAttributeCreateIndexedValue","copy","updateArray","defaultValue","newValue","addIndexedValue","mAttributeAddIndexedValue","moveIndexValue","mAttributemoveIndexValue","fromIndex","toIndex","fromValue","from","to","getNbLines","mAttributegetNbLines","nbLines","mAttributeGetMaxLine","isInArray","mAttributeisInArray","aparent","response","responseText","clearError","hasInternalError","displayError","mAttributeData_checkConstraintElement","currentResponse","mAttributeData_checkErrorMessage","CollectionContentAttributes","setContentCollection","mAttributesetContentCollection","currentChild","mDocument","load","DocumentProperties","DocumentLock","FamilyStructure","CollectionAttributes","CollectionMenus","flattenAttributes","mDocumentflattenAttributes","currentAttributes","mDocumentEachflattenParentAttributes","union","mDocumentEachflattenAttributes","currentAttr","revision","viewId","menus","_customClientData","_uploadingFile","mDocumenturl","urlData","customClientData","currentMethod","mDocumentSync","mDocumentinitialize","theModel","propagateSynchroError","destroySubcollection","unbindLoadEvent","mDocumentBeforeUnload","security","prevent","hasAttributesChanged","getServerProperties","lock","temporary","mDocumentPageHide","unlocking","mDocumenttoData","returnObject","mDocumentdocumentGetValues","mDocumentGetValue","arrayValues","setValues","mDocumentdocumentSetValues","mDocumentSetValue","setProperties","mDocumentdocumentSetProperties","mDocumentSetProperties","lockDocument","mDocumentLockDocument","docModel","lockModel","mDocumentLockDocumentSuccess","menu","mDocumentLockDocumentError","HttpResponse","exceptionMessage","unlockDocument","mDocumentUnLockDocument","mDocumentUnLockDocumentSuccess","lockedBy","mDocumentUnLockDocumentError","getModelProperties","mDocumentdocumentGetProperties","mDocument_getCurrentProperties","initialProperties","hasUploadingFiles","hasUploadingFile","isModified","mDocument_isModified","getDocumentData","mDocumentGetDocumentData","documentData","attributeValues","attributeLabels","createAttributeView","mDocumentGetDocumentDataCreate","mDocumentGetDocumentDataEach","mDocumenthasAttributesChanged","mDocumenthasAttributesChangedSome","mdocumenthasUploadingFile","mDocumentpropagateSynchroError","attrModel","parsedReturn","errorCode","status","statusText","cleanErrorMessages","logger","mDocumentpropagateSynchroErrorMessages","code","htmlMessage","contentHtml","constraint","mDocumentpropagateSynchroError0212","preStore","mDocumentvalidate","documentElements","currentDocument","templateMessage","mDocumentvalidateEach","parentAttribute","oneSuccess","mDocumentvalidateArray","parentLabel","rowText","redrawErrorMessages","mDocumentredrawErrorMessages","attrModels","mDocumentredrawErrorMessagesEach","mDocumentCleanErrorMessages","mDocumentCleanErrorMessagesEach","mDocumentParse","requestIdentifier","creationView","culture","customCSS","customJS","js","customServerData","originalValues","creationFamid","family","mDocumentsetValues","keyOrValues","mDocumentsetValuesEachAttributes","currentAttributeModel","childAttributes","mDocumentsetValuesEachAttributesFilter","candidateChildModel","mDocumentsetValuesListenChange","mDocumentAttributeChangerTrigger","attributeId","mDocumentsetValuesListenConstraint","mDocumentsetValuesListenRenderDone","mDocumentsetValuesListenBeforeRender","mDocumentsetValuesListenArray","mDocumentsetValuesListenLinkSelected","mDocumentsetValuesListenDownloadfile","attrid","mDocumentListenUploadfileStart","attrValue","mDocumentListenuploadFileDone","mDocumentsetValuesListenHelperSearch","mDocumentsetValuesListenHelperResponse","mDocumentsetValuesListenHelperSelect","mDocumentsetValuesListenAnchorClicked","mDocumentUnbindLoadEvent","mDocumentdestroySubcollection","injectCurrentDocJS","mDocumentInjectCurrentDocJS","allInjectPromises","injectElement","currentPath","Promise","addJs","resolve","addJsDone","injectJS","mDocumentInjectJs","jsToInject","injectCSS","mDocumentInjectCSS","customCss","$head","cssLinkTemplate","vDocumentInjectNewCSS","cssItem","createStyleSheet","mDocumenttoJSON","mDocumentGetOption","optId","_promiseCallback","mDocument_promiseCallback","promise","mDocument_promiseInternObject","onSuccess","successArguments","documentProperties","onError","errorArguments","_loadDocument","mDocumentLoadDocument","mDocument_promiseLoadDocument","_completeStructure","then","onGetStructureDone","mDocument_injectJSDone","mDocument_injectJSFail","mDocument_onGetStructureFail","fetchDocument","mDocumentFetchDocument","globalCallback","documentCallback","serverProperties","needToUnlock","beforeCloseReturn","nextView","previousMode","lockCallback","onFetchDocumentDone","currentModelProperties","mDocument_loadDocumentDone","mDocument_loadDocumentFail","mDocument_onFetchDocumentFail","onPrepareDocumentDone","onPrepareDocumentFail","eventPrevented","mdocument_lockSucess","mDocument_SetNewOptions","mDocument_lockFail","saveDocument","mDocumentSaveDocument","saveCallback","beforeSaveEvent","mDocument_saveDone","mDocument_saveFail","isSaving","mDocumentsetValuesListenUploadUntilTheEnd","onSaveSuccess","onSaveFail","deleteDocument","mDocumentDelete","deleteCallback","beforeDeleteEvent","mDocument_deleteDone","mDocument_afterDeleteLoadDone","mDocument_afterDeleteLoadFail","mDocument_deleteFail","onDeleteSuccess","onDeleteFail","restoreDocument","mDocumentRestoreDocument","restoreCallback","beforeRestoreEvent","mDocument_restoreDocument_Success","mDocument_restoreDocument_loadSuccess","mDocument_restoreDocument_loadFail","mDocument_restoreDocument_Fail","systemError","mDocument_restoreDocument_onSuccess","mDocument_restoreDocument_onFail","mDocumentCompleteStructure","mStructure","structurePromise","neededAttributes","needed","visibilityAttributes","visibilities","valueAttributes","familyId","referencedocument","mDocumentCompleteStructureSuccess","structureModel","structure","mDocumentCompleteStructureSuccessEach","currentAttributeStructure","require_lock","urlCore","urlView","mDocumentLock_url","mDocumentTag_url","mDocumentTag_toJSON","require_structure","mFamilyStructure_url","urlStructure","mMenu","mMenu_isNew","requireModelTransition","documentId","mTransition_url","mTransition_Parse","askAttributes","mTransition_parseAsk","ask","mTransition_parseTemplate","templateContent","templateIndex","workflow","mTransition_toJSON","returnValues","parameters","mTransition_analyzeContent","aid","comment","mTransition_getParameter","aValue","workflowStates","states","define_router","router_initialize","currentRouter","useHistory","searchArguments","docProperties","getUrlParameters","app","rewriteAppUrl","rewriteApiUrl","router_rewriteAppUrl","searchPart","urlSecondPart","newUrl","routerGetUrl","getParameter","getKey","compact","router_composeSearchLocation","GETValue","GETKey","router_rewriteApiUrl","parsePath","parseHash","beginPath","locationSearch","locationHash","noRecordHistory","hashData","viewDocument","router_viewDocument","viewRevision","router_viewRevision","viewView","router_viewView","viewRevisionView","router_viewRevisionView","router_fetch","searchObject","newValues","router_getUrlParameters","extract","getParameters","substr","vArray","ViewAttribute","ViewColumn","attributeTemplate","displayLabel","customView","customRowView","columnViews","vArray_initialize","updateLabel","setArrayError","setError","removeWidgetLine","addWidgetLine","_identifyView","vArray_render","currentView","vArray_renderPromise","customRender","promisesColumn","originalView","renderCustomView","vArray_filterCurrentElement","currentContent","padValues","showEmpty","vArray_analyzeContent","vArray_changeLabelCurrentElement","els","vArray_findScope","parentElement","customTemplate","customLineCallback","vArray_callCustomLine","customArrayRowView","onArrayReady","dcpArray","insertDescription","renderDone","vArraygetNbLines","nbLigne","vArray_getCurrentLine","vArrayPadValues","lineNumber","vArray_padCurrentLine","vArrayupdateLabel","updateValue","vArray_UpdateValue","refresh","vArray_Refresh","removeLine","vArray_removeLine","line","vArray_RemoveWidgetLine","vArray_addWidgetLine","addLine","vArray_AddLine","currentArrayView","allPromiseAttributes","vArray_addLineGetContent","currentViewColumn","needAddValue","copyValue","vArray_customViewInit","$this","currentWidgetOption","getData","viewCid","widgetInit","moveValueIndex","addNewWidget","addlinePromiseAllDone","moveLine","vArray_moveLine","vArray_getMoveLineContent","fromLine","toLine","getAttributeModel","vArray_getAttributeModel","vArray_setError","vArray_setArrayError","vArray_hide","vArray_show","vArray_identifyView","externalLinkSelected","vArrayExternalLinkSelected","vColumn","attributeEvents","vColumnEvents","_mergeEvent","changeLabel","vColumn_addEvent","vColumnRender","vColumnHideHead","vColumnDescriptionHead","vColumnChangeLabel","vColumnAddNewWidget","vColumnAddNewWidget_promise","cells","vcolumnRender_widgetready","loadDocument","vColumnLoadDocument","tableLine","valueLine","eventId","row","vColumnHide","getDOMElements","vColumnHideEach","$cell","vColumnShow","vColumnShowEach","require_vFrame","ViewAttributeArray","vFrame_initialize","setResponsiveClasse","vFrame_render","vFrame_renderPromise","$content","labelElement","contentElement","contentData","promiseAttributes","collapsable","collapse","templateLabel","frame","hasOneContent","vFrame_getDisplayable","vFrame_AnalyzeContent","attributeView","allRenderDone","responsiveColumns","catch","vFrame_setResponsiveClasse","fWidth","matchesResponsive","responseColumnsDefs","isTopBottom","isGrow","$vattrs","vFrame_setResponsiveClasses","responseColumnsInfo","minAbsWidth","maxAbsWidth","number","grow","direction","rowNumber","ceil","frameColumnNumber","vFrame_responsiveColumns","$fake","$fakeWidth","vFrame_computeResponsiveWidth","minWidth","maxWidth","Infinity","vFrame_getAttributeModel","vFrame_setError","vFrame_updateLabel","vFrame_toggle","hideNow","$contentElement","toggleClass","slideToggle","vFrame_hide","vFrame_show","vAttributeExternalLinkSelected","$target","action","eventOptions","internalEvent","preventDefault","stopPropagation","vFrame_identifyView","vFrame_Remove","vTabContent","ViewAttributeFrame","vTabContentInitialize","renderContent","initializeContent","initialized","vTabContentRender","vTabContentRender_Promise","vTabContentIsDisplayable","propageShowTab","vTabContentRender_renderContent","vTabContentRenderContent","vTabContentRenderContent_Promise","promisesFrame","tabAllFramesRenderDone","vTab_responsiveColumns","vTab_setResponsiveClasses","frameIsResized","vTab_computeResponsiveWidth","vTabContentPropageShowTab","vTabContentUpdateLabel","vTabContentHide","vTabContentShow","vAttribute_identifyView","vTabLabel","vTabLabel_initialize","vTabLabel_render","tooltipLabel","attrData","helpId","tooltip","vDocumentTooltipTitle","vTabLabel_setError","vTabLabel_updateLabel","vTabLabel_hide","vTabLabel_show","scopeWidget","_getIndex","vAttribute","vAttributeInitialize","refreshLabel","refreshValue","refreshError","afterShow","_closeWidget","templateWrapper","simpleWrapper","vAttributeGetData","deleteAttributeNames","getDeleteLabels","autocompleteRequest","autocompleteRequestRead","vAttributeRender","renderPromise","vAttributeRender_Promise","not","dcpLabel","vattributeRender_widgetready","currentDcpWidget","widgetReady","triggerRenderDone","vAttributeRefreshLabel","labelDom","vAttributeRefreshValue","allWrapper","arrayWrapper","analyzeValues","cssIndex","addBack","vAttributeRefreshOneValue","widgetApply","vAttributeRefreshError","jqueryVersion","andSelf","changeAttributesValue","vAttributeChangeAttributesValue","externalEvent","dataItem","valueIndex","vAttributeChangeAttributeValue","vAttributeNoDouble","itemValue","changeAttributesValueLoadDocument","displayFormDocument","vAttributedisplayFormDocument","buttonConfig","createLabel","vDocumentCreateDocument","$bdw","$dcp","dcpCreateDocument","originDocumentModel","vDocumentCreateListener","triggerId","dialogDocument","downloadFileSelect","vAttributedownloadFileSelect","widgetEvent","uploadFileSelect","vAttributeuploadFileSelect","uploadFileDone","vAttributeuploadFileSEnd","anchorClick","vAttributeAnchorClick","deleteValue","changeAttributesValueDeleteValue","attrToClear","vAttributeCleanAssociatedElement","vAttributeGetAttributeModel","vAttributeGetDeleteLabels","attrLabels","vAttributeGetAssociatedLabel","vAttributeMoveValueIndex","eventData","vAttributeAutocompleteRequestRead","externalOptions","setResult","vAttributeAutoCompleteSet","autocompleteUrl","wrap","vAttributeAutoCompleteSuccess","fromid","pipe","vAttributeAutocompletehandleSuccessRequest","Deferred","vAttributeAutocompletehandleErrorRequest","vAttributeAutocompleteSuccessResult","vAttributeAutocompleteErrorResult","changeMenuVisibility","vAttributeChangeMenuVisibility","vAttributeGetDOMElements","vAttributeAfterShow","vAttributeUpdateValue","vAttributeWidgetInit","getWidgetClass","vAttributeWidgetApply","argument","vAttributeGetWidgetClass","getTypedWidgetClass","vAttributeGetTypedWidgetClass","dcpText","dcpInt","dcpDouble","dcpMoney","dcpLongtext","dcpHtmltext","dcpDate","dcpTimestamp","dcpTime","dcpImage","dcpColor","dcpFile","dcpEnum","dcpPassword","dcpDocid","setWidgetReady","Vattribute_setWidgetReady","vAttribute_triggerRenderDone","noRenderEvent","triggerRender","vAttributeRemove","_findWidgetName","vAttributeHide","vAttributeShow","vAttribute__closeWidget","vAttribute_findWidgetName","vAttribute_findWidgetNameFind","currentKey","customLineTemplate","getTemplateModelInfo","attributeTemplateGetTemplateModelInfo","templateInfo","currentTemplate","isWriteMode","isReadMode","associateValue","attributeTemplategetTemplateModelInfoEach","attributeLabel","_isEmptyAttribute","htmlContent","getCustomTemplate","htmlView","htmlDefaultContent","htmlDefaultView","toolsEnabled","rows","getArrayRowInfo","tableTools","getArrayTools","attributeTemplate_isEmptyAttribute","attributeTemplate_isEmptyAttribute_checkEmpty","getTemplateInfo","attributeTemplateGetTemplateInfo","extraKeys","copyextraKeys","_deepExtend","attributeTemplate_deepExtend","attributeTemplateCustomView","callBackView","$render","completePromise","completeCustomContent","attributeTemplateCompleteCustomContent","renderElementPromises","attributeTemplatecompleteCustomContentEach","attrId","attrContent","BackView","customViewRended","getLineInfo","attributeTemplategetLineInfo","attributeTemplate_eachLabel","rowTools","getRowTool","attributeTemplate_eachContent","attributeTemplategetLineInfoEach","extraValues","extraKey","extractRow","attributeTemplateExtractRow","info","attributeTemplateExtractRowContent","attributeTemplate_getRowContent","attributeTemplateCustomArrayRowView","attributeTemplategetCustomTemplate","attributeTemplateGetArrayTools","tpls","tools","outerHTML","attributeTemplateGetRowTool","tool","lineCid","attributeTemplategetArrayRowInfo","attributeTemplategetArrayRowInfoEach","renderClickDesc","nsOn","vAttributeShowDesc","wDescTooltip","tipElement","prepend","vAttributeCloseDesc","attributeTemplateInsertDescription","$customElement","description","descriptionTemplate","$viewElement","isFrame","isArrayHead","isArrayCell","isAttribute","isTabContent","isTabLabel","$descriptionElement","htmlContentRender","htmlTitleRender","htmlTitle","insertAfter","vAttribute_descToggle","collapsed","require_vheader","headerTemplate","vHeaderInitialize","updateHeader","documentHasChanged","header","vheaderRender","vheaderRenderPromise","isLocked","headerRender","$header","eachChildren","elt","vheaderUpdateHeader","doctitle","vheadergetTemplates","vheaderdocumentHasChanged","wTitle","WidgetMenu","vMenuInitialize","updateWidget","changeVisibility","vMenuRender","vMenuRenderPromise","dcpMenu","vMenuchangeVisibility","menuItem","onlyIfVisible","vMenuUpdateWidget","vMenuRemove","vMenu_findWidgetName","vMenu_refresh","vDocument","ModelDocumentTab","ViewDocumentMenu","ViewDocumentHeader","ViewAttributeTabLabel","ViewAttributeTabContent","ModelTransitionGraph","ViewTransitionGraph","checkTouchEvents","bool","DocumentTouch","vDocumentInitialize","displayLoading","showView","displayNetworkError","doStandardAction","cleanAndRender","vDocumentCleanAndRender","historyWidget","propertiesWidget","helpWidget","transitionGraph","vDocumentRender","time","renderPromises","documentView","htmlBody","$body","tabPlacement","viewMenus","selectedTab","renderCss","publishMessages","updateTitle","updateIcon","resizeForFooter","fixedTab","renderData","vDocumentAddMenu","viewMenu","vDocumentAddHeader","vDocumentRenderAttribute","viewTabLabel","viewTabContent","tabModel","tabContent","kendoTabs","kendoTabStrip","tabPosition","effects","activate","_dcpNotFirstactivate","scrollTobVisibleTab","vDocumentShowTab","tabId","scrollY","recordSelectedTab","selectOneTab","tab","tabItems","responsiveTabMenu","scrollTabList","selectTab","vDocumentPreventDragDrop","vDocumentRedrawErrorMessages","vDocumentResizeDebounce","vDocument_triggerClose","vDocumentRenderDone","vDocumentEndLoading","vDocumentresizeForFooter","$footer","footerHeight","vDocumentscrollTobVisibleTab","_scrollableModeActive","_scrollTabsToItem","vDocumentfixedTab","$tabs","$ul","menuHeight","isAlreadyFixed","$liActive","$navButtons","resizeMode","resize","$navButtonsVisible","ulWidth","outerHeight","activateTab","$tabContent","$tabList","vDocumentScrollTabList","vDocumentTabFixMenu","$tabLabel","documentWidth","currentWidth","hiddens","lastShow","$dropSelect","$dropTopSelect","$kendoTabs","liIndex","$selectedTabId","hiddenSelected","dataSource","iOS","vDocumentHideTabWidth","outerWidth","vDocumentSelectContainer","$container","vDocumentSelectTabClose","vDocumentSomeHiddens","kendoComboBox","dataTextField","dataValueField","dataBound","vDocumentTabSelectDatabound","myTab","liItem","vDocumentTabSelectSelect","blur","vDocumentTabSelectOpen","ul","$li","bodyWidth","vDocumentSelectTabOpen","vDocumentTabSelectTemplate","vDocumentTabSelectTitle","DataSource","setDataSource","vDocumentTabSelectClick","selectedItem","vDocumentTabFocus","vDocumentWorkaroundIosTouch","$tooltip","tooltipObject","inState","focus","hover","vDocumentWorkaroundIosDelay","vDocumentWorkaroundIosSecondDelay","vDocumentRecordSelectedTab","tagTab","vDocumentPublishMessages","vDocumentPublishAMessage","aMessage","vDocumentRenderCss","noRemove","vDocumentRemoveOldCSS","currentLink","findCss","vDocumentFindCss","currentCss","$existsLink","showHelp","vDocumentShowHelp","$dialogDiv","originalEvent","htmlLink","windowWidth","windowHeight","windowTitle","vDocumentHelp","helpX","helpY","bodyH","dialogH","dialogW","kendoWindow","actions","vDocumentSelectHelpClose","vDocumentHelpCreate","withoutResize","vDocumentSelectHelpChapter","vDocumentHelpReady","wrapper","showHistory","vDocumentShowHistory","docid","dcpDocumentHistory","activity","owner","date","level","pastRevision","showDetail","hideDetail","showNotice","noOneNotice","hideNotice","filterMessages","linkRevision","historyTitle","loading","revisionDiffLabels","vDocumentViewRevision","vDocumentLockDocument","vDocumentUnLockDocument","showtransition","vDocumentShowtransition","showTransitionGraph","vDocumentShowtransitionGraph","vDocumentTransitionSuccess","vDocumentTransitionView","showProperties","vDocumentShowProperties","dcpDocumentProperties","identifier","logicalName","createdBy","notLocked","confidential","notConfidential","creationDate","lastModificationDate","lastAccessDate","profil","profilReference","viewController","propertiesTitle","propertyValue","vDocumentViewDocument","vDocumentUpdateTitle","vDocumentUpdateIcon","dvDocumentDocumentDelete","vDocumentDisplayLoading","avance","vDocumentShowView","closeDocument","vDocumentCloseDocument","vDocumentSaveDocument","vDocumentSaveDisplaySuccess","saveAndCloseDocument","vDocumentSaveAndCloseDocument","vDocumentSaveAndCloseSuccess","createDocument","vDocumentCreateDisplaySuccess","createAndCloseDocument","vDocumentCreateAndCloseSuccess","vDocumentLoadDocument","callbacks","confirmWindow","dcpConfirm","okMessage","cancelMessage","textMessage","confirm","wMenuConfirm","cancel","wLoadCancel","templateData","vDocumentRestoreDocument","propagateActionClick","vDocumentPropagateActionClick","handleHashClick","vDocumenthandleHashClick","vDocumentdoStandardAction","eventArgs","vDocument_displayNetworkError","removeAttr","vDocumentGetTemplates","vDocumentRemove","vTransition","ViewDocument","htmlStateContent","htmlStateButtons","htmlLoading","htmlButtons","vTransition_initialize","transitionDisplayLoading","vTransition_hide","vTransition_show","vTransition_close","transitionWindow","vTransition_remove","vTransition_removeLink","cssKey","vTransition_displayError","$okButton","$cancelButton","reactiveWidget","retry","vTransition_cleanAndRender","displayMessages","vTransitionRenderCss","vTransitionupdateTitle","vTransitionupdateIcon","vTransition_clearError","vTransition_reactiveWidget","$loading","vTransition_transitionDisplayLoading","vTransition_displayMessages","$message","vTransition_analyzeCurrentMessage","vTransition_render","hasAttributes","vTransition_saveForMe","saveXhr","vTransition_direct_afterSave","getMessages","fail","vTransition_direct_error","statusTxt","errorTxt","responseJSON","vTransition_clickOnOk_displayError","vTransition_renderWhiteOnWhite","vTransition_renderBorderColor","dcpDialog","registerCloseEvent","clickOnOk","vTransition_clickOnOk","vTransition_clickOnOk_afterSave","vTransition_clickOnOk_error","clickOnCancel","vTransition_clickOnCancel","clickOnClose","vTransition_clickOnClose","vTransition_getMessages","vTransition_getMessagesAMessage","vTransitionGraph","vTransitionGraph_remove","transitionGraphWindow","vTransitionGraph_render","displayCurrentState","vTransitionGraph_renderMouseOver","vTransitionGraph_renderMouseOut","vTransitionGraph_renderClick","vTransitionGraph_windowActivate","displayArrows","previousHeight","vTransitionGraph_windowResize","isMaximized","isMaximizedNow","vTransitionGraphdisplayCurrentState","tpl","currentState","vTransitionGraphdisplayCurrentStateEach","authorized","vTransitionGraph_displayArrows","$from","$to","vTransitionGraph_connectStates","connect","getOffset","vTransitionGraph_getOffset","vTransitionGraph_connect","div1","div2","thickness","off1","off2","origin","x2","y2","x1","y1","sqrt","cx","cy","angle","atan2","PI","htmlLine","require_array","widget","rowCountThreshold","rowAddDisable","rowDelDisable","rowMoveDisable","rowMinLimit","rowMinDefault","rowMaxLimit","arrayBreakPoints","transpositionRule","upRule","closeErrorMessage","limitMaxMessage","limitMinMessage","getSelectedLineElement","dcpArraygetSelectedLineElement","getSelectedLineIndex","dcpArray_getSelectedLineIndex","isNull","_create","dcpArray_create","initializing","_initDom","onDomOK","_trigger","_initActionClickEvent","_bindEvents","toggleCollapse","dcpArray_initDom","dcpArray_initDom_initDom","$table","_getTemplate","labelPosition","displayCount","_indexLine","wArrayCopyRenderContent","anOption","contentRenderOptions","tooltipDom","targetDom","kendoDraggable","dcpArrayhint","dragLine","lineWidth","classTable","_hideTooltips","_disableTooltips","dragstart","dcpArraydragstart","dragend","dcpArraydragend","_enableTooltips","kendoDropTargetArea","dragenter","drap","draggable","dropTarget","drapLine","dropLine","eventNamespace","destroyTable","_initCSSResponsive","addAllLines","wAttributeInitActionClickEvent","wAttributeActionClick","useTransposition","cssString","cssTemplate","headers","addResponsiveKey","currentElement","$currentElement","$label","initCssHeader","currentHeader","wArray__hideTooltips","_hideTooltipsOneAgain","wArray__disableTooltips","wArray__enableTooltips","dcpArray_bindEvents","currentWidget","selectLineEvent","isAlreadyChecked","_unSelectLines","addLineEvent","selectedLine","useSelectedLine","copyLineEvent","copyLine","deleteLineEvent","toogleTable","redrawLabel","wArrayRedrawLabel","setLines","wArraySetLines","wArraySetLines_promise","linesPromise","currentLineNumber","dcpArrayaddAllLines","allPromiseLines","allLineAdded","_getLineContent","dcpArray_getLineContent","dcpArray_addCssClass","currentCell","_addNewLine","dcpArray_addNewLine","_activateRowLimits","wArray_activateRowLimits","dcpArray_initLine","limit","dcpArrayaddLine","dcpArrayaddLine_promise","dcpArraycopyLine","dcpArrayremoveLine","_destroy","dcpArray_destroy","tbody","_super","dcpArray_indexLine","numeroteLine","dcpArray_unSelectLines","dcpArray_SetError","dcpArray_computeTitleError","rawMessage","wErrorTooltip","dcpArray_getTemplate","dcpArray_getType","require_wColor","kendoColorConfiguration","buttons","kendoWidget","wColorInitDom","formatNumber","dcpAttribute","hasAutocomplete","activateAutocomplete","_activateColor","colorTag","_initChangeEvent","wcolInitChangeEvent","wcolSetValue","getMode","originalValue","flashElement","getContentElements","wcolActivateNumber","inputValue","kendoColorPicker","getKendoColorOptions","wcolFormatNumber","format","wColorgetKendoColorOptions","kendoOptions","defaultOptions","change","wColor_onchange","wcolGetType","testValue","wcolTestValue","wColor_close","wDate","minDate","Date","kendoDateConfiguration","parseFormats","invalidDate","kendoWidgetClass","wDateInitDom","formatDate","parseDate","formatValue","_activateDate","wDate_initChangeEvent","wDateSetValue","originalDate","convertDateToPseudoIsoString","getTime","wDateSetValueActivateDate","kOptions","getKendoOptions","wDateChange","isoDate","kendoDatePicker","wDatePaste","$input","wDatePasteAfter","_controlDate","wDateControlDate","validateDate","dateValue","_setVisibilitySavingMenu","wDateFocus","_getFocusInput","wDateFormatDate","wDateParseDate","parseFormat","goodDate","wDateconvertDateToPseudoIsoString","dateObject","isDate","getFullYear","padNumber","getMonth","getDate","wDatePadNumber","wDategetKendoOptions","wDate_close","wDateDestroy","require_wDocid","kendoMultiSelectConfiguration","minLength","itemTemplate","kendoComboBoxConfiguration","editDisplay","allSelectedDocument","wDocidInitDom","_isMultiple","isMultiple","wDocidinitDomFormat","documentIconSize","reSize","noIcon","wDocidResizeIcons","icon","placeHolder","placeholder","_decorateMultipleValue","_decorateSingleValue","singleCombobox","singleDropdown","_updateCreateButton","wDocid_updateCreateButton","buttonsConfig","wDocid_updateCreateButtonEach","$button","buttonIndex","renderHtmlContent","htmlEditContent","htmlCreateContent","_initLinkEvent","wDocidInitLinkEvent","getLink","wDocidInitLinkOnClick","_initButtonsEvent","wAttributeButtonClick","wAttributeGetButtonTitle","wDocidFocusInput","wDocidGetKendoOptions","extraOptions","autoBind","clearButton","highlightFirst","serverFiltering","transport","read","wDocidSelectRead","_hasBeenRequested","schema","wDocidSelectSchema","items","wDocidDataCompose","currentItem","docId","docTitle","uniq","wDocidDataUniq","kendoDocidSelect","wDocidChangeOnSelect","kendoChangeSelect","oldValues","kMultiSelect","widgetValue","wDocidSelectChange","wDocidSelectOpen","kendoWidgetObject","wDocidSelectClose","filtering","_isFiltering","wDocidFilteringNoOne","$noOne","wDocidDecorateSingleValue","maxSelectedItems","wDocidDecorateMultipleValue","wDocidSelectMap","kendoMultiSelect","wDocidInitValue","wDocidFilterEmpty","wDocidSelectClick","wDocidSingleDropdown","kendoDropDownList","wDocidSingleCombobox","kendoSelect","wDocidHasMultipleOption","wDocidSetValue","wDocidMapValue","dataOri","wDocIdFilter","wDocidEachData","wDocidEachUniq","_isEqual","values1","values2","convertToString","wDocid_close","wDocid_getType","wDocid__destroy","wDocid_destroyWindow","kWindow","require_double","decimalPrecision","wDoubleInitDom","getKendoNumericOptions","wDoubleGetKendoNumericOptions","wDoubleGetType","require_wenum","localeCompareSupportsLocales","testLocaleCompareSupportsLocales","localeCompare","invalidEntry","invertSelection","selectMessage","unselectMessage","chooseAnotherChoice","selectAnotherChoice","displayOtherChoice","kendoDropDownConfiguration","useFirstChoice","useSourceUri","useOtherChoice","orderBy","wEnumInitDom","wEnum_initDomSortKey","wEnum_initDomSortLabel","numeric","caseFirst","wEnumDisplayOthers","exists","eformat","otherUuid","enumIndex","inArray","_initMainElementClass","multipleSelect","checkboxButtons","wEnumSelectClick","boolButtons","radioButtons","noButtonDisplay","getSingleEnumData","wEnumGetSingleEnumData","selectedIndex","wEnum_prepareValue","enumItem","enumUuid","selected","getMultipleEnumData","wEnumGetMultipleEnumData","selectedValues","isIn","wEnum_prepareMultipleValue","wEnum_findSelected","wEnum_addOtherValues","retrieveItems","wEnumretrieveItemse","requestData","wEnum_retrieveDone","enumItems","wEnum_retrieveFail","wEnumNoDisplayButton","wEnumBoolButtons","enumData","tplOption","wEnum_onRetrieveDone","theWidget","enumValues","wEnum_insertTooltip","kItem","wEnum_booleanClick","wEnum_comboSetValue","wEnum_addKButton","firstItem","wEnum_getContentElements","wEnumRadioButtons","hasNotExists","wEnum_findNotExistItem","wEnum_onchange","wEnum_titleTooltip","_checkRadioOther","wEnum_onDone","wEnum_onChange","wEnum_findChecked","wEnum_Cb_titleTooltip","_checkBoxOther","wEnum__checkRadioOther","wEnumRadioOtherInputClick","wEnumRadioOtherInputChange","wEnumRadioOtherInputKeyReturn","keyCode","which","wEnum__checkBoxOther","wEnumCheckOtherInputClick","wEnumCheckOtherInputChange","$hasEmpty","$checkbox","wEnum_findEmptyOther","$newOne","uuid","wEnumCheckOtherInputKeyReturn","wEnumSingleDropdown","kddl","wEnumMultipleSelect","wEnumSingleCombobox","wEnumDeleteFilter","wEnumSetValue","wEnum_findValues","wEnumCompleteExists","wEnum_isIn","wEnum_parseElements","isOn","wEnumAnimateBool","autocompleteRequestEnum","wEnumAutocompleteRequestEnum","filters","keyword","operator","wEnum_onAutoCompleteSuccess","wEnum_analyzeResult","wEnumAddOtherInUri","hasValue","wEnumVerifyValue","singleInfo","wEnum_onAutoCompleteError","wEnumGetKendoOptions","kdData","dataItems","wEnum_pushNewValues","wEnum_open","_kOpen","wEnum_multipleClose","_kClose","optionLabel","optionLabelTemplate","wEnum_dataBound","wEnum_close","_kSelectOther","wEnumkSelect","kWidget","wEnumkClose","$otherInput","wEnumkOpen","wEnumSetOtherClick","wEnumItemClick","wEnumSetOtherKeyPress","wEnum_getType","wEnum_destroy","wFileWidget","uploadingFiles","contentDisposition","dropFileHere","downloadLabel","recording","transferring","kiloByte","byte","wFileInitDom","visibleInput","urlSep","mimeIconSize","_initEvent","wFileInitEvent","_initUploadEvent","wFileClickDownload","wFileInitChangeEvent","wFileInitUploadEvent","inputFile","inputText","fileUrl","wFileOnButtonClickr","isNotPrevented","$base","FormData","wFileOnDragEnter","wFileOnDragOver","wFileOnLeave","wFileOnDrop","dt","dataTransfer","files","uploadFile","wFileOnClick","wFileFilterKeys","wFileSelectKeys","wFileChange","addOldBrowserForm","wFileChangeOld","uploadFileForm","getWidgetValue","wFilegetWidgetValue","$inputFile","wFileAddOldBrowserForm","inputId","fileTarget","originalText","formHtml","wFileLoad","wFileMessages","dataFile","file","fileName","cdate","thumbnail","thumbnailUrl","downloadUrl","iconUrl","uploadCondition","wFileUploadCondition","wFileUploadFileForm","submit","wFileUploadFile","firstFile","formData","newFileName","originalBgColor","currentFileValue","infoBgColor","wFileXhrAddProgress","xhrObject","ajaxSettings","upload","wFileProgress","total","lengthComputable","wFileUploadDone","fileValue","wFileUploadFail","wFileErrorMessages","always","wFileUploadEnd","wFileSetValue","wFileGetLink","link","wFileGetType","require_htmltext","anchors","toolbar","toolbarStartupExpanded","ckEditorConfiguration","ckEditorAllowAllTags","ckEditorInstance","wHtmltext_InitDom","bind_super","bindInitEvent","popupWindows","wHtmltext_umdRequire","wHtmltext_initEditDom","ckOptions","allowedContent","$1","CKEDITOR","dtd","classes","disallowedContent","ckeditor","editor","wHtmlTextCkOptions","hrefBase","language","contentsCss","removePlugins","toolbarCanCollapse","entities","baseHref","filebrowserImageBrowseUrl","filebrowserImageUploadUrl","toolbar_Full","toolbar_Default","toolbar_Simple","toolbar_Basic","removeButtons","wHtmltext_change","wHtmltext_focus","ktTarget","showInputTooltip","wHtmltext_blur","hideInputTooltip","wHtmltext_loaded","wHtmlTextOnPostMoved","wHtmlAnchorClick","anchor","$anchor","anchorsConfig","anchorsTarget","wFeature","dcpWindow","isAbsUrl","protocol","hostname","port","modal","wHtmltext_getFocusInput","wHtmltext_initChangeEvent","wHtmltext_getWidgetValue","wHtmltextSetValue","wHtmltext_getType","wHtmlTextDestroy","wHtmltext_deferDestroy","wHtmltextDestroyPopup","pWindow","_triggerReady","wAttributeReady","wImageWidget","thumbnailSize","wImageInitDom","_initDisplayEvent","wImageinitDisplayEvent","wImageClick","bdw","dw","wImageUploadCondition","wImageGetType","requireWint","kendoNumericConfiguration","decreaseLabel","increaseLabel","wIntInitDom","_activateNumber","wIntInitChangeEvent","wIntSetValue","wIntActivateNumber","currentCSSClass","kendoNumericTextBox","wIntFormatNumber","wIntGetKendoNumericOptions","downArrowText","upArrowText","wIntGetKendoNumericOptions_onChange","wIntGetType","wIntTestValue","requireDcpLabel","helpLinkIdentifier","helpTitle","wLabel_create","wLabel_initDom","wLabelSetLabel","wLabelSetError","wLabel_getTemplate","requireDcpLongText","displayedLineNumber","dcpLongtext_initDom","maxDisplayedLine","_maxLinesNumber","dcpLongtext_initEvent","_initAutoFit","dcpLongtext_maxLinesNumber","dcpLongtext_deferComputeSize","delta","lineH","dcpLongtext_getFocusInput","_fitToContent","dcpLongtext_fitToContent","maxHeight","scrollHeight","dcpLongtext_initAutoFit","dcpLongtext_computeSize","dcpLongtext_keyUpUpdateSize","dcpLongtext_focusUpdateSize","dcpLongtext_showUpdateSize","dcpLongtext_getType","require_money","wMoneyGetKendoNumericOptions","wMoneyGetType","wPassword","hideValue","wasswordInitDom","wpasswordSetValue","wText","maxLength","kendoAutoCompleteConfiguration","wTextInitDom","wTextInitEvent","wTextInitChangeEvent","wTextChangeElement","systemOption","mapAutoActivated","wTextFiltering","kendoAutocompleteSelect","kendoAutoComplete","wTextClickAutoComplete","wTextInitLinkTooltip","wTextSetValue","kendoTimeConfiguration","timeDataFormat","wTimeInitDom","wTimeActivateDate","kendoTimePicker","wTimeSetValue","wTimeGetValue","wTimeConvertDateToPseudoIsoString","getHours","getMinutes","wTimeFormatDate","wTimeParseDate","wTimegetKendoOptions","requireTimestamp","timeFormat","wTimeStampInitDom","replaceAt","wTimeStampReplaceAt","wTimeStampSetValue","wTimeStamp_activateDate","wTimeStamp_onChange","kendoDateTimePicker","wTimeStamp_convertDateToPseudoIsoString","getSeconds","wTimeStamp_formatDate","wTimeStamp_getType","wAttributeWidget","eventPrefix","deleteLabel","displayDeleteButton","wAttributeRedraw","hasLink","wAttributeGetLink","wAttributeFlashElement","wAttributeFlashDelay","wAttributeFlashSecondDelay","wAttributeSetError","kt","wAttributeSetErrorMsg","wAttributeSetErrorTitle","wAttributeSetErrorDelay","option","wAttributegetValue","wAttributeGetContentElements","wAttributeSetValue","_checkValue","wAttributeHideInputTooltip","$ktTarger","inputHtmlTooltip","wAttribute_close","helpOutputs","wAttributeOptionMap","emptyValue","_getEmptyValue","hadButtons","_hasButtons","wAttributeInitDom","originalEscape","wAttributeLinkMultiple","urlIndex","_completeRevisionData","urls","renderUrl","renderTitle","wAttribute_completeRevisionData","isRevision","revisionTarget","wAttributeInitMainElementClass","_initDeleteEvent","_initFocusEvent","_initMoveEvent","_initErrorEvent","wAttributeInitFocusEvent","inputTargetFilter","wAttributeFocus","wAttributeBlur","wAttributeinitMoveEvent","domLine","wAttributeInitErrotEvent","closeError","wAttributeInitDeleteEvent","$deleteButton","titleDelete","wAttributeDeferDelete","wAttributeInitLinkEvent","wAttributeAttributeClick","dpcWindow","wAttributeInitLinkTooltip","wAttributeFocusInput","showEmptyContent","wAttributeTestValue","wAttributeHasButtons","wAttribute_DisableSavingMenu","DocumentModel","DocumentView","TransitionModel","TransitionView","MenuModel","ErrorModelNonInitialized","eventList","constraintList","eventListener","_model","activatedConstraint","activatedEventListener","_initializedModel","_initializedView","documentController_create","log","_initializeWidget","tryToDestroy","documentController_tryToDestroy","documentController_promiseDestroy","_triggerControllerEvent","documentController_destroy","documentController_initializeWidget","initializeSuccess","documentController_initializeSuccess","_initExternalElements","_initModel","_getModelValue","_initView","documentController_fetchSuccess","_initRouter","noRouter","documentController_getModelValue","documentController_initDom","documentController_initModel","initialValue","_initModelEvents","_reinitModel","documentController_initView","_initViewEvents","documentController_reinitModel","documentController_initExternalElements","dcpLoading","$notification","dcpNotification","notifications","documentController_initEvents","documentController_triggerShowInvalid","documentController_triggerShowError","documentController_triggerShowMessage","documentController_triggerSync","_initActivatedConstraint","_initActivatedEventListeners","documentController_triggerBeforeRender","documentController_triggerBeforeClose","nextDocument","documentController_triggerClose","oldProperties","documentController_triggerAddCustomData","getCustomClientData","documentController_triggerBeforeSave","documentController_triggerAfterSave","documentController_triggerBeforeRestore","documentController_triggerAfterRestore","documentController_triggerBeforeDelete","documentController_triggerAfterDelete","documentController_triggerValidate","documentController_triggerChangeValue","mAttribute","_getAttributeModel","documentController_valueIsModified","_triggerAttributeControllerEvent","documentController_triggerAttributeRender","documentController_triggerArrayModified","documentController_triggerInternalLinkSelected","documentController_triggerDownloadFile","documentController_triggerUploadFile","documentController_triggerHelperSearch","documentController_triggerHelperResponse","documentController_triggerHelperSelect","documentController_triggercreateDialogDocumentOpen","triggername","documentController_triggerConstraint","constraintController","addConstraint","documentController_addConstraint","currentConstraint","triggerCurrentConstraint","attributeCheck","constraintCheck","_initAndDisplayTransition","deleteCustomClient","documentController_initViewEvents","documentController_triggerCleanNotification","documentController_triggerLoading","nbItem","documentController_triggerLoaderShow","pc","documentController_triggerHide","documentController_triggerPartRender","documentController_triggerRenderDone","documentController_endRender","documentController_triggerShowSuccess","documentController_triggerReinit","documentController_initRouter","documentController_initAndDisplayTransition","withoutInterface","reinitOptions","transitionElements","transitionInterface","documentServerProperties","documentController_changeStatePromise","documentController_propagateAfter","documentController_propagateBeforeTransition","documentController_propagateTransitionClose","documentController_propagateTransitionError","documentController_TransitionSuccess","documentController_transitionRender","documentController_parseMessage","reinitDocument","documentController_reinitDone","documentController_reinitFail","documentController_TransitionClose","transitionModel_setDefaultValues","documentController_TransitionSave","transitionModel_afterSave","transitionModel_error","documentController_TransitionDisplay","documentController_getAttributeModel","_getMenuModel","documentController_getMenuModel","menuId","documentControllerGetMenuIterate","itemMenu","documentControllerGetSubMenuIterate","_getRenderedAttributes","documentController_getRenderedAttributes","documentController_getRenderedAttribute","documentController_suppressNoView","currentAttribut","_getMaxIndex","documentController_getMaxIndex","attributeArray","documentController_getMax","documentController_initActivatedConstraint","currentDocumentProperties","documentController_getActivatedConstraint","documentCheck","documentController_initActivatedEvents","documentController_getActivatedEvent","currentEvent","documentController_triggerRenderedAttributes","objectAttribute","_addAndInitNewEvents","documentController_addAndInitNewEvents","newEvent","uniqueName","eventType","eventCallback","documentController_triggerAttributeControllerEvent","attributeInternalElement","externalEventArgument","documentController__filterUsableEvents","documentController_applyCallBack","_triggerExternalEvent","documentController_triggerControllerEvent","documentController_getEventName","documentController_triggerAnEvent","documentController_triggerExternalEvent","_checkEventName","documentController_checkEventName","documentController_CheckEventType","currentEventType","_checkInitialisedView","documentController_checkInitialised","_checkInitialisedModel","documentController_checkInitialisedModel","_registerOutputPromise","documentController_registerOutputPromise","documentPromise","documentController_reinitPromise","exception","previousDocument","documentControllerReinitDocument","documentControllerFetchDocument","callBackPromise","force","dcpDocument_setNewOptions","documentControllerSave","changeStateDocument","documentController_changeStateDocument","unattended","documentControllerDelete","documentControllerRestore","getProperty","documentControllerGetDocumentProperty","documentControllerGetDocumentProperties","ready","hasAttribute","documentController_hasAttribute","documentControllerGetAttribute","getAttributes","documentControllerGetAttributes","documentController_mapAttribute","hasMenu","documentController_hasMenu","documentControllerGetMenu","getMenus","documentControllerGetMenus","documentController_mapMenu","currentMenu","documentControllerGetValue","documentControllerGetValues","getCustomServerData","documentControllerGetServerCustomData","addCustomClientData","documentControllerAddCustomClientData","clientCustomOK","documentControllerAddCustomClientDataEach","setCustomClientData","documentControllerSetCustomClientData","deleteOnce","newCustomData","analyzeCustomClient","currentCustom","removeCustomClientData","documentControllerRemoveCustomClientData","documentControllerSetValue","currentValueLength","appendArrayRow","documentControllerAddArrayRow","documentController_addACell","insertBeforeArrayRow","documentControllerInsertBeforeArrayRow","maxValue","removeArrayRow","documentControllerRemoveArrayRow","maxIndex","documentController_removeACell","documentControlleraddConstraint","documentController_defaultDocumentCheck","documentController_defaultAttributeCheck","documentController_onceWrapper","removeConstraint","externalConstraint","listConstraints","documentControllerListConstraint","documentControllerRemoveConstraint","constraintName","allKind","newConstraintList","documentController_removeConstraint","currentConstrait","documentController_rebuildConstraintList","documentControllerAddEvent","listEventListeners","documentControllerListEvents","documentControllerRemoveEvent","newList","documentController_removeCurrentEvent","documentController__rebuildEventList","triggerEvent","documentController_triggerEvent","hideAttribute","documentControllerHideAttribute","showAttribute","documentControllerShowAttribute","showMessage","documentControllerShowMessage","maskDocument","px","unmaskDocument","documentController_unmaskDocument","setAttributeErrorMessage","documentControllersetAttributeErrorMessage","cleanAttributeErrorMessage","documentControllercleanAttributeErrorMessage","documentController_injectCSS","cssToInject","require_whistory","htmlCaneva","dcpDocumentHistoryhtmlCaneva","dcpDocumentHistory_create","$widget","dcpDocumentWHistory_initTable","_initDatatable","whistoryShowDetail","noticeButton","noticeShowed","whistoryShowNotice","$notices","whistoryShowDiff","selectedDiff","$diffTarget","diffWidget","dcpRevisionDiff","firstRevision","secondRevision","whistoryShowDocument","_fillDataTable","dcpDocumentHistory_fillDataTable","myData","dialogWindow","whistoryFillRevision","revisionInfo","revisionDate","color","whistoryFillMessage","uname","dcpDocumentHistory_initDatatable","dataTable","whistoryRenderDate","theDate","whistoryRenderMessage","stateLabel","whistoryEncodeMessage","visible","whistoryRenderRevision","whistoryRenderDiff","renderType","allData","whistorydrawCallback","detailShowed","whistoryinitComplete","api","page","showVersion","showState","onlyOneRevision","column","fixedRevisionRow","trHead","$buttons","whistory_getData","getJSON","whistory_getDataDone","tableData","whistory_getDataFail","whistory_getDataParseMessage","uri","whistory_getDataRedirect","whistory_getDataFailParseMessage","dcpDocumentHistory_destroy","$history","DataTable","require_revisiondiff","firstDocument","secondDocument","dcpRevisionDiff__create","dcpRevisionDiff_showDiff","showOnlyDiff","showAll","dcpRevisionDiff_htmlCaneva","dcpRevisionDiff__initDatatable","revisionDiffWidget","dcpRevisionDiff_renderFirst","second","dcpRevisionDiff_renderSecond","dcpRevisionDiff_initComplete","columns","_getDocHeader","firstHeadCell","dcpRevisionDiff_getData","dcpRevisionDiff_getDataDone","data1","dcpRevisionDiff_getRevisionDone","data2","dcpRevisionDiff_analyzeAttribute","firstValue","secondValue","_findAttributeLabel","isEqualAttributeValue","dcpRevisionDiff_getRevisionFail","alert","dcpRevisionDiff_getDataFail","dcpRevisionDiff_isEqualAttributeValue","v1","v2","wRevisionDiffFindAttributeLabel","attributInfo","attributId","contentLabel","wRevisionDiffGetDocHeader","documentStructure","documentHeader","wMenu","kendoMenuWidget","wMenuCreate","_tooltips","_initStructure","wMenuInitStructure","$mainElement","_insertMenuContent","kendoMenu","openOnClick","closeOnClick","wMenuSelect","$menuElement","eventContent","$elementA","configMenu","confirmText","confirmOptions","confirmDcpWindow","targetOptions","$bodyDiv","confirmationOptions","confirmButton","cancelButton","deactivate","wMenuDeactivate","wMenuOpen","menuUrl","wMenuDone","wMenuFail","wMenuActivate","menuWidth","menuLeft","listWidth","listLeft","wMenuOpenDelay","wMenuScroll","encoded","inhibitBarMenu","updateResponsiveMenu","wMenuInhibitBarMenu","widgetMenu","wMenuInhibitBarMenuClose","getScrollBarWidth","wMenugetScrollBarWidth","scrollBarWidth","outer","appendChild","w1","w2","wMenuHideResponsiveMenu","barMenu","$itemMenu","$importantItemMenu","newHiddens","visibleWidth","freeWidth","barmenuWidth","$hamburger","hiddenItemsCount","visibleItemCount","$hiddenItems","hiddenLeft","wMenuComputeBarmenuWidth","wMenuComputeWidth","wMenuItemToHamburger","wMenuItemFromHamburger","wMenuInsertMenuContent","scopeMenu","hasBeforeContent","wMenuInsertMenuContentfake","beforeContent","wMenuInsertMenuContentBeforeContent","wMenuInsertMenuContentSet","$currentMenu","htmlAttr","htmlAttributes","wMenuInsertMenuContentSetHtml","htmlLabel","disabled","tooltipHtml","tooltipPlacement","important","wMenuTemplate","wMenuDestroy","wMenuDestroyPopup","wMenuDestroyTooltip","currentTooltip","require_wProperties","wProperties_htmlCaneva","wProperties__create","_displayProperties","wProperties_bindClick","wPropertiesGetProperties","wProperties_done","wProperties_formatDate","wProperties_formatDate2","wProperties_fail","ErrorNoSuchMethod","widget_ErrorNoSuchMethod","widget_init","widgetUuid","_cleanData","cleanData","widget_cleanData","elems","_data","triggerHandler","widget_initWidget","Base","fullName","existingConstructor","basePrototype","proxiedPrototype","namespace","Widget","expr","pseudos","widget_createSelector","widget_Constructor","_createWidget","_proto","_childConstructors","widget_proxiedElements","widget_proxiedProperties","widget_super","_superApply","widget_superApply","widget_proxied","__super","__superApply","returnValue","widgetName","widgetFullName","widget_existingConstructor","childPrototype","bridge","widget_extend","input","inputIndex","inputLength","isPlainObject","widget_bridge","widget_callElement","isMethodCall","widget_eachMethodCall","methodValue","pushStack","widget_eachDataCall","_init","widget_Widget","defaultElement","widget_createWidget","_getCreateOptions","bindings","classesElementLookup","_on","widget_remove","defaultView","parentWindow","_setOptionDisabled","_getCreateEventData","widget_getCreateOptions","widget_destroy","that","widget_destroyClass","_removeClass","widget_widget","widget_option","parts","curOption","_setOptions","widget__setOptions","_setOption","widget__setOption","_setOptionClasses","widget__setOptionClasses","classKey","currentElements","_classes","widget__classes","full","processClassString","widget_processClassString","checkOption","uniqueSort","unique","extra","widget__removeClass","_toggleClass","_addClass","widget__addClass","widget__toggleClass","widget__on","suppressDisabledCheck","delegateElement","widget_iterateHandler","handlerProxy","guid","_off","widget__off","_delay","widget__delay","widget__trigger","orig","toLocaleLowerCase","wConfirm","wConfirmCancel","wConfirmConfirm","wConfirmCreate","scoppedCancel","_getWindowTemplate","kendoButton","wConfirmCancelClick","scoppedConfirm","wConfirmOkClick","wDialog","maximizeWidth","dcpDialog_create","dcpDialog_onclose","dcpDialog_closeWrap","heigth","dcpDialog_Open","wDialogMaximize","maximize","dcpDialog_close","dcpDialog_destroy","restItem","doneItems","original","dcpLoading_create","initBar","$title","dcpLoadingReset","setTitle","dcpLoadingsetTitle","isDisplayed","dcpLoadingIsDisplayed","dcpLoadinghide","setPercent","dcpLoadingshow","dcpLoadingsetLabel","dcpLoadingsetPercent","$initbar","rpc","setNbItem","dcpLoadingSetNbItem","addItem","dcpLoadingAddItem","pv","dcpLoading_destroy","wNotification","autoHideAfter","moreButton","moreWindowTitle","notificationElement","wNotificationCreate","showMore","kendoNotification","wNotificationOn","wNotificationShowMessage","$boxMessage","$more","widgetNotification","wNotificationClickMode","$clone","cloneWindow","wNotificationShow","showError","wNotificationShowError","showInfo","wNotificationShowInfo","showWarning","wNotificationShowWarning","showSuccess","wNotificationShowSuccess","wNotificationClear","wWindow","intervalId","wWindowOpen","iframeTitle","wWindowOpenSetTitle","currentTitle","wWindowOpenSetTitleNow","$scopeWindow","exp","wWindowOpenSetTitleIsChanged","newTitle","currentIcon","wWindowClose","wWindowDestroy","wWindowCreate","wWindowCreate_getWindowTemplate","templateId","wWindowopen","wWindowkendoWindow"],"mappings":"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B,GAAD,EAKjB;AACDqG,SAAK,SADJ;AAED3G,WAAO,SAAS69B,UAAT,GAAsB;AAC3B,aAAOj1B,QAAQtI,IAAR,CAAa,IAAb,CAAP;AACD;AAJA,GALiB,EAUjB;AACDqG,SAAK,sBADJ;AAED3G,WAAO,SAAS89B,uBAAT,GAAmC;AACxC,aAAO/F,qBAAqBz3B,IAArB,CAA0B,IAA1B,CAAP;AACD;AAJA,GAViB,EAejB;AACDqG,SAAK,uBADJ;AAED3G,WAAO,SAAS+9B,wBAAT,GAAoC;AACzC,aAAO1G,sBAAsB/2B,IAAtB,CAA2B,IAA3B,CAAP;AACD;;AAED;;;;;;AAOA;;;;;;;;;;;;;;;;;AAbC,GAfiB,CAApB;AA8CA,SAAO+W,MAAP;AACD,CA9HY,EAAb;;AAgIA;;;;;;;;;;;;;;;;;;;;AAqBAA,OAAO2mB,KAAP,GAAe,CAAC,OAAOzqB,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC9U,MAA1C,EAAkDw/B,WAAjE;AACA5mB,OAAOqjB,UAAP,GAAoBA,UAApB;AACArjB,OAAOomB,QAAP,GAAkBA,QAAlB;;kBAEepmB,M;AACf,kC;;;;;;;;ACv4EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gBAAgB;AACzC;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,YAAY;AAClD;AACA;AACA,KAAK;AACL;AACA,uCAAuC,YAAY;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,8BAA8B;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,gBAAgB;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,oDAAoD;AACpD,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,0CAA0C;AAC1C,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4DAA4D,YAAY;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8CAA8C,YAAY;AAC1D;AACA;AACA,qBAAqB,gBAAgB;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6CAA6C,YAAY;AACzD;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,8BAA8B;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,0BAA0B;AACpE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qBAAqB,cAAc;AACnC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,YAAY;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO,eAAe;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qBAAqB,eAAe;AACpC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,yBAAyB,gBAAgB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yCAAyC,YAAY;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yCAAyC,YAAY;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,4CAA4C,mBAAmB;AAC/D;AACA;AACA,yCAAyC,YAAY;AACrD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qDAAqD;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf,cAAc;AACd,cAAc;AACd,gBAAgB;AAChB,gBAAgB;AAChB,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP,qBAAqB;AACrB;;AAEA;AACA;AACA,KAAK;AACL,iBAAiB;;AAEjB;AACA,kDAAkD,EAAE,iBAAiB;;AAErE;AACA,wBAAwB,8BAA8B;AACtD,2BAA2B;;AAE3B;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kDAAkD,iBAAiB;;AAEnE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA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","file":"mainSmartElement.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [], result;\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// objects to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t\"mainSmartElement\": 0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData === 0) {\n \t\t\treturn new Promise(function(resolve) { resolve(); });\n \t\t}\n\n \t\t// a Promise means \"currently loading\".\n \t\tif(installedChunkData) {\n \t\t\treturn installedChunkData[2];\n \t\t}\n\n \t\t// setup Promise in chunk cache\n \t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t});\n \t\tinstalledChunkData[2] = promise;\n\n \t\t// start chunk loading\n \t\tvar head = document.getElementsByTagName('head')[0];\n \t\tvar script = document.createElement('script');\n \t\tscript.type = 'text/javascript';\n \t\tscript.charset = 'utf-8';\n \t\tscript.async = true;\n \t\tscript.timeout = 120000;\n\n \t\tif (__webpack_require__.nc) {\n \t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t}\n \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".js\";\n \t\tvar timeout = setTimeout(onScriptComplete, 120000);\n \t\tscript.onerror = script.onload = onScriptComplete;\n \t\tfunction onScriptComplete() {\n \t\t\t// avoid mem leaks in IE.\n \t\t\tscript.onerror = script.onload = null;\n \t\t\tclearTimeout(timeout);\n \t\t\tvar chunk = installedChunks[chunkId];\n \t\t\tif(chunk !== 0) {\n \t\t\t\tif(chunk) {\n \t\t\t\t\tchunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));\n \t\t\t\t}\n \t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t}\n \t\t};\n \t\thead.appendChild(script);\n\n \t\treturn promise;\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"uiAssets/anakeen/debug/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/Apps/DOCUMENT/IHM/mainDocument.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap adea519f95c5cc01c448","//     Backbone.js 1.3.3\n\n//     (c) 2010-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(factory) {\n\n  // Establish the root object, `window` (`self`) in the browser, or `global` on the server.\n  // We use `self` instead of `window` for `WebWorker` support.\n  var root = (typeof self == 'object' && self.self === self && self) ||\n            (typeof global == 'object' && global.global === global && global);\n\n  // Set up Backbone appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backbone.\n      root.Backbone = factory(root, exports, _, $);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('underscore'), $;\n    try { $ = require('jquery'); } catch (e) {}\n    factory(root, exports, _, $);\n\n  // Finally, as a browser global.\n  } else {\n    root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));\n  }\n\n})(function(root, Backbone, _, $) {\n\n  // Initial Setup\n  // -------------\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create a local reference to a common array method we'll want to use later.\n  var slice = Array.prototype.slice;\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '1.3.3';\n\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\n  // the `$` variable.\n  Backbone.$ = $;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... this will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Proxy Backbone class methods to Underscore functions, wrapping the model's\n  // `attributes` object or collection's `models` array behind the scenes.\n  //\n  // collection.filter(function(model) { return model.get('age') > 10 });\n  // collection.each(this.addView);\n  //\n  // `Function#apply` can be slow so we use the method's arg count, if we know it.\n  var addMethod = function(length, method, attribute) {\n    switch (length) {\n      case 1: return function() {\n        return _[method](this[attribute]);\n      };\n      case 2: return function(value) {\n        return _[method](this[attribute], value);\n      };\n      case 3: return function(iteratee, context) {\n        return _[method](this[attribute], cb(iteratee, this), context);\n      };\n      case 4: return function(iteratee, defaultVal, context) {\n        return _[method](this[attribute], cb(iteratee, this), defaultVal, context);\n      };\n      default: return function() {\n        var args = slice.call(arguments);\n        args.unshift(this[attribute]);\n        return _[method].apply(_, args);\n      };\n    }\n  };\n  var addUnderscoreMethods = function(Class, methods, attribute) {\n    _.each(methods, function(length, method) {\n      if (_[method]) Class.prototype[method] = addMethod(length, method, attribute);\n    });\n  };\n\n  // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.\n  var cb = function(iteratee, instance) {\n    if (_.isFunction(iteratee)) return iteratee;\n    if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);\n    if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };\n    return iteratee;\n  };\n  var modelMatcher = function(attrs) {\n    var matcher = _.matches(attrs);\n    return function(model) {\n      return matcher(model.attributes);\n    };\n  };\n\n  // Backbone.Events\n  // ---------------\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // a custom event channel. You may bind a callback to an event with `on` or\n  // remove with `off`; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {};\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // Iterates over the standard `event, callback` (as well as the fancy multiple\n  // space-separated events `\"change blur\", callback` and jQuery-style event\n  // maps `{event: callback}`).\n  var eventsApi = function(iteratee, events, name, callback, opts) {\n    var i = 0, names;\n    if (name && typeof name === 'object') {\n      // Handle event maps.\n      if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;\n      for (names = _.keys(name); i < names.length ; i++) {\n        events = eventsApi(iteratee, events, names[i], name[names[i]], opts);\n      }\n    } else if (name && eventSplitter.test(name)) {\n      // Handle space-separated event names by delegating them individually.\n      for (names = name.split(eventSplitter); i < names.length; i++) {\n        events = iteratee(events, names[i], callback, opts);\n      }\n    } else {\n      // Finally, standard events.\n      events = iteratee(events, name, callback, opts);\n    }\n    return events;\n  };\n\n  // Bind an event to a `callback` function. Passing `\"all\"` will bind\n  // the callback to all events fired.\n  Events.on = function(name, callback, context) {\n    return internalOn(this, name, callback, context);\n  };\n\n  // Guard the `listening` argument from the public API.\n  var internalOn = function(obj, name, callback, context, listening) {\n    obj._events = eventsApi(onApi, obj._events || {}, name, callback, {\n      context: context,\n      ctx: obj,\n      listening: listening\n    });\n\n    if (listening) {\n      var listeners = obj._listeners || (obj._listeners = {});\n      listeners[listening.id] = listening;\n    }\n\n    return obj;\n  };\n\n  // Inversion-of-control versions of `on`. Tell *this* object to listen to\n  // an event in another object... keeping track of what it's listening to\n  // for easier unbinding later.\n  Events.listenTo = function(obj, name, callback) {\n    if (!obj) return this;\n    var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n    var listeningTo = this._listeningTo || (this._listeningTo = {});\n    var listening = listeningTo[id];\n\n    // This object is not listening to any other events on `obj` yet.\n    // Setup the necessary references to track the listening callbacks.\n    if (!listening) {\n      var thisId = this._listenId || (this._listenId = _.uniqueId('l'));\n      listening = listeningTo[id] = {obj: obj, objId: id, id: thisId, listeningTo: listeningTo, count: 0};\n    }\n\n    // Bind callbacks on obj, and keep track of them on listening.\n    internalOn(obj, name, callback, this, listening);\n    return this;\n  };\n\n  // The reducing API that adds a callback to the `events` object.\n  var onApi = function(events, name, callback, options) {\n    if (callback) {\n      var handlers = events[name] || (events[name] = []);\n      var context = options.context, ctx = options.ctx, listening = options.listening;\n      if (listening) listening.count++;\n\n      handlers.push({callback: callback, context: context, ctx: context || ctx, listening: listening});\n    }\n    return events;\n  };\n\n  // Remove one or many callbacks. If `context` is null, removes all\n  // callbacks with that function. If `callback` is null, removes all\n  // callbacks for the event. If `name` is null, removes all bound\n  // callbacks for all events.\n  Events.off = function(name, callback, context) {\n    if (!this._events) return this;\n    this._events = eventsApi(offApi, this._events, name, callback, {\n      context: context,\n      listeners: this._listeners\n    });\n    return this;\n  };\n\n  // Tell this object to stop listening to either specific events ... or\n  // to every object it's currently listening to.\n  Events.stopListening = function(obj, name, callback) {\n    var listeningTo = this._listeningTo;\n    if (!listeningTo) return this;\n\n    var ids = obj ? [obj._listenId] : _.keys(listeningTo);\n\n    for (var i = 0; i < ids.length; i++) {\n      var listening = listeningTo[ids[i]];\n\n      // If listening doesn't exist, this object is not currently\n      // listening to obj. Break out early.\n      if (!listening) break;\n\n      listening.obj.off(name, callback, this);\n    }\n\n    return this;\n  };\n\n  // The reducing API that removes a callback from the `events` object.\n  var offApi = function(events, name, callback, options) {\n    if (!events) return;\n\n    var i = 0, listening;\n    var context = options.context, listeners = options.listeners;\n\n    // Delete all events listeners and \"drop\" events.\n    if (!name && !callback && !context) {\n      var ids = _.keys(listeners);\n      for (; i < ids.length; i++) {\n        listening = listeners[ids[i]];\n        delete listeners[listening.id];\n        delete listening.listeningTo[listening.objId];\n      }\n      return;\n    }\n\n    var names = name ? [name] : _.keys(events);\n    for (; i < names.length; i++) {\n      name = names[i];\n      var handlers = events[name];\n\n      // Bail out if there are no events stored.\n      if (!handlers) break;\n\n      // Replace events if there are any remaining.  Otherwise, clean up.\n      var remaining = [];\n      for (var j = 0; j < handlers.length; j++) {\n        var handler = handlers[j];\n        if (\n          callback && callback !== handler.callback &&\n            callback !== handler.callback._callback ||\n              context && context !== handler.context\n        ) {\n          remaining.push(handler);\n        } else {\n          listening = handler.listening;\n          if (listening && --listening.count === 0) {\n            delete listeners[listening.id];\n            delete listening.listeningTo[listening.objId];\n          }\n        }\n      }\n\n      // Update tail event if the list has any events.  Otherwise, clean up.\n      if (remaining.length) {\n        events[name] = remaining;\n      } else {\n        delete events[name];\n      }\n    }\n    return events;\n  };\n\n  // Bind an event to only be triggered a single time. After the first time\n  // the callback is invoked, its listener will be removed. If multiple events\n  // are passed in using the space-separated syntax, the handler will fire\n  // once for each event, not once for a combination of all events.\n  Events.once = function(name, callback, context) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.off, this));\n    if (typeof name === 'string' && context == null) callback = void 0;\n    return this.on(events, callback, context);\n  };\n\n  // Inversion-of-control versions of `once`.\n  Events.listenToOnce = function(obj, name, callback) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.stopListening, this, obj));\n    return this.listenTo(obj, events);\n  };\n\n  // Reduces the event callbacks into a map of `{event: onceWrapper}`.\n  // `offer` unbinds the `onceWrapper` after it has been called.\n  var onceMap = function(map, name, callback, offer) {\n    if (callback) {\n      var once = map[name] = _.once(function() {\n        offer(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n    }\n    return map;\n  };\n\n  // Trigger one or many events, firing all bound callbacks. Callbacks are\n  // passed the same arguments as `trigger` is, apart from the event name\n  // (unless you're listening on `\"all\"`, which will cause your callback to\n  // receive the true name of the event as the first argument).\n  Events.trigger = function(name) {\n    if (!this._events) return this;\n\n    var length = Math.max(0, arguments.length - 1);\n    var args = Array(length);\n    for (var i = 0; i < length; i++) args[i] = arguments[i + 1];\n\n    eventsApi(triggerApi, this._events, name, void 0, args);\n    return this;\n  };\n\n  // Handles triggering the appropriate event callbacks.\n  var triggerApi = function(objEvents, name, callback, args) {\n    if (objEvents) {\n      var events = objEvents[name];\n      var allEvents = objEvents.all;\n      if (events && allEvents) allEvents = allEvents.slice();\n      if (events) triggerEvents(events, args);\n      if (allEvents) triggerEvents(allEvents, [name].concat(args));\n    }\n    return objEvents;\n  };\n\n  // A difficult-to-believe, but optimized internal dispatch function for\n  // triggering events. Tries to keep the usual cases speedy (most internal\n  // Backbone events have 3 arguments).\n  var triggerEvents = function(events, args) {\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n    switch (args.length) {\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\n    }\n  };\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Backbone **Models** are the basic data object in the framework --\n  // frequently representing a row in a table in a database on your server.\n  // A discrete chunk of data and a bunch of useful, related methods for\n  // performing computations and transformations on that data.\n\n  // Create a new model with the specified attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var attrs = attributes || {};\n    options || (options = {});\n    this.cid = _.uniqueId(this.cidPrefix);\n    this.attributes = {};\n    if (options.collection) this.collection = options.collection;\n    if (options.parse) attrs = this.parse(attrs, options) || {};\n    var defaults = _.result(this, 'defaults');\n    attrs = _.defaults(_.extend({}, defaults, attrs), defaults);\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  };\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The value returned during the last failed validation.\n    validationError: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // The prefix is used to create the client id which is used to identify models locally.\n    // You may want to override this if you're experiencing name clashes with model ids.\n    cidPrefix: 'c',\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default -- but override this if you need\n    // custom syncing semantics for *this* particular model.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Special-cased proxy to underscore's `_.matches` method.\n    matches: function(attrs) {\n      return !!_.iteratee(attrs, this)(this.attributes);\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"`. This is\n    // the core primitive operation of a model, updating the data and notifying\n    // anyone who needs to know about the change in state. The heart of the beast.\n    set: function(key, val, options) {\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options || (options = {});\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Extract attributes and options.\n      var unset      = options.unset;\n      var silent     = options.silent;\n      var changes    = [];\n      var changing   = this._changing;\n      this._changing = true;\n\n      if (!changing) {\n        this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n      }\n\n      var current = this.attributes;\n      var changed = this.changed;\n      var prev    = this._previousAttributes;\n\n      // For each `set` attribute, update or delete the current value.\n      for (var attr in attrs) {\n        val = attrs[attr];\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\n        if (!_.isEqual(prev[attr], val)) {\n          changed[attr] = val;\n        } else {\n          delete changed[attr];\n        }\n        unset ? delete current[attr] : current[attr] = val;\n      }\n\n      // Update the `id`.\n      if (this.idAttribute in attrs) this.id = this.get(this.idAttribute);\n\n      // Trigger all relevant attribute changes.\n      if (!silent) {\n        if (changes.length) this._pending = options;\n        for (var i = 0; i < changes.length; i++) {\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\n        }\n      }\n\n      // You might be wondering why there's a `while` loop here. Changes can\n      // be recursively nested within `\"change\"` events.\n      if (changing) return this;\n      if (!silent) {\n        while (this._pending) {\n          options = this._pending;\n          this._pending = false;\n          this.trigger('change', this, options);\n        }\n      }\n      this._pending = false;\n      this._changing = false;\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n    // if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"`.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var old = this._changing ? this._previousAttributes : this.attributes;\n      var changed = {};\n      for (var attr in diff) {\n        var val = diff[attr];\n        if (_.isEqual(old[attr], val)) continue;\n        changed[attr] = val;\n      }\n      return _.size(changed) ? changed : false;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Fetch the model from the server, merging the response with the model's\n    // local attributes. Any changed attributes will trigger a \"change\" event.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (!model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (key == null || typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options = _.extend({validate: true, parse: true}, options);\n      var wait = options.wait;\n\n      // If we're not waiting and attributes exist, save acts as\n      // `set(attr).save(null, opts)` with validation. Otherwise, check if\n      // the model will be valid when the attributes, if any, are set.\n      if (attrs && !wait) {\n        if (!this.set(attrs, options)) return false;\n      } else if (!this._validate(attrs, options)) {\n        return false;\n      }\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      var model = this;\n      var success = options.success;\n      var attributes = this.attributes;\n      options.success = function(resp) {\n        // Ensure attributes are restored during synchronous saves.\n        model.attributes = attributes;\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);\n        if (serverAttrs && !model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n\n      // Set temporary attributes if `{wait: true}` to properly find new ids.\n      if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);\n\n      var method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');\n      if (method === 'patch' && !options.attrs) options.attrs = attrs;\n      var xhr = this.sync(method, this, options);\n\n      // Restore attributes.\n      this.attributes = attributes;\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n      var wait = options.wait;\n\n      var destroy = function() {\n        model.stopListening();\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (wait) destroy();\n        if (success) success.call(options.context, model, resp, options);\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\n      };\n\n      var xhr = false;\n      if (this.isNew()) {\n        _.defer(options.success);\n      } else {\n        wrapError(this, options);\n        xhr = this.sync('delete', this, options);\n      }\n      if (!wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base =\n        _.result(this, 'urlRoot') ||\n        _.result(this.collection, 'url') ||\n        urlError();\n      if (this.isNew()) return base;\n      var id = this.get(this.idAttribute);\n      return base.replace(/[^\\/]$/, '$&/') + encodeURIComponent(id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return !this.has(this.idAttribute);\n    },\n\n    // Check if the model is currently in a valid state.\n    isValid: function(options) {\n      return this._validate({}, _.extend({}, options, {validate: true}));\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n    _validate: function(attrs, options) {\n      if (!options.validate || !this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validationError = this.validate(attrs, options) || null;\n      if (!error) return true;\n      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\n      return false;\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Model, mapped to the\n  // number of arguments they take.\n  var modelMethods = {keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,\n      omit: 0, chain: 1, isEmpty: 1};\n\n  // Mix in each Underscore method as a proxy to `Model#attributes`.\n  addUnderscoreMethods(Model, modelMethods, 'attributes');\n\n  // Backbone.Collection\n  // -------------------\n\n  // If models tend to represent a single row of data, a Backbone Collection is\n  // more analogous to a table full of data ... or a small slice or page of that\n  // table, or a collection of rows that belong together for a particular reason\n  // -- all of the messages in this particular folder, all of the documents\n  // belonging to this particular author, and so on. Collections maintain\n  // indexes of their models, both in order, and for lookup by `id`.\n\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\n  // If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Default options for `Collection#set`.\n  var setOptions = {add: true, remove: true, merge: true};\n  var addOptions = {add: true, remove: false};\n\n  // Splices `insert` into `array` at index `at`.\n  var splice = function(array, insert, at) {\n    at = Math.min(Math.max(at, 0), array.length);\n    var tail = Array(array.length - at);\n    var length = insert.length;\n    var i;\n    for (i = 0; i < tail.length; i++) tail[i] = array[i + at];\n    for (i = 0; i < length; i++) array[i + at] = insert[i];\n    for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];\n  };\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model) { return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set. `models` may be Backbone\n    // Models or raw JavaScript objects to be converted to Models, or any\n    // combination of the two.\n    add: function(models, options) {\n      return this.set(models, _.extend({merge: false}, options, addOptions));\n    },\n\n    // Remove a model, or a list of models from the set.\n    remove: function(models, options) {\n      options = _.extend({}, options);\n      var singular = !_.isArray(models);\n      models = singular ? [models] : models.slice();\n      var removed = this._removeModels(models, options);\n      if (!options.silent && removed.length) {\n        options.changes = {added: [], merged: [], removed: removed};\n        this.trigger('update', this, options);\n      }\n      return singular ? removed[0] : removed;\n    },\n\n    // Update a collection by `set`-ing a new list of models, adding new ones,\n    // removing models that are no longer present, and merging models that\n    // already exist in the collection, as necessary. Similar to **Model#set**,\n    // the core operation for updating the data contained by the collection.\n    set: function(models, options) {\n      if (models == null) return;\n\n      options = _.extend({}, setOptions, options);\n      if (options.parse && !this._isModel(models)) {\n        models = this.parse(models, options) || [];\n      }\n\n      var singular = !_.isArray(models);\n      models = singular ? [models] : models.slice();\n\n      var at = options.at;\n      if (at != null) at = +at;\n      if (at > this.length) at = this.length;\n      if (at < 0) at += this.length + 1;\n\n      var set = [];\n      var toAdd = [];\n      var toMerge = [];\n      var toRemove = [];\n      var modelMap = {};\n\n      var add = options.add;\n      var merge = options.merge;\n      var remove = options.remove;\n\n      var sort = false;\n      var sortable = this.comparator && at == null && options.sort !== false;\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      var model, i;\n      for (i = 0; i < models.length; i++) {\n        model = models[i];\n\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        var existing = this.get(model);\n        if (existing) {\n          if (merge && model !== existing) {\n            var attrs = this._isModel(model) ? model.attributes : model;\n            if (options.parse) attrs = existing.parse(attrs, options);\n            existing.set(attrs, options);\n            toMerge.push(existing);\n            if (sortable && !sort) sort = existing.hasChanged(sortAttr);\n          }\n          if (!modelMap[existing.cid]) {\n            modelMap[existing.cid] = true;\n            set.push(existing);\n          }\n          models[i] = existing;\n\n        // If this is a new, valid model, push it to the `toAdd` list.\n        } else if (add) {\n          model = models[i] = this._prepareModel(model, options);\n          if (model) {\n            toAdd.push(model);\n            this._addReference(model, options);\n            modelMap[model.cid] = true;\n            set.push(model);\n          }\n        }\n      }\n\n      // Remove stale models.\n      if (remove) {\n        for (i = 0; i < this.length; i++) {\n          model = this.models[i];\n          if (!modelMap[model.cid]) toRemove.push(model);\n        }\n        if (toRemove.length) this._removeModels(toRemove, options);\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      var orderChanged = false;\n      var replace = !sortable && add && remove;\n      if (set.length && replace) {\n        orderChanged = this.length !== set.length || _.some(this.models, function(m, index) {\n          return m !== set[index];\n        });\n        this.models.length = 0;\n        splice(this.models, set, 0);\n        this.length = this.models.length;\n      } else if (toAdd.length) {\n        if (sortable) sort = true;\n        splice(this.models, toAdd, at == null ? this.length : at);\n        this.length = this.models.length;\n      }\n\n      // Silently sort the collection if appropriate.\n      if (sort) this.sort({silent: true});\n\n      // Unless silenced, it's time to fire all appropriate add/sort/update events.\n      if (!options.silent) {\n        for (i = 0; i < toAdd.length; i++) {\n          if (at != null) options.index = at + i;\n          model = toAdd[i];\n          model.trigger('add', model, this, options);\n        }\n        if (sort || orderChanged) this.trigger('sort', this, options);\n        if (toAdd.length || toRemove.length || toMerge.length) {\n          options.changes = {\n            added: toAdd,\n            removed: toRemove,\n            merged: toMerge\n          };\n          this.trigger('update', this, options);\n        }\n      }\n\n      // Return the added (or merged) model (or models).\n      return singular ? models[0] : models;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any granular `add` or `remove` events. Fires `reset` when finished.\n    // Useful for bulk operations and optimizations.\n    reset: function(models, options) {\n      options = options ? _.clone(options) : {};\n      for (var i = 0; i < this.models.length; i++) {\n        this._removeReference(this.models[i], options);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      models = this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return models;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      return this.add(model, _.extend({at: this.length}, options));\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      return this.remove(model, options);\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      return this.add(model, _.extend({at: 0}, options));\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      return this.remove(model, options);\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function() {\n      return slice.apply(this.models, arguments);\n    },\n\n    // Get a model from the set by id, cid, model object with id or cid\n    // properties, or an attributes object that is transformed through modelId.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      return this._byId[obj] ||\n        this._byId[this.modelId(obj.attributes || obj)] ||\n        obj.cid && this._byId[obj.cid];\n    },\n\n    // Returns `true` if the model is in the collection.\n    has: function(obj) {\n      return this.get(obj) != null;\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      if (index < 0) index += this.length;\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of\n    // `filter`.\n    where: function(attrs, first) {\n      return this[first ? 'find' : 'filter'](attrs);\n    },\n\n    // Return the first model with matching attributes. Useful for simple cases\n    // of `find`.\n    findWhere: function(attrs) {\n      return this.where(attrs, true);\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      var comparator = this.comparator;\n      if (!comparator) throw new Error('Cannot sort a set without a comparator');\n      options || (options = {});\n\n      var length = comparator.length;\n      if (_.isFunction(comparator)) comparator = _.bind(comparator, this);\n\n      // Run sort based on type of `comparator`.\n      if (length === 1 || _.isString(comparator)) {\n        this.models = this.sortBy(comparator);\n      } else {\n        this.models.sort(comparator);\n      }\n      if (!options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return this.map(attr + '');\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `reset: true` is passed, the response\n    // data will be passed through the `reset` method instead of `set`.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var success = options.success;\n      var collection = this;\n      options.success = function(resp) {\n        var method = options.reset ? 'reset' : 'set';\n        collection[method](resp, options);\n        if (success) success.call(options.context, collection, resp, options);\n        collection.trigger('sync', collection, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      options = options ? _.clone(options) : {};\n      var wait = options.wait;\n      model = this._prepareModel(model, options);\n      if (!model) return false;\n      if (!wait) this.add(model, options);\n      var collection = this;\n      var success = options.success;\n      options.success = function(m, resp, callbackOpts) {\n        if (wait) collection.add(m, callbackOpts);\n        if (success) success.call(callbackOpts.context, m, resp, callbackOpts);\n      };\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models, {\n        model: this.model,\n        comparator: this.comparator\n      });\n    },\n\n    // Define how to uniquely identify models in the collection.\n    modelId: function(attrs) {\n      return attrs[this.model.prototype.idAttribute || 'id'];\n    },\n\n    // Private method to reset all internal state. Called when the collection\n    // is first initialized or reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n    },\n\n    // Prepare a hash of attributes (or other model) to be added to this\n    // collection.\n    _prepareModel: function(attrs, options) {\n      if (this._isModel(attrs)) {\n        if (!attrs.collection) attrs.collection = this;\n        return attrs;\n      }\n      options = options ? _.clone(options) : {};\n      options.collection = this;\n      var model = new this.model(attrs, options);\n      if (!model.validationError) return model;\n      this.trigger('invalid', this, model.validationError, options);\n      return false;\n    },\n\n    // Internal method called by both remove and set.\n    _removeModels: function(models, options) {\n      var removed = [];\n      for (var i = 0; i < models.length; i++) {\n        var model = this.get(models[i]);\n        if (!model) continue;\n\n        var index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n\n        // Remove references before triggering 'remove' event to prevent an\n        // infinite loop. #3693\n        delete this._byId[model.cid];\n        var id = this.modelId(model.attributes);\n        if (id != null) delete this._byId[id];\n\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n\n        removed.push(model);\n        this._removeReference(model, options);\n      }\n      return removed;\n    },\n\n    // Method for checking whether an object should be considered a model for\n    // the purposes of adding to the collection.\n    _isModel: function(model) {\n      return model instanceof Model;\n    },\n\n    // Internal method to create a model's ties to a collection.\n    _addReference: function(model, options) {\n      this._byId[model.cid] = model;\n      var id = this.modelId(model.attributes);\n      if (id != null) this._byId[id] = model;\n      model.on('all', this._onModelEvent, this);\n    },\n\n    // Internal method to sever a model's ties to a collection.\n    _removeReference: function(model, options) {\n      delete this._byId[model.cid];\n      var id = this.modelId(model.attributes);\n      if (id != null) delete this._byId[id];\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if (model) {\n        if ((event === 'add' || event === 'remove') && collection !== this) return;\n        if (event === 'destroy') this.remove(model, options);\n        if (event === 'change') {\n          var prevId = this.modelId(model.previousAttributes());\n          var id = this.modelId(model.attributes);\n          if (prevId !== id) {\n            if (prevId != null) delete this._byId[prevId];\n            if (id != null) this._byId[id] = model;\n          }\n        }\n      }\n      this.trigger.apply(this, arguments);\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  var collectionMethods = {forEach: 3, each: 3, map: 3, collect: 3, reduce: 0,\n      foldl: 0, inject: 0, reduceRight: 0, foldr: 0, find: 3, detect: 3, filter: 3,\n      select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,\n      contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,\n      head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,\n      without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,\n      isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,\n      sortBy: 3, indexBy: 3, findIndex: 3, findLastIndex: 3};\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  addUnderscoreMethods(Collection, collectionMethods, 'models');\n\n  // Backbone.View\n  // -------------\n\n  // Backbone Views are almost more convention than they are actual code. A View\n  // is simply a JavaScript object that represents a logical chunk of UI in the\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\n  // UI as a **View** allows you to define your DOM events declaratively, without\n  // having to worry about render order ... and makes it easy for the view to\n  // react to specific changes in the state of your models.\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    _.extend(this, _.pick(options, viewOptions));\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be set as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be preferred to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this._removeElement();\n      this.stopListening();\n      return this;\n    },\n\n    // Remove this view's element from the document and all event listeners\n    // attached to it. Exposed for subclasses using an alternative DOM\n    // manipulation API.\n    _removeElement: function() {\n      this.$el.remove();\n    },\n\n    // Change the view's element (`this.el` property) and re-delegate the\n    // view's events on the new element.\n    setElement: function(element) {\n      this.undelegateEvents();\n      this._setElement(element);\n      this.delegateEvents();\n      return this;\n    },\n\n    // Creates the `this.el` and `this.$el` references for this view using the\n    // given `el`. `el` can be a CSS selector or an HTML string, a jQuery\n    // context or an element. Subclasses can override this to utilize an\n    // alternative DOM manipulation API and are only required to set the\n    // `this.el` property.\n    _setElement: function(el) {\n      this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\n      this.el = this.$el[0];\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save',\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    delegateEvents: function(events) {\n      events || (events = _.result(this, 'events'));\n      if (!events) return this;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[method];\n        if (!method) continue;\n        var match = key.match(delegateEventSplitter);\n        this.delegate(match[1], match[2], _.bind(method, this));\n      }\n      return this;\n    },\n\n    // Add a single event listener to the view's element (or a child element\n    // using `selector`). This only works for delegate-able events: not `focus`,\n    // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\n    delegate: function(eventName, selector, listener) {\n      this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Clears all callbacks previously bound to the view by `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      if (this.$el) this.$el.off('.delegateEvents' + this.cid);\n      return this;\n    },\n\n    // A finer-grained `undelegateEvents` for removing a single delegated event.\n    // `selector` and `listener` are both optional.\n    undelegate: function(eventName, selector, listener) {\n      this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Produces a DOM element to be assigned to your view. Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _createElement: function(tagName) {\n      return document.createElement(tagName);\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        this.setElement(this._createElement(_.result(this, 'tagName')));\n        this._setAttributes(attrs);\n      } else {\n        this.setElement(_.result(this, 'el'));\n      }\n    },\n\n    // Set attributes from a hash on this view's element.  Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _setAttributes: function(attributes) {\n      this.$el.attr(attributes);\n    }\n\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    // Pass along `textStatus` and `errorThrown` from jQuery.\n    var error = options.error;\n    options.error = function(xhr, textStatus, errorThrown) {\n      options.textStatus = textStatus;\n      options.errorThrown = errorThrown;\n      if (error) error.call(options.context, xhr, textStatus, errorThrown);\n    };\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    'create': 'POST',\n    'update': 'PUT',\n    'patch': 'PATCH',\n    'delete': 'DELETE',\n    'read': 'GET'\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  // Override this if you'd like to use a different library.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /(\\(\\?)?:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n      if (!callback) callback = this[name];\n      var router = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = router._extractParameters(route, fragment);\n        if (router.execute(callback, args, name) !== false) {\n          router.trigger.apply(router, ['route:' + name].concat(args));\n          router.trigger('route', name, args);\n          Backbone.history.trigger('route', router, name, args);\n        }\n      });\n      return this;\n    },\n\n    // Execute a route handler with the provided parameters.  This is an\n    // excellent place to do pre-route setup or post-route cleanup.\n    execute: function(callback, args, name) {\n      if (callback) callback.apply(this, args);\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      this.routes = _.result(this, 'routes');\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n                   .replace(optionalParam, '(?:$1)?')\n                   .replace(namedParam, function(match, optional) {\n                     return optional ? match : '([^/?]+)';\n                   })\n                   .replace(splatParam, '([^?]*?)');\n      return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted decoded parameters. Empty or unmatched parameters will be\n    // treated as `null` to normalize cross-browser behavior.\n    _extractParameters: function(route, fragment) {\n      var params = route.exec(fragment).slice(1);\n      return _.map(params, function(param, i) {\n        // Don't decode the search params.\n        if (i === params.length - 1) return param || null;\n        return param ? decodeURIComponent(param) : null;\n      });\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on either\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n  // and URL fragments. If the browser supports neither (old IE, natch),\n  // falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    this.checkUrl = _.bind(this.checkUrl, this);\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for stripping urls of hash.\n  var pathStripper = /#.*$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Are we at the app root?\n    atRoot: function() {\n      var path = this.location.pathname.replace(/[^\\/]$/, '$&/');\n      return path === this.root && !this.getSearch();\n    },\n\n    // Does the pathname match the root?\n    matchRoot: function() {\n      var path = this.decodeFragment(this.location.pathname);\n      var rootPath = path.slice(0, this.root.length - 1) + '/';\n      return rootPath === this.root;\n    },\n\n    // Unicode characters in `location.pathname` are percent encoded so they're\n    // decoded for comparison. `%25` should not be decoded since it may be part\n    // of an encoded parameter.\n    decodeFragment: function(fragment) {\n      return decodeURI(fragment.replace(/%25/g, '%2525'));\n    },\n\n    // In IE6, the hash fragment and search params are incorrect if the\n    // fragment contains `?`.\n    getSearch: function() {\n      var match = this.location.href.replace(/#.*/, '').match(/\\?.+/);\n      return match ? match[0] : '';\n    },\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the pathname and search params, without the root.\n    getPath: function() {\n      var path = this.decodeFragment(\n        this.location.pathname + this.getSearch()\n      ).slice(this.root.length - 1);\n      return path.charAt(0) === '/' ? path.slice(1) : path;\n    },\n\n    // Get the cross-browser normalized URL fragment from the path or hash.\n    getFragment: function(fragment) {\n      if (fragment == null) {\n        if (this._usePushState || !this._wantsHashChange) {\n          fragment = this.getPath();\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error('Backbone.history has already been started');\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);\n      this._useHashChange   = this._wantsHashChange && this._hasHashChange;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.history && this.history.pushState);\n      this._usePushState    = this._wantsPushState && this._hasPushState;\n      this.fragment         = this.getFragment();\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      // Transition from hashChange to pushState or vice versa if both are\n      // requested.\n      if (this._wantsHashChange && this._wantsPushState) {\n\n        // If we've started off with a route from a `pushState`-enabled\n        // browser, but we're currently in a browser that doesn't support it...\n        if (!this._hasPushState && !this.atRoot()) {\n          var rootPath = this.root.slice(0, -1) || '/';\n          this.location.replace(rootPath + '#' + this.getPath());\n          // Return immediately as browser will do redirect to new url\n          return true;\n\n        // Or if we've started out with a hash-based route, but we're currently\n        // in a browser where it could be `pushState`-based instead...\n        } else if (this._hasPushState && this.atRoot()) {\n          this.navigate(this.getHash(), {replace: true});\n        }\n\n      }\n\n      // Proxy an iframe to handle location events if the browser doesn't\n      // support the `hashchange` event, HTML5 history, or the user wants\n      // `hashChange` but not `pushState`.\n      if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {\n        this.iframe = document.createElement('iframe');\n        this.iframe.src = 'javascript:0';\n        this.iframe.style.display = 'none';\n        this.iframe.tabIndex = -1;\n        var body = document.body;\n        // Using `appendChild` will throw on IE < 9 if the document is not ready.\n        var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;\n        iWindow.document.open();\n        iWindow.document.close();\n        iWindow.location.hash = '#' + this.fragment;\n      }\n\n      // Add a cross-platform `addEventListener` shim for older browsers.\n      var addEventListener = window.addEventListener || function(eventName, listener) {\n        return attachEvent('on' + eventName, listener);\n      };\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._usePushState) {\n        addEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        addEventListener('hashchange', this.checkUrl, false);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      // Add a cross-platform `removeEventListener` shim for older browsers.\n      var removeEventListener = window.removeEventListener || function(eventName, listener) {\n        return detachEvent('on' + eventName, listener);\n      };\n\n      // Remove window listeners.\n      if (this._usePushState) {\n        removeEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        removeEventListener('hashchange', this.checkUrl, false);\n      }\n\n      // Clean up the iframe if necessary.\n      if (this.iframe) {\n        document.body.removeChild(this.iframe);\n        this.iframe = null;\n      }\n\n      // Some environments will throw when clearing an undefined interval.\n      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n\n      // If the user pressed the back button, the iframe's hash will have\n      // changed and we should use that for comparison.\n      if (current === this.fragment && this.iframe) {\n        current = this.getHash(this.iframe.contentWindow);\n      }\n\n      if (current === this.fragment) return false;\n      if (this.iframe) this.navigate(current);\n      this.loadUrl();\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragment) {\n      // If the root doesn't match, no routes can match either.\n      if (!this.matchRoot()) return false;\n      fragment = this.fragment = this.getFragment(fragment);\n      return _.some(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      });\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: !!options};\n\n      // Normalize the fragment.\n      fragment = this.getFragment(fragment || '');\n\n      // Don't include a trailing slash on the root.\n      var rootPath = this.root;\n      if (fragment === '' || fragment.charAt(0) === '?') {\n        rootPath = rootPath.slice(0, -1) || '/';\n      }\n      var url = rootPath + fragment;\n\n      // Strip the hash and decode for matching.\n      fragment = this.decodeFragment(fragment.replace(pathStripper, ''));\n\n      if (this.fragment === fragment) return;\n      this.fragment = fragment;\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._usePushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && fragment !== this.getHash(this.iframe.contentWindow)) {\n          var iWindow = this.iframe.contentWindow;\n\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if (!options.replace) {\n            iWindow.document.open();\n            iWindow.document.close();\n          }\n\n          this._updateHash(iWindow.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) return this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ return parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function and add the prototype properties.\n    child.prototype = _.create(parent.prototype, protoProps);\n    child.prototype.constructor = child;\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // Wrap an optional error callback with a fallback error event.\n  var wrapError = function(model, options) {\n    var error = options.error;\n    options.error = function(resp) {\n      if (error) error.call(options.context, model, resp, options);\n      model.trigger('error', model, resp, options);\n    };\n  };\n\n  return Backbone;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./~/backbone/backbone.js","/* global Popper */\n\nimport Util from './util'\n\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.0.0-beta): tooltip.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst Tooltip = (($) => {\n\n  /**\n   * Check for Popper dependency\n   * Popper - https://popper.js.org\n   */\n  if (typeof Popper === 'undefined') {\n    throw new Error('Bootstrap tooltips require Popper.js (https://popper.js.org)')\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME                = 'tooltip'\n  const VERSION             = '4.0.0-beta'\n  const DATA_KEY            = 'bs.tooltip'\n  const EVENT_KEY           = `.${DATA_KEY}`\n  const JQUERY_NO_CONFLICT  = $.fn[NAME]\n  const TRANSITION_DURATION = 150\n  const CLASS_PREFIX        = 'bs-tooltip'\n  const BSCLS_PREFIX_REGEX = new RegExp(`(^|\\\\s)${CLASS_PREFIX}\\\\S+`, 'g')\n\n  const DefaultType = {\n    animation           : 'boolean',\n    template            : 'string',\n    title               : '(string|element|function)',\n    trigger             : 'string',\n    delay               : '(number|object)',\n    html                : 'boolean',\n    selector            : '(string|boolean)',\n    placement           : '(string|function)',\n    offset              : '(number|string)',\n    container           : '(string|element|boolean)',\n    fallbackPlacement   : '(string|array)'\n  }\n\n  const AttachmentMap = {\n    AUTO   : 'auto',\n    TOP    : 'top',\n    RIGHT  : 'right',\n    BOTTOM : 'bottom',\n    LEFT   : 'left'\n  }\n\n  const Default = {\n    animation           : true,\n    template            : '<div class=\"tooltip\" role=\"tooltip\">'\n                        + '<div class=\"arrow\"></div>'\n                        + '<div class=\"tooltip-inner\"></div></div>',\n    trigger             : 'hover focus',\n    title               : '',\n    delay               : 0,\n    html                : false,\n    selector            : false,\n    placement           : 'top',\n    offset              : 0,\n    container           : false,\n    fallbackPlacement   : 'flip'\n  }\n\n  const HoverState = {\n    SHOW : 'show',\n    OUT  : 'out'\n  }\n\n  const Event = {\n    HIDE       : `hide${EVENT_KEY}`,\n    HIDDEN     : `hidden${EVENT_KEY}`,\n    SHOW       : `show${EVENT_KEY}`,\n    SHOWN      : `shown${EVENT_KEY}`,\n    INSERTED   : `inserted${EVENT_KEY}`,\n    CLICK      : `click${EVENT_KEY}`,\n    FOCUSIN    : `focusin${EVENT_KEY}`,\n    FOCUSOUT   : `focusout${EVENT_KEY}`,\n    MOUSEENTER : `mouseenter${EVENT_KEY}`,\n    MOUSELEAVE : `mouseleave${EVENT_KEY}`\n  }\n\n  const ClassName = {\n    FADE : 'fade',\n    SHOW : 'show'\n  }\n\n  const Selector = {\n    TOOLTIP       : '.tooltip',\n    TOOLTIP_INNER : '.tooltip-inner',\n    ARROW         : '.arrow'\n  }\n\n  const Trigger = {\n    HOVER  : 'hover',\n    FOCUS  : 'focus',\n    CLICK  : 'click',\n    MANUAL : 'manual'\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Tooltip {\n\n    constructor(element, config) {\n\n      // private\n      this._isEnabled     = true\n      this._timeout       = 0\n      this._hoverState    = ''\n      this._activeTrigger = {}\n      this._popper        = null\n\n      // protected\n      this.element = element\n      this.config  = this._getConfig(config)\n      this.tip     = null\n\n      this._setListeners()\n\n    }\n\n\n    // getters\n\n    static get VERSION() {\n      return VERSION\n    }\n\n    static get Default() {\n      return Default\n    }\n\n    static get NAME() {\n      return NAME\n    }\n\n    static get DATA_KEY() {\n      return DATA_KEY\n    }\n\n    static get Event() {\n      return Event\n    }\n\n    static get EVENT_KEY() {\n      return EVENT_KEY\n    }\n\n    static get DefaultType() {\n      return DefaultType\n    }\n\n\n    // public\n\n    enable() {\n      this._isEnabled = true\n    }\n\n    disable() {\n      this._isEnabled = false\n    }\n\n    toggleEnabled() {\n      this._isEnabled = !this._isEnabled\n    }\n\n    toggle(event) {\n      if (event) {\n        const dataKey = this.constructor.DATA_KEY\n        let context = $(event.currentTarget).data(dataKey)\n\n        if (!context) {\n          context = new this.constructor(\n            event.currentTarget,\n            this._getDelegateConfig()\n          )\n          $(event.currentTarget).data(dataKey, context)\n        }\n\n        context._activeTrigger.click = !context._activeTrigger.click\n\n        if (context._isWithActiveTrigger()) {\n          context._enter(null, context)\n        } else {\n          context._leave(null, context)\n        }\n\n      } else {\n\n        if ($(this.getTipElement()).hasClass(ClassName.SHOW)) {\n          this._leave(null, this)\n          return\n        }\n\n        this._enter(null, this)\n      }\n    }\n\n    dispose() {\n      clearTimeout(this._timeout)\n\n      $.removeData(this.element, this.constructor.DATA_KEY)\n\n      $(this.element).off(this.constructor.EVENT_KEY)\n      $(this.element).closest('.modal').off('hide.bs.modal')\n\n      if (this.tip) {\n        $(this.tip).remove()\n      }\n\n      this._isEnabled     = null\n      this._timeout       = null\n      this._hoverState    = null\n      this._activeTrigger = null\n      if (this._popper !== null) {\n        this._popper.destroy()\n      }\n      this._popper        = null\n\n      this.element = null\n      this.config  = null\n      this.tip     = null\n    }\n\n    show() {\n      if ($(this.element).css('display') === 'none') {\n        throw new Error('Please use show on visible elements')\n      }\n\n      const showEvent = $.Event(this.constructor.Event.SHOW)\n      if (this.isWithContent() && this._isEnabled) {\n        $(this.element).trigger(showEvent)\n\n        const isInTheDom = $.contains(\n          this.element.ownerDocument.documentElement,\n          this.element\n        )\n\n        if (showEvent.isDefaultPrevented() || !isInTheDom) {\n          return\n        }\n\n        const tip   = this.getTipElement()\n        const tipId = Util.getUID(this.constructor.NAME)\n\n        tip.setAttribute('id', tipId)\n        this.element.setAttribute('aria-describedby', tipId)\n\n        this.setContent()\n\n        if (this.config.animation) {\n          $(tip).addClass(ClassName.FADE)\n        }\n\n        const placement  = typeof this.config.placement === 'function' ?\n          this.config.placement.call(this, tip, this.element) :\n          this.config.placement\n\n        const attachment = this._getAttachment(placement)\n        this.addAttachmentClass(attachment)\n\n        const container = this.config.container === false ? document.body : $(this.config.container)\n\n        $(tip).data(this.constructor.DATA_KEY, this)\n\n        if (!$.contains(this.element.ownerDocument.documentElement, this.tip)) {\n          $(tip).appendTo(container)\n        }\n\n        $(this.element).trigger(this.constructor.Event.INSERTED)\n\n        this._popper = new Popper(this.element, tip, {\n          placement: attachment,\n          modifiers: {\n            offset: {\n              offset: this.config.offset\n            },\n            flip: {\n              behavior: this.config.fallbackPlacement\n            },\n            arrow: {\n              element: Selector.ARROW\n            }\n          },\n          onCreate: (data) => {\n            if (data.originalPlacement !== data.placement) {\n              this._handlePopperPlacementChange(data)\n            }\n          },\n          onUpdate : (data) => {\n            this._handlePopperPlacementChange(data)\n          }\n        })\n\n        $(tip).addClass(ClassName.SHOW)\n\n        // if this is a touch-enabled device we add extra\n        // empty mouseover listeners to the body's immediate children;\n        // only needed because of broken event delegation on iOS\n        // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n        if ('ontouchstart' in document.documentElement) {\n          $('body').children().on('mouseover', null, $.noop)\n        }\n\n        const complete = () => {\n          if (this.config.animation) {\n            this._fixTransition()\n          }\n          const prevHoverState = this._hoverState\n          this._hoverState     = null\n\n          $(this.element).trigger(this.constructor.Event.SHOWN)\n\n          if (prevHoverState === HoverState.OUT) {\n            this._leave(null, this)\n          }\n        }\n\n        if (Util.supportsTransitionEnd() && $(this.tip).hasClass(ClassName.FADE)) {\n          $(this.tip)\n            .one(Util.TRANSITION_END, complete)\n            .emulateTransitionEnd(Tooltip._TRANSITION_DURATION)\n        } else {\n          complete()\n        }\n      }\n    }\n\n    hide(callback) {\n      const tip       = this.getTipElement()\n      const hideEvent = $.Event(this.constructor.Event.HIDE)\n      const complete  = () => {\n        if (this._hoverState !== HoverState.SHOW && tip.parentNode) {\n          tip.parentNode.removeChild(tip)\n        }\n\n        this._cleanTipClass()\n        this.element.removeAttribute('aria-describedby')\n        $(this.element).trigger(this.constructor.Event.HIDDEN)\n        if (this._popper !== null) {\n          this._popper.destroy()\n        }\n\n        if (callback) {\n          callback()\n        }\n      }\n\n      $(this.element).trigger(hideEvent)\n\n      if (hideEvent.isDefaultPrevented()) {\n        return\n      }\n\n      $(tip).removeClass(ClassName.SHOW)\n\n      // if this is a touch-enabled device we remove the extra\n      // empty mouseover listeners we added for iOS support\n      if ('ontouchstart' in document.documentElement) {\n        $('body').children().off('mouseover', null, $.noop)\n      }\n\n      this._activeTrigger[Trigger.CLICK] = false\n      this._activeTrigger[Trigger.FOCUS] = false\n      this._activeTrigger[Trigger.HOVER] = false\n\n      if (Util.supportsTransitionEnd() &&\n          $(this.tip).hasClass(ClassName.FADE)) {\n\n        $(tip)\n          .one(Util.TRANSITION_END, complete)\n          .emulateTransitionEnd(TRANSITION_DURATION)\n\n      } else {\n        complete()\n      }\n\n      this._hoverState = ''\n\n    }\n\n    update() {\n      if (this._popper !== null) {\n        this._popper.scheduleUpdate()\n      }\n    }\n\n    // protected\n\n    isWithContent() {\n      return Boolean(this.getTitle())\n    }\n\n    addAttachmentClass(attachment) {\n      $(this.getTipElement()).addClass(`${CLASS_PREFIX}-${attachment}`)\n    }\n\n    getTipElement() {\n      return this.tip = this.tip || $(this.config.template)[0]\n    }\n\n    setContent() {\n      const $tip = $(this.getTipElement())\n      this.setElementContent($tip.find(Selector.TOOLTIP_INNER), this.getTitle())\n      $tip.removeClass(`${ClassName.FADE} ${ClassName.SHOW}`)\n    }\n\n    setElementContent($element, content) {\n      const html = this.config.html\n      if (typeof content === 'object' && (content.nodeType || content.jquery)) {\n        // content is a DOM node or a jQuery\n        if (html) {\n          if (!$(content).parent().is($element)) {\n            $element.empty().append(content)\n          }\n        } else {\n          $element.text($(content).text())\n        }\n      } else {\n        $element[html ? 'html' : 'text'](content)\n      }\n    }\n\n    getTitle() {\n      let title = this.element.getAttribute('data-original-title')\n\n      if (!title) {\n        title = typeof this.config.title === 'function' ?\n          this.config.title.call(this.element) :\n          this.config.title\n      }\n\n      return title\n    }\n\n\n    // private\n\n    _getAttachment(placement) {\n      return AttachmentMap[placement.toUpperCase()]\n    }\n\n    _setListeners() {\n      const triggers = this.config.trigger.split(' ')\n\n      triggers.forEach((trigger) => {\n        if (trigger === 'click') {\n          $(this.element).on(\n            this.constructor.Event.CLICK,\n            this.config.selector,\n            (event) => this.toggle(event)\n          )\n\n        } else if (trigger !== Trigger.MANUAL) {\n          const eventIn  = trigger === Trigger.HOVER ?\n            this.constructor.Event.MOUSEENTER :\n            this.constructor.Event.FOCUSIN\n          const eventOut = trigger === Trigger.HOVER ?\n            this.constructor.Event.MOUSELEAVE :\n            this.constructor.Event.FOCUSOUT\n\n          $(this.element)\n            .on(\n              eventIn,\n              this.config.selector,\n              (event) => this._enter(event)\n            )\n            .on(\n              eventOut,\n              this.config.selector,\n              (event) => this._leave(event)\n            )\n        }\n\n        $(this.element).closest('.modal').on(\n          'hide.bs.modal',\n          () => this.hide()\n        )\n      })\n\n      if (this.config.selector) {\n        this.config = $.extend({}, this.config, {\n          trigger  : 'manual',\n          selector : ''\n        })\n      } else {\n        this._fixTitle()\n      }\n    }\n\n    _fixTitle() {\n      const titleType = typeof this.element.getAttribute('data-original-title')\n      if (this.element.getAttribute('title') ||\n         titleType !== 'string') {\n        this.element.setAttribute(\n          'data-original-title',\n          this.element.getAttribute('title') || ''\n        )\n        this.element.setAttribute('title', '')\n      }\n    }\n\n    _enter(event, context) {\n      const dataKey = this.constructor.DATA_KEY\n\n      context = context || $(event.currentTarget).data(dataKey)\n\n      if (!context) {\n        context = new this.constructor(\n          event.currentTarget,\n          this._getDelegateConfig()\n        )\n        $(event.currentTarget).data(dataKey, context)\n      }\n\n      if (event) {\n        context._activeTrigger[\n          event.type === 'focusin' ? Trigger.FOCUS : Trigger.HOVER\n        ] = true\n      }\n\n      if ($(context.getTipElement()).hasClass(ClassName.SHOW) ||\n         context._hoverState === HoverState.SHOW) {\n        context._hoverState = HoverState.SHOW\n        return\n      }\n\n      clearTimeout(context._timeout)\n\n      context._hoverState = HoverState.SHOW\n\n      if (!context.config.delay || !context.config.delay.show) {\n        context.show()\n        return\n      }\n\n      context._timeout = setTimeout(() => {\n        if (context._hoverState === HoverState.SHOW) {\n          context.show()\n        }\n      }, context.config.delay.show)\n    }\n\n    _leave(event, context) {\n      const dataKey = this.constructor.DATA_KEY\n\n      context = context || $(event.currentTarget).data(dataKey)\n\n      if (!context) {\n        context = new this.constructor(\n          event.currentTarget,\n          this._getDelegateConfig()\n        )\n        $(event.currentTarget).data(dataKey, context)\n      }\n\n      if (event) {\n        context._activeTrigger[\n          event.type === 'focusout' ? Trigger.FOCUS : Trigger.HOVER\n        ] = false\n      }\n\n      if (context._isWithActiveTrigger()) {\n        return\n      }\n\n      clearTimeout(context._timeout)\n\n      context._hoverState = HoverState.OUT\n\n      if (!context.config.delay || !context.config.delay.hide) {\n        context.hide()\n        return\n      }\n\n      context._timeout = setTimeout(() => {\n        if (context._hoverState === HoverState.OUT) {\n          context.hide()\n        }\n      }, context.config.delay.hide)\n    }\n\n    _isWithActiveTrigger() {\n      for (const trigger in this._activeTrigger) {\n        if (this._activeTrigger[trigger]) {\n          return true\n        }\n      }\n\n      return false\n    }\n\n    _getConfig(config) {\n      config = $.extend(\n        {},\n        this.constructor.Default,\n        $(this.element).data(),\n        config\n      )\n\n      if (config.delay && typeof config.delay === 'number') {\n        config.delay = {\n          show : config.delay,\n          hide : config.delay\n        }\n      }\n\n      if (config.title && typeof config.title === 'number') {\n        config.title = config.title.toString()\n      }\n\n      if (config.content && typeof config.content === 'number') {\n        config.content = config.content.toString()\n      }\n\n      Util.typeCheckConfig(\n        NAME,\n        config,\n        this.constructor.DefaultType\n      )\n\n      return config\n    }\n\n    _getDelegateConfig() {\n      const config = {}\n\n      if (this.config) {\n        for (const key in this.config) {\n          if (this.constructor.Default[key] !== this.config[key]) {\n            config[key] = this.config[key]\n          }\n        }\n      }\n\n      return config\n    }\n\n    _cleanTipClass() {\n      const $tip = $(this.getTipElement())\n      const tabClass = $tip.attr('class').match(BSCLS_PREFIX_REGEX)\n      if (tabClass !== null && tabClass.length > 0) {\n        $tip.removeClass(tabClass.join(''))\n      }\n    }\n\n    _handlePopperPlacementChange(data) {\n      this._cleanTipClass()\n      this.addAttachmentClass(this._getAttachment(data.placement))\n    }\n\n    _fixTransition() {\n      const tip                 = this.getTipElement()\n      const initConfigAnimation = this.config.animation\n      if (tip.getAttribute('x-placement') !== null) {\n        return\n      }\n      $(tip).removeClass(ClassName.FADE)\n      this.config.animation = false\n      this.hide()\n      this.show()\n      this.config.animation = initConfigAnimation\n    }\n\n    // static\n\n    static _jQueryInterface(config) {\n      return this.each(function () {\n        let data      = $(this).data(DATA_KEY)\n        const _config = typeof config === 'object' && config\n\n        if (!data && /dispose|hide/.test(config)) {\n          return\n        }\n\n        if (!data) {\n          data = new Tooltip(this, _config)\n          $(this).data(DATA_KEY, data)\n        }\n\n        if (typeof config === 'string') {\n          if (data[config] === undefined) {\n            throw new Error(`No method named \"${config}\"`)\n          }\n          data[config]()\n        }\n      })\n    }\n\n  }\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = Tooltip._jQueryInterface\n  $.fn[NAME].Constructor = Tooltip\n  $.fn[NAME].noConflict  = function () {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return Tooltip._jQueryInterface\n  }\n\n  return Tooltip\n\n})(jQuery)\n\nexport default Tooltip\n\n\n\n// WEBPACK FOOTER //\n// ./~/bootstrap/js/src/tooltip.js","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.0.0-beta): util.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst Util = (($) => {\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Private TransitionEnd Helpers\n   * ------------------------------------------------------------------------\n   */\n\n  let transition = false\n\n  const MAX_UID = 1000000\n\n  const TransitionEndEvent = {\n    WebkitTransition : 'webkitTransitionEnd',\n    MozTransition    : 'transitionend',\n    OTransition      : 'oTransitionEnd otransitionend',\n    transition       : 'transitionend'\n  }\n\n  // shoutout AngusCroll (https://goo.gl/pxwQGp)\n  function toType(obj) {\n    return {}.toString.call(obj).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()\n  }\n\n  function isElement(obj) {\n    return (obj[0] || obj).nodeType\n  }\n\n  function getSpecialTransitionEndEvent() {\n    return {\n      bindType: transition.end,\n      delegateType: transition.end,\n      handle(event) {\n        if ($(event.target).is(this)) {\n          return event.handleObj.handler.apply(this, arguments) // eslint-disable-line prefer-rest-params\n        }\n        return undefined\n      }\n    }\n  }\n\n  function transitionEndTest() {\n    if (window.QUnit) {\n      return false\n    }\n\n    const el = document.createElement('bootstrap')\n\n    for (const name in TransitionEndEvent) {\n      if (el.style[name] !== undefined) {\n        return {\n          end: TransitionEndEvent[name]\n        }\n      }\n    }\n\n    return false\n  }\n\n  function transitionEndEmulator(duration) {\n    let called = false\n\n    $(this).one(Util.TRANSITION_END, () => {\n      called = true\n    })\n\n    setTimeout(() => {\n      if (!called) {\n        Util.triggerTransitionEnd(this)\n      }\n    }, duration)\n\n    return this\n  }\n\n  function setTransitionEndSupport() {\n    transition = transitionEndTest()\n\n    $.fn.emulateTransitionEnd = transitionEndEmulator\n\n    if (Util.supportsTransitionEnd()) {\n      $.event.special[Util.TRANSITION_END] = getSpecialTransitionEndEvent()\n    }\n  }\n\n\n  /**\n   * --------------------------------------------------------------------------\n   * Public Util Api\n   * --------------------------------------------------------------------------\n   */\n\n  const Util = {\n\n    TRANSITION_END: 'bsTransitionEnd',\n\n    getUID(prefix) {\n      do {\n        // eslint-disable-next-line no-bitwise\n        prefix += ~~(Math.random() * MAX_UID) // \"~~\" acts like a faster Math.floor() here\n      } while (document.getElementById(prefix))\n      return prefix\n    },\n\n    getSelectorFromElement(element) {\n      let selector = element.getAttribute('data-target')\n      if (!selector || selector === '#') {\n        selector = element.getAttribute('href') || ''\n      }\n\n      try {\n        const $selector = $(selector)\n        return $selector.length > 0 ? selector : null\n      } catch (error) {\n        return null\n      }\n    },\n\n    reflow(element) {\n      return element.offsetHeight\n    },\n\n    triggerTransitionEnd(element) {\n      $(element).trigger(transition.end)\n    },\n\n    supportsTransitionEnd() {\n      return Boolean(transition)\n    },\n\n    typeCheckConfig(componentName, config, configTypes) {\n      for (const property in configTypes) {\n        if (configTypes.hasOwnProperty(property)) {\n          const expectedTypes = configTypes[property]\n          const value         = config[property]\n          const valueType     = value && isElement(value) ?\n                                'element' : toType(value)\n\n          if (!new RegExp(expectedTypes).test(valueType)) {\n            throw new Error(\n              `${componentName.toUpperCase()}: ` +\n              `Option \"${property}\" provided type \"${valueType}\" ` +\n              `but expected type \"${expectedTypes}\".`)\n          }\n        }\n      }\n    }\n  }\n\n  setTransitionEndSupport()\n\n  return Util\n\n})(jQuery)\n\nexport default Util\n\n\n\n// WEBPACK FOOTER //\n// ./~/bootstrap/js/src/util.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/css-loader/lib/css-base.js","module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(313);\n\tmodule.exports = __webpack_require__(313);\n\n\n/***/ }),\n\n/***/ 313:\n/***/ (function(module, exports) {\n\n\t(function( window, undefined ) {\n\t    kendo.cultures[\"fr-FR\"] = {\n\t        name: \"fr-FR\",\n\t        numberFormat: {\n\t            pattern: [\"-n\"],\n\t            decimals: 2,\n\t            \",\": \"\",\n\t            \".\": \",\",\n\t            groupSize: [3],\n\t            percent: {\n\t                pattern: [\"-n %\",\"n %\"],\n\t                decimals: 2,\n\t                \",\": \"\",\n\t                \".\": \",\",\n\t                groupSize: [3],\n\t                symbol: \"%\"\n\t            },\n\t            currency: {\n\t                name: \"Euro\",\n\t                abbr: \"EUR\",\n\t                pattern: [\"-n $\",\"n $\"],\n\t                decimals: 2,\n\t                \",\": \"\",\n\t                \".\": \",\",\n\t                groupSize: [3],\n\t                symbol: \"\"\n\t            }\n\t        },\n\t        calendars: {\n\t            standard: {\n\t                days: {\n\t                    names: [\"dimanche\",\"lundi\",\"mardi\",\"mercredi\",\"jeudi\",\"vendredi\",\"samedi\"],\n\t                    namesAbbr: [\"dim.\",\"lun.\",\"mar.\",\"mer.\",\"jeu.\",\"ven.\",\"sam.\"],\n\t                    namesShort: [\"di\",\"lu\",\"ma\",\"me\",\"je\",\"ve\",\"sa\"]\n\t                },\n\t                months: {\n\t                    names: [\"janvier\",\"fvrier\",\"mars\",\"avril\",\"mai\",\"juin\",\"juillet\",\"aot\",\"septembre\",\"octobre\",\"novembre\",\"dcembre\"],\n\t                    namesAbbr: [\"janv.\",\"fvr.\",\"mars\",\"avr.\",\"mai\",\"juin\",\"juil.\",\"aot\",\"sept.\",\"oct.\",\"nov.\",\"dc.\"]\n\t                },\n\t                AM: [\"\"],\n\t                PM: [\"\"],\n\t                patterns: {\n\t                    d: \"dd/MM/yyyy\",\n\t                    D: \"dddd d MMMM yyyy\",\n\t                    F: \"dddd d MMMM yyyy HH:mm:ss\",\n\t                    g: \"dd/MM/yyyy HH:mm\",\n\t                    G: \"dd/MM/yyyy HH:mm:ss\",\n\t                    m: \"d MMMM\",\n\t                    M: \"d MMMM\",\n\t                    s: \"yyyy'-'MM'-'dd'T'HH':'mm':'ss\",\n\t                    t: \"HH:mm\",\n\t                    T: \"HH:mm:ss\",\n\t                    u: \"yyyy'-'MM'-'dd HH':'mm':'ss'Z'\",\n\t                    y: \"MMMM yyyy\",\n\t                    Y: \"MMMM yyyy\"\n\t                },\n\t                \"/\": \"/\",\n\t                \":\": \":\",\n\t                firstDay: 1\n\t            }\n\t        }\n\t    }\n\t})(this);\n\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// ./~/kendo-ui-core/js/cultures/kendo.culture.fr-FR.js","/**\n * Script loading is difficult thanks to IE. We need callbacks to fire\n * immediately following the script's execution, with no other scripts\n * running in between. If other scripts on the page are able to run\n * between our script and its callback, bad things can happen, such as\n * `jQuery.noConflict` not being called in time, resulting in plugins\n * latching onto our version of jQuery, etc.\n *\n * For IE<10 we use a relatively well-documented \"preloading\" strategy,\n * which ensures that the script is ready to execute *before* appending\n * it to the DOM. That way when it is finally appended, it is\n * executed immediately.\n *\n * References:\n * - http://www.html5rocks.com/en/tutorials/speed/script-loading/\n * - http://blog.getify.com/ie11-please-bring-real-script-preloading-back/\n * - https://github.com/jrburke/requirejs/issues/526\n * - https://connect.microsoft.com/IE/feedback/details/729164/\n *           ie10-dynamic-script-element-fires-loaded-readystate-prematurely\n */\n(function () {\n\n  // Global state.\n  var pendingScripts = {};\n  var scriptCounter = 0;\n\n  /**\n   * Insert script into the DOM\n   *\n   * @param {Object} script Script DOM object\n   * @returns {void}\n   */\n  var _addScript = function (script) {\n    // Get the first script element, we're just going to use it\n    // as a reference for where to insert ours. Do NOT try to do\n    // this just once at the top and then re-use the same script\n    // as a reference later. Some weird loaders *remove* script\n    // elements after the browser has executed their contents,\n    // so the same reference might not have a parentNode later.\n    var firstScript = document.getElementsByTagName(\"script\")[0];\n\n    // Append the script to the DOM, triggering execution.\n    firstScript.parentNode.insertBefore(script, firstScript);\n  };\n\n  /**\n   * Load Script.\n   *\n   * @param {String}            src       URI of script\n   * @param {Function|Object}   callback  (Optional) Called on script load completion,\n   *                                      or options object\n   * @param {Object}            context   (Optional) Callback context (`this`)\n   * @returns {void}\n   */\n  var _lload = function (src, callback, context) {\n    /*eslint max-statements: [2, 32]*/\n    var setup;\n\n    if (callback && typeof callback !== \"function\") {\n      context = callback.context || context;\n      setup = callback.setup;\n      callback = callback.callback;\n    }\n\n    var script = document.createElement(\"script\");\n    var done = false;\n    var err;\n    var _cleanup; // _must_ be set below.\n\n    /**\n     * Final handler for error or completion.\n     *\n     * **Note**: Will only be called _once_.\n     *\n     * @returns {void}\n     */\n    var _finish = function () {\n      // Only call once.\n      if (done) { return; }\n      done = true;\n\n      // Internal cleanup.\n      _cleanup();\n\n      // Callback.\n      if (callback) {\n        callback.call(context, err);\n      }\n    };\n\n    /**\n     * Error handler\n     *\n     * @returns {void}\n     */\n    var _error = function () {\n      err = new Error(src || \"EMPTY\");\n      _finish();\n    };\n\n    if (script.readyState && !(\"async\" in script)) {\n      /*eslint-disable consistent-return*/\n\n      // This section is only for IE<10. Some other old browsers may\n      // satisfy the above condition and enter this branch, but we don't\n      // support those browsers anyway.\n\n      var id = scriptCounter++;\n      var isReady = { loaded: true, complete: true };\n      var inserted = false;\n\n      // Clear out listeners, state.\n      _cleanup = function () {\n        script.onreadystatechange = script.onerror = null;\n        pendingScripts[id] = void 0;\n      };\n\n      // Attach the handler before setting src, otherwise we might\n      // miss events (consider that IE could fire them synchronously\n      // upon setting src, for example).\n      script.onreadystatechange = function () {\n        var firstState = script.readyState;\n\n        // Protect against any errors from state change randomness.\n        if (err) { return; }\n\n        if (!inserted && isReady[firstState]) {\n          inserted = true;\n\n          // Append to DOM.\n          _addScript(script);\n        }\n\n        // --------------------------------------------------------------------\n        //                       GLORIOUS IE8 HACKAGE!!!\n        // --------------------------------------------------------------------\n        //\n        // Oh IE8, how you disappoint. IE8 won't call `script.onerror`, so\n        // we have to resort to drastic measures.\n        // See, e.g. http://www.quirksmode.org/dom/events/error.html#t02\n        //\n        // As with all things development, there's a Stack Overflow comment that\n        // asserts the following combinations of state changes in IE8 indicate a\n        // script load error. And crazily, it seems to work!\n        //\n        // http://stackoverflow.com/a/18840568/741892\n        //\n        // The `script.readyState` transitions we're interested are:\n        //\n        // * If state starts as `loaded`\n        // * Call `script.children`, which _should_ change state to `complete`\n        // * If state is now `loading`, then **we have a load error**\n        //\n        // For the reader's amusement, here is HeadJS's catalog of various\n        // `readyState` transitions in normal operation for IE:\n        // https://github.com/headjs/headjs/blob/master/src/2.0.0/load.js#L379-L419\n        if (firstState === \"loaded\") {\n          // The act of accessing the property should change the script's\n          // `readyState`.\n          //\n          // And, oh yeah, this hack is so hacky-ish we need the following\n          // eslint disable...\n          /*eslint-disable no-unused-expressions*/\n          script.children;\n          /*eslint-enable no-unused-expressions*/\n\n          if (script.readyState === \"loading\") {\n            // State transitions indicate we've hit the load error.\n            //\n            // **Note**: We are not intending to _return_ a value, just have\n            // a shorter short-circuit code path here.\n            return _error();\n          }\n        }\n\n        // It's possible for readyState to be \"complete\" immediately\n        // after we insert (and execute) the script in the branch\n        // above. So check readyState again here and react without\n        // waiting for another onreadystatechange.\n        if (script.readyState === \"complete\") {\n          _finish();\n        }\n      };\n\n      // Onerror handler _may_ work here.\n      script.onerror = _error;\n\n      // Since we're not appending the script to the DOM yet, the\n      // reference to our script element might get garbage collected\n      // when this function ends, without onreadystatechange ever being\n      // fired. This has been witnessed to happen. Adding it to\n      // `pendingScripts` ensures this can't happen.\n      pendingScripts[id] = script;\n\n      // call the setup callback to mutate the script tag\n      if (setup) {\n        setup.call(context, script);\n      }\n\n      // This triggers a request for the script, but its contents won't\n      // be executed until we append it to the DOM.\n      script.src = src;\n\n      // In some cases, the readyState is already \"loaded\" immediately\n      // after setting src. It's a lie! Don't append to the DOM until\n      // the onreadystatechange event says so.\n\n    } else {\n      // This section is for modern browsers, including IE10+.\n\n      // Clear out listeners.\n      _cleanup = function () {\n        script.onload = script.onerror = null;\n      };\n\n      script.onerror = _error;\n      script.onload = _finish;\n      script.async = true;\n      script.charset = \"utf-8\";\n\n      // call the setup callback to mutate the script tag\n      if (setup) {\n        setup.call(context, script);\n      }\n\n      script.src = src;\n\n      // Append to DOM.\n      _addScript(script);\n    }\n  };\n\n  // UMD wrapper.\n  /*global define:false*/\n  if (typeof exports === \"object\" && typeof module === \"object\") {\n    // CommonJS\n    module.exports = _lload;\n\n  } else if (typeof define === \"function\" && define.amd) {\n    // AMD\n    define([], function () { return _lload; });\n\n  } else {\n    // VanillaJS\n    window._lload = _lload;\n  }\n}());\n\n\n\n// WEBPACK FOOTER //\n// ./~/little-loader/lib/little-loader.js","/*!\n * mustache.js - Logic-less {{mustache}} templates with JavaScript\n * http://github.com/janl/mustache.js\n */\n\n/*global define: false Mustache: true*/\n\n(function defineMustache (global, factory) {\n  if (typeof exports === 'object' && exports && typeof exports.nodeName !== 'string') {\n    factory(exports); // CommonJS\n  } else if (typeof define === 'function' && define.amd) {\n    define(['exports'], factory); // AMD\n  } else {\n    global.Mustache = {};\n    factory(global.Mustache); // script, wsh, asp\n  }\n}(this, function mustacheFactory (mustache) {\n\n  var objectToString = Object.prototype.toString;\n  var isArray = Array.isArray || function isArrayPolyfill (object) {\n    return objectToString.call(object) === '[object Array]';\n  };\n\n  function isFunction (object) {\n    return typeof object === 'function';\n  }\n\n  /**\n   * More correct typeof string handling array\n   * which normally returns typeof 'object'\n   */\n  function typeStr (obj) {\n    return isArray(obj) ? 'array' : typeof obj;\n  }\n\n  function escapeRegExp (string) {\n    return string.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&');\n  }\n\n  /**\n   * Null safe way of checking whether or not an object,\n   * including its prototype, has a given property\n   */\n  function hasProperty (obj, propName) {\n    return obj != null && typeof obj === 'object' && (propName in obj);\n  }\n\n  // Workaround for https://issues.apache.org/jira/browse/COUCHDB-577\n  // See https://github.com/janl/mustache.js/issues/189\n  var regExpTest = RegExp.prototype.test;\n  function testRegExp (re, string) {\n    return regExpTest.call(re, string);\n  }\n\n  var nonSpaceRe = /\\S/;\n  function isWhitespace (string) {\n    return !testRegExp(nonSpaceRe, string);\n  }\n\n  var entityMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '/': '&#x2F;',\n    '`': '&#x60;',\n    '=': '&#x3D;'\n  };\n\n  function escapeHtml (string) {\n    return String(string).replace(/[&<>\"'`=\\/]/g, function fromEntityMap (s) {\n      return entityMap[s];\n    });\n  }\n\n  var whiteRe = /\\s*/;\n  var spaceRe = /\\s+/;\n  var equalsRe = /\\s*=/;\n  var curlyRe = /\\s*\\}/;\n  var tagRe = /#|\\^|\\/|>|\\{|&|=|!/;\n\n  /**\n   * Breaks up the given `template` string into a tree of tokens. If the `tags`\n   * argument is given here it must be an array with two string values: the\n   * opening and closing tags used in the template (e.g. [ \"<%\", \"%>\" ]). Of\n   * course, the default is to use mustaches (i.e. mustache.tags).\n   *\n   * A token is an array with at least 4 elements. The first element is the\n   * mustache symbol that was used inside the tag, e.g. \"#\" or \"&\". If the tag\n   * did not contain a symbol (i.e. {{myValue}}) this element is \"name\". For\n   * all text that appears outside a symbol this element is \"text\".\n   *\n   * The second element of a token is its \"value\". For mustache tags this is\n   * whatever else was inside the tag besides the opening symbol. For text tokens\n   * this is the text itself.\n   *\n   * The third and fourth elements of the token are the start and end indices,\n   * respectively, of the token in the original template.\n   *\n   * Tokens that are the root node of a subtree contain two more elements: 1) an\n   * array of tokens in the subtree and 2) the index in the original template at\n   * which the closing tag for that section begins.\n   */\n  function parseTemplate (template, tags) {\n    if (!template)\n      return [];\n\n    var sections = [];     // Stack to hold section tokens\n    var tokens = [];       // Buffer to hold the tokens\n    var spaces = [];       // Indices of whitespace tokens on the current line\n    var hasTag = false;    // Is there a {{tag}} on the current line?\n    var nonSpace = false;  // Is there a non-space char on the current line?\n\n    // Strips all whitespace tokens array for the current line\n    // if there was a {{#tag}} on it and otherwise only space.\n    function stripSpace () {\n      if (hasTag && !nonSpace) {\n        while (spaces.length)\n          delete tokens[spaces.pop()];\n      } else {\n        spaces = [];\n      }\n\n      hasTag = false;\n      nonSpace = false;\n    }\n\n    var openingTagRe, closingTagRe, closingCurlyRe;\n    function compileTags (tagsToCompile) {\n      if (typeof tagsToCompile === 'string')\n        tagsToCompile = tagsToCompile.split(spaceRe, 2);\n\n      if (!isArray(tagsToCompile) || tagsToCompile.length !== 2)\n        throw new Error('Invalid tags: ' + tagsToCompile);\n\n      openingTagRe = new RegExp(escapeRegExp(tagsToCompile[0]) + '\\\\s*');\n      closingTagRe = new RegExp('\\\\s*' + escapeRegExp(tagsToCompile[1]));\n      closingCurlyRe = new RegExp('\\\\s*' + escapeRegExp('}' + tagsToCompile[1]));\n    }\n\n    compileTags(tags || mustache.tags);\n\n    var scanner = new Scanner(template);\n\n    var start, type, value, chr, token, openSection;\n    while (!scanner.eos()) {\n      start = scanner.pos;\n\n      // Match any text between tags.\n      value = scanner.scanUntil(openingTagRe);\n\n      if (value) {\n        for (var i = 0, valueLength = value.length; i < valueLength; ++i) {\n          chr = value.charAt(i);\n\n          if (isWhitespace(chr)) {\n            spaces.push(tokens.length);\n          } else {\n            nonSpace = true;\n          }\n\n          tokens.push([ 'text', chr, start, start + 1 ]);\n          start += 1;\n\n          // Check for whitespace on the current line.\n          if (chr === '\\n')\n            stripSpace();\n        }\n      }\n\n      // Match the opening tag.\n      if (!scanner.scan(openingTagRe))\n        break;\n\n      hasTag = true;\n\n      // Get the tag type.\n      type = scanner.scan(tagRe) || 'name';\n      scanner.scan(whiteRe);\n\n      // Get the tag value.\n      if (type === '=') {\n        value = scanner.scanUntil(equalsRe);\n        scanner.scan(equalsRe);\n        scanner.scanUntil(closingTagRe);\n      } else if (type === '{') {\n        value = scanner.scanUntil(closingCurlyRe);\n        scanner.scan(curlyRe);\n        scanner.scanUntil(closingTagRe);\n        type = '&';\n      } else {\n        value = scanner.scanUntil(closingTagRe);\n      }\n\n      // Match the closing tag.\n      if (!scanner.scan(closingTagRe))\n        throw new Error('Unclosed tag at ' + scanner.pos);\n\n      token = [ type, value, start, scanner.pos ];\n      tokens.push(token);\n\n      if (type === '#' || type === '^') {\n        sections.push(token);\n      } else if (type === '/') {\n        // Check section nesting.\n        openSection = sections.pop();\n\n        if (!openSection)\n          throw new Error('Unopened section \"' + value + '\" at ' + start);\n\n        if (openSection[1] !== value)\n          throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + start);\n      } else if (type === 'name' || type === '{' || type === '&') {\n        nonSpace = true;\n      } else if (type === '=') {\n        // Set the tags for the next time around.\n        compileTags(value);\n      }\n    }\n\n    // Make sure there are no open sections when we're done.\n    openSection = sections.pop();\n\n    if (openSection)\n      throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + scanner.pos);\n\n    return nestTokens(squashTokens(tokens));\n  }\n\n  /**\n   * Combines the values of consecutive text tokens in the given `tokens` array\n   * to a single token.\n   */\n  function squashTokens (tokens) {\n    var squashedTokens = [];\n\n    var token, lastToken;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      if (token) {\n        if (token[0] === 'text' && lastToken && lastToken[0] === 'text') {\n          lastToken[1] += token[1];\n          lastToken[3] = token[3];\n        } else {\n          squashedTokens.push(token);\n          lastToken = token;\n        }\n      }\n    }\n\n    return squashedTokens;\n  }\n\n  /**\n   * Forms the given array of `tokens` into a nested tree structure where\n   * tokens that represent a section have two additional items: 1) an array of\n   * all tokens that appear in that section and 2) the index in the original\n   * template that represents the end of that section.\n   */\n  function nestTokens (tokens) {\n    var nestedTokens = [];\n    var collector = nestedTokens;\n    var sections = [];\n\n    var token, section;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      switch (token[0]) {\n        case '#':\n        case '^':\n          collector.push(token);\n          sections.push(token);\n          collector = token[4] = [];\n          break;\n        case '/':\n          section = sections.pop();\n          section[5] = token[2];\n          collector = sections.length > 0 ? sections[sections.length - 1][4] : nestedTokens;\n          break;\n        default:\n          collector.push(token);\n      }\n    }\n\n    return nestedTokens;\n  }\n\n  /**\n   * A simple string scanner that is used by the template parser to find\n   * tokens in template strings.\n   */\n  function Scanner (string) {\n    this.string = string;\n    this.tail = string;\n    this.pos = 0;\n  }\n\n  /**\n   * Returns `true` if the tail is empty (end of string).\n   */\n  Scanner.prototype.eos = function eos () {\n    return this.tail === '';\n  };\n\n  /**\n   * Tries to match the given regular expression at the current position.\n   * Returns the matched text if it can match, the empty string otherwise.\n   */\n  Scanner.prototype.scan = function scan (re) {\n    var match = this.tail.match(re);\n\n    if (!match || match.index !== 0)\n      return '';\n\n    var string = match[0];\n\n    this.tail = this.tail.substring(string.length);\n    this.pos += string.length;\n\n    return string;\n  };\n\n  /**\n   * Skips all text until the given regular expression can be matched. Returns\n   * the skipped string, which is the entire tail if no match can be made.\n   */\n  Scanner.prototype.scanUntil = function scanUntil (re) {\n    var index = this.tail.search(re), match;\n\n    switch (index) {\n      case -1:\n        match = this.tail;\n        this.tail = '';\n        break;\n      case 0:\n        match = '';\n        break;\n      default:\n        match = this.tail.substring(0, index);\n        this.tail = this.tail.substring(index);\n    }\n\n    this.pos += match.length;\n\n    return match;\n  };\n\n  /**\n   * Represents a rendering context by wrapping a view object and\n   * maintaining a reference to the parent context.\n   */\n  function Context (view, parentContext) {\n    this.view = view;\n    this.cache = { '.': this.view };\n    this.parent = parentContext;\n  }\n\n  /**\n   * Creates a new context using the given view with this context\n   * as the parent.\n   */\n  Context.prototype.push = function push (view) {\n    return new Context(view, this);\n  };\n\n  /**\n   * Returns the value of the given name in this context, traversing\n   * up the context hierarchy if the value is absent in this context's view.\n   */\n  Context.prototype.lookup = function lookup (name) {\n    var cache = this.cache;\n\n    var value;\n    if (cache.hasOwnProperty(name)) {\n      value = cache[name];\n    } else {\n      var context = this, names, index, lookupHit = false;\n\n      while (context) {\n        if (name.indexOf('.') > 0) {\n          value = context.view;\n          names = name.split('.');\n          index = 0;\n\n          /**\n           * Using the dot notion path in `name`, we descend through the\n           * nested objects.\n           *\n           * To be certain that the lookup has been successful, we have to\n           * check if the last object in the path actually has the property\n           * we are looking for. We store the result in `lookupHit`.\n           *\n           * This is specially necessary for when the value has been set to\n           * `undefined` and we want to avoid looking up parent contexts.\n           **/\n          while (value != null && index < names.length) {\n            if (index === names.length - 1)\n              lookupHit = hasProperty(value, names[index]);\n\n            value = value[names[index++]];\n          }\n        } else {\n          value = context.view[name];\n          lookupHit = hasProperty(context.view, name);\n        }\n\n        if (lookupHit)\n          break;\n\n        context = context.parent;\n      }\n\n      cache[name] = value;\n    }\n\n    if (isFunction(value))\n      value = value.call(this.view);\n\n    return value;\n  };\n\n  /**\n   * A Writer knows how to take a stream of tokens and render them to a\n   * string, given a context. It also maintains a cache of templates to\n   * avoid the need to parse the same template twice.\n   */\n  function Writer () {\n    this.cache = {};\n  }\n\n  /**\n   * Clears all cached templates in this writer.\n   */\n  Writer.prototype.clearCache = function clearCache () {\n    this.cache = {};\n  };\n\n  /**\n   * Parses and caches the given `template` and returns the array of tokens\n   * that is generated from the parse.\n   */\n  Writer.prototype.parse = function parse (template, tags) {\n    var cache = this.cache;\n    var tokens = cache[template];\n\n    if (tokens == null)\n      tokens = cache[template] = parseTemplate(template, tags);\n\n    return tokens;\n  };\n\n  /**\n   * High-level method that is used to render the given `template` with\n   * the given `view`.\n   *\n   * The optional `partials` argument may be an object that contains the\n   * names and templates of partials that are used in the template. It may\n   * also be a function that is used to load partial templates on the fly\n   * that takes a single argument: the name of the partial.\n   */\n  Writer.prototype.render = function render (template, view, partials) {\n    var tokens = this.parse(template);\n    var context = (view instanceof Context) ? view : new Context(view);\n    return this.renderTokens(tokens, context, partials, template);\n  };\n\n  /**\n   * Low-level method that renders the given array of `tokens` using\n   * the given `context` and `partials`.\n   *\n   * Note: The `originalTemplate` is only ever used to extract the portion\n   * of the original template that was contained in a higher-order section.\n   * If the template doesn't use higher-order sections, this argument may\n   * be omitted.\n   */\n  Writer.prototype.renderTokens = function renderTokens (tokens, context, partials, originalTemplate) {\n    var buffer = '';\n\n    var token, symbol, value;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      value = undefined;\n      token = tokens[i];\n      symbol = token[0];\n\n      if (symbol === '#') value = this.renderSection(token, context, partials, originalTemplate);\n      else if (symbol === '^') value = this.renderInverted(token, context, partials, originalTemplate);\n      else if (symbol === '>') value = this.renderPartial(token, context, partials, originalTemplate);\n      else if (symbol === '&') value = this.unescapedValue(token, context);\n      else if (symbol === 'name') value = this.escapedValue(token, context);\n      else if (symbol === 'text') value = this.rawValue(token);\n\n      if (value !== undefined)\n        buffer += value;\n    }\n\n    return buffer;\n  };\n\n  Writer.prototype.renderSection = function renderSection (token, context, partials, originalTemplate) {\n    var self = this;\n    var buffer = '';\n    var value = context.lookup(token[1]);\n\n    // This function is used to render an arbitrary template\n    // in the current context by higher-order sections.\n    function subRender (template) {\n      return self.render(template, context, partials);\n    }\n\n    if (!value) return;\n\n    if (isArray(value)) {\n      for (var j = 0, valueLength = value.length; j < valueLength; ++j) {\n        buffer += this.renderTokens(token[4], context.push(value[j]), partials, originalTemplate);\n      }\n    } else if (typeof value === 'object' || typeof value === 'string' || typeof value === 'number') {\n      buffer += this.renderTokens(token[4], context.push(value), partials, originalTemplate);\n    } else if (isFunction(value)) {\n      if (typeof originalTemplate !== 'string')\n        throw new Error('Cannot use higher-order sections without the original template');\n\n      // Extract the portion of the original template that the section contains.\n      value = value.call(context.view, originalTemplate.slice(token[3], token[5]), subRender);\n\n      if (value != null)\n        buffer += value;\n    } else {\n      buffer += this.renderTokens(token[4], context, partials, originalTemplate);\n    }\n    return buffer;\n  };\n\n  Writer.prototype.renderInverted = function renderInverted (token, context, partials, originalTemplate) {\n    var value = context.lookup(token[1]);\n\n    // Use JavaScript's definition of falsy. Include empty arrays.\n    // See https://github.com/janl/mustache.js/issues/186\n    if (!value || (isArray(value) && value.length === 0))\n      return this.renderTokens(token[4], context, partials, originalTemplate);\n  };\n\n  Writer.prototype.renderPartial = function renderPartial (token, context, partials) {\n    if (!partials) return;\n\n    var value = isFunction(partials) ? partials(token[1]) : partials[token[1]];\n    if (value != null)\n      return this.renderTokens(this.parse(value), context, partials, value);\n  };\n\n  Writer.prototype.unescapedValue = function unescapedValue (token, context) {\n    var value = context.lookup(token[1]);\n    if (value != null)\n      return value;\n  };\n\n  Writer.prototype.escapedValue = function escapedValue (token, context) {\n    var value = context.lookup(token[1]);\n    if (value != null)\n      return mustache.escape(value);\n  };\n\n  Writer.prototype.rawValue = function rawValue (token) {\n    return token[1];\n  };\n\n  mustache.name = 'mustache.js';\n  mustache.version = '2.3.0';\n  mustache.tags = [ '{{', '}}' ];\n\n  // All high-level mustache.* functions use this writer.\n  var defaultWriter = new Writer();\n\n  /**\n   * Clears all cached templates in the default writer.\n   */\n  mustache.clearCache = function clearCache () {\n    return defaultWriter.clearCache();\n  };\n\n  /**\n   * Parses and caches the given template in the default writer and returns the\n   * array of tokens it contains. Doing this ahead of time avoids the need to\n   * parse templates on the fly as they are rendered.\n   */\n  mustache.parse = function parse (template, tags) {\n    return defaultWriter.parse(template, tags);\n  };\n\n  /**\n   * Renders the `template` with the given `view` and `partials` using the\n   * default writer.\n   */\n  mustache.render = function render (template, view, partials) {\n    if (typeof template !== 'string') {\n      throw new TypeError('Invalid template! Template should be a \"string\" ' +\n                          'but \"' + typeStr(template) + '\" was given as the first ' +\n                          'argument for mustache#render(template, view, partials)');\n    }\n\n    return defaultWriter.render(template, view, partials);\n  };\n\n  // This is here for backwards compatibility with 0.4.x.,\n  /*eslint-disable */ // eslint wants camel cased function name\n  mustache.to_html = function to_html (template, view, partials, send) {\n    /*eslint-enable*/\n\n    var result = mustache.render(template, view, partials);\n\n    if (isFunction(send)) {\n      send(result);\n    } else {\n      return result;\n    }\n  };\n\n  // Export the escaping function so that the user may override it.\n  // See https://github.com/janl/mustache.js/issues/244\n  mustache.escape = escapeHtml;\n\n  // Export these mainly for testing, but also for advanced usage.\n  mustache.Scanner = Scanner;\n  mustache.Context = Context;\n  mustache.Writer = Writer;\n\n  return mustache;\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./~/mustache/mustache.js","/**!\n * @fileOverview Kickass library to create and place poppers near their reference elements.\n * @version 1.12.5\n * @license\n * Copyright (c) 2016 Federico Zivolo and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar nativeHints = ['native code', '[object MutationObserverConstructor]'];\n\n/**\n * Determine if a function is implemented natively (as opposed to a polyfill).\n * @method\n * @memberof Popper.Utils\n * @argument {Function | undefined} fn the function to check\n * @returns {Boolean}\n */\nvar isNative = (function (fn) {\n  return nativeHints.some(function (hint) {\n    return (fn || '').toString().indexOf(hint) > -1;\n  });\n});\n\nvar isBrowser = typeof window !== 'undefined';\nvar longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\nvar timeoutDuration = 0;\nfor (var i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n    timeoutDuration = 1;\n    break;\n  }\n}\n\nfunction microtaskDebounce(fn) {\n  var scheduled = false;\n  var i = 0;\n  var elem = document.createElement('span');\n\n  // MutationObserver provides a mechanism for scheduling microtasks, which\n  // are scheduled *before* the next task. This gives us a way to debounce\n  // a function but ensure it's called *before* the next paint.\n  var observer = new MutationObserver(function () {\n    fn();\n    scheduled = false;\n  });\n\n  observer.observe(elem, { attributes: true });\n\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      elem.setAttribute('x-index', i);\n      i = i + 1; // don't use compund (+=) because it doesn't get optimized in V8\n    }\n  };\n}\n\nfunction taskDebounce(fn) {\n  var scheduled = false;\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(function () {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\n// It's common for MutationObserver polyfills to be seen in the wild, however\n// these rely on Mutation Events which only occur when an element is connected\n// to the DOM. The algorithm used in this module does not use a connected element,\n// and so we must ensure that a *native* MutationObserver is available.\nvar supportsNativeMutationObserver = isBrowser && isNative(window.MutationObserver);\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nvar debounce = supportsNativeMutationObserver ? microtaskDebounce : taskDebounce;\n\n/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nfunction isFunction(functionToCheck) {\n  var getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\n/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nfunction getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  var css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n\n/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nfunction getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nfunction getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element || ['HTML', 'BODY', '#document'].indexOf(element.nodeName) !== -1) {\n    return window.document.body;\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n\n  var _getStyleComputedProp = getStyleComputedProperty(element),\n      overflow = _getStyleComputedProp.overflow,\n      overflowX = _getStyleComputedProp.overflowX,\n      overflowY = _getStyleComputedProp.overflowY;\n\n  if (/(auto|scroll)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nfunction getOffsetParent(element) {\n  // NOTE: 1 DOM access here\n  var offsetParent = element && element.offsetParent;\n  var nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return window.document.documentElement;\n  }\n\n  // .offsetParent will return the closest TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (['TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 && getStyleComputedProperty(offsetParent, 'position') === 'static') {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n\nfunction isOffsetContainer(element) {\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element;\n}\n\n/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nfunction getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nfunction findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return window.document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  var order = element1.compareDocumentPosition(element2) & Node.DOCUMENT_POSITION_FOLLOWING;\n  var start = order ? element1 : element2;\n  var end = order ? element2 : element1;\n\n  // Get common ancestor container\n  var range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  var commonAncestorContainer = range.commonAncestorContainer;\n\n  // Both nodes are inside #document\n\n  if (element1 !== commonAncestorContainer && element2 !== commonAncestorContainer || start.contains(end)) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  var element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n\n/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nfunction getScroll(element) {\n  var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'top';\n\n  var upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    var html = window.document.documentElement;\n    var scrollingElement = window.document.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nfunction includeScroll(rect, element) {\n  var subtract = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var scrollTop = getScroll(element, 'top');\n  var scrollLeft = getScroll(element, 'left');\n  var modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n\n/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nfunction getBordersSize(styles, axis) {\n  var sideA = axis === 'x' ? 'Left' : 'Top';\n  var sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return +styles['border' + sideA + 'Width'].split('px')[0] + +styles['border' + sideB + 'Width'].split('px')[0];\n}\n\n/**\n * Tells if you are running Internet Explorer 10\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean} isIE10\n */\nvar isIE10 = undefined;\n\nvar isIE10$1 = function () {\n  if (isIE10 === undefined) {\n    isIE10 = navigator.appVersion.indexOf('MSIE 10') !== -1;\n  }\n  return isIE10;\n};\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(body['offset' + axis], body['scroll' + axis], html['client' + axis], html['offset' + axis], html['scroll' + axis], isIE10$1() ? html['offset' + axis] + computedStyle['margin' + (axis === 'Height' ? 'Top' : 'Left')] + computedStyle['margin' + (axis === 'Height' ? 'Bottom' : 'Right')] : 0);\n}\n\nfunction getWindowSizes() {\n  var body = window.document.body;\n  var html = window.document.documentElement;\n  var computedStyle = isIE10$1() && window.getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle)\n  };\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nfunction getClientRect(offsets) {\n  return _extends({}, offsets, {\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height\n  });\n}\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nfunction getBoundingClientRect(element) {\n  var rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  if (isIE10$1()) {\n    try {\n      rect = element.getBoundingClientRect();\n      var scrollTop = getScroll(element, 'top');\n      var scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    } catch (err) {}\n  } else {\n    rect = element.getBoundingClientRect();\n  }\n\n  var result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top\n  };\n\n  // subtract scrollbar size from sizes\n  var sizes = element.nodeName === 'HTML' ? getWindowSizes() : {};\n  var width = sizes.width || element.clientWidth || result.right - result.left;\n  var height = sizes.height || element.clientHeight || result.bottom - result.top;\n\n  var horizScrollbar = element.offsetWidth - width;\n  var vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    var styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n\nfunction getOffsetRectRelativeToArbitraryNode(children, parent) {\n  var isIE10 = isIE10$1();\n  var isHTML = parent.nodeName === 'HTML';\n  var childrenRect = getBoundingClientRect(children);\n  var parentRect = getBoundingClientRect(parent);\n  var scrollParent = getScrollParent(children);\n\n  var styles = getStyleComputedProperty(parent);\n  var borderTopWidth = +styles.borderTopWidth.split('px')[0];\n  var borderLeftWidth = +styles.borderLeftWidth.split('px')[0];\n\n  var offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    var marginTop = +styles.marginTop.split('px')[0];\n    var marginLeft = +styles.marginLeft.split('px')[0];\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (isIE10 ? parent.contains(scrollParent) : parent === scrollParent && scrollParent.nodeName !== 'BODY') {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n\nfunction getViewportOffsetRectRelativeToArtbitraryNode(element) {\n  var html = window.document.documentElement;\n  var relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  var width = Math.max(html.clientWidth, window.innerWidth || 0);\n  var height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  var scrollTop = getScroll(html);\n  var scrollLeft = getScroll(html, 'left');\n\n  var offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width: width,\n    height: height\n  };\n\n  return getClientRect(offset);\n}\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nfunction isFixed(element) {\n  var nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  return isFixed(getParentNode(element));\n}\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @returns {Object} Coordinates of the boundaries\n */\nfunction getBoundaries(popper, reference, padding, boundariesElement) {\n  // NOTE: 1 DOM access here\n  var boundaries = { top: 0, left: 0 };\n  var offsetParent = findCommonOffsetParent(popper, reference);\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport') {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent);\n  } else {\n    // Handle other cases based on DOM element used as boundaries\n    var boundariesNode = void 0;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(popper));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = window.document.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = window.document.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    var offsets = getOffsetRectRelativeToArbitraryNode(boundariesNode, offsetParent);\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      var _getWindowSizes = getWindowSizes(),\n          height = _getWindowSizes.height,\n          width = _getWindowSizes.width;\n\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  boundaries.left += padding;\n  boundaries.top += padding;\n  boundaries.right -= padding;\n  boundaries.bottom -= padding;\n\n  return boundaries;\n}\n\nfunction getArea(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeAutoPlacement(placement, refRect, popper, reference, boundariesElement) {\n  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  var boundaries = getBoundaries(popper, reference, padding, boundariesElement);\n\n  var rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height\n    }\n  };\n\n  var sortedAreas = Object.keys(rects).map(function (key) {\n    return _extends({\n      key: key\n    }, rects[key], {\n      area: getArea(rects[key])\n    });\n  }).sort(function (a, b) {\n    return b.area - a.area;\n  });\n\n  var filteredAreas = sortedAreas.filter(function (_ref2) {\n    var width = _ref2.width,\n        height = _ref2.height;\n    return width >= popper.clientWidth && height >= popper.clientHeight;\n  });\n\n  var computedPlacement = filteredAreas.length > 0 ? filteredAreas[0].key : sortedAreas[0].key;\n\n  var variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? '-' + variation : '');\n}\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nfunction getReferenceOffsets(state, popper, reference) {\n  var commonOffsetParent = findCommonOffsetParent(popper, reference);\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent);\n}\n\n/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nfunction getOuterSizes(element) {\n  var styles = window.getComputedStyle(element);\n  var x = parseFloat(styles.marginTop) + parseFloat(styles.marginBottom);\n  var y = parseFloat(styles.marginLeft) + parseFloat(styles.marginRight);\n  var result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x\n  };\n  return result;\n}\n\n/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nfunction getOppositePlacement(placement) {\n  var hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nfunction getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  var popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  var popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  var isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  var mainSide = isHoriz ? 'top' : 'left';\n  var secondarySide = isHoriz ? 'left' : 'top';\n  var measurement = isHoriz ? 'height' : 'width';\n  var secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] = referenceOffsets[mainSide] + referenceOffsets[measurement] / 2 - popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] = referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] = referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n\n/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(function (cur) {\n      return cur[prop] === value;\n    });\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  var match = find(arr, function (obj) {\n    return obj[prop] === value;\n  });\n  return arr.indexOf(match);\n}\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nfunction runModifiers(modifiers, data, ends) {\n  var modifiersToRun = ends === undefined ? modifiers : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(function (modifier) {\n    if (modifier.function) {\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    var fn = modifier.function || modifier.fn;\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nfunction update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  var data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {}\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(this.state, this.popper, this.reference);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(this.options.placement, data.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding);\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(this.popper, data.offsets.reference, data.placement);\n  data.offsets.popper.position = 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n\n/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nfunction isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(function (_ref) {\n    var name = _ref.name,\n        enabled = _ref.enabled;\n    return enabled && name === modifierName;\n  });\n}\n\n/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nfunction getSupportedPropertyName(property) {\n  var prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  var upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (var i = 0; i < prefixes.length - 1; i++) {\n    var prefix = prefixes[i];\n    var toCheck = prefix ? '' + prefix + upperProp : property;\n    if (typeof window.document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n\n/**\n * Destroy the popper\n * @method\n * @memberof Popper\n */\nfunction destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.left = '';\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicity asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  var isBody = scrollParent.nodeName === 'BODY';\n  var target = isBody ? window : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(getScrollParent(target.parentNode), event, callback, scrollParents);\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction setupEventListeners(reference, options, state, updateBound) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  window.addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  var scrollElement = getScrollParent(reference);\n  attachToScrollParents(scrollElement, 'scroll', state.updateBound, state.scrollParents);\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nfunction enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(this.reference, this.options, this.state, this.scheduleUpdate);\n  }\n}\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  window.removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(function (target) {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger onUpdate callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nfunction disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    window.cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n\n/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nfunction isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setStyles(element, styles) {\n  Object.keys(styles).forEach(function (prop) {\n    var unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 && isNumeric(styles[prop])) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n\n/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function (prop) {\n    var value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nfunction applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper.\n * @param {Object} options - Popper.js options\n */\nfunction applyStyleOnLoad(reference, popper, options, modifierOptions, state) {\n  // compute reference element offsets\n  var referenceOffsets = getReferenceOffsets(state, popper, reference);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  var placement = computeAutoPlacement(options.placement, referenceOffsets, popper, reference, options.modifiers.flip.boundariesElement, options.modifiers.flip.padding);\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: 'absolute' });\n\n  return options;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeStyle(data, options) {\n  var x = options.x,\n      y = options.y;\n  var popper = data.offsets.popper;\n\n  // Remove this legacy support in Popper.js v2\n\n  var legacyGpuAccelerationOption = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'applyStyle';\n  }).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');\n  }\n  var gpuAcceleration = legacyGpuAccelerationOption !== undefined ? legacyGpuAccelerationOption : options.gpuAcceleration;\n\n  var offsetParent = getOffsetParent(data.instance.popper);\n  var offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  var styles = {\n    position: popper.position\n  };\n\n  // floor sides to avoid blurry text\n  var offsets = {\n    left: Math.floor(popper.left),\n    top: Math.floor(popper.top),\n    bottom: Math.floor(popper.bottom),\n    right: Math.floor(popper.right)\n  };\n\n  var sideA = x === 'bottom' ? 'top' : 'bottom';\n  var sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  var prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  var left = void 0,\n      top = void 0;\n  if (sideA === 'bottom') {\n    top = -offsetParentRect.height + offsets.bottom;\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    left = -offsetParentRect.width + offsets.right;\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = 'translate3d(' + left + 'px, ' + top + 'px, 0)';\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    var invertTop = sideA === 'bottom' ? -1 : 1;\n    var invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = sideA + ', ' + sideB;\n  }\n\n  // Attributes\n  var attributes = {\n    'x-placement': data.placement\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = _extends({}, attributes, data.attributes);\n  data.styles = _extends({}, styles, data.styles);\n  data.arrowStyles = _extends({}, data.offsets.arrow, data.arrowStyles);\n\n  return data;\n}\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nfunction isModifierRequired(modifiers, requestingName, requestedName) {\n  var requesting = find(modifiers, function (_ref) {\n    var name = _ref.name;\n    return name === requestingName;\n  });\n\n  var isRequired = !!requesting && modifiers.some(function (modifier) {\n    return modifier.name === requestedName && modifier.enabled && modifier.order < requesting.order;\n  });\n\n  if (!isRequired) {\n    var _requesting = '`' + requestingName + '`';\n    var requested = '`' + requestedName + '`';\n    console.warn(requested + ' modifier is required by ' + _requesting + ' modifier in order to work, be sure to include it before ' + _requesting + '!');\n  }\n  return isRequired;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction arrow(data, options) {\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  var arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn('WARNING: `arrow.element` must be child of its popper element!');\n      return data;\n    }\n  }\n\n  var placement = data.placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  var len = isVertical ? 'height' : 'width';\n  var sideCapitalized = isVertical ? 'Top' : 'Left';\n  var side = sideCapitalized.toLowerCase();\n  var altSide = isVertical ? 'left' : 'top';\n  var opSide = isVertical ? 'bottom' : 'right';\n  var arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjuction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -= popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n  if (reference[side] + arrowElementSize > popper[opSide]) {\n    data.offsets.popper[side] += reference[side] + arrowElementSize - popper[opSide];\n  }\n\n  // compute center of the popper\n  var center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  var popperMarginSide = getStyleComputedProperty(data.instance.popper, 'margin' + sideCapitalized).replace('px', '');\n  var sideValue = center - getClientRect(data.offsets.popper)[side] - popperMarginSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = {};\n  data.offsets.arrow[side] = Math.round(sideValue);\n  data.offsets.arrow[altSide] = ''; // make sure to unset any eventual altSide value from the DOM node\n\n  return data;\n}\n\n/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nfunction getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n\n/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-right` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nvar placements = ['auto-start', 'auto', 'auto-end', 'top-start', 'top', 'top-end', 'right-start', 'right', 'right-end', 'bottom-end', 'bottom', 'bottom-start', 'left-end', 'left', 'left-start'];\n\n// Get rid of `auto` `auto-start` and `auto-end`\nvar validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nfunction clockwise(placement) {\n  var counter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var index = validPlacements.indexOf(placement);\n  var arr = validPlacements.slice(index + 1).concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n\nvar BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise'\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, options.boundariesElement);\n\n  var placement = data.placement.split('-')[0];\n  var placementOpposite = getOppositePlacement(placement);\n  var variation = data.placement.split('-')[1] || '';\n\n  var flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach(function (step, index) {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    var popperOffsets = data.offsets.popper;\n    var refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    var floor = Math.floor;\n    var overlapsRef = placement === 'left' && floor(popperOffsets.right) > floor(refOffsets.left) || placement === 'right' && floor(popperOffsets.left) < floor(refOffsets.right) || placement === 'top' && floor(popperOffsets.bottom) > floor(refOffsets.top) || placement === 'bottom' && floor(popperOffsets.top) < floor(refOffsets.bottom);\n\n    var overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    var overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    var overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    var overflowsBottom = floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    var overflowsBoundaries = placement === 'left' && overflowsLeft || placement === 'right' && overflowsRight || placement === 'top' && overflowsTop || placement === 'bottom' && overflowsBottom;\n\n    // flip the variation if required\n    var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n    var flippedVariation = !!options.flipVariations && (isVertical && variation === 'start' && overflowsLeft || isVertical && variation === 'end' && overflowsRight || !isVertical && variation === 'start' && overflowsTop || !isVertical && variation === 'end' && overflowsBottom);\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = _extends({}, data.offsets.popper, getPopperOffsets(data.instance.popper, data.offsets.reference, data.placement));\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction keepTogether(data) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var placement = data.placement.split('-')[0];\n  var floor = Math.floor;\n  var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  var side = isVertical ? 'right' : 'bottom';\n  var opSide = isVertical ? 'left' : 'top';\n  var measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] = floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nfunction toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  var split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  var value = +split[1];\n  var unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    var element = void 0;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    var rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    var size = void 0;\n    if (unit === 'vh') {\n      size = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    } else {\n      size = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nfunction parseOffset(offset, popperOffsets, referenceOffsets, basePlacement) {\n  var offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  var useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  var fragments = offset.split(/(\\+|\\-)/).map(function (frag) {\n    return frag.trim();\n  });\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  var divider = fragments.indexOf(find(fragments, function (frag) {\n    return frag.search(/,|\\s/) !== -1;\n  }));\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  var splitRegex = /\\s*,\\s*|\\s+/;\n  var ops = divider !== -1 ? [fragments.slice(0, divider).concat([fragments[divider].split(splitRegex)[0]]), [fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider + 1))] : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map(function (op, index) {\n    // Most of the units rely on the orientation of the popper\n    var measurement = (index === 1 ? !useHeight : useHeight) ? 'height' : 'width';\n    var mergeWithPrevious = false;\n    return op\n    // This aggregates any `+` or `-` sign that aren't considered operators\n    // e.g.: 10 + +5 => [10, +, +5]\n    .reduce(function (a, b) {\n      if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n        a[a.length - 1] = b;\n        mergeWithPrevious = true;\n        return a;\n      } else if (mergeWithPrevious) {\n        a[a.length - 1] += b;\n        mergeWithPrevious = false;\n        return a;\n      } else {\n        return a.concat(b);\n      }\n    }, [])\n    // Here we convert the string values into number values (in px)\n    .map(function (str) {\n      return toValue(str, measurement, popperOffsets, referenceOffsets);\n    });\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach(function (op, index) {\n    op.forEach(function (frag, index2) {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nfunction offset(data, _ref) {\n  var offset = _ref.offset;\n  var placement = data.placement,\n      _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var basePlacement = placement.split('-')[0];\n\n  var offsets = void 0;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction preventOverflow(data, options) {\n  var boundariesElement = options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, boundariesElement);\n  options.boundaries = boundaries;\n\n  var order = options.priority;\n  var popper = data.offsets.popper;\n\n  var check = {\n    primary: function primary(placement) {\n      var value = popper[placement];\n      if (popper[placement] < boundaries[placement] && !options.escapeWithReference) {\n        value = Math.max(popper[placement], boundaries[placement]);\n      }\n      return defineProperty({}, placement, value);\n    },\n    secondary: function secondary(placement) {\n      var mainSide = placement === 'right' ? 'left' : 'top';\n      var value = popper[mainSide];\n      if (popper[placement] > boundaries[placement] && !options.escapeWithReference) {\n        value = Math.min(popper[mainSide], boundaries[placement] - (placement === 'right' ? popper.width : popper.height));\n      }\n      return defineProperty({}, mainSide, value);\n    }\n  };\n\n  order.forEach(function (placement) {\n    var side = ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = _extends({}, popper, check[side](placement));\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction shift(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    var _data$offsets = data.offsets,\n        reference = _data$offsets.reference,\n        popper = _data$offsets.popper;\n\n    var isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    var side = isVertical ? 'left' : 'top';\n    var measurement = isVertical ? 'width' : 'height';\n\n    var shiftOffsets = {\n      start: defineProperty({}, side, reference[side]),\n      end: defineProperty({}, side, reference[side] + reference[measurement] - popper[measurement])\n    };\n\n    data.offsets.popper = _extends({}, popper, shiftOffsets[shiftvariation]);\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  var refRect = data.offsets.reference;\n  var bound = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'preventOverflow';\n  }).boundaries;\n\n  if (refRect.bottom < bound.top || refRect.left > bound.right || refRect.top > bound.bottom || refRect.right < bound.left) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction inner(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  var subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] = reference[basePlacement] - (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nvar modifiers = {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unitless, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the height.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > More on this [reading this issue](https://github.com/FezVrasta/popper.js/issues/373)\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * An scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\"  or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper this makes sure the popper has always a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier, can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent'\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near eachothers\n   * without leaving any gap between the two. Expecially useful when the arrow is\n   * enabled and you want to assure it to point to its reference element.\n   * It cares only about the first axis, you can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjuction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]'\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations).\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position,\n     * the popper will never be placed outside of the defined boundaries\n     * (except if keepTogether is enabled)\n     */\n    boundariesElement: 'viewport'\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3d transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties.\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right'\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define you own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3d transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties.\n     */\n    gpuAcceleration: undefined\n  }\n};\n\n/**\n * The `dataObject` is an object containing all the informations used by Popper.js\n * this object get passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper.\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper, it expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow, it expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements.\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overriden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass as 3rd argument an object with the same\n * structure of this object, example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nvar Defaults = {\n  /**\n   * Popper's placement\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Whether events (resize, scroll) are initially enabled\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: function onCreate() {},\n\n  /**\n   * Callback called when the popper is updated, this callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: function onUpdate() {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js\n   * @prop {modifiers}\n   */\n  modifiers: modifiers\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n\n// Utils\n// Methods\nvar Popper = function () {\n  /**\n   * Create a new Popper.js instance\n   * @class Popper\n   * @param {HTMLElement|referenceObject} reference - The reference element used to position the popper\n   * @param {HTMLElement} popper - The HTML element used as popper.\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  function Popper(reference, popper) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    classCallCheck(this, Popper);\n\n    this.scheduleUpdate = function () {\n      return requestAnimationFrame(_this.update);\n    };\n\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = _extends({}, Popper.Defaults, options);\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: []\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference.jquery ? reference[0] : reference;\n    this.popper = popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys(_extends({}, Popper.Defaults.modifiers, options.modifiers)).forEach(function (name) {\n      _this.options.modifiers[name] = _extends({}, Popper.Defaults.modifiers[name] || {}, options.modifiers ? options.modifiers[name] : {});\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers).map(function (name) {\n      return _extends({\n        name: name\n      }, _this.options.modifiers[name]);\n    })\n    // sort the modifiers by order\n    .sort(function (a, b) {\n      return a.order - b.order;\n    });\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(function (modifierOptions) {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(_this.reference, _this.popper, _this.options, modifierOptions, _this.state);\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    var eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n\n\n  createClass(Popper, [{\n    key: 'update',\n    value: function update$$1() {\n      return update.call(this);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy$$1() {\n      return destroy.call(this);\n    }\n  }, {\n    key: 'enableEventListeners',\n    value: function enableEventListeners$$1() {\n      return enableEventListeners.call(this);\n    }\n  }, {\n    key: 'disableEventListeners',\n    value: function disableEventListeners$$1() {\n      return disableEventListeners.call(this);\n    }\n\n    /**\n     * Schedule an update, it will run on the next UI update available\n     * @method scheduleUpdate\n     * @memberof Popper\n     */\n\n\n    /**\n     * Collection of utilities useful when writing custom modifiers.\n     * Starting from version 1.7, this method is available only if you\n     * include `popper-utils.js` before `popper.js`.\n     *\n     * **DEPRECATION**: This way to access PopperUtils is deprecated\n     * and will be removed in v2! Use the PopperUtils module directly instead.\n     * Due to the high instability of the methods contained in Utils, we can't\n     * guarantee them to follow semver. Use them at your own risk!\n     * @static\n     * @private\n     * @type {Object}\n     * @deprecated since version 1.8\n     * @member Utils\n     * @memberof Popper\n     */\n\n  }]);\n  return Popper;\n}();\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n\n\nPopper.Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\nPopper.placements = placements;\nPopper.Defaults = Defaults;\n\nexport default Popper;\n//# sourceMappingURL=popper.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./~/popper.js/dist/esm/popper.js","//     Underscore.js 1.8.3\n//     http://underscorejs.org\n//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind,\n    nativeCreate       = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.8.3';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      case 2: return function(value, other) {\n        return func.call(context, value, other);\n      };\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  // A mostly-internal function to generate callbacks that can be applied\n  // to each element in a collection, returning the desired result  either\n  // identity, an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value)) return _.matcher(value);\n    return _.property(value);\n  };\n  _.iteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, undefinedOnly) {\n    return function(obj) {\n      var length = arguments.length;\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  var property = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = property('length');\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  function createReduce(dir) {\n    // Optimized iterator function as using arguments.length\n    // in the main function will deoptimize the, see #1991.\n    function iterator(obj, iteratee, memo, keys, index, length) {\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    }\n\n    return function(obj, iteratee, memo, context) {\n      iteratee = optimizeCb(iteratee, context, 4);\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      // Determine the initial value if none is provided.\n      if (arguments.length < 3) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      return iterator(obj, iteratee, memo, keys, index, length);\n    };\n  }\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var key;\n    if (isArrayLike(obj)) {\n      key = _.findIndex(obj, predicate, context);\n    } else {\n      key = _.findKey(obj, predicate, context);\n    }\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given item (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n    return _.indexOf(obj, item, fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      var func = isFunc ? method : value[method];\n      return func == null ? func : func.apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/FisherYates_shuffle).\n  _.shuffle = function(obj) {\n    var set = isArrayLike(obj) ? obj : _.values(obj);\n    var length = set.length;\n    var shuffled = Array(length);\n    for (var index = 0, rand; index < length; index++) {\n      rand = _.random(0, index);\n      if (rand !== index) shuffled[index] = shuffled[rand];\n      shuffled[rand] = set[index];\n    }\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iteratee(value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iteratee, context) {\n      var result = {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var pass = [], fail = [];\n    _.each(obj, function(value, key, obj) {\n      (predicate(value, key, obj) ? pass : fail).push(value);\n    });\n    return [pass, fail];\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, startIndex) {\n    var output = [], idx = 0;\n    for (var i = startIndex || 0, length = getLength(input); i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        //flatten current level of array or arguments object\n        if (!shallow) value = flatten(value, shallow, strict);\n        var j = 0, len = value.length;\n        output.length += len;\n        while (j < len) {\n          output[idx++] = value[j++];\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(flatten(arguments, true, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      for (var j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = flatten(arguments, true, true, 1);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    return _.unzip(arguments);\n  };\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices\n  _.unzip = function(array) {\n    var length = array && _.max(array, getLength).length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = getLength(list); i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions\n  function createPredicateIndexFinder(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = getLength(array);\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  }\n\n  // Returns the first index on an array-like that passes a predicate test\n  _.findIndex = createPredicateIndexFinder(1);\n  _.findLastIndex = createPredicateIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = getLength(array);\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generator function to create the indexOf and lastIndexOf functions\n  function createIndexFinder(dir, predicateFind, sortedIndex) {\n    return function(array, item, idx) {\n      var i = 0, length = getLength(array);\n      if (typeof idx == 'number') {\n        if (dir > 0) {\n            i = idx >= 0 ? idx : Math.max(idx + length, i);\n        } else {\n            length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n        }\n      } else if (sortedIndex && idx && length) {\n        idx = sortedIndex(array, item);\n        return array[idx] === item ? idx : -1;\n      }\n      if (item !== item) {\n        idx = predicateFind(slice.call(array, i, length), _.isNaN);\n        return idx >= 0 ? idx + i : -1;\n      }\n      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n        if (array[idx] === item) return idx;\n      }\n      return -1;\n    };\n  }\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);\n  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (stop == null) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = step || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var args = slice.call(arguments, 2);\n    var bound = function() {\n      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));\n    };\n    return bound;\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var i, length = arguments.length, key;\n    if (length <= 1) throw new Error('bindAll must be passed function names');\n    for (i = 1; i < length; i++) {\n      key = arguments[i];\n      obj[key] = _.bind(obj[key], obj);\n    }\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){\n      return func.apply(null, args);\n    }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n\n      if (last < wait && last >= 0) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) timeout = setTimeout(later, wait);\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  function collectNonEnumProps(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  }\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object\n  // In contrast to _.map it returns an object\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys =  _.keys(obj),\n          length = keys.length,\n          results = {},\n          currentKey;\n      for (var index = 0; index < length; index++) {\n        currentKey = keys[index];\n        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n      }\n      return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s)\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(object, oiteratee, context) {\n    var result = {}, obj = object, iteratee, keys;\n    if (obj == null) return result;\n    if (_.isFunction(oiteratee)) {\n      keys = _.allKeys(obj);\n      iteratee = optimizeCb(oiteratee, context);\n    } else {\n      keys = flatten(arguments, false, false, 1);\n      iteratee = function(value, key, obj) { return key in obj; };\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj, iteratee, context) {\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n    } else {\n      var keys = _.map(flatten(arguments, false, false, 1), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Creates an object that inherits from the given prototype object.\n  // If additional properties are provided then they will be added to the\n  // created object.\n  _.create = function(prototype, props) {\n    var result = baseCreate(prototype);\n    if (props) _.extendOwn(result, props);\n    return result;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return _.has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), and in Safari 8 (#1929).\n  if (typeof /./ != 'function' && typeof Int8Array != 'object') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj !== +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return obj != null && hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  _.property = property;\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    return obj == null ? function(){} : function(key) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of\n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n   // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property, fallback) {\n    var value = object == null ? void 0 : object[property];\n    if (value === void 0) {\n      value = fallback;\n    }\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escaper, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offest.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    try {\n      var render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return result(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n  _.prototype.toString = function() {\n    return '' + this._wrapped;\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define === 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}.call(this));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/underscore/underscore.js\n// module id = ./node_modules/underscore/underscore.js\n// module chunks = mainSmartElement","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/module.js","/*global define*/\ndefine([\n    'underscore',\n    'backbone',\n    'dcpDocument/models/mAttributeData',\n    'dcpDocument/models/mAttributeStructural',\n    'dcpDocument/models/mAttributeArray'\n], function (_, Backbone, ModelAttributeData, ModelAttributeStructural, ModelAttributeArray) {\n    'use strict';\n\n    return Backbone.Collection.extend({\n        comparator : \"logicalOrder\",\n\n        model :      function CollectionAttributesSelectModel(attributes, options) {\n            if (attributes.type === \"array\") {\n                return new ModelAttributeArray(attributes, options);\n            }\n            if (attributes.type === \"tab\" || attributes.type === \"frame\") {\n                return new ModelAttributeStructural(attributes, options);\n            }\n            return new ModelAttributeData(attributes, options);\n        },\n\n        initialize : function CollectionAttributes_initialize(values, options) {\n            this.documentModel = options.documentModel;\n            this.renderOptions = options.renderOptions;\n            this.renderMode = options.renderMode;\n        },\n\n        destroy : function CollectionAttributes_destroy() {\n            var model;\n            while (model = this.first()) { // jshint ignore:line\n                model.destroy();\n            }\n            delete this.documentModel;\n            delete this.renderOptions;\n            delete this.renderMode;\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/collections/attributes.js","/*global define*/\ndefine([\n    'underscore',\n    'backbone'\n], function (_, Backbone) {\n    'use strict';\n\n    return Backbone.Collection.extend({\n\n        comparator : \"logicalOrder\",\n\n        toData : function(index, extended) {\n            var elements = [];\n            this.each(function(currentAttribute) {\n                elements.push(currentAttribute.toData(index, extended));\n            });\n            return elements;\n        },\n\n        destroy : function () {\n            var model;\n            while (model = this.first()) { // jshint ignore:line\n                model.destroy();\n            }\n        },\n\n        propageEvent : function (eventName) {\n            this.each(function (currentModel) {\n                currentModel.trigger(eventName);\n                if (currentModel.get(\"content\")) {\n                    currentModel.get(\"content\").propageEvent(eventName);\n                }\n            });\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/collections/contentAttributes.js","/*global define*/\ndefine([\n    'underscore',\n    'backbone',\n    'dcpDocument/models/mMenu'\n], function (_, Backbone, ModelMenu)\n{\n    'use strict';\n\n    return Backbone.Collection.extend({\n        model: ModelMenu,\n\n        destroy: function CollectionMenu_destroy()\n        {\n            var model;\n            while (model = this.first()) { // jshint ignore:line\n                model.destroy();\n            }\n        },\n\n        _deepSearchMenu: function CollectionMenu__deepSearchMenu(contents, id, key, value)\n        {\n            var scope = this, subMenu, i, subSubMenu;\n            if (contents) {\n                for (i = 0; i < contents.length; i++) {\n                    subMenu = contents[i];\n                    if (subMenu.id === id) {\n                        if (key) {\n                            subMenu[key]=value;\n                        }\n                        return subMenu;\n                    } else {\n                        subSubMenu = scope._deepSearchMenu(subMenu.content, id, key, value);\n                        if (subSubMenu) {\n                            return subSubMenu;\n                        }\n                    }\n                }\n            }\n            return null;\n        },\n\n        getMenu: function CollectionMenu_getMenu(id)\n        {\n            var menuInfo = null, menuInfoItem = null, scope = this;\n\n            if (this.get(id)) {\n                return this.get(id).attributes;\n            } else {\n                this.each(function (oneMenu)\n                {\n                    if (oneMenu.get(\"content\")) {\n                        menuInfoItem = scope._deepSearchMenu(oneMenu.get(\"content\"), id);\n                        if (menuInfoItem) {\n                            menuInfo = menuInfoItem;\n                        }\n                    }\n                });\n                return menuInfo;\n            }\n        },\n\n\n        setMenu: function CollectionMenu_setMenu(id, key, value)\n        {\n            var menuInfo = null, menuInfoItem = null, scope = this, menuModel=null, newContent={};\n\n            if (this.get(id)) {\n                menuModel= this.get(id);\n                menuModel.set(key, value);\n                return menuModel.attributes;\n            } else {\n                this.each(function (oneMenu)\n                {\n                    if (oneMenu.get(\"content\")) {\n                        menuInfoItem = scope._deepSearchMenu(oneMenu.get(\"content\"), id, key, value);\n                        if (menuInfoItem) {\n                            newContent=oneMenu.get(\"content\");\n                            oneMenu.set(\"content\", newContent);\n                            menuInfo=newContent;\n                            oneMenu.trigger('change');\n                        }\n                    }\n                });\n                return menuInfo;\n            }\n        }\n\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/collections/menus.js","/*global define*/\ndefine([\n    \"underscore\"\n], function attributeInterface(_)\n{\n    'use strict';\n\n    var AttributPrototype = function AttributePrototype()\n    {\n        this.id = this._attributeModel.id;\n    };\n    /**\n     * Get the property of the current attribute\n     *\n     * @returns {*}\n     */\n    AttributPrototype.prototype.getProperties = function AttributeInterfaceGetProperties()\n    {\n        var properties = _.clone(this._attributeModel.attributes), content = properties.content;\n        properties = _.omit(properties, \"isValueAttribute\", \"title\", \"attributeValue\", \"content\");\n        properties.content = [];\n        if (content && content.length) {\n            properties.content = content.map(function attributeInterface_convertChild(currentAttribute) {\n                return new AttributeInterface(currentAttribute);\n            });\n        }\n        return properties;\n    };\n\n    /**\n     * Change the label of an attribute\n     *\n     * @returns {*}\n     */\n    AttributPrototype.prototype.setLabel = function AttributeInterfaceSetLabel(label)\n    {\n        this._attributeModel.set(\"label\", label);\n    };\n\n    /**\n     * Get the data to build a widget\n     *\n     * @returns {*}\n     */\n    AttributPrototype.prototype.getWidgetData = function AttributeInterfaceGetWidgetData(index)\n    {\n        return _.clone(this._attributeModel.toData(index, true));\n    };\n\n    /**\n     * Get the options of the current attribute\n     * @returns {*}\n     */\n    AttributPrototype.prototype.getOptions = function AttributeInterfaceGetOptions()\n    {\n        var options = this._attributeModel.getOptions();\n        return _.clone(options);\n    };\n\n    /**\n     * Get an option of the current attribute\n     *\n     * @param name\n     * @returns {*}\n     */\n    AttributPrototype.prototype.getOption = function AttributeInterfaceGetOption(name)\n    {\n        return this._attributeModel.getOption(name);\n    };\n\n    /**\n     * Set an option of the current\n     * Add an effect only on beforeRender\n     * @param name\n     * @param value\n     * @constructor\n     */\n    AttributPrototype.prototype.setOption = function AttributeInterfaceSetOption(name, value)\n    {\n        this._attributeModel.setOption(name, value);\n    };\n\n    AttributPrototype.prototype.getValue = function AttributeInterfaceGetValue(type)\n    {\n        if (_.isUndefined(type) || type === \"current\") {\n            return this._attributeModel.get(\"attributeValue\");\n        }\n        if (type === \"previous\") {\n            return this._attributeModel.previous(\"attributeValue\");\n        }\n        if (type === \"initial\") {\n            return this._attributeModel._initialAttributeValue;\n        }\n        if (type === \"all\") {\n            return {\n                \"current\": this._attributeModel.get(\"attributeValue\"),\n                \"previous\": this._attributeModel.previous(\"attributeValue\"),\n                \"initial\": this._attributeModel._initialAttributeValue\n            };\n        }\n        throw new Error(\"Unknown type of getValue (current, previous, initial, all\");\n    };\n\n    AttributPrototype.prototype.setValue = function AttributeInterfaceSetValue(value, dryRun)\n    {\n        var index;\n        var currentValue;\n        if (this._attributeModel.get(\"multiple\")) {\n            if (_.isArray(value)) {\n                _.each(value, function AttributeInterfaceSetValueVerify(singleValue)\n                {\n                    if (!_.isObject(singleValue) || _.isUndefined(singleValue.value)) {\n                        throw new Error(\"Each values must be an object with at least value properties\");\n                    }\n                });\n            } else {\n                if (!_.isObject(value) || _.isUndefined(value.value) || _.isUndefined(value.index) || value.index === null) {\n                    throw new Error(\"Value must be an object with at least value and index properties\");\n                }\n\n                index = parseInt(value.index);\n                if (index < 0) {\n                    throw new Error(\"Index value must be positive or null\");\n                }\n\n                if (this._attributeModel.isDoubleMultiple()) {\n                    if (!_.isArray(value.value)) {\n                        throw new Error(\"Value must be an array for multiple in arrays\");\n                    }\n                    value = value.value;\n                } else {\n                    value = _.defaults(value, {displayValue: value.value});\n                }\n\n                currentValue = this._attributeModel.get(\"attributeValue\").slice();\n                currentValue[index] = _.clone(value);\n                value = currentValue;\n            }\n\n        } else {\n            if (!_.isObject(value) || _.isUndefined(value.value)) {\n                throw new Error(\"Value must be an object with at least value properties\");\n            }\n\n            value = _.defaults(value, {displayValue: value.value});\n        }\n        if (!dryRun) {\n            this._attributeModel.set(\"attributeValue\", value);\n        }\n    };\n\n    AttributPrototype.prototype.toJSON = function AttributeInterfacetoJSON()\n    {\n        return {\n            \"id\": this._attributeModel.id,\n            \"properties\": _.omit(this._attributeModel.attributes, \"isValueAttribute\", \"title\", \"options\", \"attributeValue\"),\n            \"options\": this._attributeModel.getOptions()\n        };\n    };\n\n    var AttributeInterface = function AttributeInterface(attributeModel)\n    {\n        this._attributeModel = attributeModel;\n        AttributPrototype.call(this);\n    };\n\n    AttributeInterface.prototype = Object.create(AttributPrototype.prototype);\n    AttributeInterface.prototype.constructor = AttributPrototype;\n\n    return AttributeInterface;\n\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/controllerObjects/attributeInterface.js","/*global define*/\ndefine([\"underscore\"], function require_constraintHandler(_)\n{\n    'use strict';\n\n    return function ConstraintHandler()\n    {\n        var _messages = [];\n        this.addConstraintMessage = function addConstraintMessage(message, index)\n        {\n            index = _.isNumber(index) ? index : -1;\n            _messages.push({message: message, index: index});\n        };\n        this.getConstraintMessages = function getConstraintMessages()\n        {\n            return _messages.slice(0);\n        };\n        this.hasConstraintMessages = function hasConstraintMessages()\n        {\n            return _messages.length > 0;\n        };\n        this.deleteConstaintMessages = function deleteConstaintMessages()\n        {\n            _messages = [];\n        };\n    };\n\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/controllerObjects/constraintHandler.js","/*global define*/\ndefine([\n    \"underscore\"\n], function menuInterface(_)\n{\n    'use strict';\n\n    var MenuError = function MenuError(message) {\n        this.name = 'MenuError';\n        this.message = message || 'Default Message';\n        this.stack = (new Error()).stack;\n    };\n    MenuError.prototype = Object.create(Error.prototype);\n    MenuError.prototype.constructor = MenuError;\n\n    var MenuPrototope = function AttributePrototype()\n    {\n        if (this._menuModel) {\n            this.id = this._menuModel.id;\n        } else {\n            this.id = null;\n        }\n    };\n    MenuPrototope.prototype._menuModel=null;\n    MenuPrototope.prototype._set = function MenuPrototope_set(key, value, options)\n    {\n        if (options && options.strict === true && !this.id) {\n            throw new MenuError(\"This menu doesn't exist\");\n        }\n        if (this.id || (options && options.strict === true)) {\n            this._menuModel.set(key, value, options);\n        }\n    };\n    /**\n     * Get the property of the current attribute\n     *\n     * @returns {*}\n     */\n    MenuPrototope.prototype.getProperties = function menuInterfaceGetProperties(options)\n    {\n        if (options && options.strict === true && !this.id) {\n            throw new MenuError(\"This menu doesn't exist\");\n        }\n        if (this.id || (options && options.strict === true)) {\n            return _.clone(this._menuModel.attributes);\n        }\n        return {};\n    };\n\n    /**\n     * Disable an item menu\n     *\n     * @returns {*}\n     */\n    MenuPrototope.prototype.disable = function menuInterfaceDisable(options)\n    {\n        this._set(\"visibility\", \"disabled\", options);\n    };\n    /**\n     * Enable and show an item menu\n     *\n     * @returns {*}\n     */\n    MenuPrototope.prototype.enable = function menuInterfaceEnable(options)\n    {\n        this._set(\"visibility\", \"visible\", options);\n    };\n\n    /**\n     * Hide an item menu\n     *\n     * @returns {*}\n     */\n    MenuPrototope.prototype.hide = function menuInterfaceHide(options)\n    {\n        this._set(\"visibility\", \"hidden\", options);\n    };\n\n    /**\n     * Change text label\n     * @param label raw text\n     *\n     * @returns {*}\n     * @param options\n     */\n    MenuPrototope.prototype.setLabel = function menuInterfaceSetLabel(label, options)\n    {\n        this._set(\"label\", label, options);\n    };\n\n    /**\n     * Change html label\n     * @param label html fragment\n     *\n     * @returns {*}\n     * @param options\n     */\n    MenuPrototope.prototype.setHtmlLabel = function menuInterfaceSetHtmlLabel(label, options)\n    {\n        this._set(\"htmlLabel\", label, options);\n    };\n\n    /**\n     * Change icon url\n     * @param url image url\n     *\n     * @returns {*}\n     * @param options\n     */\n    MenuPrototope.prototype.setIconUrl = function menuInterfaceSetIconUrl(url, options)\n    {\n        this._set(\"iconUrl\", url, options);\n    };\n    /**\n     * Change custom css class\n     * @param cssClass css class\n     *\n     * @returns {*}\n     * @param options\n     */\n    MenuPrototope.prototype.setCssClass = function menuInterfaceSetCssClass(cssClass, options)\n    {\n        this._set(\"cssClass\", cssClass, options);\n    };\n\n    /**\n     * Change url\n     * @param url\n     *\n     * @returns {*}\n     * @param options\n     */\n    MenuPrototope.prototype.setUrl = function menuInterfaceSetUrl(url, options)\n    {\n        this._set(\"url\", url, options);\n    };\n\n    MenuPrototope.prototype.redraw = function menuInterfaceRedraw()\n    {\n        this._menuModel.trigger(\"reload\");\n    };\n\n    var MenuInterface = function menuInterface(attributeModel)\n    {\n        this._menuModel = attributeModel;\n        MenuPrototope.call(this);\n    };\n\n    MenuInterface.prototype = Object.create(MenuPrototope.prototype);\n    MenuInterface.prototype.constructor = MenuPrototope;\n\n    return MenuInterface;\n\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/controllerObjects/menuInterface.js","/*global define*/\ndefine([\n    \"underscore\"\n], function require_transitionInterface(_)\n{\n    'use strict';\n\n    var TransitionInterfacePrototype = function TransitionInterfacePrototype()\n    {\n\n    };\n\n    TransitionInterfacePrototype.prototype.getValues = function TransitionInterfacePrototype_getValues() {\n        if (!this._TransitionModel) {\n            return null;\n        }\n        return this._TransitionModel.toJSON();\n    };\n\n    TransitionInterfacePrototype.prototype.hide = function TransitionInterfacePrototype_hide()\n    {\n        if (!this._TransitionModel) {\n            return null;\n        }\n        return this._TransitionModel.trigger(\"hide\");\n    };\n\n    TransitionInterfacePrototype.prototype.show = function TransitionInterfacePrototype_show()\n    {\n        if (!this._TransitionModel) {\n            return null;\n        }\n        return this._TransitionModel.trigger(\"show\");\n    };\n\n    TransitionInterfacePrototype.prototype.close = function TransitionInterfacePrototype_close()\n    {\n        if (!this._TransitionModel) {\n            return null;\n        }\n        return this._TransitionModel.trigger(\"close\");\n    };\n\n    var TransitionInterface = function TransitionInterface(transitionModel, $el, nextState, transition)\n    {\n        this._TransitionModel = transitionModel;\n        this.$el = $el;\n        this.nextState = nextState;\n        this.transition = transition;\n        TransitionInterfacePrototype.call(this);\n    };\n\n    TransitionInterface.prototype = Object.create(TransitionInterfacePrototype.prototype);\n    TransitionInterface.prototype.constructor = TransitionInterfacePrototype;\n\n    return TransitionInterface;\n\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/controllerObjects/transitionInterface.js","window.dcp = window.dcp || {};\n\n(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\"dcpDocument/i18n/translatorFactory\"], factory);\n    } else {\n        //Load translation and load i18n handler for non require project\n        $.get(\"api/v1/i18n/DOCUMENT\").done(function translationLoaded(catalog) {\n            window.dcp.i18n = catalog;\n            factory(window.dcp.translatorFactory);\n            //Trigger an event when translation loaded\n            $(window).trigger(\"documentCatalogLoaded\");\n        });\n    }\n}(window, function documentCatalog(translatorFactory)\n{\n    \"use strict\";\n    //Register document translation in the global window.dcp.documentCatalog\n    window.dcp.documentCatalog = translatorFactory(window.dcp.i18n);\n    return window.dcp.documentCatalog;\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/i18n/documentCatalog.js","/*global define*/\n// use \"text!dcpContextRoot/api/v1/i18n/DOCUMENT\" to get only DDUI translation\n\nwindow.dcp = window.dcp || {};\n\n(function umdRequire(root, requireFunction)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([], requireFunction);\n    }\n    root.dcp.translatorFactory = requireFunction([]);\n}(window, function require_translatorFactory()\n{\n    \"use strict\";\n\n    var isString = function isString(obj)\n    {\n        return typeof obj === 'string';\n    };\n\n    return function catalog(translation)\n    {\n        if (isString(translation)) {\n            try {\n                translation = JSON.parse(translation);\n            } catch (e) {\n                translation = {data: {catalog: {}}};\n                console.error(\"Locale catalog error : \" + e.message);\n            }\n        }\n\n        return {\n            _catalog: translation.data.catalog,\n            _locale: translation.data.locale,\n\n            /**\n             * Return key translation\n             * @param key text to translate\n             * @returns string\n             */\n            _: function i18n_gettext(key)\n            {\n                if (key && this._catalog[key]) {\n                    return this._catalog[key];\n                }\n                return key;\n            },\n            /**\n             * Return key translation in context\n             * @param key text to translate\n             * @param ctxt context\n             * @returns {*}\n             */\n            ___: function i18n_pgettext(key, ctxt)\n            {\n                if (key && this._catalog && this._catalog._msgctxt_ && this._catalog._msgctxt_[ctxt] && this._catalog._msgctxt_[ctxt][key]) {\n                    return this._catalog._msgctxt_[ctxt][key];\n                }\n                return key;\n            },\n            /**\n             * Return some info on the current locale\n             * \n             * @returns {locale|{culture}|*|string|string}\n             */\n            getLocale: function i18n_getLocale()\n            {\n                return this._locale;\n            }\n        };\n    };\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/i18n/translatorFactory.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Apps/DOCUMENT/IHM/loading/loading.css\n// module id = ./src/Apps/DOCUMENT/IHM/loading/loading.css\n// module chunks = mainSmartElement","/**\n * Main bootstraper\n */\n/*global require, console*/\nimport \"./loading/loading.css\";\nimport $ from \"jquery\";\n\n$.get(\"api/v1/i18n/DOCUMENT\").done(function translationLoaded(catalog) {\n\n    //Trigger an event when translation loaded\n    window.dcp.i18n = catalog;\n    const _ = require('underscore');\n    require('dcpDocument/widgets/documentController/documentController');\n    require('kendo');\n\n    'use strict';\n    console.timeEnd(\"js loading\");\n\n    var $document = $(\".document\"), currentValues, varWidgetValue=\"widgetValue\";\n\n    window.dcp = window.dcp || {};\n\n    window.dcp.documentReady = false;\n\n    if (!window.dcp.viewData && window.location.hash) {\n        currentValues = window.location.hash;\n        if (currentValues[0] === \"#\") {\n            currentValues = currentValues.slice(1);\n        }\n        if (currentValues.indexOf(varWidgetValue) === 0) {\n            try {\n                window.dcp.viewData = JSON.parse(currentValues.slice(varWidgetValue.length));\n            } catch(ex1) {\n                try {\n                    window.dcp.viewData = JSON.parse(decodeURI(currentValues.slice(varWidgetValue.length)));\n                } catch(ex2) {\n                    $document.documentController(\"showMessage\", {\n                        type: \"error\",\n                        message: \"unable to retrieve document\"\n                    });\n                }\n            }\n        }\n\n    }\n\n    window.dcp.triggerReload = function triggerReload()\n    {\n        // Init bind events in case of use extern document controller\n        if (window.documentLoaded && _.isFunction(window.documentLoaded) && !window.dcp.documentReady) {\n            window.documentLoaded($document, window.dcp.viewData);\n            window.dcp.documentReady = true;\n        }\n    };\n\n    if (window.dcp.viewData !== false && window.dcp.viewData.initid) {\n        $document.documentController(window.dcp.viewData);\n        $document.one(\"documentready\", function launchReady()\n        {\n            window.dcp.triggerReload();\n            _.each(window.dcp.messages, function (msg) {\n                $document.documentController(\"showMessage\", {\n                    type: msg.type,\n                    message: msg.contentText\n                });\n            });\n        });\n    } else {\n        $document.documentController();\n        window.dcp.triggerReload();\n    }\n\n    window.dcp.document = $document;\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/mainDocument.js","/*global define*/\ndefine([\n    'underscore',\n    'jquery',\n    'backbone'\n], function require_mAttribute(_, $, Backbone) {\n    'use strict';\n\n    return Backbone.Model.extend({\n\n        typeModel:\"ddui:attribute\",\n        defaults : {\n            title :            null,\n            isValueAttribute : false,\n            parent :           undefined,\n            mode :             \"read\",\n            errorMessage :     null\n        },\n\n        initialize : function mAttributeinitialize() {\n            this.listenTo(this, \"change:documentMode\", this._computeMode);\n            this.listenTo(this, \"change:visibility\", this._computeMode);\n            this._computeValueMode();\n            this._computeMode();\n            this.set(\"title\", this.id + '(' + this.get(\"label\") + ')');\n            this.set(\"errorMessage\", null);\n        },\n\n        toData : function mAttributetoData(index, extended) {\n            var content = this.toJSON();\n            if ((typeof index !== \"undefined\" && index !== null) && this.get(\"multiple\") === false) {\n                throw new Error(\"You need to be multiple\");\n            }\n            if (_.isNumber(index)) {\n                content.attributeValue = content.attributeValue ? content.attributeValue[index] : null;\n                content.index = index;\n            }\n            content.isDisplayable = this.isDisplayable();\n            content.content = [];\n            if (this.get(\"content\") && _.isFunction(this.get(\"content\").toData)) {\n                content.content = this.get(\"content\").toData(index, extended);\n            }\n            if (extended) {\n                content.renderOptions = this.getOptions();\n                content.labels = content.labels || {};\n                content.locale = this.getDocumentModel().get(\"locale\");\n                content.templates = {};\n                if (this.getTemplates().attribute) {\n                    if (this.getTemplates().attribute[this.get(\"type\")]) {\n                        content.templates = this.getTemplates().attribute[this.get(\"type\")];\n                    } else {\n                        // fallback in case of no specific templates\n                        content.templates = this.getTemplates().attribute[\"default\"];\n                    }\n                }\n                content.deleteButton = true;\n                content.sourceValues = this.get(\"enumItems\");\n                content.sourceUri = this.get(\"enumUrl\");\n                if (!content.templates.label) {\n                    content.templates.label = this.getTemplates().attribute.label;\n                }\n            }\n            return content;\n        },\n\n        isDisplayable : function mAttributeisDisplayable() {\n            var canBeDisplayable;\n            if (this.get(\"mode\") === \"hidden\") {\n                return false;\n            }\n            if (this.get(\"isValueAttribute\")) {\n                if (this.get(\"mode\") === \"read\") {\n                    if (this.getOption('showEmptyContent') !== null) {\n                        return true;\n                    } else {\n                        canBeDisplayable = (this.get(\"attributeValue\") && this.get(\"attributeValue\").value !== null);\n                        if (_.isArray(this.get(\"attributeValue\"))) {\n                            canBeDisplayable = _.isArray(this.get(\"attributeValue\")) && this.get(\"attributeValue\").length > 0;\n                        }\n                        return canBeDisplayable;\n                    }\n                } else if (this.get(\"mode\") === \"write\") {\n                    return true;\n                }\n            }\n            if (this.get(\"content\").length === 0) {\n                return false;\n            }\n            if (this.getOption('showEmptyContent') === null) {\n                if (this.get(\"content\").some) {\n                    return this.get(\"content\").some(function mAttribute_checkDisplayable(value) {\n                        return value.isDisplayable();\n                    });\n                }\n                return false;\n            }\n            return true;\n        },\n\n        hasMultipleOption : function mAttributehasMultipleOption() {\n            return (this.attributes.options && this.attributes.options.multiple === \"yes\");\n        },\n\n        isDoubleMultiple : function mAttributehasMultipleOption() {\n            return (this.hasMultipleOption() && this.getParent().get(\"type\") === \"array\");\n        },\n\n        getParent : function mAttributegetParent() {\n            if (this.attributes.parent) {\n                return this.getDocumentModel().get('attributes').get(this.attributes.parent);\n            }\n            return null;\n        },\n\n        hasValueChanged: function mAttributehasReallyChanged() {\n            return (this.get(\"attributeValue\") &&\n            ((this.get(\"attributeValue\").value !== undefined &&\n            (((this._initialAttributeValue || {}).value || '') !== (this.get(\"attributeValue\").value || ''))) || !_.isEqual(_.pluck(_.flatten(this._initialAttributeValue), \"value\"),\n                _.pluck(_.flatten(this.get(\"attributeValue\")), \"value\")))\n            );\n        },\n\n        _computeMode : function mAttribute_computeMode() {\n            var visibility = this.get(\"visibility\"), documentMode = this.collection.renderMode;\n            if (visibility === \"H\" || visibility === \"I\") {\n                this.set(\"mode\", \"hidden\");\n                return;\n            }\n            if (documentMode === \"view\") {\n                if (visibility === \"O\") {\n                    this.set(\"mode\", \"hidden\");\n                    return;\n                }\n                if (this.get(\"isValueAttribute\") && (_.isEmpty(this.get(\"attributeValue\")) || _.isUndefined(this.get(\"attributeValue\") || this.get(\"attributeValue\").value === null))) {\n                    if (this.getOption('showEmptyContent') === null) {\n                        this.set(\"mode\", \"hidden\");\n                        return;\n                    }\n                }\n                this.set(\"mode\", \"read\");\n                return;\n            }\n            if (documentMode === \"edit\") {\n                if (visibility === \"W\" || visibility === \"O\") {\n                    this.set(\"mode\", \"write\");\n                    return;\n                }\n                if (visibility === \"R\") {\n                    this.set(\"mode\", \"hidden\");\n                    return;\n                }\n                if (visibility === \"R\" || visibility === \"S\") {\n                    this.set(\"mode\", \"read\");\n                    return;\n                }\n                if (visibility === \"U\") {\n                    this.set(\"mode\", \"write\");\n                    this.set(\"addTool\", false);\n                    return;\n                }\n            }\n            throw new Error(\"unkown mode \" + documentMode + \" or visibility \" + visibility + \" \" + this.get(\"id\"));\n        },\n\n        _computeValueMode : function mAttribute_computeValueMode() {\n            var type = this.get(\"type\"), visibility = this.get(\"visibility\");\n            if (type === \"frame\" || type === \"array\" || type === \"tab\" || visibility === \"I\") {\n                this.set(\"isValueAttribute\", false);\n            }\n        },\n        /**\n         * Return all options for an attribute\n         *\n         * @returns {{}}\n         */\n        getOptions :        function mAttributegetOptions() { \n            var optionsCommon={}, optionsValue={}, optionsAttribute={}, renderOptions, labels={};\n            this._options = this._options || false;\n\n            if (this._options === false) {\n                renderOptions = this.collection.renderOptions;\n                if (renderOptions.common) {\n                    optionsCommon = renderOptions.common || {};\n                    labels= _.clone(optionsCommon.translatedLabels) || {};\n                }\n\n                if (renderOptions.types) {\n                    optionsValue = renderOptions.types[this.get(\"type\")] || {};\n                    labels= _.extend(labels, _.clone(optionsValue.translatedLabels));\n                }\n                if (renderOptions.attributes) {\n                    optionsAttribute = renderOptions.attributes[this.id] || {};\n                }\n                // labels must be merged\n                optionsAttribute.labels= _.extend(labels, optionsAttribute.translatedLabels);\n                this._options = {};\n            }\n\n            _.extend(this._options, optionsCommon, optionsValue, optionsAttribute);\n\n            return this._options;\n        },\n\n        /**\n         * Get value for an option\n         *\n         * @param key option identifier\n         * @returns {*}\n         */\n        getOption : function mAttributegetOption(key) {\n            var options = this.getOptions();\n            if (typeof options[key] !== \"undefined\") {\n                return options[key];\n            }\n            return null;\n        },\n\n        /**\n         * Set the value of an option\n         *\n         * @param key\n         * @param value\n         * @returns {*}\n         */\n        setOption : function mAttributesetOption(key, value) {\n            var options = this.getOptions();\n            options[key] = value;\n            this._options = options;\n            this.trigger(\"optionModified\", key);\n            return this;\n        },\n\n        getDocumentModel : function mAttributegetDocumentModelgetDocumentModel() {\n            return this.collection.documentModel;\n        },\n\n        getTemplates : function mAttributegetTemplatesgetTemplates() {\n            var templates = this.getDocumentModel().get(\"templates\");\n            if (!templates) {\n                templates = window.dcp.templates;\n            }\n            return templates;\n        },\n\n        setErrorMessage : function mAttributesetErrorMessage(message, index) {\n            var parentId = this.get('parent');\n            if (this.get(\"multiple\") && typeof index !== \"undefined\") {\n                var errorMessage = this.get('errorMessage') || [];\n                // delete duplicate\n                _.reject(errorMessage, function mAttribute_reindex(indexMessage) {\n                    return indexMessage.index === index;\n                });\n                this.set('errorMessage', [{message : message, index : index}].concat(errorMessage));\n            } else {\n                this.set('errorMessage', message);\n            }\n            if (parentId) {\n                // Propagate error message on parent structure\n                 var parentModel = this.getDocumentModel().get('attributes').get(parentId);\n                 if (parentModel) {\n                     parentModel.setErrorMessage(message);\n                 }\n            }\n        },\n\n        checkConstraint : function mAttributecheckConstraint() {\n            return true;\n        },\n\n        haveView : function mAttributeHaveView() {\n            var view = {haveView : false, elements : $()};\n            this.trigger(\"haveView\", view);\n            return view;\n        },\n        /**\n         * Attribute model are not linked to REST element so always new\n         * @returns {boolean}\n         */\n        isNew : function mAttribute_isNew() {\n            return true;\n        }\n\n    });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/models/mAttribute.js","define([\n    \"underscore\",\n    \"dcpDocument/models/mAttributeStructural\"\n], function (_, AttributeStructuralModel) {\n    'use strict';\n\n    return AttributeStructuralModel.extend({\n\n        typeModel:\"ddui:attributeArray\",\n        removeIndexedLine : function mAttributeArrayRemoveIndexLine(index) {\n            this.trigger(\"removeWidgetLine\", {index : index}, {silent : true});\n            this.trigger(\"array\", \"remove\", this, index);\n        },\n\n        addIndexedLine : function mAttributeArrayaddIndexedLine(index) {\n            this.trigger(\"addWidgetLine\", {index : index});\n            this.trigger(\"array\", \"add\", this, index);\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/models/mAttributeArray.js","define([\n    \"underscore\",\n    \"dcpDocument/models/mAttribute\",\n    'dcpDocument/controllerObjects/constraintHandler'\n], function require_mAttributeData(_, AttributeModel, ConstraintHandler)\n{\n    'use strict';\n\n    return AttributeModel.extend({\n        typeModel: \"ddui:attributeData\",\n        defaults: {\n            isValueAttribute: true,\n            multiple: false,\n            attributeValue: null\n        },\n\n        initialize: function mAttributeinitialize()\n        {\n            this.listenTo(this, \"change:attributeValue\", this.checkConstraint);\n            this._initialAttributeValue = this.get(\"attributeValue\") || {value: null};\n            AttributeModel.prototype.initialize.apply(this, arguments);\n        },\n\n        getValue: function mAttributegetValue()\n        {\n            return this.get(\"attributeValue\");\n        },\n        setValue: function mAttributesetValue(value, index)\n        {\n            var currentValue, idx;\n            if (this.get(\"multiple\") && !_.isNumber(index) && !_.isArray(value)) {\n                throw new Error(\"You need to add an index to set value for a multiple id \" + this.id);\n            }\n            if (this.get(\"multiple\") && index >= 0) {\n                currentValue = _.clone(this.get(\"attributeValue\"));\n                if (currentValue.length < index) {\n                    for (idx=currentValue.length; idx<index; idx++) {\n                        currentValue.push({value:null, displayValue:''});\n                    }\n                }\n                currentValue[index] = value;\n                this.set(\"attributeValue\", currentValue);\n            } else {\n                this.set(\"attributeValue\", value);\n            }\n        },\n\n        addValue: function mAttributeaddValue(value, index, options)\n        {\n            var currentValue;\n            if (this.hasMultipleOption() && !_.isNumber(index)) {\n                throw new Error(\"You need to add an index to set value for a multiple id \" + this.id);\n            }\n            // clone array references\n            currentValue = _.toArray(_.map(this.get(\"attributeValue\"), _.clone));\n\n            if (this.hasMultipleOption() && index >= 0) {\n                //Init the multiple value if void\n                if (!currentValue[index]) {\n                    currentValue[index] = [];\n                }\n                currentValue[index].push(value);\n                this.set(\"attributeValue\", currentValue, options);\n            } else {\n                currentValue.push(value);\n                this.set(\"attributeValue\", currentValue, options);\n            }\n        },\n\n        removeIndexValue: function mAttributeremoveIndexValue(index, options)\n        {\n            var currentValue, oldValue;\n            if (!this.get(\"multiple\") || !_.isNumber(index)) {\n                throw new Error(\"You need to add an index to set value for a multiple id \" + this.id);\n            }\n            oldValue = this.get(\"attributeValue\");\n            currentValue = _.clone(this.get(\"attributeValue\"));\n            _.each(currentValue, function mAttributeRemoveIndex(value, currentIndex)\n            {\n                currentIndex = parseInt(currentIndex, 10);\n                if (currentIndex === index) {\n                    delete currentValue[index];\n                }\n                if (currentIndex > index && oldValue[currentIndex]) {\n                    delete currentValue[currentIndex];\n                    currentValue[currentIndex - 1] = oldValue[currentIndex];\n                }\n            });\n            currentValue = _.filter(currentValue, function removeUndefined(currentValue)\n            {\n                return !_.isUndefined(currentValue);\n            });\n            this.set(\"attributeValue\", currentValue, {notUpdateArray: true});\n        },\n\n        /**\n         * Add an indexed value with or without default value\n         * Used by attributes in array to add new line or duplicate line\n         *\n         * @param index\n         * @param copy\n         * @param updateArray set to true to resize array widget\n         */\n        createIndexedValue: function mAttributeCreateIndexedValue(index, copy, updateArray)\n        {\n            var currentValue, defaultValue;\n            var newValue;\n            if (!this.get(\"multiple\") || !_.isNumber(index)) {\n                throw new Error(\"You need to add an index to set value for a multiple id \" + this.id);\n            }\n            currentValue = _.toArray(_.map(this.get(\"attributeValue\"), _.clone));\n            defaultValue = this.attributes.defaultValue;\n            if (copy) {\n                newValue = _.clone(currentValue[index]);\n            } else\n                if (defaultValue) {\n                    newValue = defaultValue;\n                } else\n                    if (this.hasMultipleOption()) {\n                        newValue = [];\n                    } else {\n                        newValue = {value: null, displayValue: ''};\n                    }\n\n            if (index > currentValue.length) {\n                currentValue.push(newValue);\n            } else {\n                currentValue.splice(index, 0, newValue);\n            }\n            this.set(\"attributeValue\", currentValue, {notUpdateArray: !updateArray});\n        },\n\n        /**\n         * Add values to indexed element\n         * Used by attributes in array to add new line or duplicate line\n         *\n         * @param newValue\n         * @param index\n         */\n        addIndexedValue: function mAttributeAddIndexedValue(newValue, index)\n        {\n            var currentValue;\n            if (!_.isNumber(index)) {\n                throw new Error(\"You need to add an index to set value indexed value \" + this.id);\n            }\n            currentValue = _.toArray(_.map(this.get(\"attributeValue\"), _.clone));\n\n            if (index > currentValue.length) {\n                currentValue.push(newValue);\n            } else {\n                currentValue.splice(index, 0, newValue);\n            }\n            this.set(\"attributeValue\", currentValue);\n        },\n\n        /**\n         * move a value in multiple value attribute\n         * @param fromIndex\n         * @param toIndex\n         */\n        moveIndexValue: function mAttributemoveIndexValue(fromIndex, toIndex)\n        {\n            var currentValue, fromValue;\n            if (!this.get(\"multiple\")) {\n                throw new Error(\"Move only multiple attribute : \" + this.id);\n            }\n            currentValue = _.toArray(this.get(\"attributeValue\"));\n            fromValue = _.clone(currentValue[fromIndex]);\n\n            currentValue.splice(fromIndex, 1);\n            currentValue.splice(toIndex, 0, fromValue);\n\n            this.set(\"attributeValue\", currentValue);\n            this.trigger(\"moved\", {from: fromIndex, to: toIndex});\n\n        },\n\n        getNbLines: function mAttributegetNbLines()\n        {\n            var nbLines = 0;\n            if (!this.get(\"multiple\")) {\n                return -1;\n            }\n            _.each(this.get(\"attributeValue\"), function mAttributeGetMaxLine(value, index)\n            {\n                if (index > nbLines) {\n                    nbLines = index;\n                }\n            });\n            return nbLines;\n        },\n\n        isInArray: function mAttributeisInArray()\n        {\n            var aparent = this.getParent();\n            return (aparent && aparent.attributes && aparent.attributes.type === \"array\");\n        },\n\n        checkConstraint: function mAttributecheckConstraint(config)\n        {\n            var response = new ConstraintHandler(), responseText = {};\n            var scope = this;\n            config = _.extend({clearError: this.hasInternalError, displayError: true}, config);\n            this.trigger(\"constraint\", {model: this, response: response, value: this.get(\"attributeValue\")});\n            if (response.hasConstraintMessages()) {\n\n                _.each(response.getConstraintMessages(), function mAttributeData_checkConstraintElement(currentResponse)\n                {\n                    responseText[currentResponse.index] = responseText[currentResponse.index] || '';\n                    responseText[currentResponse.index] += currentResponse.message + \" \";\n                });\n                if (config.displayError) {\n                    this.hasInternalError = true;\n                    // Force redraw\n                    scope.setErrorMessage(null); // jshint ignore:line\n\n                    _.each(responseText, function mAttributeData_checkErrorMessage(text, index)\n                    {\n                        index = parseInt(index);\n                        scope.setErrorMessage(text, index);\n                    });\n                }\n                return false;\n            } else {\n                if (config.clearError) {\n                    this.setErrorMessage(null);\n                    this.hasInternalError = false;\n                }\n                return true;\n            }\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/models/mAttributeData.js","define([\n    \"underscore\",\n    \"dcpDocument/models/mAttribute\",\n    'dcpDocument/collections/contentAttributes'\n], function (_, AttributeModel, CollectionContentAttributes) {\n    'use strict';\n\n    return AttributeModel.extend({\n        typeModel:\"ddui:structureAttribute\",\n        defaults : {\n            content :      []\n        },\n\n        setContentCollection : function mAttributesetContentCollection(attributes) {\n            var collection = new CollectionContentAttributes();\n            _.each(attributes, function (currentChild) {\n                collection.push(currentChild);\n            });\n            this.set(\"content\", collection);\n        }\n\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/models/mAttributeStructural.js","/*global define, console, require*/\ndefine([\n    'jquery',\n    'underscore',\n    'backbone',\n    'little-loader',\n    'dcpDocument/models/mDocumentProperties',\n    'dcpDocument/models/mDocumentLock',\n    'dcpDocument/models/mFamilyStructure',\n    'dcpDocument/collections/attributes',\n    'dcpDocument/collections/menus',\n    'dcpDocument/i18n/documentCatalog'\n], function mDocument($, _, Backbone, load, DocumentProperties, DocumentLock, FamilyStructure, CollectionAttributes, CollectionMenus, i18n)\n{\n    'use strict';\n\n    var flattenAttributes = function mDocumentflattenAttributes(currentAttributes, attributes, parent)\n    {\n        if (!_.isArray(attributes)) {\n            attributes = _.values(attributes);\n        }\n        if (parent) {\n            _.each(attributes, function mDocumentEachflattenParentAttributes(value)\n            {\n                value.parent = parent;\n            });\n        }\n        currentAttributes = _.union(currentAttributes, attributes);\n        _.each(attributes, function mDocumentEachflattenAttributes(currentAttr)\n        {\n            if (currentAttr.content) {\n                currentAttributes = _.union(currentAttributes, flattenAttributes(currentAttributes, currentAttr.content, currentAttr.id));\n            }\n        });\n        return currentAttributes;\n    };\n\n    //noinspection JSValidateJSDoc\n    return Backbone.Model.extend({\n        typeModel: \"ddui:document\",\n        idAttribute: \"initid\",\n\n        defaults: {\n            revision: -1,\n            viewId: undefined,\n            renderMode: \"view\",\n            properties: undefined,\n            menus: undefined,\n            attributes: undefined\n        },\n        // Record custom data in model directly - not in model property because must not be reset by clear method\n        _customClientData: {},\n        _uploadingFile: 0,\n        /**\n         * Compute the REST URL for the current document\n         *\n         * Used internaly by backbone in fetch, save, destroy\n         *\n         * @returns {string}\n         */\n        url: function mDocumenturl()\n        {\n            var urlData = \"api/v1/\", viewId = this.get(\"viewId\");\n            var customClientData = this._customClientData;\n            var currentMethod = this.get(\"currentHttpMethod\");\n            var revision = this.get(\"revision\");\n\n            if (this.get(\"creationFamid\") && this.id === null) {\n                urlData += \"families/\" + encodeURIComponent(this.get(\"creationFamid\")) + \"/documentsViews/\";\n            } else {\n                urlData += \"documents/\" + encodeURIComponent(this.id);\n                //Don't add revision for the deletion of a alive document\n                if (revision !== null && (currentMethod !== \"delete\")) {\n                    if (_.isObject(revision) && revision.state) {\n                        urlData += \"/revisions/\" + encodeURIComponent(\"state:\" + revision.state);\n                    } else\n                        if (revision >= 0) {\n                            urlData += \"/revisions/\" + encodeURIComponent(revision);\n                        }\n                }\n                if (viewId === undefined) {\n                    if (this.get(\"renderMode\") === \"view\" || currentMethod === \"delete\") {\n                        viewId = \"!defaultConsultation\";\n                    } else\n                        if (this.get(\"renderMode\") === \"edit\") {\n                            viewId = \"!defaultEdition\";\n                        } else {\n                            viewId = \"!defaultConsultation\";\n                        }\n                }\n                if (currentMethod === \"delete\" && this.get(\"renderMode\") === \"edit\") {\n                    viewId = \"!defaultConsultation\";\n                }\n                urlData += \"/views/\" + encodeURIComponent(viewId);\n            }\n\n            if (!_.isEmpty(customClientData) && (currentMethod === \"read\" || currentMethod === \"delete\" )) {\n                urlData += \"?customClientData=\" + encodeURIComponent(JSON.stringify(customClientData));\n            }\n            return urlData;\n        },\n\n        /**\n         * override Backbone sync to record method\n         * @param method\n         * @param model\n         * @param options\n         * @returns {*}\n         */\n        sync: function mDocumentSync(method, model, options)\n        {\n            this.set(\"currentHttpMethod\", method); // record for url method\n            return Backbone.Model.prototype.sync.apply(this, arguments);\n        },\n        /**\n         * Initialize event handling\n         *\n         */\n        initialize: function mDocumentinitialize()\n        {\n            var theModel = this;\n\n            this.listenTo(this, \"dduiDocumentFail\", this.propagateSynchroError);\n            this.listenTo(this, \"destroy\", this.destroySubcollection);\n            this.listenTo(this, \"destroy\", this.unbindLoadEvent);\n\n            $(window).on(\"beforeunload.\" + this.cid, function mDocumentBeforeUnload()\n            {\n                var security = theModel.get(\"properties\") ? (theModel.get(\"properties\").get(\"security\")) : null,\n                    event = {prevent: false};\n                if (theModel.hasAttributesChanged()) {\n                    return i18n.___(\"The form has been modified and is is not saved\", \"ddui\");\n                }\n\n                theModel.trigger(\"beforeClose\", event, theModel.getServerProperties(), this._customClientData);\n\n                if (event.prevent) {\n                    return i18n.___(\"Unable to close the document\", \"ddui\");\n                }\n\n                if (theModel.get(\"renderMode\") === \"edit\" && security && security.lock && security.lock.temporary) {\n                    // No use model destroy : page is destroyed before request is some case\n                    $.ajax({\n                        url: \"api/v1/documents/\" + theModel.get(\"initid\") + \"/locks/temporary\",\n                        type: \"DELETE\",\n                        async: false\n                    });\n                    theModel.set(\"unlocking\", true);\n                }\n            });\n\n            $(window).on(\"pagehide.\" + this.cid, function mDocumentPageHide(event)\n            {\n                var security = theModel.get(\"properties\") ? (theModel.get(\"properties\").get(\"security\")) : null;\n                var unlocking = theModel.get(\"unlocking\");\n\n                theModel.trigger(\"close\", event, theModel.getServerProperties(), this._customClientData);\n\n                if (!unlocking && theModel.get(\"renderMode\") === \"edit\" && security && security.lock && security.lock.temporary) {\n                    $.ajax({\n                        url: \"api/v1/documents/\" + theModel.get(\"initid\") + \"/locks/temporary\",\n                        type: \"DELETE\",\n                        async: false\n                    });\n                }\n            });\n        },\n\n        /**\n         * Return a plain object of the current document for an usage in the view\n         *\n         * @returns {{document: {}}}\n         */\n        toData: function mDocumenttoData()\n        {\n            var returnObject = {\n                document: {}\n            };\n            returnObject.document.properties = this.getServerProperties();\n            returnObject.menus = this.get(\"menus\").toJSON();\n            returnObject.templates = this.get(\"templates\");\n            return returnObject;\n        },\n\n        /**\n         * Return all the values of the current document\n         *\n         * @returns {{}}\n         */\n        getValues: function mDocumentdocumentGetValues()\n        {\n            var values = {};\n            if (!this.get(\"attributes\")) {\n                return values;\n            }\n            this.get(\"attributes\").each(function mDocumentGetValue(currentAttribute)\n            {\n                var currentValue = currentAttribute.get(\"attributeValue\"), i, arrayValues = [];\n                if (!currentAttribute.get(\"isValueAttribute\")) {\n                    return;\n                }\n                if (currentAttribute.get(\"multiple\")) {\n                    currentValue = _.toArray(currentValue);\n                    if (currentValue.length > 0) {\n                        for (i = 0; i < currentValue.length; i += 1) {\n                            arrayValues.push(currentValue[i] || {value: null});\n                        }\n                    } else {\n                        arrayValues = [];//{value: null};\n                    }\n                    values[currentAttribute.id] = arrayValues;\n                } else {\n                    values[currentAttribute.id] = currentValue;\n                }\n            });\n            return values;\n        },\n\n        /**\n         * reset all values with a new set of values\n         */\n        setValues: function mDocumentdocumentSetValues(values)\n        {\n            this.get(\"attributes\").each(function mDocumentSetValue(currentAttribute)\n            {\n                var newValue = values[currentAttribute.id];\n                if (!currentAttribute.get(\"isValueAttribute\")) {\n                    return;\n                }\n                currentAttribute.set(\"attributeValue\", newValue);\n                // reset change also\n                currentAttribute.changed = {};\n            });\n        },\n\n        /**\n         * reset all properties with a new set of properties\n         */\n        setProperties: function mDocumentdocumentSetProperties(values)\n        {\n            var model = this;\n            _.each(values, function mDocumentSetProperties(value, key)\n            {\n                model.get(\"properties\").set(key, value);\n            });\n        },\n\n        lockDocument: function mDocumentLockDocument()\n        {\n            var docModel = this;\n            var lockModel = new DocumentLock({\"initid\": this.get(\"initid\"), \"type\": \"permanent\"});\n            var security = this.get(\"properties\").get(\"security\");\n            lockModel.save({}, {\n                    success: function mDocumentLockDocumentSuccess(theModel, data)\n                    {\n                        var menu = docModel.get(\"menus\");\n                        security.lock = data.data.lock;\n                        docModel.get(\"properties\").set(\"security,\", security);\n\n                        menu.setMenu(\"lock\", \"visibility\", \"hidden\");\n                        menu.setMenu(\"unlock\", \"visibility\", \"visible\");\n\n                        docModel.get(\"properties\").trigger(\"change\");\n                    },\n                    error: function mDocumentLockDocumentError(theModel, HttpResponse)\n                    {\n                        var response = JSON.parse(HttpResponse.responseText);\n\n                        docModel.trigger(\"showError\", {\n                            title: response.exceptionMessage\n                        });\n                    }\n                }\n            );\n        },\n\n        unlockDocument: function mDocumentUnLockDocument()\n        {\n            var docModel = this;\n            //  type = empty means Delete all locks\n            var lockModel = new DocumentLock({\"initid\": this.get(\"initid\"), \"type\": \"\"});\n            var security = this.get(\"properties\").get(\"security\");\n            lockModel.destroy({\n                    success: function mDocumentUnLockDocumentSuccess()\n                    {\n                        var menu = docModel.get(\"menus\");\n                        security.lock = {\n                            lockedBy: {\n                                id: 0\n                            }\n                        };\n                        docModel.get(\"properties\").set(\"security,\", security);\n\n                        menu.setMenu(\"lock\", \"visibility\", \"visible\");\n                        menu.setMenu(\"unlock\", \"visibility\", \"hidden\");\n                        docModel.get(\"properties\").trigger(\"change\");\n\n                    },\n                    error: function mDocumentUnLockDocumentError(theModel, HttpResponse)\n                    {\n                        var response = JSON.parse(HttpResponse.responseText);\n\n                        docModel.trigger(\"showError\", {\n                            title: response.exceptionMessage\n                        });\n                    }\n                }\n            );\n        },\n        /**\n         * Get a plain object with properties of the document\n         *\n         * @returns {*}\n         */\n        getModelProperties: function mDocumentdocumentGetProperties()\n        {\n            var properties = {};\n            if (this.get(\"properties\")) {\n                properties = this.get(\"properties\").toJSON();\n            }\n            properties.initid = this.get(\"initid\");\n            properties.revision = this.get(\"revision\");\n            properties.viewId = this.get(\"viewId\");\n            properties.renderMode = this.get(\"renderMode\");\n\n            return properties;\n        },\n\n        /**\n         * Get the initial properties as transfered by the server\n         * @returns {*|{revision, viewId, renderMode, properties, menus, attributes}|{resizeMarginHeight, resizeMarginWidth, resizeDebounceTime, withoutResize, eventPrefix}|{content}|{title, isValueAttribute, parent, mode, errorMessage}|{documentId, documentModel, state, attributes}}\n         */\n        getServerProperties: function mDocument_getCurrentProperties()\n        {\n            var properties;\n            properties = this.initialProperties;\n            if (properties) {\n                properties.hasUploadingFiles = this.hasUploadingFile();\n            }\n            return properties;\n        },\n\n        /**\n         * Indicate if one attribute of the document is modified\n         *\n         * @returns {*|boolean}\n         */\n        isModified: function mDocument_isModified()\n        {\n            return this.hasAttributesChanged();\n        },\n\n        /**\n         * Get document properties, values and labels of attributes\n         */\n        getDocumentData: function mDocumentGetDocumentData()\n        {\n            var documentData = {\n                properties: this.getModelProperties(),\n                attributeValues: this.getValues(),\n                attributeLabels: {},\n                createAttributeView: function mDocumentGetDocumentDataCreate()\n                {\n                    return this.id;\n                }\n            };\n            this.get(\"attributes\").each(function mDocumentGetDocumentDataEach(currentAttribute)\n            {\n                documentData.attributeLabels[currentAttribute.id] = currentAttribute.get(\"label\");\n            });\n            return documentData;\n        },\n        /**\n         * Return true if one the attribute of the document hasChanged\n         *\n         * @returns {boolean|*}\n         */\n        hasAttributesChanged: function mDocumenthasAttributesChanged()\n        {\n            if (!this.get(\"attributes\")) {\n                return false;\n            }\n            return this.get(\"attributes\").some(function mDocumenthasAttributesChangedSome(currentAttr)\n            {\n                return (currentAttr.hasValueChanged());\n            });\n        },\n\n        hasUploadingFile: function mdocumenthasUploadingFile()\n        {\n            return this._uploadingFile > 0;\n        },\n\n        /**\n         * Analyze return in case of sync uncomplete and trigger event error\n         *\n         * @param model\n         * @param xhr\n         */\n        propagateSynchroError: function mDocumentpropagateSynchroError(model, xhr)\n        {\n            var attrModel, currentModel = this, parsedReturn, errorCode = null, title = \"\",\n                properties;\n            //Analyze XHR\n            var messages = [];\n            try {\n                if (!xhr && model.message) {\n                    messages.push({type: \"error\", contentText: model.message});\n                    xhr = {status: 500, statusText: \"Internal - No HTTP response\"};\n                } else {\n                    var result = JSON.parse(xhr.responseText);\n                    messages = result.messages;\n                }\n            } catch (e) {\n                //Unable to parse responseText (error is not in JSON)\n                this.cleanErrorMessages();\n                if (window.dcp.logger) {\n                    window.dcp.logger(e);\n                } else {\n                    console.error(e);\n                }\n                properties = currentModel.getServerProperties();\n                if (!properties || !properties.initid) {\n                    //First loading, unable to load display reload iframe panel\n                    currentModel.trigger(\"displayNetworkError\");\n                    return;\n                }\n                //There is an initd, so there is a document\n                //We display a message and let the user try again\n                //Status 0 indicate offline browser\n                if (xhr && xhr.status === 0) {\n                    currentModel.trigger(\"showError\", {\n                        \"errorCode\": \"offline\",\n                        \"title\": i18n.___(\"Your navigator seems offline, try later\", \"ddui\")\n                    });\n                } else {\n                    currentModel.trigger(\"showError\", {\n                        \"errorCode\": \"unableToParseJson\",\n                        \"title\": i18n.___(\"Server return unreadable\", \"ddui\")\n                    });\n                }\n                currentModel.setProperties(properties);\n                this.trigger(\"dduiDocumentDisplayView\");\n                return;\n            }\n\n            parsedReturn = {\n                messages: messages,\n                responseText: \"Unexpected error: \" + xhr.status + \" \" + xhr.statusText\n            };\n\n            this.cleanErrorMessages();\n            if (parsedReturn.messages.length === 0) {\n                if (currentModel.get(\"properties\")) {\n                    title = currentModel.get(\"properties\").get(\"title\");\n                }\n                currentModel.trigger(\"showError\", {\n                    \"errorCode\": errorCode,\n                    \"title\": i18n.___(\"Unexpected error \", \"ddui\") + title,\n                    \"message\": parsedReturn.responseText\n                });\n            }\n            _.each(parsedReturn.messages, function mDocumentpropagateSynchroErrorMessages(message)\n            {\n                switch (message.code) {\n                    case \"CRUD0211\":// Syntax Error\n                        if (message.data && message.data.id) {\n                            attrModel = currentModel.get('attributes').get(message.data.id);\n                            if (attrModel) {\n                                attrModel.setErrorMessage(message.data.err, message.data.index);\n                                currentModel.trigger(\"showError\", {\n                                    title: message.contentText,\n                                    htmlMessage: message.contentHtml,\n                                    message: attrModel.attributes.label + ' : ' + message.data.err,\n                                    errorCode: message.code\n                                });\n                            } else {\n                                currentModel.trigger(\"showError\", {\n                                    title: message.contentText,\n                                    htmlMessage: message.contentHtml,\n                                    message: message.data.err,\n                                    errorCode: message.code\n                                });\n                            }\n                        }\n                        break;\n                    case \"CRUD0212\": // Constraint Error\n                        if (message.data && message.data.constraint) {\n                            _.each(message.data.constraint, function mDocumentpropagateSynchroError0212(constraint)\n                            {\n                                attrModel = currentModel.get('attributes').get(constraint.id);\n                                if (attrModel) {\n                                    attrModel.setErrorMessage(constraint.err, constraint.index);\n                                    currentModel.trigger(\"showError\", {\n                                        title: message.contentText,\n                                        htmlMessage: message.contentHtml,\n                                        message: attrModel.attributes.label + ' : ' + constraint.err,\n                                        \"errorCode\": message.code\n                                    });\n                                } else {\n                                    currentModel.trigger(\"showError\", {\n                                        title: message.contentText,\n                                        htmlMessage: message.contentHtml,\n                                        message: constraint.err,\n                                        \"errorCode\": message.code\n                                    });\n                                }\n                            });\n                        }\n                        if (message.data && message.data.preStore) {\n                            currentModel.trigger(\"showError\", {\n                                title: message.contentText,\n                                htmlMessage: message.contentHtml,\n                                message: message.data.preStore,\n                                errorCode: message.code\n                            });\n                        }\n                        break;\n\n                    default:\n                        if (message.type === \"error\" && message.contentText) {\n                            currentModel.trigger(\"showError\", {\n                                title: message.contentText + \" \" + (message.code ? message.code : \"\"),\n                                htmlMessage: message.contentHtml,\n                                errorCode: message.code\n                            });\n                        } else {\n                            if (message.type && message.contentText) {\n                                currentModel.trigger(\"showMessage\", {\n                                    title: message.contentText + \" \" + (message.code ? message.code : \"\"),\n                                    type: message.type,\n                                    htmlMessage: message.contentHtml,\n                                    errorCode: message.code\n                                });\n                            } else {\n                                console.error(\"Error\", message);\n                            }\n                        }\n                }\n            });\n            this.trigger(\"dduiDocumentDisplayView\");\n        },\n\n        /**\n         * Validate the content of the model before synchro\n         */\n        validate: function mDocumentvalidate(documentElements, options)\n        {\n            var success = true,\n                currentDocument = this,\n                errorMessage = [], event = {prevent: false},\n                templateMessage, error;\n            try {\n                this.trigger(\"validate\", event);\n                if (event.prevent) {\n                    return {\n                        title: \"Unable to save\"\n                    };\n                }\n                this.get(\"attributes\").each(function mDocumentvalidateEach(currentAttribute)\n                {\n                    var parentAttribute = currentDocument.get(\"attributes\").get(currentAttribute.get(\"parent\"));\n                    currentAttribute.setErrorMessage(null);\n\n                    if (currentAttribute.get(\"needed\") === true) {\n                        var currentValue = currentAttribute.get(\"attributeValue\"),\n                            oneSuccess = true;\n\n                        if (currentAttribute.get(\"multiple\")) {\n                            if (parentAttribute.get(\"type\") === \"array\") {\n                                // Verify each index\n                                _.each(currentValue, function mDocumentvalidateArray(attributeValue, index)\n                                {\n                                    //If the attribute is multiple we check if the array has a size superior to 0\n                                    if ((_.isArray(attributeValue) && attributeValue.length > 0)) {\n                                        return;\n                                    }\n                                    if ((!attributeValue || !attributeValue.value) && attributeValue.value !== 0 ) {\n                                        currentAttribute.setErrorMessage(i18n.___(\"Empty value not allowed\", \"ddui\"), index);\n\n                                        templateMessage = _.template(i18n.___(\"{{parentLabel}} / {{label}} (row # {{index}}) is needed\", \"ddui\"), {escape: /\\{\\{(.+?)\\}\\}/g});\n                                        errorMessage.push(templateMessage({\n                                            parentLabel: parentAttribute.get('label'),\n                                            label: currentAttribute.get(\"label\"),\n                                            index: index + 1\n                                        }));\n                                        success = false;\n                                    }\n                                });\n\n                            } else {\n                                if (!currentValue || currentValue.length === 0) {\n                                    oneSuccess = false;\n                                }\n                            }\n                        } else {\n                            if ((!currentValue || !currentValue.value) && currentValue.value !== 0) {\n                                currentAttribute.setErrorMessage(i18n.___(\"Empty value not allowed\", \"ddui\"));\n                                oneSuccess = false;\n                            }\n                        }\n                        if (!oneSuccess) {\n                            templateMessage = _.template(i18n.___(\"{{parentLabel}} / {{label}} is needed\", \"ddui\"), {escape: /\\{\\{(.+?)\\}\\}/g});\n                            errorMessage.push(templateMessage({\n                                parentLabel: parentAttribute.get('label'),\n                                label: currentAttribute.get(\"label\")\n                            }));\n                            currentAttribute.setErrorMessage(i18n.___(\"The field must not be empty\", \"ddui\"));\n                            success = false;\n                        }\n                    }\n\n                    if (!currentAttribute.checkConstraint({clearError: false})) {\n                        success = false;\n                        if (_.isArray(currentAttribute.get(\"errorMessage\"))) {\n                            templateMessage = _.template(\"<%= parentLabel %> / <%= label %> \" +\n                                \"<% for(var msg in errorMessage) { %>\" +\n                                \"\\n<%- rowText %> <%= errorMessage[msg].index + 1 %> : <%= errorMessage[msg].message %>\\n <% } %> \");\n                        } else {\n                            templateMessage = _.template(\"<%= parentLabel %> / <%= label %> <%= errorMessage %>\");\n                        }\n                        errorMessage.push(templateMessage({\n                            parentLabel: parentAttribute.get('label'),\n                            label: currentAttribute.get(\"label\"),\n                            rowText: i18n.___(\"Row #\", \"ddui\"),\n                            errorMessage: currentAttribute.get(\"errorMessage\")\n                        }));\n                    }\n                });\n                if (!success) {\n                    error = {\n                        title: i18n.___(\"Unable to save\", \"ddui\"),\n                        message: errorMessage.join(', ' + \"\\n\"),\n                        errorCode: \"attributeNeeded\"\n                    };\n                    if (options.error) {\n                        options.error(_.extend({\"eventPrevented\": true}, error));\n                    }\n                    return error;\n                }\n            } catch (e) {\n                console.error(\"Unable to validate\");\n                console.error(e);\n            }\n\n            return undefined;\n        },\n\n        /**\n         * Redraw messages for the error displayed\n         */\n        redrawErrorMessages: function mDocumentredrawErrorMessages()\n        {\n            var attrModels = this.get('attributes') || [];\n            _.each(attrModels.models, function mDocumentredrawErrorMessagesEach(attrModel)\n            {\n                var message = attrModel.get(\"errorMessage\");\n                // redo error after document is show\n                if (message) {\n                    attrModel.setErrorMessage(null);// use double affect to force tooltip redraw\n                    attrModel.setErrorMessage(message);\n                }\n            });\n        },\n\n        /**\n         * Propagate to attributes a clear message for the error displayed\n         */\n        cleanErrorMessages: function mDocumentCleanErrorMessages()\n        {\n            var attrModels = this.get('attributes') || [];\n            _.each(attrModels.models, function mDocumentCleanErrorMessagesEach(attrModel)\n            {\n                attrModel.setErrorMessage(null);\n            });\n        },\n        /**\n         * Parse the return of the REST API\n         * @param response\n         * @returns {{properties: (*|properties|exports.defaults.properties|exports.parse.properties|.createObjectExpression.properties), menus: (app.views.shared.menu|*), locale: *, renderMode: string, attributes: Array, templates: *, renderOptions: *}}\n         */\n        parse: function mDocumentParse(response)\n        {\n            var values, renderMode = \"view\", view = response.data.view;\n\n            if (response.success === false) {\n                throw new Error(\"Unable to get the data from documents\");\n            }\n            this.trigger(\"beforeParse\");\n            if (view.renderOptions.mode) {\n                if (view.renderOptions.mode === \"edit\") {\n                    renderMode = \"edit\";\n                } else\n                    if (view.renderOptions.mode === \"view\") {\n                        renderMode = \"view\";\n                    } else {\n                        throw new Error(\"Unkown render mode \" + view.renderOptions.mode);\n                    }\n            }\n\n            this.initialProperties = _.defaults({\n                \"renderMode\": renderMode || \"view\",\n                \"viewId\": response.data.properties.requestIdentifier\n            }, view.documentData.document.properties);\n\n            //Clean attributes\n            if (this.get(\"attributes\") instanceof CollectionAttributes) {\n                this.get(\"attributes\").destroy();\n            }\n\n\n            values = {\n                initid: response.data.properties.creationView === true ? null : view.documentData.document.properties.initid,\n                properties: view.documentData.document.properties,\n                menus: view.menu,\n                viewId: response.data.properties.requestIdentifier,\n                revision: view.documentData.document.properties.revision,\n                locale: view.locale.culture,\n                renderMode: renderMode || \"view\",\n                attributes: undefined,\n                templates: view.templates,\n                renderOptions: view.renderOptions,\n                customCSS: view.style.css,\n                customJS: view.script.js,\n                customServerData: view.customServerData,\n                messages: response.messages,\n                originalValues: view.documentData.document.attributes\n            };\n            this._customClientData = {};\n            if (response.data.properties.creationView === true) {\n                values.creationFamid = view.documentData.document.properties.family.name;\n            } else {\n                values.creationFamid = false;\n            }\n            return values;\n        },\n\n        /**\n         * Generate the collection of the current model and bind events on the new collection\n         *\n         * @param keyOrValues string|object of properties or key of the current property\n         * @param value\n         * @returns {*}\n         */\n        \"set\": function mDocumentsetValues(keyOrValues, value)\n        {\n            var currentModel = this;\n            if (keyOrValues.properties !== undefined) {\n                if (currentModel.get(\"properties\") instanceof DocumentProperties) {\n                    currentModel.get(\"properties\").trigger(\"destroy\");\n                }\n                keyOrValues.properties = new DocumentProperties(keyOrValues.properties);\n            }\n\n            if (keyOrValues.menus !== undefined) {\n                if (currentModel.get(\"menus\") instanceof CollectionMenus) {\n                    currentModel.get(\"menus\").destroy();\n                }\n                keyOrValues.menus = new CollectionMenus(keyOrValues.menus);\n            }\n            if (keyOrValues === \"attributes\") {\n                value = new CollectionAttributes(value, {\n                    documentModel: currentModel,\n                    renderOptions: currentModel.get(\"renderOptions\"),\n                    renderMode: currentModel.get(\"renderMode\")\n                });\n                //Set the internal content collection (for structure attributes)\n                value.each(function mDocumentsetValuesEachAttributes(currentAttributeModel)\n                {\n                    if (currentAttributeModel.get(\"isValueAttribute\")) {\n                        return;\n                    }\n                    var childAttributes = value.filter(function mDocumentsetValuesEachAttributesFilter(candidateChildModel)\n                    {\n                        return candidateChildModel.get(\"parent\") === currentAttributeModel.id;\n                    });\n                    if (childAttributes.length > 0) {\n                        currentAttributeModel.setContentCollection(childAttributes);\n                    }\n                });\n                //Propagate the change event to the model\n                currentModel.listenTo(value, \"change:attributeValue\", function mDocumentsetValuesListenChange(model)\n                {\n                    _.defer(function mDocumentAttributeChangerTrigger()\n                    {\n                        currentModel.trigger(\"changeValue\", {\n                            attributeId: model.id\n                        });\n                    });\n                });\n                //Propagate the validate event to the model\n                currentModel.listenTo(value, \"constraint\", function mDocumentsetValuesListenConstraint(options)\n                {\n                    currentModel.trigger(\"constraint\", options.model.id, options.response);\n                });\n                //Propagate the renderDone event of the attributes to the model\n                currentModel.listenTo(value, \"renderDone\", function mDocumentsetValuesListenRenderDone(options)\n                {\n                    currentModel.trigger(\"attributeRender\", options.model.id, options.$el, options.index);\n                });\n                //Propagate the beforeRender event of the attributes to the model\n                currentModel.listenTo(value, \"beforeRender\", function mDocumentsetValuesListenBeforeRender(event, options)\n                {\n                    currentModel.trigger(\"beforeAttributeRender\", event, options.model.id, options.$el, options.index);\n                });\n                //Propagate the array event modified to the model\n                currentModel.listenTo(value, \"array\", function mDocumentsetValuesListenArray(type, model, options)\n                {\n                    currentModel.trigger(\"arrayModified\", {\n                        attributeId: model.id,\n                        \"type\": type,\n                        \"options\": options\n                    });\n                });\n                //Propagate the event externalLinkSelected to the model\n                currentModel.listenTo(value, \"internalLinkSelected\", function mDocumentsetValuesListenLinkSelected(event, options)\n                {\n                    currentModel.trigger(\"internalLinkSelected\", event, options);\n                });\n                //Propagate the event downloadFile to the model\n                currentModel.listenTo(value, \"downloadFile\", function mDocumentsetValuesListenDownloadfile(event, attrid, options)\n                {\n                    currentModel.trigger(\"downloadFile\", event, attrid, options);\n                });\n\n                //Propagate the event uploadFile to the model\n                currentModel.listenTo(value, \"uploadFile\", function mDocumentListenUploadfileStart(event, attrid, options)\n                {\n                    var attr, attrValue;\n                    currentModel.trigger(\"uploadFile\", event, attrid, options);\n\n                    if (!event.prevent) {\n                        attr = currentModel.get(\"attributes\").get(attrid);\n\n                        currentModel._uploadingFile++;\n\n                        if (attr) {\n                            attrValue = attr.get(\"attributeValue\");\n                            if (options.index >= 0) {\n                                attrValue = _.clone(attrValue);\n                                attrValue[options.index] = {value: \"-^-\", displayValue: \"Uploading\"};\n\n                            } else {\n                                attrValue = {value: \"--\", displayValue: \"Uploading\"};\n                            }\n                            // Use Silent to not redraw widget - it will be redraw at the end of uploading\n                            attr.set(\"attributeValue\", attrValue, {silent: true});\n                            currentModel.trigger(\"changeValue\", {\n                                attributeId: attrid\n                            });\n                        }\n                    }\n                });\n\n                //Propagate the event uploadFile to the model\n                currentModel.listenTo(value, \"uploadFileDone\", function mDocumentListenuploadFileDone(event, attrid, options)\n                {\n                    currentModel._uploadingFile--;\n                    currentModel.trigger(\"uploadFileDone\", event, attrid, options);\n\n                    if (currentModel._uploadingFile <= 0) {\n                        currentModel.trigger(\"uploadFileFinished\");\n                    }\n                });\n\n                //Propagate the event helperSearch to the model\n                currentModel.listenTo(value, \"helperSearch\", function mDocumentsetValuesListenHelperSearch(event, attrid, options, index)\n                {\n                    currentModel.trigger(\"helperSearch\", event, attrid, options, index);\n                });\n                //Propagate the event helperResponse to the model\n                currentModel.listenTo(value, \"helperResponse\", function mDocumentsetValuesListenHelperResponse(event, attrid, options, index)\n                {\n                    currentModel.trigger(\"helperResponse\", event, attrid, options, index);\n                });\n                //Propagate the event helperResponse to the model\n                currentModel.listenTo(value, \"helperSelect\", function mDocumentsetValuesListenHelperSelect(event, attrid, options, index)\n                {\n                    currentModel.trigger(\"helperSelect\", event, attrid, options, index);\n                });\n                //Propagate the click on an anchor to the model\n                currentModel.listenTo(value, \"anchorClick\", function mDocumentsetValuesListenAnchorClicked(event, attrid, options)\n                {\n                    currentModel.trigger(\"anchorClick\", event, attrid, options);\n                });\n            }\n            return Backbone.Model.prototype.set.call(this, keyOrValues, value);\n        },\n\n        unbindLoadEvent: function mDocumentUnbindLoadEvent()\n        {\n            $(window).off(\".\" + this.cid);\n        },\n\n        /**\n         * Destroy the collection associated to the document (used in the destroy part of the view)\n         *\n         */\n        destroySubcollection: function mDocumentdestroySubcollection()\n        {\n            if (this.get(\"menus\") instanceof CollectionMenus) {\n                this.get(\"menus\").destroy();\n            }\n            if (this.get(\"properties\") instanceof DocumentProperties) {\n                this.get(\"properties\").trigger(\"destroy\");\n            }\n            if (this.get(\"attributes\") instanceof CollectionAttributes) {\n                this.get(\"attributes\").destroy();\n            }\n        },\n\n        /**\n         * Inject JS in the main page before render view\n         * To launch beforeRender and beforeRenderAttribute\n         */\n        injectCurrentDocJS: function mDocumentInjectCurrentDocJS()\n        {\n            var allInjectPromises = [],\n                customJS = _.pluck(this.get(\"customJS\"), \"path\");\n            _.each(customJS, function injectElement(currentPath) {\n                allInjectPromises.push((new Promise(function addJs(resolve, reject) {\n                    load(currentPath, function addJsDone(err) {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve();\n                        }\n                    });\n                })));\n            });\n\n            return Promise.all(allInjectPromises);\n        },\n\n        /**\n         * Inject an array of js in the current page\n         *\n         * @param jsToInject Array of string to inject\n         * @return Promise\n         */\n        injectJS: function mDocumentInjectJs(jsToInject)\n        {\n            var allInjectPromises = [];\n            if (!_.isArray(jsToInject)) {\n                throw new Error(\"The js to inject must be an array of string path\");\n            }\n            _.each(jsToInject, function injectElement(currentPath) {\n                allInjectPromises.push((new Promise(function addJs(resolve, reject) {\n                    load(currentPath, function addJsDone(err) {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve();\n                        }\n                    });\n                })));\n            });\n            return Promise.all(allInjectPromises);\n\n        },\n\n        /**\n         * Inject an array of css path in the current page\n         *\n         * @param customCss\n         */\n        injectCSS: function mDocumentInjectCSS(customCss)\n        {// add custom css style\n            var $head = $(\"head\"),\n                cssLinkTemplate = _.template('<link rel=\"stylesheet\" type=\"text/css\" ' +\n                    'href=\"<%= path %>\" data-injected=\"true\">');\n\n            if (!_.isArray(customCss)) {\n                throw new Error(\"The css to inject must be an array of string path\");\n            }\n\n            // Inject new CSS\n            _.each(customCss, function vDocumentInjectNewCSS(cssItem)\n            {\n                if (document.createStyleSheet) {\n                    document.createStyleSheet(cssItem);\n                }\n                $head.append(cssLinkTemplate({\"path\": cssItem}));\n            });\n\n        },\n\n        /**\n         * Used by backbone for the save part\n         * @returns {{document: {attributes: *, properties : *}}}\n         */\n        toJSON: function mDocumenttoJSON()\n        {\n            return {\n                document: {\n                    properties: this.getModelProperties(),\n                    attributes: this.getValues()\n                },\n                customClientData: this._customClientData\n            };\n        },\n\n        /**\n         * Get render option for document widget\n         * @param optId\n         * @returns {*}\n         */\n        getOption: function mDocumentGetOption(optId)\n        {\n            var renderOptions = this.get(\"renderOptions\");\n            if (renderOptions && renderOptions.document) {\n                return renderOptions.document[optId];\n            }\n            return undefined;\n        },\n\n        _promiseCallback: function mDocument_promiseCallback()\n        {\n            var promise, success, error, properties = this.getServerProperties();\n\n            promise = new Promise(function mDocument_promiseInternObject(resolve, reject)\n            {\n                success = function onSuccess(values)\n                {\n                    var successArguments = values;\n                    if (values && successArguments[\"arguments\"]) {\n                        successArguments = values[\"arguments\"];\n                    } else {\n                        successArguments = arguments;\n                    }\n                    if (values && successArguments.documentProperties) {\n                        properties = successArguments.documentProperties;\n                    }\n                    resolve({documentProperties: properties, arguments: successArguments});\n                };\n                error = function onError(values)\n                {\n                    var errorArguments = values;\n                    if (values && errorArguments[\"arguments\"]) {\n                        errorArguments = values[\"arguments\"];\n                    } else {\n                        errorArguments = arguments;\n                    }\n                    if (values && errorArguments.documentProperties) {\n                        properties = errorArguments.documentProperties;\n                    }\n                    reject({documentProperties: properties, arguments: errorArguments});\n                };\n            });\n\n            //noinspection JSUnusedAssignment\n            return {\n                \"promise\": promise,\n                \"success\": success,\n                \"error\": error\n            };\n\n        },\n\n        /**\n         * Complete the loading of the document\n         * Fetch the structure and external js deps\n         *\n         * @private\n         */\n        _loadDocument: function mDocumentLoadDocument(currentModel)\n        {\n            var properties = this.getServerProperties();\n\n            return new Promise(function mDocument_promiseLoadDocument(resolve, reject)\n            {\n                //Complete the structure after\n                currentModel._completeStructure().then(function onGetStructureDone()\n                {\n                    currentModel.injectCurrentDocJS().then(function mDocument_injectJSDone(values)\n                    {\n                        resolve({documentProperties: properties, successArguments: arguments});\n                    }, function mDocument_injectJSFail(values)\n                    {\n                        reject({documentProperties: properties, arguments: arguments});\n                        currentModel.trigger.apply(currentModel, _.union([\"dduiDocumentFail\"], values.arguments));\n                    });\n                }, function mDocument_onGetStructureFail(values)\n                {\n                    reject({documentProperties: properties, arguments: arguments});\n                    currentModel.trigger.apply(currentModel, _.union([\"dduiDocumentFail\"], values.arguments));\n                });\n            });\n        },\n\n        fetchDocument: function mDocumentFetchDocument(values, options)\n        {\n            var globalCallback = this._promiseCallback(),\n                documentCallback = this._promiseCallback(),\n                serverProperties = this.getServerProperties(),\n                currentModel = this,\n                needToUnlock = {},\n                beforeCloseReturn = {prevent: false},\n                lockModel = null,\n                nextView = false,\n                security,\n                previousMode,\n                lockCallback = this._promiseCallback();\n\n            options = options || {};\n            values = values || {};\n\n            if (_.isEmpty(this._customClientData)) {\n                this.trigger(\"getCustomClientData\");\n            }\n\n            //Register promise events\n            documentCallback.promise.then(function onFetchDocumentDone(currentModelProperties)\n            {\n                currentModel._loadDocument(currentModel).then(function mDocument_loadDocumentDone(values)\n                {\n                    globalCallback.success.apply(currentModelProperties, values);\n                }, function mDocument_loadDocumentFail(values)\n                {\n                    globalCallback.error.apply(currentModelProperties, values);\n                });\n            }, function mDocument_onFetchDocumentFail(values)\n            {\n                globalCallback.error.call(serverProperties, values);\n            });\n\n            globalCallback.promise.then(function onPrepareDocumentDone(values)\n            {\n                if (_.isFunction(options.success)) {\n                    options.success(values);\n                }\n                currentModel.trigger(\"close\", serverProperties);\n                currentModel.trigger.apply(currentModel, _.union([\"dduiDocumentReady\"], values.arguments));\n            }, function onPrepareDocumentFail(values)\n            {\n                if (_.isFunction(options.error)) {\n                    options.error(values);\n                }\n                if (!(values.arguments && values.arguments[0] && values.arguments[0].eventPrevented)) {\n                    currentModel.trigger.apply(currentModel, _.union([\"dduiDocumentFail\"], values.arguments));\n                }\n            });\n\n            //Init default values\n            _.defaults(values, {revision: -1, viewId: \"!defaultConsultation\", initid: this.get(\"initid\")});\n\n            //Trigger (synchronous) before close event\n            this.trigger(\"beforeClose\", beforeCloseReturn, values, this._customClientData);\n\n            if (beforeCloseReturn.prevent === false) {\n                this.trigger(\"displayLoading\");\n\n                //***********Lock Part*********************************************************************************\n\n                // Verify if current document need to be unlocked before fetch another\n                security = this.get(\"properties\") ? (this.get(\"properties\").get(\"security\")) : null;\n                previousMode = this.get(\"renderMode\");\n\n                if (previousMode === \"edit\" && security && security.lock && security.lock.temporary) {\n\n                    needToUnlock = {\n                        initid: serverProperties.initid\n                    };\n                }\n                //Compute the next view\n                nextView = values.viewId;\n\n                if (!nextView) {\n                    nextView = (this.get(\"renderMode\") === \"edit\") ? \"!defaultEdition\" : \"!defaultConsultation\";\n                }\n\n                if (nextView !== \"!defaultConsultation\" &&\n                    nextView !== \"!coreCreation\" &&\n                    nextView !== \"!defaultCreation\" &&\n                    this.get(\"renderMode\") !== \"create\") {\n                    //if the document is locked and the next view doesn't need the same lock delete it\n                    if (needToUnlock.initid && needToUnlock.initid !== values.initid) {\n                        lockModel = new DocumentLock({\"initid\": needToUnlock.initid, \"type\": \"temporary\"});\n                        lockModel.destroy();\n                    }\n                    // The next view needs a lock, ask for it and fetch the document after\n                    lockModel = new DocumentLock({initid: values.initid, viewId: nextView, type: \"temporary\"});\n                    lockModel.save({}, lockCallback);\n                } else {\n                    if (needToUnlock) {\n                        if (needToUnlock.initid === values.initid) {\n                            // If same document \"get\" must be perform after unlock\n                            lockModel = new DocumentLock({\"initid\": needToUnlock.initid, \"type\": \"temporary\"});\n                            lockModel.destroy(lockCallback);\n                        } else {\n                            lockModel = new DocumentLock({\"initid\": needToUnlock.initid, \"type\": \"temporary\"});\n                            lockModel.destroy();\n                            lockCallback.success();\n                        }\n                    } else {\n                        lockCallback.success();\n                    }\n                }\n\n                lockCallback.promise.then(function mdocument_lockSucess()\n                {\n                    //save the new options in the currentDocument for the fetch\n                    _.each(_.pick(values, \"initid\", \"revision\", \"viewId\"), function mDocument_SetNewOptions(value, key)\n                    {\n                        currentModel.set(key, value);\n                    });\n                    currentModel.fetch(documentCallback);\n                }, function mDocument_lockFail()\n                {\n                    globalCallback.error.apply(currentModel, arguments);\n                });\n\n            } else {\n                //Reinit properties\n                currentModel.set(serverProperties);\n                //Indicate success to the promise object\n                globalCallback.error({eventPrevented: true});\n            }\n\n            return globalCallback.promise;\n        },\n\n        saveDocument: function mDocumentSaveDocument(attributes, options)\n        {\n            var globalCallback = this._promiseCallback(),\n                saveCallback = this._promiseCallback(),\n                beforeSaveEvent = {prevent: false},\n                currentModel = this,\n                serverProperties = this.getServerProperties();\n\n            options = options || {};\n\n            if (_.isEmpty(this._customClientData)) {\n                this.trigger(\"getCustomClientData\");\n            }\n            this.trigger(\"beforeSave\", beforeSaveEvent, this._customClientData);\n\n            if (beforeSaveEvent.prevent !== false) {\n                globalCallback.error({eventPrevented: true});\n            } else {\n                saveCallback.promise.then(function mDocument_saveDone()\n                {\n                    currentModel._loadDocument(currentModel).then(function mDocument_loadDocumentDone()\n                    {\n                        globalCallback.success();\n                    }, function mDocument_loadDocumentFail()\n                    {\n                        globalCallback.error.apply(currentModel, arguments);\n                    });\n                }, function mDocument_saveFail()\n                {\n                    globalCallback.error.apply(currentModel, arguments);\n                });\n\n                if (currentModel.hasUploadingFile()) {\n\n                    this.trigger(\"displayLoading\", {\n                        isSaving: true,\n                        text: i18n.___(\"Recording files in progress\", \"ddui\")\n                    });\n                    currentModel.trigger(\"showMessage\", {\n                        title: i18n.___(\"Waiting uploads in progress\", \"ddui\"),\n                        type: \"info\"\n                    });\n                    currentModel.once(\"uploadFileFinished\", function mDocumentsetValuesListenUploadUntilTheEnd(event)\n                    {\n                        this.trigger(\"displayLoading\", {isSaving: true});\n                        currentModel.save(attributes, saveCallback);\n                    });\n                } else {\n\n                    this.trigger(\"displayLoading\", {isSaving: true});\n                    currentModel.save(attributes, saveCallback);\n                }\n            }\n\n            globalCallback.promise.then(function onSaveSuccess(values)\n            {\n                currentModel.trigger(\"afterSave\", serverProperties);\n                currentModel.trigger(\"close\", serverProperties);\n                if (_.isFunction(options.success)) {\n                    options.success();\n                }\n                currentModel.trigger.apply(currentModel, _.union([\"dduiDocumentReady\"], values.arguments));\n            }, function onSaveFail(values)\n            {\n                if (_.isFunction(options.error)) {\n                    options.error();\n                }\n                if (!(values.arguments && values.arguments[0] && values.arguments[0].eventPrevented)) {\n                    currentModel.trigger.apply(currentModel, _.union([\"dduiDocumentFail\"], values.arguments));\n                }\n            });\n\n            return globalCallback.promise;\n        },\n\n        deleteDocument: function mDocumentDelete(options)\n        {\n            var globalCallback = this._promiseCallback(),\n                deleteCallback = this._promiseCallback(),\n                beforeDeleteEvent = {prevent: false},\n                currentModel = this,\n                serverProperties = this.getServerProperties();\n\n            options = options || {};\n\n            if (_.isEmpty(this._customClientData)) {\n                this.trigger(\"getCustomClientData\");\n            }\n            this.trigger(\"beforeDelete\", beforeDeleteEvent, this._customClientData);\n\n            if (beforeDeleteEvent.prevent !== false) {\n                globalCallback.error({eventPrevented: true});\n            } else {\n                this.trigger(\"displayLoading\");\n                deleteCallback.promise.then(function mDocument_deleteDone()\n                {\n                    currentModel.fetchDocument({initid: currentModel.get(\"initid\")}).then(function mDocument_afterDeleteLoadDone()\n                    {\n                        globalCallback.success();\n                    }, function mDocument_afterDeleteLoadFail()\n                    {\n                        globalCallback.error.apply(currentModel, arguments);\n                    });\n                }, function mDocument_deleteFail()\n                {\n                    globalCallback.error.apply(currentModel, arguments);\n                });\n\n                this.sync('delete', this, deleteCallback);\n            }\n\n            globalCallback.promise.then(function onDeleteSuccess(values)\n            {\n                currentModel.trigger(\"afterDelete\", serverProperties);\n                currentModel.trigger(\"close\", serverProperties);\n                if (_.isFunction(options.success)) {\n                    options.success();\n                }\n                currentModel.trigger.apply(currentModel, _.union([\"dduiDocumentReady\"], values.arguments));\n            }, function onDeleteFail(values)\n            {\n                if (_.isFunction(options.error)) {\n                    options.error();\n                }\n                if (!(values.arguments && values.arguments[0] && values.arguments[0].eventPrevented)) {\n                    currentModel.trigger.apply(currentModel, _.union([\"dduiDocumentFail\", currentModel], values.arguments));\n                }\n            });\n\n            return globalCallback.promise;\n        },\n\n        restoreDocument: function mDocumentRestoreDocument(options)\n        {\n            var globalCallback = this._promiseCallback(),\n                restoreCallback = this._promiseCallback(),\n                beforeRestoreEvent = {prevent: false},\n                currentModel = this,\n                serverProperties = this.getServerProperties();\n\n            options = options || {};\n\n            if (\"deleted\" === this.get(\"properties\").get(\"status\")) {\n                if (_.isEmpty(this._customClientData)) {\n                    this.trigger(\"getCustomClientData\");\n                }\n                this.trigger(\"beforeRestore\", beforeRestoreEvent, this._customClientData);\n\n                if (beforeRestoreEvent.prevent !== false) {\n                    globalCallback.error({eventPrevented: true});\n                } else {\n                    this.trigger(\"displayLoading\", {isSaving: true});\n\n                    restoreCallback.promise.then(\n                        function mDocument_restoreDocument_Success()\n                        {\n                            currentModel._loadDocument(currentModel).then(\n                                function mDocument_restoreDocument_loadSuccess()\n                                {\n                                    globalCallback.success();\n                                },\n                                function mDocument_restoreDocument_loadFail()\n                                {\n                                    globalCallback.error.apply(currentModel, arguments);\n                                }\n                            );\n                        },\n                        function mDocument_restoreDocument_Fail()\n                        {\n                            globalCallback.error.apply(currentModel, arguments);\n                        }\n                    );\n\n                    this.get(\"properties\").set(\"status\", \"alive\");\n                    currentModel.save({}, restoreCallback);\n                }\n            } else {\n                globalCallback.error({systemError: true, errorMessage: \"Unable to restore alive doc\"});\n            }\n\n            globalCallback.promise.then(\n                function mDocument_restoreDocument_onSuccess(values)\n                {\n                    currentModel.trigger(\"afterRestore\", serverProperties);\n                    currentModel.trigger(\"close\", serverProperties);\n                    if (_.isFunction(options.success)) {\n                        options.success();\n                    }\n                    currentModel.trigger.apply(currentModel, _.union([\"dduiDocumentReady\"], values.arguments));\n                },\n                function mDocument_restoreDocument_onFail(values)\n                {\n                    if (_.isFunction(options.error)) {\n                        options.error();\n                    }\n                    if (!(values.arguments && values.arguments[0] && (values.arguments[0].eventPrevented || values.arguments[0].systemError))) {\n                        currentModel.trigger.apply(currentModel, _.union([\"dduiDocumentFail\"], values.arguments));\n                    }\n                }\n            );\n\n            return globalCallback.promise;\n        },\n\n        /**\n         * Get complementary data : family structure\n         */\n        _completeStructure: function mDocumentCompleteStructure()\n        {\n            var mStructure, documentModel = this, structurePromise = this._promiseCallback();\n\n            var neededAttributes = this.get(\"renderOptions\").needed;\n            var visibilityAttributes = this.get(\"renderOptions\").visibilities;\n            var valueAttributes = this.get(\"originalValues\");\n\n            if (this.get(\"properties\").get(\"type\") === \"family\") {\n                // Family has no attributes\n                this.set(\"attributes\", []);\n                structurePromise.success();\n                return structurePromise.promise;\n            }\n\n            if (!_.isUndefined(this.get(\"attributes\"))) {\n                this.set(\"attributes\", this.get(\"attributes\")); // to convert attributes to models\n                structurePromise.success();\n                return structurePromise.promise;\n            }\n\n            mStructure = new FamilyStructure({\n                familyId: this.get(\"properties\").get(\"family\").name,\n                referencedocument: {\n                    initid: this.get(\"initid\"),\n                    viewId: this.get(\"viewId\"),\n                    revision: this.get(\"revision\")\n                }\n            });\n\n            mStructure.fetch({\n                success: function mDocumentCompleteStructureSuccess(structureModel, response)\n                {\n                    if (_.isEqual(structureModel.get(\"referencedocument\"), {\n                            initid: documentModel.get(\"initid\"),\n                            viewId: documentModel.get(\"viewId\"),\n                            revision: documentModel.get(\"revision\")\n                        })) {\n                        var attributes = flattenAttributes(attributes, response.data.family.structure);\n                        _.each(attributes, function mDocumentCompleteStructureSuccessEach(currentAttributeStructure)\n                        {\n                            if (currentAttributeStructure.id && valueAttributes[currentAttributeStructure.id]) {\n                                currentAttributeStructure.attributeValue = valueAttributes[currentAttributeStructure.id];\n                                currentAttributeStructure.needed = (neededAttributes[currentAttributeStructure.id] === true);\n                            }\n                            if (currentAttributeStructure.id && visibilityAttributes[currentAttributeStructure.id]) {\n                                currentAttributeStructure.visibility = visibilityAttributes[currentAttributeStructure.id];\n                            }\n                        });\n                        documentModel.set(\"attributes\", attributes);\n                        structurePromise.success();\n                    }\n                },\n\n                error: structurePromise.error\n            });\n            return structurePromise.promise;\n        }\n    });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/models/mDocument.js","define([\n    \"underscore\",\n    \"backbone\"\n], function require_lock(_, Backbone) {\n    \"use strict\";\n\n    var urlCore = _.template(\"api/v1/documents/<%- initid %>/locks/<%- type %>\");\n    var urlView = _.template(\"api/v1/documents/<%- initid %>/views/<%- viewId %>/locks/<%- type %>\");\n\n    return Backbone.Model.extend({\n        typeModel:\"ddui:lock\",\n        idAttribute: \"initid\",\n        viewId:\"\",\n\n        url : function mDocumentLock_url() {\n            //console.log(\"lock model\", this.get(\"viewId\"));\n            if (this.get(\"viewId\")) {\n                return urlView({\n                    initid: this.get(\"initid\"),\n                    type: this.get(\"type\"),\n                    viewId: this.get(\"viewId\")\n                });\n            } else {\n                return urlCore({\n                    initid: this.get(\"initid\"),\n                    type: this.get(\"type\")\n                });\n            }\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/models/mDocumentLock.js","/*global define*/\ndefine([\n    'underscore',\n    'backbone'\n], function (_, Backbone) {\n    'use strict';\n\n    return Backbone.Model.extend({\n\n        typeModel:\"ddui:properties\"\n    });\n\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/models/mDocumentProperties.js","define([\n    \"underscore\",\n    \"backbone\"\n], function (_, Backbone) {\n    \"use strict\";\n\n    var url = _.template(\"api/v1/documents/<%- initid %>/usertags/lasttab\");\n\n    return Backbone.Model.extend({\n\n        typeModel:\"ddui:attributeTab\",\n        idAttribute : \"initid\",\n\n        url : function mDocumentTag_url() {\n            return url({initid : this.get(\"initid\")});\n        },\n\n        toJSON : function mDocumentTag_toJSON() {\n            return this.get(\"tabId\");\n        }\n\n\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/models/mDocumentTab.js","define([\n    \"underscore\",\n    \"backbone\"\n], function require_structure(_, Backbone)\n{\n    \"use strict\";\n\n    return Backbone.Model.extend({\n\n        typeModel:\"ddui:familyStructure\",\n        idAttribute: \"familyId\",\n\n        url: function mFamilyStructure_url()\n        {\n            var urlStructure = _.template(\"api/v1/families/<%- familyId %>/views/structure\");\n\n            return urlStructure({\n                familyId: this.get(\"familyId\")\n            });\n\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/models/mFamilyStructure.js","/*global define*/\ndefine([\n    'underscore',\n    'backbone'\n], function mMenu(_, Backbone) {\n    'use strict';\n\n    return Backbone.Model.extend({\n        typeModel:\"ddui:menu\",\n        /**\n         * Menu model are not linked to REST element so always new\n         * @returns {boolean}\n         */\n        isNew: function mMenu_isNew()\n        {\n            return true;\n        }\n    });\n\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/models/mMenu.js","/*global define*/\ndefine([\n    'underscore',\n    'backbone',\n    'dcpDocument/models/mDocument'\n], function requireModelTransition(_, Backbone, mDocument) {\n    'use strict';\n\n    return mDocument.extend({\n\n        typeModel:\"ddui:transition\",\n        defaults: {\n            documentId: undefined,\n            documentModel: undefined,\n            state: undefined,\n            attributes: []\n        },\n\n        /**\n         * Compute the REST URL for the current document\n         *\n         * Used internally by backbone in fetch, save, destroy\n         *\n         * @returns {string}\n         */\n        url: function mTransition_url() {\n            var urlData = \"api/v1/documents/<%= documentId %>/views/states/<%= state %>\";\n\n            urlData = urlData.replace(\"<%= documentId %>\", encodeURIComponent(this.get(\"documentId\")));\n            urlData = urlData.replace(\"<%= state %>\", encodeURIComponent(this.get(\"state\")));\n\n            return urlData;\n        },\n        /**\n         * Parse the return of the REST API\n         * @param response\n         * @returns {{properties: (*|properties|exports.defaults.properties|exports.parse.properties|.createObjectExpression.properties), menus: (app.views.shared.menu|*), locale: *, renderMode: string, attributes: Array, templates: *, renderOptions: *}}\n         */\n        parse: function mTransition_Parse(response) {\n            var values, attributes, templates, renderOptions;\n            var documentModel = this.get(\"documentModel\");\n            if (response.success === false) {\n                throw new Error(\"Unable to get the data from change state\");\n            }\n            attributes = [];\n\n            renderOptions = response.data.renderOptions;\n\n            if (!renderOptions) {\n                renderOptions = documentModel.get(\"renderOptions\");\n            }\n            if (response.data.transition && response.data.transition.askAttributes.length > 0) {\n                _.each(response.data.transition.askAttributes, function mTransition_parseAsk(ask) {\n                    attributes.push(ask);\n                });\n            }\n            templates = documentModel.get(\"templates\");\n\n            if (response.data.templates) {\n                templates.body = response.data.templates.body;\n                _.each(response.data.templates.sections, function mTransition_parseTemplate(templateContent, templateIndex) {\n                    templates.sections[templateIndex] = templateContent;\n                });\n            }\n\n            this.initialProperties = {\n                \"renderMode\": \"edit\",\n                \"viewId\": \"!Transition\"\n            };\n\n            values = {\n                initid: null,//response.data.workflow.properties.initid, // set to null to send a POST (create) when save\n                properties: response.data.workflow.properties,\n                menus: [],\n                viewId: \"!Transition\",\n                locale: documentModel.get(\"locale\").culture,\n                renderMode: \"edit\",\n                attributes: attributes,\n                templates: documentModel.get(\"templates\"),\n                renderOptions: renderOptions,\n                customCSS: response.data.css,\n                customJS: response.data.js,\n                messages: response.messages,\n                workflow: {\n                    transition: response.data.transition,\n                    state: response.data.state,\n                    labels: response.data.labels\n                }\n            };\n            return values;\n        },\n\n        /**\n         * Used by backbone for the save part\n         * @returns {{document: {attributes: *, properties : *}}}\n         */\n        toJSON: function mTransition_toJSON() {\n            var values = this.getValues(), returnValues = {parameters: {}};\n\n            _.each(values, function mTransition_analyzeContent(value, aid) {\n                if (aid === \"_workflow_comment_\") {\n                    returnValues.comment = (_.isObject(value)) ? value.value : '';\n                } else {\n\n                    if (_.isArray(value)) {\n                        if (value.length > 0 && _.isArray(value[0])) {\n                            // double multiple\n                            returnValues.parameters[aid] = _.map(value, function mTransition_getParameter(aValue) {\n                                return _.pluck(aValue, \"value\");\n                            });\n                        } else {\n                            returnValues.parameters[aid] = _.pluck(value, \"value\");\n                        }\n                    } else if (_.isObject(value)) {\n                        returnValues.parameters[aid] = value.value;\n                    } else {\n                        returnValues.parameters[aid] = value;\n                    }\n                }\n            });\n            return returnValues;\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/models/mTransition.js","/*global define*/\ndefine([\n    'underscore',\n    'backbone',\n    'dcpDocument/models/mDocument'\n], function (_, Backbone, mDocument) {\n    'use strict';\n\n    return Backbone.Model.extend({\n\n        typeModel:\"ddui:transitionGraph\",\n        defaults: {\n            documentId: undefined,\n            state: undefined\n        },\n\n        /**\n         * Compute the REST URL for the current document\n         *\n         * Used internaly by backbone in fetch, save, destroy\n         *\n         * @returns {string}\n         */\n        url: function mTransition_url() {\n            var urlData = \"api/v1/documents/<%= documentId %>/workflows/states/?allStates=1\";\n\n            urlData = urlData.replace(\"<%= documentId %>\", encodeURIComponent(this.get(\"documentId\")));\n\n            return urlData;\n        },\n        /**\n         * Parse the return of the REST API\n         * @param response\n         * @returns {{properties: (*|properties|exports.defaults.properties|exports.parse.properties|.createObjectExpression.properties), menus: (app.views.shared.menu|*), locale: *, renderMode: string, attributes: Array, templates: *, renderOptions: *}}\n         */\n        parse: function mTransition_Parse(response) {\n            var values;\n            if (response.success === false) {\n                throw new Error(\"Unable to get the data from change state\");\n            }\n\n            values = {\n                state: this.get(\"state\"),\n                messages: response.messages,\n                workflowStates: response.data.states\n            };\n            return values;\n        }\n\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/models/mTransitionGraph.js","/*global define*/\n/*global define*/\ndefine([\n    'underscore',\n    'backbone'\n], function define_router(_, Backbone)\n{\n    'use strict';\n\n    return Backbone.Router.extend({\n        initialize: function router_initialize(options)\n        {\n            var currentRouter = this;\n            this.useHistory = options.useHistory;\n\n            this.document = options.document;\n\n            this.route(/api\\/v1\\/documents\\/([^\\/]+)\\.html/, \"viewDocument\");\n            this.route(/api\\/v1\\/documents\\/(.+)\\/revisions\\/([^\\/]+)\\.html/, \"viewRevision\");\n            this.route(/api\\/v1\\/documents\\/(.+)\\/views\\/([^\\/]+)\\.html/, \"viewView\");\n            this.route(/api\\/v1\\/documents\\/(.+)\\/revisions\\/([^\\/]+)\\/views\\/([^\\/]+)\\.html/, \"viewRevisionView\");\n\n            this.route(/[^?]*\\?app=DOCUMENT([^#]+)/, \"fetch\");\n\n            // Listen to document sync and update url\n            this.document.listenTo(this.document, \"sync\", function sync()\n            {\n                var searchArguments;\n\n                var viewId = currentRouter.document.get(\"viewId\"),\n                    options = {\n                        \"path\": window.location.pathname,\n                        \"initid\": currentRouter.document.get(\"initid\"),\n                        \"revision\": currentRouter.document.get(\"revision\") >= 0 ? currentRouter.document.get(\"revision\") : undefined,\n                        \"viewId\": undefined\n                    };\n                var docProperties = currentRouter.document.getServerProperties();\n\n                if (!options.initid) {\n\n                    if (docProperties.renderMode === \"edit\") {\n                        options.initid = docProperties.family.name;\n                    }\n                }\n                options.viewId = viewId;\n                if (docProperties && docProperties.status === \"alive\") {\n                    // No write revision if not a fixed one\n                    options.revision = -1;\n                }\n\n                searchArguments = currentRouter.getUrlParameters(window.location.search);\n                if (searchArguments.app) {\n                    // old school url\n                    currentRouter.rewriteAppUrl(searchArguments, options);\n                } else {\n                    // api url\n                    currentRouter.rewriteApiUrl(options);\n                }\n            });\n\n        },\n\n        /**\n         * Rewrite access document render HTML page from url like ?app=DOCUMENT&initid=1456&revision=45\n         * @param searchArguments\n         * @param options\n         */\n        rewriteAppUrl: function router_rewriteAppUrl(searchArguments, options)\n        {\n            var searchPart, urlSecondPart = '', newUrl;\n            if (searchArguments.app) {\n                if (options.initid) {\n                    // Extract all GET parameters and rewrite if needed\n                    _.each(searchArguments, function routerGetUrl(getParameter, getKey)\n                    {\n                        if ([\"id\", \"initid\", \"app\", \"viewId\", \"revision\"].indexOf(getKey) >= 0) {\n                            searchArguments[getKey] = null;\n                        }\n                    });\n\n                    searchPart = _.compact(_.map(searchArguments, function router_composeSearchLocation(GETValue, GETKey)\n                    {\n                        if (GETValue === null) {\n                            return null;\n                        }\n                        return GETKey + \"=\" + encodeURIComponent(GETValue);\n\n                    }));\n\n                    if (options.viewId !== '!defaultConsultation') {\n                        urlSecondPart = \"/views/\" + encodeURIComponent(options.viewId);\n                        if (options.revision >= 0) {\n                            urlSecondPart += \"/revisions/\" + encodeURIComponent(options.revision);\n                        }\n                    } else {\n                        if (options.revision >= 0) {\n                            urlSecondPart = \"/revisions/\" + encodeURIComponent(options.revision);\n                        }\n                    }\n                    newUrl = window.location.pathname + 'api/v1/documents/' + options.initid + urlSecondPart + \".html\";\n                    if (searchPart.length > 0) {\n                        newUrl += '?' + searchPart.join('&');\n                    }\n                    newUrl += window.location.hash;\n                    this.navigate(newUrl, {replace: !this.useHistory});\n                }\n\n            }\n        },\n\n        /**\n         * Rewrite URL if mismatches detected between server information and url access\n         * @param options\n         */\n        rewriteApiUrl: function router_rewriteApiUrl(options)\n        {\n            var parsePath = false, parseHash = false, beginPath = '', urlSecondPart = '', locationSearch = window.location.search, locationHash = window.location.hash;\n            var noRecordHistory;\n            if (options.initid) {\n                parsePath = window.location.pathname.match('(.*)api\\\\/v1\\\\/documents\\\\/(.*)');\n                if (parsePath) {\n                    beginPath = parsePath[1];\n\n                    if (options.viewId !== '!defaultConsultation') {\n                        urlSecondPart = \"/views/\" + encodeURIComponent(options.viewId);\n                        if (options.revision >= 0) {\n                            urlSecondPart += \"/revisions/\" + encodeURIComponent(options.revision);\n                        }\n                    } else {\n                        if (options.revision >= 0) {\n                            urlSecondPart = \"/revisions/\" + encodeURIComponent(options.revision);\n                        }\n                    }\n\n                    noRecordHistory = /documents\\/0\\.html$/.test(options.path);\n\n                    parseHash = /#widgetValue{(.*)}/.exec(locationHash);\n                    if (parseHash) {\n                        try {\n                            var hashData = JSON.parse('{' + parseHash[1] + '}');\n\n                            delete hashData.viewId;\n                            delete hashData.initid;\n                            delete hashData.revision;\n\n                            if (hashData.customClientData) {\n                                locationSearch += locationSearch ? '&' : '?';\n                                locationSearch += \"customClientData=\";\n                                locationSearch += encodeURIComponent(JSON.stringify(hashData.customClientData));\n                                delete hashData.customClientData;\n                            }\n                            if (noRecordHistory) {\n                                locationHash='';\n                            } else {\n                                locationHash = '#widgetValue' + JSON.stringify(hashData);\n                            }\n                        } catch (e) {\n\n                        }\n                    }\n\n                    if (!this.useHistory) {\n                        noRecordHistory = true;\n                    }\n\n                    this.navigate(beginPath +\n                        'api/v1/documents/' +\n                        options.initid +\n                        urlSecondPart + '.html' +\n                        locationSearch + locationHash,\n                        {replace: noRecordHistory}\n                    );\n                }\n            }\n        },\n        viewDocument: function router_viewDocument(initid)\n        {\n            this.document.fetchDocument({initid: initid});\n        },\n        viewRevision: function router_viewRevision(initid, revision)\n        {\n            this.document.fetchDocument({\n                initid: initid,\n                revision: revision\n            });\n        },\n\n        viewView: function router_viewView(initid, viewId)\n        {\n            this.document.fetchDocument({\n                initid: initid,\n                viewId: viewId\n            });\n        },\n\n        viewRevisionView: function router_viewRevisionView(initid, revision, viewId)\n        {\n            this.document.fetchDocument({\n                initid: initid,\n                revision: revision,\n                viewId: viewId\n            });\n        },\n        fetch: function router_fetch(searchPart)\n        {\n            var searchObject, newValues = {};\n            searchObject = this.getUrlParameters(searchPart);\n\n            if (!_.isUndefined(searchObject.id)) {\n                newValues.initid = searchObject.id;\n            }\n            if (!_.isUndefined(searchObject.initid)) {\n                newValues.initid = searchObject.initid;\n            }\n            if (!_.isUndefined(searchObject.revision)) {\n                newValues.revision = parseInt(searchObject.revision, 10);\n            } else {\n                newValues.revision = -1;\n            }\n            if (!_.isUndefined(searchObject.viewId)) {\n                newValues.viewId = searchObject.viewId;\n            } else {\n                newValues.viewId = undefined;\n            }\n            this.document.fetchDocument(newValues);\n        },\n\n        /**\n         * extract url parameters and return an simple object indexed by parameters keys\n         * @param searchPart\n         * @returns {{}}\n         */\n        getUrlParameters: function router_getUrlParameters(searchPart)\n        {\n            var extract,\n                getParameters = searchPart.substr(1).split('&'),\n                result = {};\n\n            for (var i = 0; i < getParameters.length; i++) {\n                extract = getParameters[i].match(/^([^=]+)=(.*)$/);\n                if (extract) {\n                    result[extract[1]] = decodeURIComponent(extract[2]);\n                } else {\n                    result[getParameters[i]] = \"\";\n                }\n            }\n            return result;\n        }\n\n    });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/routers/router.js","/*global define, console*/\ndefine([\n    'jquery',\n    'underscore',\n    'backbone',\n    'mustache',\n    'dcpDocument/views/attributes/vAttribute',\n    'dcpDocument/views/attributes/array/vColumn',\n    'dcpDocument/views/document/attributeTemplate',\n    'dcpDocument/widgets/attributes/array/wArray'\n], function vArray($, _, Backbone, Mustache, ViewAttribute, ViewColumn, attributeTemplate) {\n    'use strict';\n\n    return Backbone.View.extend({\n        className: \"row dcpArray\",\n        displayLabel: true,\n        customView: false,\n        customRowView: false,\n        events: {\n            \"dcparraylineadded\": \"addLine\",\n            \"dcparraylineremoved\": \"removeLine\",\n            \"dcparraylinemoved\": \"moveLine\",\n            \"dcparrayexternallinkselected\": \"externalLinkSelected\",\n            \"dcpattributechange .dcpArray__content__cell\": \"updateValue\"\n        },\n\n        columnViews: {},\n\n        initialize: function vArray_initialize(options) {\n            if (options.displayLabel === false || this.model.getOption(\"labelPosition\") === \"none\") {\n                this.displayLabel = false;\n            }\n            this.listenTo(this.model, 'change:label', this.updateLabel);\n            this.listenTo(this.model, 'destroy', this.remove);\n            this.listenTo(this.model, 'cleanView', this.remove);\n            this.listenTo(this.model, 'change:errorMessage', this.setArrayError);\n            this.listenTo(this.model, 'errorMessage', this.setError);\n            this.listenTo(this.model, 'hide', this.hide);\n            this.listenTo(this.model, 'show', this.show);\n            this.listenTo(this.model, 'removeWidgetLine', this.removeWidgetLine);\n            this.listenTo(this.model, 'addWidgetLine', this.addWidgetLine);\n            this.listenTo(this.model, 'haveView', this._identifyView);\n            this.options = options;\n        },\n\n        render: function vArray_render() {\n            var currentView = this;\n            return (new Promise(_.bind(function vArray_renderPromise(resolve, reject) {\n                var customRender,\n                    data = currentView.model.toData(null, true),\n                    event = {prevent: false},\n                    promisesColumn = [];\n\n                //Trigger the beforeRender event, and cancel display if asked\n                currentView.model.trigger(\"beforeRender\", event, {model: currentView.model, $el: currentView.$el});\n                if (event.prevent) {\n                    resolve(currentView);\n                    return currentView;\n                }\n\n                if (currentView.options.originalView !== true) {\n                    if (currentView.model.getOption(\"template\")) {\n                        customRender = attributeTemplate.renderCustomView(currentView.model);\n                        currentView.customView = customRender.$el;\n                        customRender.promise.then(resolve);\n                        if (currentView.model.getOption(\"template\").match('dcpArray__table')) {\n                            // Two case of custom : custom line or global custom array\n                            currentView.customRowView = true;\n                        }\n                    }\n                }\n\n                //Extract only the displayable lines\n                data.content = _.filter(data.content, function vArray_filterCurrentElement(currentContent) {\n                    return currentContent.isDisplayable;\n                });\n                data.nbLines = currentView.getNbLines();\n                currentView.padValues(data.nbLines);\n                data.renderOptions = currentView.model.getOptions();\n                data.templates = {};\n                data.displayLabel = currentView.displayLabel;\n                if (currentView.model.getTemplates().attribute[currentView.model.get(\"type\")]) {\n                    data.templates = currentView.model.getTemplates().attribute[currentView.model.get(\"type\")];\n                }\n                if (data.nbLines === 0 && data.mode === \"read\") {\n                    data.showEmpty = currentView.model.getOption('showEmptyContent');\n                } else {\n                    if (!currentView.customView || currentView.customRowView) {\n                        currentView.columnViews = [];\n                        currentView.model.get(\"content\").each(function vArray_analyzeContent(currentAttr) {\n                            if (!currentAttr.isDisplayable()) {\n                                return;\n                            }\n                            try {\n                                if (currentAttr.getOption(\"attributeLabel\")) {\n                                    data.content = _.map(data.content, function vArray_changeLabelCurrentElement(currentContent) {\n                                        if (currentContent.id === currentAttr.id) {\n                                            currentContent.label = currentAttr.getOption(\"attributeLabel\");\n                                        }\n                                        return currentContent;\n                                    });\n                                }\n                                if (currentAttr.get(\"isValueAttribute\")) {\n                                    currentView.columnViews[currentAttr.id] = new ViewColumn({\n                                        el: currentView.el,\n                                        els: function vArray_findScope() {\n                                            return currentView.$el.find('.dcpArray__cell[data-attrid=\"' + currentAttr.id + '\"],' +\n                                                '.dcpCustomTemplate--row[data-attrid=\"' + currentAttr.id + '\"]'\n                                            );\n                                        },\n                                        originalView: true,\n                                        model: currentAttr,\n                                        parentElement: currentView.$el\n                                    });\n                                    promisesColumn.push(currentView.columnViews[currentAttr.id].render());\n                                }\n                            } catch (e) {\n                                if (window.dcp.logger) {\n                                    window.dcp.logger(e);\n                                } else {\n                                    console.error(e);\n                                }\n                            }\n                        });\n                    }\n                }\n\n                if (currentView.customView) {\n                    data.customTemplate = currentView.customView;\n                    data.customLineCallback = function vArray_callCustomLine(index) {\n                        return attributeTemplate.customArrayRowView(index, currentView.model, currentView);\n                    };\n                }\n\n                try {\n                    promisesColumn.push((new Promise(_.bind(function onArrayReady(resolve, reject) {\n                        currentView.$el.dcpArray(data).one(\"dcparraywidgetready\", resolve);\n                        attributeTemplate.insertDescription(currentView);\n                    }, this))));\n                } catch (e) {\n                    if (window.dcp.logger) {\n                        window.dcp.logger(e);\n                    } else {\n                        console.error(e);\n                    }\n                }\n\n                Promise.all(promisesColumn).then(function renderDone() {\n                    currentView.$el.attr(\"data-attrid\", currentView.model.id);\n                    currentView.model.trigger(\"renderDone\", {model: currentView.model, $el: currentView.$el});\n                    resolve(currentView);\n                });\n\n                return this;\n            }, this)));\n        },\n\n        getNbLines: function vArraygetNbLines() {\n            var nbLigne = this.nbLines || 0;\n            this.model.get(\"content\").each(function vArray_getCurrentLine(currentAttr) {\n                if (currentAttr.get(\"attributeValue\") && nbLigne < _.size(currentAttr.get(\"attributeValue\"))) {\n                    nbLigne = _.size(currentAttr.get(\"attributeValue\"));\n                }\n            });\n            return nbLigne;\n        },\n\n        padValues: function vArrayPadValues(lineNumber) {\n            if (lineNumber > 0) {\n                this.model.get(\"content\").each(function vArray_padCurrentLine(currentAttr) {\n                    var currentValue = currentAttr.get(\"attributeValue\");\n                    if (currentValue !== null && currentValue !== undefined && _.size(currentValue) < lineNumber) {\n                        for (var idx = currentValue.length; idx < lineNumber; idx++) {\n                            currentValue.push({value: null, displayValue: ''});\n                        }\n                    }\n                });\n            }\n        },\n\n        updateLabel: function vArrayupdateLabel() {\n            this.$el.find(\".dcpArray__label\").text(this.model.get(\"label\"));\n        },\n\n        updateValue: function vArray_UpdateValue(event, options) {\n            var attributeModel = this.model.get(\"content\").get(options.id);\n            if (!attributeModel) {\n                throw new Error(\"Unknown attribute \" + options.id);\n            }\n            attributeModel.setValue(options.value, options.index);\n        },\n\n        refresh: function vArray_Refresh() {\n            this.nbLines = this.$el.dcpArray(\"option\", \"nbLines\");\n            this.$el.dcpArray(\"destroy\");\n            this.render();\n        },\n\n        removeLine: function vArray_removeLine(event, options) {\n            this.model.get(\"content\").each(function vArray_removeLine(currentContent) {\n                currentContent.removeIndexValue(options.line);\n            });\n            this.model.trigger(\"array\", \"removeLine\", this.model, options.line);\n        },\n\n        removeWidgetLine: function vArray_RemoveWidgetLine(options) {\n            this.$el.dcpArray(\"removeLine\", options.index, {silent: true});\n        },\n\n        addWidgetLine: function vArray_addWidgetLine(options) {\n            this.$el.dcpArray(\"addLine\", options.index);\n        },\n\n        addLine: function vArray_AddLine(event, options) {\n            var currentArrayView = this, customView = null;\n            var allPromiseAttributes = [];\n            this.model.get(\"content\").each(function vArray_addLineGetContent(currentContent) {\n                var currentViewColumn;\n                if (options.needAddValue || options.copyValue) {\n                    currentContent.createIndexedValue(options.line, options.copyValue);\n                }\n                currentViewColumn = currentArrayView.columnViews[currentContent.id];\n                if (currentViewColumn) {\n                    customView = null;\n                    if (currentContent.getOption(\"template\")) {\n                        customView = attributeTemplate.renderCustomView(currentContent,\n                            function vArray_customViewInit() {\n                                var $this = $(this), currentWidgetOption = currentViewColumn.getData(options.line);\n                                //Check if the asked attribute is the current attribute\n                                if ($this.data(\"attrid\") !== currentContent.id) {\n                                    throw Error(\"An attribute template in an array cannot asked\" +\n                                        \" for another attribute than the current (\" + $this.data(\"attrid\") + \" asked instead of \" + currentContent.id + \")\");\n                                }\n                                currentWidgetOption.viewCid = _.uniqueId(currentWidgetOption.viewCid);\n                                currentViewColumn.widgetInit(\n                                    $this,\n                                    currentWidgetOption\n                                );\n                                currentViewColumn.moveValueIndex({});\n                            }, {index: options.line}\n                        );\n                        allPromiseAttributes.push(customView.promise);\n                    }\n                    if (customView && customView.$el) {\n                        allPromiseAttributes.push(currentViewColumn.addNewWidget(options.line, customView.$el));\n                    } else {\n                        allPromiseAttributes.push(currentViewColumn.addNewWidget(options.line));\n                    }\n\n                }\n            });\n            Promise.all(allPromiseAttributes).then(\n                _.bind(function addlinePromiseAllDone() {\n                    this.model.trigger(\"array\", \"addLine\", this.model, options.line);\n                    options.resolve();\n                }, this))[\"catch\"](options.reject);\n\n        },\n\n        moveLine: function vArray_moveLine(event, options) {\n            this.model.get(\"content\").each(function vArray_getMoveLineContent(currentContent) {\n                currentContent.moveIndexValue(options.fromLine, options.toLine);\n            });\n            this.model.trigger(\"array\", \"moveLine\", this.model, options);\n        },\n        getAttributeModel: function vArray_getAttributeModel(attributeId) {\n            var docModel = this.model.getDocumentModel();\n            return docModel.get('attributes').get(attributeId);\n        },\n\n        setError: function vArray_setError(event, message) {\n            var parentId = this.model.get('parent');\n\n            if (message) {\n                this.$el.find(\".dcpArray__label\").addClass(\"has-error\");\n            } else {\n                this.$el.find(\".dcpArray__label\").removeClass(\"has-error\");\n            }\n\n            if (parentId) {\n                var parentModel = this.getAttributeModel(parentId);\n                if (parentModel) {\n                    parentModel.trigger(\"errorMessage\", event, message);\n                }\n            }\n        },\n        setArrayError: function vArray_setArrayError(event, message) {\n            this.setError(event, message);\n            // global error on array itself\n            this.$el.dcpArray(\"setError\", message);\n        },\n\n        hide: function vArray_hide() {\n            this.$el.hide();\n        },\n\n        show: function vArray_show() {\n            this.$el.show();\n        },\n\n        _identifyView: function vArray_identifyView(event) {\n            event.haveView = true;\n            //Add the pointer to the current jquery element to a list passed by the event\n            event.elements = event.elements.add(this.$el);\n        },\n        externalLinkSelected: function vArrayExternalLinkSelected(event, options) {\n            var documentModel = this.model.getDocumentModel();\n            options.attrid = this.model.id;\n            this.model.trigger(\"internalLinkSelected\", event, options);\n            if (event.prevent) {\n                return this;\n            }\n            documentModel.trigger(\"actionAttributeLink\", event, options);\n        }\n    });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/views/attributes/array/vArray.js","/*global define*/\ndefine([\n    'jquery',\n    'underscore',\n    'backbone',\n    'mustache',\n    'dcpDocument/views/attributes/vAttribute',\n    'dcpDocument/views/document/attributeTemplate'\n], function vColumn($, _, Backbone, Mustache, ViewAttribute, attributeTemplate) {\n    'use strict';\n\n    return ViewAttribute.extend({\n\n        /**\n         * Use special event to trigger only attributes of model\n         */\n        attributeEvents: function vColumnEvents() {\n            var events = {};\n            this._mergeEvent(events, \"delete\", \"deleteValue\");\n            this._mergeEvent(events, \"changeattrmenuvisibility\", \"changeMenuVisibility\");\n            this._mergeEvent(events, \"changeattrsvalue\", \"changeAttributesValue\");\n            this._mergeEvent(events, \"fetchdocument\", \"loadDocument\");\n            this._mergeEvent(events, \"externallinkselected\", \"externalLinkSelected\");\n            this._mergeEvent(events, \"downloadfile\", \"downloadFileSelect\");\n            this._mergeEvent(events, \"uploadfile\", \"uploadFileSelect\");\n            this._mergeEvent(events, \"uploadfiledone\", \"uploadFileDone\");\n            this._mergeEvent(events, \"anchorclick\", \"anchorClick\");\n            this.listenTo(this.model, \"change:label\", this.changeLabel);\n            return events;\n        },\n\n        _mergeEvent: function vColumn_addEvent(events, name, method) {\n            events[\"dcpattribute\" + name + ' .dcpArray__content__cell[data-attrid=\"' + this.model.id + '\"]'] = method;\n        },\n\n        render: function vColumnRender() {\n            var scope = this;\n            if (this.displayLabel === false) {\n                // Need to defer because thead is not construct yet\n                _.defer(function vColumnHideHead() {\n                    var $head = scope.$el.find('.dcpArray__head__cell[data-attrid=\"' + scope.model.id + '\"]');\n                    $head.hide();\n                });\n            } else {\n                // Need to defer because thead is not construct yet\n                _.defer(function vColumnDescriptionHead() {\n                    var $head = scope.$el.find('.dcpArray__head__cell[data-attrid=\"' + scope.model.id + '\"]');\n                    attributeTemplate.insertDescription(scope, $head);\n                });\n            }\n            this.model.trigger(\"renderColumnDone\", {model: this.model, $el: this.$el});\n            return this;\n        },\n\n        /**\n         * Change the label of the column\n         */\n        changeLabel: function vColumnChangeLabel() {\n            this.$el.find('.dcpArray__head__cell[data-attrid=\"' + this.model.id + '\"]').text(this.model.get(\"label\"));\n        },\n\n        /**\n         * called by vArray::addLine()\n         * @param index row index\n         * @param customView HTML fragment to use for a custom view\n         */\n        addNewWidget: function vColumnAddNewWidget(index, customView) {\n            return (new Promise(_.bind(function vColumnAddNewWidget_promise(resolve, reject) {\n                if (this.options) {\n                    var cells = this.options.parentElement.find('.dcpArray__content__cell[data-attrid=\"' + this.model.id + '\"]'),\n                        $el, data = this.getData(index), event = {prevent: false};\n\n                    if (cells[index]) {\n                        try {\n                            $el = $(cells[index]);\n                            this.model.trigger(\"beforeRender\", event, {model: this.model, $el: $el, index: index});\n                            if (event.prevent) {\n                                return this;\n                            }\n                            if (customView) {\n                                $el.append(customView);\n                                this.model.trigger(\"renderDone\", {model: this.model, $el: $el, index: index});\n                                this.moveValueIndex({});\n                                resolve($el);\n                            } else {\n                                $el.one(\"dcpattributewidgetready .dcpAttribute__content\", _.bind(function vcolumnRender_widgetready() {\n                                    this.model.trigger(\"renderDone\", {model: this.model, $el: $el, index: index});\n                                    this.moveValueIndex({});\n                                    resolve();\n                                }, this));\n                                this.widgetInit($el, data);\n                                attributeTemplate.insertDescription(this, $el.parent());\n                            }\n\n                        } catch (error) {\n                            if (window.dcp.logger) {\n                                window.dcp.logger(error);\n                            } else {\n                                console.error(error);\n                            }\n                        }\n                    }\n                }\n            }, this)));\n        },\n\n        /**\n         *\n         * @param event\n         * @param options\n         */\n        loadDocument: function vColumnLoadDocument(event, options) {\n            var tableLine = options.tableLine,\n                index = options.index,\n                initid,\n                valueLine = this.model.get(\"attributeValue\")[tableLine],\n                documentModel = this.model.getDocumentModel();\n            if (_.isUndefined(index)) {\n                initid = valueLine.value;\n            } else {\n                initid = valueLine[index].value;\n            }\n\n            this.model.trigger(\"internalLinkSelected\", event, {\n                eventId: \"document.load\",\n                target: event.target,\n                attrid: this.model.id,\n                options: [initid, \"!defaultConsultation\"],\n                index: options.index,\n                row: tableLine\n            });\n\n            if (event.prevent) {\n                return this;\n            }\n\n            documentModel.fetchDocument({\n                \"initid\": initid,\n                \"revision\": -1,\n                \"viewId\": \"!defaultConsultation\"\n            });\n        },\n\n        /**\n         * Hide all items of the column\n         */\n        hide: function vColumnHide() {\n            this.getDOMElements().each(function vColumnHideEach() {\n                var $cell = $(this);\n                var tagName = $cell.prop(\"tagName\").toLowerCase();\n\n                if (tagName !== \"td\" && tagName !== \"th\") {\n                    $cell = $cell.closest(\"td.dcpArray__cell, th.dcpArray__head\");\n                }\n                $cell.hide();\n            });\n\n            this.$el.find('thead th[data-attrid=\"' + this.model.id + '\"]').hide();\n        },\n        /**\n         * Show all hidden items of the column\n         */\n        show: function vColumnShow() {\n            this.getDOMElements().each(function vColumnShowEach() {\n                var $cell = $(this);\n                var tagName = $cell.prop(\"tagName\").toLowerCase();\n\n                if (tagName !== \"td\" && tagName !== \"th\") {\n                    $cell = $cell.closest(\"td.dcpArray__cell, th.dcpArray__head\");\n                }\n                $cell.show();\n            });\n            this.$el.find('thead th[data-attrid=\"' + this.model.id + '\"]').show();\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/views/attributes/array/vColumn.js","/*global define, console*/\ndefine([\n    'jquery',\n    'underscore',\n    'backbone',\n    'mustache',\n    'dcpDocument/views/attributes/vAttribute',\n    'dcpDocument/views/attributes/array/vArray',\n    'dcpDocument/views/document/attributeTemplate'\n], function require_vFrame($, _, Backbone, Mustache, ViewAttribute, ViewAttributeArray, attributeTemplate)\n{\n    'use strict';\n\n    return Backbone.View.extend({\n\n        className: \"card card-default dcpFrame\",\n        customView: false,\n        displayLabel: true,\n\n        events: {\n            \"click .dcpFrame--collapsable\": \"toggle\",\n            'click a[href^=\"#action/\"], a[data-action], button[data-action]': 'externalLinkSelected'\n        },\n\n        initialize: function vFrame_initialize(options)\n        {\n\n            if (options.displayLabel === false || this.model.getOption(\"labelPosition\") === \"none\") {\n                this.displayLabel = false;\n            }\n            this.listenTo(this.model, 'change:label', this.updateLabel);\n            this.listenTo(this.model.get(\"content\"), 'add', this.render);\n            this.listenTo(this.model.get(\"content\"), 'remove', this.render);\n            this.listenTo(this.model.get(\"content\"), 'reset', this.render);\n            this.listenTo(this.model, 'errorMessage', this.setError);\n            this.listenTo(this.model, 'change:errorMessage', this.setError);\n            this.listenTo(this.model, 'destroy', this.remove);\n            this.listenTo(this.model, 'resize', this.setResponsiveClasse);\n            this.listenTo(this.model, 'cleanView', this.remove);\n            this.listenTo(this.model, 'hide', this.hide);\n            this.listenTo(this.model, 'show', this.show);\n            this.listenTo(this.model, 'haveView', this._identifyView);\n\n            this.options = options;\n        },\n\n        render: function vFrame_render() {\n            var currentView = this;\n            return (new Promise(_.bind(function vFrame_renderPromise(resolve, reject) {\n                var customRender,\n                    $content,\n                    labelElement,\n                    contentElement = '',\n                    customView = null,\n                    event = {prevent: false},\n                    contentData,\n                    promiseAttributes = [];\n\n                currentView.model.trigger(\"beforeRender\", event, {model: currentView.model, $el: currentView.$el});\n                if (event.prevent) {\n                    resolve(currentView);\n                    return currentView;\n                }\n\n                if (currentView.options.originalView !== true) {\n                    if (currentView.model.getOption(\"template\")) {\n                        customRender = attributeTemplate.renderCustomView(currentView.model);\n                        currentView.customView = customRender.$el;\n                        promiseAttributes.push(customRender.promise);\n                    }\n                }\n\n                contentData = currentView.model.toData(null, true);\n                if (currentView.model.getOption(\"attributeLabel\")) {\n                    contentData.label = currentView.model.getOption(\"attributeLabel\");\n                }\n                contentData.collapsable = (contentData.renderOptions.collapse !== \"none\");\n\n                currentView.templateLabel = currentView.model.getTemplates().attribute.frame.label;\n                labelElement = $(Mustache.render(currentView.templateLabel || \"\", contentData));\n\n                if (currentView.customView) {\n                    contentElement = currentView.customView;\n                    contentElement.addClass(\"dcpFrame__content dcpFrame__content--open\");\n                } else {\n                    currentView.templateContent = currentView.model.getTemplates().attribute.frame.content;\n                    contentElement = $(Mustache.render(currentView.templateContent || \"\", contentData));\n                }\n                currentView.$el.empty();\n                if (currentView.displayLabel === true) {\n                    currentView.$el.append(labelElement);\n                }\n                currentView.$el.append(contentElement);\n                currentView.$el.attr(\"data-attrid\", currentView.model.id);\n\n                $content = currentView.$el.find(\".dcpFrame__content\");\n                var hasOneContent = currentView.model.get(\"content\").some(function vFrame_getDisplayable(value) {\n                    return value.isDisplayable();\n                });\n\n                if (!currentView.customView) {\n                    if (!hasOneContent) {\n                        $content.append(currentView.model.getOption('showEmptyContent'));\n                    } else {\n                        currentView.model.get(\"content\").each(function vFrame_AnalyzeContent(currentAttr) {\n                            var attributeView;\n                            if (!currentAttr.isDisplayable()) {\n                                return;\n                            }\n                            try {\n                                customView = null;\n                                if (currentAttr.get(\"isValueAttribute\")) {\n                                    attributeView = new ViewAttribute({\n                                        model: currentAttr,\n                                        customView: customView\n                                    });\n                                    promiseAttributes.push(attributeView.render());\n                                    $content.append(attributeView.$el);\n                                    return;\n                                }\n                                if (currentAttr.get(\"type\") === \"array\") {\n                                    attributeView = new ViewAttributeArray({\n                                        model: currentAttr\n                                    });\n                                    promiseAttributes.push(attributeView.render());\n                                    $content.append(attributeView.$el);\n                                }\n                            } catch (e) {\n                                $content.append('<h1 class=\"bg-danger\"><span class=\"glyphicon glyphicon-warning-sign\" aria-hidden=\"true\"></span>Unable to render ' + currentAttr.id + '</h1>');\n                                if (window.dcp.logger) {\n                                    window.dcp.logger(e);\n                                } else {\n                                    console.error(e);\n                                }\n                            }\n                        });\n                    }\n\n                    attributeTemplate.insertDescription(currentView);\n                }\n\n                if (currentView.model.getOption(\"collapse\") === \"collapse\") {\n                    currentView.toggle(null, true);\n                }\n                Promise.all(promiseAttributes).then(function allRenderDone() {\n                    currentView.model.trigger(\"renderDone\", {model: currentView.model, $el: currentView.$el});\n                    if (currentView.model.getOption(\"responsiveColumns\")) {\n                        currentView.responsiveColumns();\n                    }\n                    resolve(currentView);\n                }).catch(reject);\n            }), this));\n\n        },\n\n        setResponsiveClasse: function vFrame_setResponsiveClasse() {\n            var _this=this;\n            var fWidth=0;\n            var matchesResponsive=0;\n            var responseColumnsDefs=this.model.getOption(\"responsiveColumns\") || [];\n            var isTopBottom=false;\n            var isGrow=false;\n\n            if (responseColumnsDefs.length > 0) {\n                fWidth=$(this.$el).width();\n\n                if (fWidth <= 0 ) {\n                    return;\n                }\n                var $vattrs=this.$el.find(\"> .dcpFrame__content > .row\");\n\n                _.each(responseColumnsDefs, function vFrame_setResponsiveClasses(responseColumnsInfo) {\n                    if (fWidth >= responseColumnsInfo.minAbsWidth && fWidth < responseColumnsInfo.maxAbsWidth) {\n\n                        matchesResponsive = responseColumnsInfo.number;\n                        if (responseColumnsInfo.grow === true) {\n                            _this.$el.addClass(\"dcp-column--grow\");\n                            isGrow=true;\n                        } else {\n                            _this.$el.removeClass(\"dcp-column--grow\");\n                            isGrow=false;\n                        }\n                        isTopBottom=responseColumnsInfo.direction === \"topBottom\";\n\n                        if (isGrow) {\n                            if ($vattrs.length < matchesResponsive) {\n                                matchesResponsive = $vattrs.length;\n                            } else if (isTopBottom) {\n                                var rowNumber=Math.ceil($vattrs.length / matchesResponsive);\n                                for (var i=matchesResponsive; i--; i>1) {\n                                    if (Math.ceil($vattrs.length / i) === rowNumber) {\n                                        // Decrease column number if not enough data to avoid empty columns\n                                        matchesResponsive=i;\n                                    }\n                                }\n                            }\n                        }\n\n                        if (matchesResponsive > 1) {\n                            _this.$el.addClass(\"dcp-column--\" + matchesResponsive);\n                        }\n                    } else {\n                        _this.$el.removeClass(\"dcp-column--\" + responseColumnsInfo.number);\n                    }\n                });\n\n\n                if (matchesResponsive > 1) {\n                    _this.$el.addClass(\"dcp-column\");\n                    if (matchesResponsive !== this.frameColumnNumber) {\n\n                        this.frameColumnNumber=matchesResponsive;\n\n                        if (isTopBottom) {\n                            this.$el.addClass(\"dcp-column--topbottom\");\n                            this.$el.removeClass(\"dcp-column--leftright\");\n                        } else {\n                            this.$el.removeClass(\"dcp-column--topbottom\");\n                            this.$el.addClass(\"dcp-column--leftright\");\n                        }\n                    }\n                } else {\n                    this.frameColumnNumber=matchesResponsive;\n                    this.$el.removeClass(\"dcp-column\");\n                    this.$el.removeClass(\"dcp-column--topbottom\");\n                    this.$el.removeClass(\"dcp-column--leftright\");\n                    this.$el.removeClass(\"dcp-column--grow\");\n                }\n            }\n        },\n\n        responsiveColumns: function vFrame_responsiveColumns() {\n            var responseColumnsDefs=this.model.getOption(\"responsiveColumns\") || [];\n            var _this=this;\n            var $fake=$(\"<div/>\").css({position:\"absolute\", top:0, overflow:\"hidden\"});\n            var $fakeWidth=$(\"<div/>\");\n\n\n            $(\"body\").append($fake.append($fakeWidth));\n\n            // Compute absolute width\n            _.each(responseColumnsDefs, function vFrame_computeResponsiveWidth(responseColumnsInfo) {\n                if (! responseColumnsInfo.minWidth) {\n                    responseColumnsInfo.minAbsWidth = 0;\n                } else {\n                    $fakeWidth.width(responseColumnsInfo.minWidth);\n                    responseColumnsInfo.minAbsWidth = $fakeWidth.width();\n                }\n\n                if (! responseColumnsInfo.maxWidth) {\n                    responseColumnsInfo.maxAbsWidth = Infinity;\n                } else {\n                    $fakeWidth.width(responseColumnsInfo.maxWidth);\n                    responseColumnsInfo.maxAbsWidth = $fakeWidth.width();\n                }\n            });\n\n            $fake.remove();\n            $(window).on(\"resize.v\"+this.model.cid, _.bind(this.setResponsiveClasse, this));\n            _.defer(_.bind(this.setResponsiveClasse, this));\n        },\n\n        getAttributeModel: function vFrame_getAttributeModel(attributeId)\n        {\n            var docModel = this.model.getDocumentModel();\n            return docModel.get('attributes').get(attributeId);\n        },\n\n        setError: function vFrame_setError(event, data)\n        {\n            if (data) {\n                this.$el.find(\".dcpFrame__label\").addClass(\"has-error\");\n            } else {\n                this.$el.find(\".dcpFrame__label\").removeClass(\"has-error\");\n            }\n        },\n\n        updateLabel: function vFrame_updateLabel()\n        {\n            this.$el.find(\".dcpFrame__label\").text(this.model.get(\"label\"));\n        },\n\n        toggle: function vFrame_toggle(event, hideNow)\n        {\n            var $contentElement = this.$(\".dcpFrame__content\");\n            this.$(\".dcp__frame__caret\").toggleClass(\"fa-caret-right fa-caret-down\");\n            $contentElement.toggleClass(\"dcpFrame__content--open dcpFrame__content--close\");\n            if (hideNow) {\n                $contentElement.hide();\n            } else {\n                $contentElement.slideToggle(200);\n                if ($contentElement.hasClass(\"dcpFrame__content--open\")) {\n                    this.model.getDocumentModel().redrawErrorMessages();\n                }\n            }\n        },\n\n        hide: function vFrame_hide()\n        {\n            this.$el.hide();\n        },\n\n        show: function vFrame_show()\n        {\n            this.$el.show();\n        },\n\n        externalLinkSelected: function vAttributeExternalLinkSelected(event)\n        {\n            var $target = $(event.currentTarget),\n                action,\n                options,\n                eventOptions,\n                documentModel,\n                internalEvent = {\n                    prevent: false\n                };\n\n            event.preventDefault();\n            if (event.stopPropagation) {\n                event.stopPropagation();\n            }\n\n            action = $target.data('action') || $target.attr(\"href\");\n            options = action.substring(8).split(\":\");\n            eventOptions = {\n                target: event.target,\n                index: -1,\n                eventId: options.shift(),\n                options: options\n            };\n            documentModel = this.model.getDocumentModel();\n\n            this.model.trigger(\"internalLinkSelected\", internalEvent, eventOptions);\n            if (event.prevent) {\n                return this;\n            }\n\n            documentModel.trigger(\"actionAttributeLink\", internalEvent, eventOptions);\n\n            return this;\n        },\n\n        _identifyView: function vFrame_identifyView(event)\n        {\n            event.haveView = true;\n            //Add the pointer to the current jquery element to a list passed by the event\n            event.elements = event.elements.add(this.$el);\n        },\n\n        /**\n         * Destroy the associated widget and suppress event listener before remov the dom\n         *\n         * @returns {*}\n         */\n        remove: function vFrame_Remove()\n        {\n            $(window).off(\".v\" + this.model.cid);\n\n            return Backbone.View.prototype.remove.call(this);\n        }\n    });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/views/attributes/frame/vFrame.js","/*global define, console*/\ndefine([\n    'jquery',\n    'underscore',\n    'backbone',\n    'mustache',\n    'dcpDocument/views/attributes/frame/vFrame',\n    'dcpDocument/views/document/attributeTemplate',\n    'dcpDocument/i18n/documentCatalog'\n], function vTabContent($, _, Backbone, Mustache, ViewAttributeFrame, attributeTemplate, i18n)\n{\n    'use strict';\n\n    return Backbone.View.extend({\n\n        tagName: \"div\",\n\n        className: \"dcpTab__content\",\n        customView: false,\n\n        initialize: function vTabContentInitialize(options)\n        {\n            this.listenTo(this.model, 'change:label', this.updateLabel);\n            this.listenTo(this.model.get(\"content\"), 'add', this.render);\n            this.listenTo(this.model.get(\"content\"), 'remove', this.render);\n            this.listenTo(this.model.get(\"content\"), 'reset', this.render);\n            this.listenTo(this.model, 'cleanView', this.remove);\n            this.listenTo(this.model, 'destroy', this.remove);\n            this.listenTo(this.model, 'showTab', this.renderContent);\n            this.listenTo(this.model, 'hide', this.hide);\n            this.listenTo(this.model, 'show', this.show);\n            this.listenTo(this.model, 'haveView', this._identifyView);\n            this.initializeContent = options.initializeContent;\n            this.initialized = false;\n            this.options = options;\n        },\n\n        render: function vTabContentRender()\n        {\n            var currentView = this;\n            return (new Promise(_.bind(function vTabContentRender_Promise(resolve, reject) {\n                var hasOneContent;\n                currentView.$el.empty().append($('<div class=\"dcpTab__content--loading\"><span class=\"fa fa-spinner fa-spin\"></span>'+\n                    i18n.___(\"Displaying\",\"ddui\")+'</div>'));\n                currentView.$el.attr(\"id\", currentView.model.id);\n                currentView.$el.attr(\"data-attrid\", currentView.model.id);\n\n                hasOneContent = currentView.model.get(\"content\").some(function vTabContentIsDisplayable(value)\n                {\n                    return value.isDisplayable();\n                });\n\n                if (!hasOneContent || !currentView.initializeContent) {\n                    currentView.$el.append(currentView.model.getOption('showEmptyContent'));\n                    currentView.$el.removeClass(\"dcpTab__content--loading\");\n                    currentView.model.trigger(\"renderDone\", {model: currentView.model, $el: currentView.$el});\n                    currentView.propageShowTab();\n                    resolve(currentView);\n                } else {\n                    currentView.renderContent().then(function vTabContentRender_renderContent() {\n                        resolve(currentView);\n                    });\n                }\n            }, this)));\n\n        },\n\n        renderContent: function vTabContentRenderContent(options) {\n            var currentView = this;\n            return (new Promise(_.bind(function vTabContentRenderContent_Promise(resolve, reject) {\n                var customRender,\n                    $content = currentView.$el,\n                    model = currentView.model,\n                    promisesFrame = [];\n                if (currentView.initialized === false) {\n                    currentView.$el.empty();\n                    if (currentView.originalView !== true) {\n                        if (currentView.model.getOption(\"template\")) {\n                            customRender = attributeTemplate.renderCustomView(currentView.model);\n                            currentView.customView = customRender.$el;\n                            promisesFrame.push(customRender.promise);\n                        }\n                    }\n                    if (currentView.customView) {\n                        $content.append(currentView.customView);\n                    } else {\n                        currentView.model.get(\"content\").each(function vTabContentRenderContent(currentAttr) {\n                            var view;\n                            try {\n                                if (!currentAttr.isDisplayable()) {\n                                    return;\n                                }\n                                if (currentAttr.get(\"type\") === \"frame\") {\n                                    view = new ViewAttributeFrame({model: currentAttr});\n                                    promisesFrame.push(view.render());\n                                    $content.append(view.$el);\n                                } else {\n                                    //noinspection ExceptionCaughtLocallyJS\n                                    throw new Error(\"unkown type \" + currentAttr.get(\"type\") + \" for id \" + currentAttr.id + \" for tab \" + model.id);\n                                }\n                            } catch (e) {\n                                if (window.dcp.logger) {\n                                    window.dcp.logger(e);\n                                } else {\n                                    console.error(e);\n                                }\n                            }\n                        });\n                        attributeTemplate.insertDescription(this);\n                        if (currentView.model.getOption(\"responsiveColumns\")) {\n                            currentView.responsiveColumns();\n                        }\n                    }\n\n                    Promise.all(promisesFrame).then(function tabAllFramesRenderDone() {\n                        currentView.$el.removeClass(\"dcpTab__content--loading\");\n                        currentView.model.trigger(\"renderDone\", {model: currentView.model, $el: currentView.$el});\n                        currentView.initialized = true;\n                        resolve();\n                    }).catch(reject);\n\n                }\n                $(window.document).trigger(\"redrawErrorMessages\");\n                currentView.model.get(\"content\").propageEvent('resize');\n            }, this)));\n        },\n\n\n        /**\n         * Add responsive column classes according to responsiveColumns render option\n         */\n        responsiveColumns: function vTab_responsiveColumns() {\n            var responseColumnsDefs=this.model.getOption(\"responsiveColumns\") || [];\n            var _this=this;\n            var $fake=$(\"<div/>\").css({position:\"absolute\", top:0, overflow:\"hidden\"});\n            var $fakeWidth=$(\"<div/>\");\n            var setResponsiveClasse=function vTab_setResponsiveClasses() {\n                var fWidth=$(_this.$el).width();\n                var matchesResponsive=0;\n\n                _.each(responseColumnsDefs, function vTab_setResponsiveClasses(responseColumnsInfo) {\n                    if (fWidth >= responseColumnsInfo.minAbsWidth && fWidth < responseColumnsInfo.maxAbsWidth) {\n                        _this.$el.addClass(\"dcp-column--\"+responseColumnsInfo.number);\n                        matchesResponsive=responseColumnsInfo.number;\n                        if (responseColumnsInfo.grow === true) {\n                            _this.$el.addClass(\"dcp-column--grow\");\n                        } else {\n                            _this.$el.removeClass(\"dcp-column--grow\");\n                        }\n                    } else {\n                        _this.$el.removeClass(\"dcp-column--\"+responseColumnsInfo.number);\n                    }\n                });\n\n                if (matchesResponsive > 1) {\n                    _this.$el.addClass(\"dcp-column\");\n                } else {\n                    _this.$el.removeClass(\"dcp-column\");\n                }\n                if (matchesResponsive !== _this.frameIsResized) {\n                    _this.frameIsResized=matchesResponsive;\n                    // Send resize to frame in case they have also responsive.\n                    _this.model.get(\"content\").propageEvent('resize');\n\n                }\n            };\n\n            $(\"body\").append($fake.append($fakeWidth));\n\n            // Compute absolute width\n            _.each(responseColumnsDefs, function vTab_computeResponsiveWidth(responseColumnsInfo) {\n                if (! responseColumnsInfo.minWidth) {\n                    responseColumnsInfo.minAbsWidth = 0;\n                } else {\n                    $fakeWidth.width(responseColumnsInfo.minWidth);\n                    responseColumnsInfo.minAbsWidth = $fakeWidth.width();\n                }\n\n                if (! responseColumnsInfo.maxWidth) {\n                    responseColumnsInfo.maxAbsWidth = Infinity;\n                } else {\n                    $fakeWidth.width(responseColumnsInfo.maxWidth);\n                    responseColumnsInfo.maxAbsWidth = $fakeWidth.width();\n                }\n            });\n\n            $fake.remove();\n            $(window).on(\"resize.v\"+this.model.cid, setResponsiveClasse);\n            _.defer(setResponsiveClasse);\n        },\n\n        propageShowTab: function vTabContentPropageShowTab()\n        {\n            this.model.get(\"content\").propageEvent('showTab');\n        },\n\n        updateLabel: function vTabContentUpdateLabel()\n        {\n            this.$el.find(\".dcpFrame__label\").text(this.model.get(\"label\"));\n        },\n\n        hide: function vTabContentHide()\n        {\n            this.$el.hide();\n        },\n\n        show: function vTabContentShow()\n        {\n            this.$el.show();\n        },\n\n        _identifyView: function vAttribute_identifyView(event)\n        {\n            event.haveView = true;\n            //Add the pointer to the current jquery element to a list passed by the event\n            event.elements = event.elements.add(this.$el);\n        },\n        remove: function vFrame_Remove()\n        {\n            $(window).off(\".v\" + this.model.cid);\n\n            return Backbone.View.prototype.remove.call(this);\n        }\n    });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/views/attributes/tab/vTabContent.js","/*global define*/\ndefine([\n    'jquery',\n    'underscore',\n    'backbone',\n    'mustache',\n    'dcpDocument/views/document/attributeTemplate'\n], function vTabLabel($, _, Backbone, Mustache, attributeTemplate)\n{\n    'use strict';\n\n    return Backbone.View.extend({\n\n        tagName: \"li\",\n\n        className: \"dcpTab__label dcpLabel\",\n\n        events:\n        {\n            'click a[href^=\"#action/\"], a[data-action], button[data-action]': 'externalLinkSelected'\n        },\n\n        displayLabel: true,\n\n        initialize: function vTabLabel_initialize(options)\n        {\n            if (options.displayLabel === false || this.model.getOption(\"labelPosition\") === \"none\") {\n                this.displayLabel = false;\n            }\n            this.listenTo(this.model, 'change:label', this.updateLabel);\n            this.listenTo(this.model.get(\"content\"), 'add', this.render);\n            this.listenTo(this.model.get(\"content\"), 'remove', this.render);\n            this.listenTo(this.model.get(\"content\"), 'reset', this.render);\n            this.listenTo(this.model, 'errorMessage', this.setError);\n            this.listenTo(this.model, 'change:errorMessage', this.setError);\n            this.listenTo(this.model, 'destroy', this.remove);\n            this.listenTo(this.model, 'cleanView', this.remove);\n            this.listenTo(this.model, 'hide', this.hide);\n            this.listenTo(this.model, 'show', this.show);\n        },\n\n        render: function vTabLabel_render()\n        {\n            var label = this.model.get(\"label\");\n            var tooltipLabel = this.model.getOption(\"tooltipLabel\");\n            var attrData = this.model.attributes;\n            var helpId = this.model.getOption(\"helpLinkIdentifier\");\n            var documentModel = this.model.getDocumentModel();\n\n            this.$el.empty();\n            if (this.displayLabel !== false) {\n                if (this.model.getOption(\"attributeLabel\")) {\n                    label = this.model.getOption(\"attributeLabel\");\n                }\n\n                if (helpId) {\n                    this.$el.append(Mustache.render('<span class=\"dcpLabel__text\">{{label}} <a class=\"dcpLabel__help__link\" href=\"#action/document.help:{{helpId}}:{{attrid}}\"><span class=\"fa fa-question-circle\"></span></a></span>', {\n                        helpId: helpId,\n                        attrid: this.model.id,\n                        label: label\n                    }));\n                } else {\n                    this.$el.html($('<span class=\"dcpLabel__text\" />').text(label));\n                }\n\n                attributeTemplate.insertDescription(this);\n                if (tooltipLabel) {\n                    tooltipLabel = Mustache.render(tooltipLabel || \"\", attrData);\n                    if (!this.model.getOption(\"tooltipHtml\")) {\n                        // Need encode itself because the dropselect tooltip also need\n                        tooltipLabel = $('<div/>').text(tooltipLabel).html();\n                    }\n                    this.$el.data(\"tooltipLabel\", Mustache.render(tooltipLabel || \"\", attrData));\n                    this.$el.tooltip({\n                        placement: \"top\",\n                        container: \".dcpDocument\",\n                        html: true,\n                        title: function vDocumentTooltipTitle()\n                        {\n                            if ($(this).find(\".k-input.dcpTab__label__select\").length > 0) {\n                                // It is a selected Tab\n                                return $(this).data(\"tooltipLabelSelect\");\n                            }\n                            return $(this).data(\"tooltipLabel\"); // set the element text as content of the tooltip\n                        }\n                    });\n                }\n            }\n\n            this.$el.attr(\"data-attrid\", this.model.id);\n\n            return this;\n        },\n\n        setError: function vTabLabel_setError(event, data)\n        {\n            if (data) {\n                this.$el.addClass(\"has-error\");\n            } else {\n                this.$el.removeClass(\"has-error\");\n            }\n        },\n\n        updateLabel: function vTabLabel_updateLabel()\n        {\n            this.$el.text(this.model.get(\"label\"));\n        },\n\n        hide: function vTabLabel_hide()\n        {\n            this.$el.hide();\n        },\n\n        show: function vTabLabel_show()\n        {\n            this.$el.show();\n        },\n\n        externalLinkSelected: function vAttributeExternalLinkSelected(event)\n        {\n            var $target = $(event.currentTarget),\n                action,\n                options,\n                eventOptions,\n                documentModel,\n                internalEvent = {\n                    prevent: false\n                };\n\n            event.preventDefault();\n            if (event.stopPropagation) {\n                event.stopPropagation();\n            }\n\n            action = $target.data('action') || $target.attr(\"href\");\n            options = action.substring(8).split(\":\");\n            eventOptions = {\n                target: event.target,\n                index: scopeWidget._getIndex(),\n                eventId: options.shift(),\n                options: options\n            };\n            documentModel = this.model.getDocumentModel();\n\n            this.model.trigger(\"internalLinkSelected\", internalEvent, eventOptions);\n            if (event.prevent) {\n                return this;\n            }\n\n            documentModel.trigger(\"actionAttributeLink\", internalEvent, options);\n\n            return this;\n        }\n    });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/views/attributes/tab/vTabLabel.js","/*global define, console*/\ndefine([\n    'jquery',\n    'underscore',\n    'backbone',\n    'mustache',\n    'dcpDocument/views/document/attributeTemplate',\n    'dcpDocument/widgets/attributes/label/wLabel',\n    'dcpDocument/widgets/attributes/text/wText',\n    'dcpDocument/widgets/attributes/int/wInt',\n    'dcpDocument/widgets/attributes/longtext/wLongtext',\n    'dcpDocument/widgets/attributes/htmltext/wHtmltext',\n    'dcpDocument/widgets/attributes/timestamp/wTimestamp',\n    'dcpDocument/widgets/attributes/time/wTime',\n    'dcpDocument/widgets/attributes/image/wImage',\n    'dcpDocument/widgets/attributes/money/wMoney',\n    'dcpDocument/widgets/attributes/enum/wEnum',\n    'dcpDocument/widgets/attributes/color/wColor',\n    'dcpDocument/widgets/attributes/password/wPassword',\n    'dcpDocument/widgets/attributes/file/wFile',\n    'dcpDocument/widgets/attributes/double/wDouble',\n    'dcpDocument/widgets/attributes/docid/wDocid'\n], function vAttribute($, _, Backbone, Mustache, attributeTemplate)\n{\n    'use strict';\n\n    return Backbone.View.extend({\n\n        className: \"row dcpAttribute form-group\",\n        customView: false,\n        displayLabel: true,\n        //Don't use standard event to launch the event only when there is no template\n        //********************************************************************************************\n        // If you add an event here, you probably want to add it in vColumn.js and test it in an array\n        //********************************************************************************************\n        attributeEvents: {\n            \"dcpattributechange .dcpAttribute__content,[data-dcpattribute_content]\": \"updateValue\",\n            \"dcpattributedelete .dcpAttribute__content\": \"deleteValue\",\n            \"dcpattributechangeattrmenuvisibility .dcpAttribute__content\": \"changeMenuVisibility\",\n            \"dcpattributechangeattrsvalue .dcpAttribute__content\": \"changeAttributesValue\",\n            \"dcpattributefetchdocument .dcpAttribute__content\": \"loadDocument\",\n            \"dcpattributeexternallinkselected .dcpAttribute__content\": \"externalLinkSelected\",\n            \"dcplabelexternallinkselected\": \"externalLinkSelected\",\n            \"dcpattributedownloadfile  .dcpAttribute__content\": \"downloadFileSelect\",\n            \"dcpattributeuploadfile  .dcpAttribute__content\": \"uploadFileSelect\",\n            \"dcpattributeuploadfiledone  .dcpAttribute__content\": \"uploadFileDone\",\n            \"dcpattributeanchorclick .dcpAttribute__content\": \"anchorClick\",\n            \"dcpattributewidgetready .dcpAttribute__content\": \"setWidgetReady\"\n        },\n\n        initialize: function vAttributeInitialize(options)\n        {\n            var events;\n            this.listenTo(this.model, 'change:label', this.refreshLabel);\n            this.listenTo(this.model, 'change:attributeValue', this.refreshValue);\n            this.listenTo(this.model, 'change:errorMessage', this.refreshError);\n            this.listenTo(this.model, 'moved', this.moveValueIndex);\n            this.listenTo(this.model, 'destroy', this.remove);\n            this.listenTo(this.model, 'showTab', this.afterShow);\n            this.listenTo(this.model, 'hide', this.hide);\n            this.listenTo(this.model, 'show', this.show);\n            this.listenTo(this.model, 'haveView', this._identifyView);\n            this.listenTo(this.model, 'closeWidget', this._closeWidget);\n            this.templateWrapper = this.model.getTemplates().attribute.simpleWrapper;\n\n            options = options || {};\n\n            //Guess if the view is a template (originalView = false in this case)\n            options.originalView = options.originalView !== false;\n\n            if (options.displayLabel === false || this.model.getOption(\"labelPosition\") === \"none\") {\n                this.displayLabel = false;\n            }\n\n            //Attribute without template so we bind event\n            if (options.originalView === true) {\n                events = this.attributeEvents;\n                //For vColumn events\n                if (_.isFunction(events)) {\n                    events = events.apply(this);\n                }\n                this.delegateEvents(events);\n            }\n            this.options = options;\n        },\n\n        /**\n         * The Data are the source of data shared with widget and templates\n         *\n         * @param index\n         * @returns {*}\n         */\n        getData: function vAttributeGetData(index)\n        {\n            var data;\n\n            //Made to JSON for all the values, or to data for value indexed (in cas of multiple)\n            data = this.model.toData(index, true);\n            data.viewCid = this.cid + '-' + this.model.id;\n            data.labels.deleteAttributeNames = this.getDeleteLabels();\n            // autoComplete detected\n            data.autocompleteRequest = _.bind(this.autocompleteRequestRead, this);\n\n            return data;\n        },\n\n        render: function vAttributeRender()\n        {\n            var currentView = this;\n            var renderPromise = new Promise(_.bind(function vAttributeRender_Promise(resolve, reject) {\n                var data,\n                    event = {prevent: false},\n                    customRender;\n\n                currentView.model.trigger(\"beforeRender\", event, {model: currentView.model, $el: currentView.$el});\n                if (event.prevent) {\n                    resolve();\n                    return currentView;\n                }\n\n                //We fetch data after beforeRender, if some data is modified by beforeRender we get it\n                data = currentView.getData();\n\n                currentView.$el.addClass(\"dcpAttribute--type--\" + currentView.model.get(\"type\"));\n                currentView.$el.addClass(\"dcpAttribute--visibility--\" + currentView.model.get(\"visibility\"));\n                currentView.$el.attr(\"data-attrid\", currentView.model.get(\"id\"));\n                if (currentView.model.get(\"needed\")) {\n                    currentView.$el.addClass(\"dcpAttribute--needed\");\n                }\n\n                currentView.$el.append($(Mustache.render(currentView.templateWrapper || \"\", data)));\n\n                attributeTemplate.insertDescription(currentView);\n\n                //analyze the display label and add display class\n                if (currentView.displayLabel === false) {\n                    currentView.$el.find(\".dcpAttribute__label\").remove();\n                    // set to 100% width\n                    currentView.$el.find(\".dcpAttribute__right\").addClass(\"dcpAttribute__right--full\");\n                } else {\n                    if (currentView.model.getOption(\"labelPosition\") === \"left\") {\n                        currentView.$el.addClass(\"dcpAttribute__labelPosition--left\");\n                        currentView.$el.find(\".dcpAttribute__right\").not(\".dcpAttribute__description\").addClass(\"dcpAttribute__labelPosition--left\");\n                        currentView.$el.find(\".dcpAttribute__left\").not(\".dcpAttribute__description\").addClass(\"dcpAttribute__labelPosition--left\");\n                    }\n                    if (currentView.model.getOption(\"labelPosition\") === \"up\") {\n                        currentView.$el.addClass(\"dcpAttribute__labelPosition--up\");\n                        currentView.$el.find(\".dcpAttribute__right\").not(\".dcpAttribute__description\").addClass(\"dcpAttribute__labelPosition--up\");\n                        currentView.$el.find(\".dcpAttribute__left\").not(\".dcpAttribute__description\").addClass(\"dcpAttribute__labelPosition--up\");\n                    }\n                    if (currentView.model.getOption(\"labelPosition\") === \"auto\") {\n                        currentView.$el.addClass(\"dcpAttribute__labelPosition--auto\");\n                        currentView.$el.find(\".dcpAttribute__right\").addClass(\"dcpAttribute__labelPosition--auto\");\n                        currentView.$el.find(\".dcpAttribute__left\").addClass(\"dcpAttribute__labelPosition--auto\");\n                    }\n                    currentView.$el.find(\".dcpAttribute__label\").dcpLabel(data);\n                }\n\n                //If there is a template render it\n                if (currentView.options.originalView !== true && currentView.model.getOption(\"template\")) {\n                    customRender = attributeTemplate.renderCustomView(currentView.model);\n                    currentView.customView = customRender.$el;\n                    currentView.$el.find(\".dcpAttribute__content\").append(currentView.customView);\n                    customRender.promise.then(resolve);\n                    customRender.promise[\"catch\"](reject);\n                } else {\n                    //there is not template render (default)\n                    currentView.$el.one(\"dcpattributewidgetready .dcpAttribute__content\", function vattributeRender_widgetready() {\n                        resolve();\n                    });\n                    currentView.currentDcpWidget = currentView.widgetInit(currentView.$el.find(\".dcpAttribute__content\"), data);\n                }\n\n                currentView.renderDone = true;\n                if (currentView.customView) {\n                    currentView.widgetReady = true;\n                }\n\n                currentView.triggerRenderDone();\n                return currentView;\n            }, this));\n            return renderPromise;\n        },\n\n        refreshLabel: function vAttributeRefreshLabel()\n        {\n            var label = this.model.get(\"label\"), labelDom = this.getDOMElements().find(\".dcpAttribute__label\");\n            if (this.model.getOption(\"attributeLabel\")) {\n                label = this.model.getOption(\"attributeLabel\");\n            }\n            if (labelDom.data(\"dcpDcpLabel\")) {\n                this.getDOMElements().find(\".dcpAttribute__label\").dcpLabel(\"setLabel\", label);\n            }\n        },\n\n        /**\n         * Autorefresh value when model change\n         */\n        refreshValue: function vAttributeRefreshValue(model, values, options)\n        {\n            var scope = this, allWrapper, arrayWrapper;\n            if (options.notUpdateArray) {\n                return this;\n            }\n\n            allWrapper = this.getDOMElements();\n\n            if (this.model.isInArray()) {\n                // adjust line number to column length\n                arrayWrapper = this.$el;\n                arrayWrapper.dcpArray(\"setLines\", values.length, options).then(_.bind(function setValue() {\n                    values = _.toArray(values);\n                    _.each(values, function analyzeValues(currentValue, index)\n                    {\n                        if (_.isUndefined(currentValue)) {\n                            return;\n                        }\n                        var cssIndex = '.dcpAttribute__content--widget[data-attrid=\"' + model.id + '\"]';\n                        $(allWrapper[index]).find(cssIndex).addBack(cssIndex).each(\n                            function vAttributeRefreshOneValue(index, element)\n                            {\n                                scope.widgetApply($(element), \"setValue\", currentValue);\n                            });\n                    });\n                }, this));\n            } else {\n                this.widgetApply(allWrapper.find('.dcpAttribute__content--widget[data-attrid=\"' + model.id + '\"]'), \"setValue\", values);\n            }\n        },\n\n        /**\n         * Display error message around the widget if needed\n         * @param event\n         */\n        refreshError: function vAttributeRefreshError(event)\n        {\n            this.$el.find(\".dcpAttribute__label\").dcpLabel(\"setError\", this.model.get(\"errorMessage\"));\n            // andSelf method was removed from jQuery 3.0.0+ use addBack instead\n            var jqueryVersion = +$().jquery.split('.')[0];\n            if (jqueryVersion >= 3) {\n              this.widgetApply(this.getDOMElements().find(\".dcpAttribute__content--widget\").addBack().filter(\".dcpAttribute__content--widget\"),\n                \"setError\", this.model.get(\"errorMessage\"));\n            } else {\n              this.widgetApply(this.getDOMElements().find(\".dcpAttribute__content--widget\").andSelf().filter(\".dcpAttribute__content--widget\"),\n                \"setError\", this.model.get(\"errorMessage\"));\n            }\n        },\n\n        /**\n         * Modify several attribute\n         * @param event event object\n         * @param index the value rank in case of multiple\n         * @param options object {dataItem :, valueIndex :}\n         */\n        changeAttributesValue: function vAttributeChangeAttributesValue(event, options, index)\n        {\n            var externalEvent = {prevent: false},\n                currentView = this,\n                dataItem = options.dataItem,\n                valueIndex = options.valueIndex,\n                currentValue;\n            this.model.trigger(\"helperSelect\", externalEvent, this.model.id, dataItem, index);\n            if (externalEvent.prevent) {\n                return this;\n            }\n            _.each(dataItem.values, function vAttributeChangeAttributeValue(attributeValue, attributeId)\n            {\n                if (typeof attributeValue === \"object\") {\n                    if (attributeValue.value === null) {\n                        //Value not completed by helper so don't use it\n                        return;\n                    }\n\n                    var attrModel = currentView.model.getDocumentModel().get('attributes').get(attributeId);\n                    if (attrModel) {\n                        if (attrModel.hasMultipleOption()) {\n                            currentValue = attrModel.getValue();\n                            if (valueIndex >= 0) {\n                                currentValue = currentValue[valueIndex];\n                            }\n                            // No add same value twice\n                            if (!_.some(currentValue, function vAttributeNoDouble(itemValue)\n                                {\n                                    return itemValue.value === attributeValue.value;\n                                })) {\n                                attrModel.addValue({\n                                    value: attributeValue.value,\n                                    displayValue: attributeValue.displayValue\n                                }, valueIndex);\n                            }\n                        } else {\n                            attrModel.setValue({\n                                value: attributeValue.value,\n                                displayValue: attributeValue.displayValue\n                            }, valueIndex);\n                        }\n                    }\n                    else {\n                        console.error(\"Unable to find \" + attributeId);\n                    }\n                }\n            });\n        },\n\n        /**\n         * Modify view : triggered by wDocid\n         * @param event\n         * @param options\n         * @returns {*}\n         */\n        loadDocument: function changeAttributesValueLoadDocument(event, options)\n        {\n            var index = options.index, initid = null, attributeValue = this.model.get(\"attributeValue\"),\n                documentModel = this.model.getDocumentModel(), revision = -1;\n            if (_.isUndefined(index)) {\n                initid = attributeValue.value;\n                revision = attributeValue.revision;\n            } else {\n                initid = attributeValue[index].value;\n                revision = attributeValue[index].revision;\n            }\n\n            this.model.trigger(\"internalLinkSelected\", event, {\n                eventId: \"document.load\",\n                target: event.target,\n                attrid: this.model.id,\n                options: [initid, \"!defaultConsultation\"],\n                index: options.index\n            });\n\n            if (event.prevent) {\n                return this;\n            }\n\n            documentModel.trigger(\"loadDocument\",\n                {\n                    initid: initid,\n                    viewId: \"!defaultConsultation\",\n                    revision: revision\n                }\n            );\n        },\n\n        /**\n         * Create dialog window to create and insert document\n         */\n        displayFormDocument: function vAttributedisplayFormDocument(event, buttonConfig, index)\n        {\n            var attrid = this.model.id;\n            if (buttonConfig.createLabel) {\n                var documentModel = this.model.getDocumentModel();\n\n                require.ensure(['dcpDocument/widgets/attributes/docid/wCreateDocument'], function vDocumentCreateDocument()\n                {\n                    require('dcpDocument/widgets/attributes/docid/wCreateDocument');\n                    var $bdw = $('<div class=\"dcpDocid-create-window\"/>');\n                    var $dcp = $bdw.dcpCreateDocument(\n                        _.extend(buttonConfig, {\n                            originDocumentModel: documentModel,\n                            attributeId: attrid,\n                            index: index,\n                            listener: function vDocumentCreateListener(event, triggerId, options)\n                            {\n                                options.dialogDocument = this;\n                                options.triggerId = triggerId;\n                                documentModel.trigger(\"createDialogListener\", event, attrid, options);\n                            }\n                        })).data(\"dcpCreateDocument\");\n                    $dcp.open();\n                }, \"wCreateDocument\");\n            }\n        },\n\n        externalLinkSelected: function vAttributeExternalLinkSelected(event, options)\n        {\n            var documentModel = this.model.getDocumentModel();\n            options.attrid = this.model.id;\n            this.model.trigger(\"internalLinkSelected\", event, options);\n            if (event.prevent) {\n                return this;\n            }\n            if (options.eventId === \"attribute.createDocumentRelation\") {\n                this.displayFormDocument(event, options.buttonConfig, options.index);\n            } else {\n                documentModel.trigger(\"actionAttributeLink\", event, options);\n            }\n        },\n        downloadFileSelect: function vAttributedownloadFileSelect(widgetEvent, options)\n        {\n            var event = {prevent: false};\n\n            this.model.trigger(\"downloadFile\", event, this.model.id, options);\n            if (event.prevent) {\n                widgetEvent.preventDefault();\n            }\n        },\n        uploadFileSelect: function vAttributeuploadFileSelect(widgetEvent, options)\n        {\n            var event = {prevent: false};\n\n            this.model.trigger(\"uploadFile\", event, this.model.id, options);\n            if (event.prevent) {\n                widgetEvent.preventDefault();\n            }\n        },\n        uploadFileDone: function vAttributeuploadFileSEnd(widgetEvent, options)\n        {\n            var event = {prevent: false};\n\n            this.model.trigger(\"uploadFileDone\", event, this.model.id, options);\n        },\n\n        anchorClick: function vAttributeAnchorClick(widgetEvent, options)\n        {\n            var internalEvent = {prevent: false};\n\n            this.model.trigger(\"anchorClick\", internalEvent, this.model.id, options);\n            if (internalEvent.prevent) {\n                widgetEvent.preventDefault();\n            }\n        },\n\n        /**\n         * Delete value,\n         * If has help, clear also target attributes\n         * @param event\n         * @param data index info {index:\"the index}\n         */\n        deleteValue: function changeAttributesValueDeleteValue(event, data)\n        {\n\n            if (data.id === this.model.id) {\n                var attrToClear = this.model.get('helpOutputs'),\n                    docModel = this.model.getDocumentModel();\n                if ((!attrToClear) || typeof attrToClear === \"undefined\") {\n                    attrToClear = [this.model.id];\n                } else {\n                    attrToClear = _.toArray(attrToClear);\n                }\n                _.each(attrToClear, function vAttributeCleanAssociatedElement(aid)\n                {\n                    var attr = docModel.get('attributes').get(aid);\n                    if (attr) {\n                        if (attr.hasMultipleOption()) {\n                            attr.setValue([], data.index);\n                        } else {\n                            attr.setValue({value: null, displayValue: ''}, data.index);\n                        }\n                    }\n                });\n            }\n        },\n\n        /**\n         * Return another attribute model\n         *\n         * @param attributeId\n         * @returns {*}\n         */\n        getAttributeModel: function vAttributeGetAttributeModel(attributeId)\n        {\n            var docModel = this.model.getDocumentModel();\n            return docModel.get('attributes').get(attributeId);\n        },\n\n        /**\n         * Used for render attribute\n         *\n         * @returns {Array}\n         */\n        getDeleteLabels: function vAttributeGetDeleteLabels()\n        {\n            var attrToClear = this.model.get('helpOutputs'),\n                scope = this, attrLabels;\n            if ((!attrToClear) || typeof attrToClear === \"undefined\") {\n                attrToClear = [this.model.id];\n            } else {\n                attrToClear = _.toArray(attrToClear);\n            }\n            attrLabels = _.map(attrToClear, function vAttributeGetAssociatedLabel(aid)\n            {\n                var attr = scope.getAttributeModel(aid);\n                if (attr) {\n                    return attr.attributes.label;\n                }\n                return '';\n            });\n            return attrLabels;\n        },\n\n        /**\n         * Propagate move value event to widgets\n         * @param eventData\n         */\n        moveValueIndex: function vAttributeMoveValueIndex(eventData)\n        {\n            this.getDOMElements().trigger(\"postMoved\", eventData);\n        },\n\n        /**\n         * method use for transport multiselect widget\n         * @param index the row index of autocomplete when it is in array\n         * @param options\n         */\n        autocompleteRequestRead: function vAttributeAutocompleteRequestRead(options, index)\n        {\n            var currentView = this,\n                documentModel = this.model.getDocumentModel(),\n                success = options.success,\n                externalOptions = {\n                    setResult: function vAttributeAutoCompleteSet(content)\n                    {\n                        _.each(content, function (item)\n                        {\n                            if (item.message) {\n                                item.message.contentText = item.message.contentText || '';\n                                item.message.contentHtml = item.message.contentHtml || '';\n                                item.message.type = item.message.type || 'message';\n                            } else\n                                if (item.error) {\n                                    item.message = {\n                                        contentHtml: '',\n                                        contentText: item.error,\n                                        type: \"error\"\n                                    }\n                                }\n                            item.title = item.title || '';\n\n                        });\n                        success(content);\n                    },\n                    data: options.data\n                },\n                autocompleteUrl,\n                event = {prevent: false};\n            //Add helperResonse event (can be used to reprocess the content of the request)\n            success = _.wrap(success, function vAttributeAutoCompleteSuccess(success, content)\n            {\n                var options = {}, event = {prevent: false};\n                options.data = content;\n                currentView.model.trigger(\"helperResponse\", event, currentView.model.id, options, index);\n                if (event.prevent) {\n                    return success([]);\n                }\n                success(content);\n            });\n\n            //Add helperSearch event (can prevent default ajax request)\n            options.data.attributes = documentModel.getValues();\n            this.model.trigger(\"helperSearch\", event, this.model.id, externalOptions, index);\n            if (event.prevent) {\n                return this;\n            }\n            autocompleteUrl = \"api/v1/documents/\" + (documentModel.id || \"0\" ) + \"/autocomplete/\" + this.model.id;\n\n\n            options.data.fromid = documentModel.get(\"properties\").get(\"family\").id;\n\n            $.ajax({\n                type: \"POST\",\n                url: autocompleteUrl,\n                data: options.data,\n\n                dataType: \"json\" // \"jsonp\" is required for cross-domain requests; use \"json\" for same-domain requestsons.error(result);\n            }).pipe(\n                function vAttributeAutocompletehandleSuccessRequest(response)\n                {\n                    if (response.success) {\n                        return response;\n                    } else {\n                        return ($.Deferred().reject(response));\n                    }\n                },\n                function vAttributeAutocompletehandleErrorRequest(response)\n                {\n                    if (response.status === 0) {\n                        return {\n                            success: false,\n                            error: \"Your navigator seems offline, try later\"\n                        };\n                    }\n                    return ({\n                        success: false,\n                        error: \"Unexpected error: \" + response.status + \" \" + response.statusText\n                    });\n                }\n            ).then(function vAttributeAutocompleteSuccessResult(result)\n                {\n                    // notify the data source that the request succeeded\n                    _.each(result.messages, function (message)\n                    {\n                        message.contentText = message.contentText || '';\n                        message.contentHtml = message.contentHtml || '';\n                        result.data.unshift({\n                            message: message,\n                            title: ''\n                        });\n                    });\n                    success(result.data);\n                }, function vAttributeAutocompleteErrorResult(result)\n                {\n                    // notify the data source that the request failed\n                    if (_.isArray(result.error)) {\n                        result.error = result.error.join(\" \");\n                    }\n                    //use the success callback because http error are handling by the pipe\n                    success([{\"title\": \"\", \"error\": result.error}]);\n                }\n            );\n        },\n\n        /**\n         * Modify visibility access of an item menu\n         * @param event event object\n         * @param data menu config {id: menuId, visibility: \"disabled\", \"visible\", \"hidden\"}\n         */\n        changeMenuVisibility: function vAttributeChangeMenuVisibility(event, data)\n        {\n            this.model.trigger(\"changeMenuVisibility\", event, data);\n        },\n\n        getDOMElements: function vAttributeGetDOMElements()\n        {\n            if (this.options && this.options.els) {\n                return this.options.els();\n            } else {\n                return this.$el;\n            }\n        },\n\n        afterShow: function vAttributeAfterShow(/*event, data*/)\n        {\n            // propagate event to widgets\n            this.getDOMElements().trigger(\"show\");\n        },\n        /**\n         *\n         * @param event\n         * @param data\n         */\n        updateValue: function vAttributeUpdateValue(event, data)\n        {\n            this.model.setValue(data.value, data.index);\n        },\n\n        widgetInit: function vAttributeWidgetInit($element, data)\n        {\n            $element.addClass(\"dcpAttribute__content--widget\");\n            return this.getWidgetClass($element).call($element, data);\n        },\n\n        widgetApply: function vAttributeWidgetApply($element, method, argument)\n        {\n            try {\n                if (_.isString(method) && $element && this.getWidgetClass($element)) {\n                    this.getWidgetClass($element).call($element, method, argument);\n                }\n            } catch (e) {\n                if (window.dcp.logger) {\n                    window.dcp.logger(e);\n                } else {\n                    console.error(e);\n                }\n            }\n            return this;\n        },\n\n        getWidgetClass: function vAttributeGetWidgetClass($element)\n        {\n            $element = $element || this.$el;\n            if (!$element.data(\"currentWidgetClass\")) {\n                $element.data(\"currentWidgetClass\", this.getTypedWidgetClass(this.model.get(\"type\")));\n            }\n            return $element.data(\"currentWidgetClass\");\n        },\n\n        getTypedWidgetClass: function vAttributeGetTypedWidgetClass(type)\n        {\n            switch (type) {\n                case \"text\" :\n                    return $.fn.dcpText;\n                case \"int\" :\n                    return $.fn.dcpInt;\n                case \"double\" :\n                    return $.fn.dcpDouble;\n                case \"money\" :\n                    return $.fn.dcpMoney;\n                case \"longtext\" :\n                    return $.fn.dcpLongtext;\n                case \"htmltext\" :\n                    return $.fn.dcpHtmltext;\n                case \"date\" :\n                    return $.fn.dcpDate;\n                case \"timestamp\" :\n                    return $.fn.dcpTimestamp;\n                case \"time\" :\n                    return $.fn.dcpTime;\n                case \"image\" :\n                    return $.fn.dcpImage;\n                case \"color\" :\n                    return $.fn.dcpColor;\n                case \"file\" :\n                    return $.fn.dcpFile;\n                case \"enum\" :\n                    return $.fn.dcpEnum;\n                case \"password\" :\n                    return $.fn.dcpPassword;\n                case \"thesaurus\" :\n                case \"account\" :\n                case \"docid\" :\n                    return $.fn.dcpDocid;\n                default:\n                    return $.fn.dcpText;\n            }\n        },\n\n        setWidgetReady: function Vattribute_setWidgetReady()\n        {\n            this.widgetReady = true;\n            this.triggerRenderDone();\n        },\n\n        triggerRenderDone: function vAttribute_triggerRenderDone()\n        {\n            if (this.noRenderEvent !== false && this.renderDone && this.widgetReady && !this.triggerRender) {\n                this.model.trigger(\"renderDone\", {model: this.model, $el: this.$el});\n                this.triggerRender = true;\n            }\n        },\n\n        remove: function vAttributeRemove()\n        {\n            try {\n                if (this.currentDcpWidget && this.getWidgetClass(this.currentDcpWidget) && this._findWidgetName(this.$el)) {\n                    this.getWidgetClass(this.currentDcpWidget).call(this.$el, \"destroy\");\n                }\n            } catch (e) {\n                if (window.dcp.logger) {\n                    window.dcp.logger(e);\n                } else {\n                    console.error(e);\n                }\n            }\n            return Backbone.View.prototype.remove.call(this);\n        },\n\n        hide: function vAttributeHide()\n        {\n            this.$el.hide();\n        },\n\n        show: function vAttributeShow()\n        {\n            this.$el.show();\n        },\n\n        _closeWidget: function vAttribute__closeWidget()\n        {\n            try {\n                if (this.currentDcpWidget && this.getWidgetClass(this.currentDcpWidget) && this._findWidgetName(this.currentDcpWidget)) {\n                    this.getWidgetClass(this.currentDcpWidget).call(this.currentDcpWidget, \"close\");\n                }\n            } catch (e) {\n                if (window.dcp.logger) {\n                    window.dcp.logger(e);\n                } else {\n                    console.error(e);\n                }\n            }\n        },\n\n        _findWidgetName: function vAttribute_findWidgetName($element)\n        {\n            return _.find(_.keys($element.data()), function vAttribute_findWidgetNameFind(currentKey)\n            {\n                return currentKey.indexOf(\"dcpDcp\") !== -1;\n            });\n        },\n\n        _identifyView: function vAttribute_identifyView(event)\n        {\n            event.haveView = true;\n            //Add the pointer to the current jquery element to a list passed by the event\n            event.elements = event.elements.add(this.$el);\n        }\n    });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/views/attributes/vAttribute.js","/*global define*/\ndefine(function attributeTemplate(require/*, exports, module*/)\n    {\n        'use strict';\n        var _ = require('underscore');\n        var $ = require('jquery');\n        var Mustache = require('mustache');\n\n        return {\n\n            customLineTemplate: '',\n\n            /**\n             * Get some data to complete custom attribute template\n             * @param documentModel document model\n             * @returns {{properties: *, attributes: {}}}\n             * @public\n             */\n            getTemplateModelInfo: function attributeTemplateGetTemplateModelInfo(documentModel)\n            {\n                var documentData = documentModel.getDocumentData();\n                var templateInfo = {\n                    properties: documentData.properties,\n                    attributes: {}\n                };\n                var currentTemplate = this;\n\n                templateInfo.properties.isWriteMode = (templateInfo.properties.renderMode === \"edit\");\n                templateInfo.properties.isReadMode = (templateInfo.properties.renderMode === \"view\");\n\n                _.each(documentData.attributeValues, function associateValue(attributeValue, attributeId)\n                {\n                    templateInfo.attributes[attributeId] = {attributeValue: attributeValue};\n                });\n                _.each(documentData.attributeLabels, function attributeTemplategetTemplateModelInfoEach(attributeLabel, attributeId)\n                {\n                    var currentAttributeModel = documentModel.get('attributes').get(attributeId);\n                    if (currentAttributeModel.getOption(\"attributeLabel\")) {\n                        attributeLabel = currentAttributeModel.getOption(\"attributeLabel\");\n                    }\n\n                    if (templateInfo.attributes[attributeId]) {\n                        templateInfo.attributes[attributeId].label = attributeLabel;\n                    } else {\n                        templateInfo.attributes[attributeId] = {label: attributeLabel};\n                    }\n\n                    templateInfo.attributes[attributeId].id = attributeId;\n                    templateInfo.attributes[attributeId].isEmpty = currentTemplate._isEmptyAttribute(currentAttributeModel);\n\n                    templateInfo.attributes[attributeId].htmlContent = _.bind(currentTemplate.getCustomTemplate, currentTemplate, currentAttributeModel, false, false);\n                    templateInfo.attributes[attributeId].htmlView = _.bind(currentTemplate.getCustomTemplate, currentTemplate, currentAttributeModel, true, false);\n                    templateInfo.attributes[attributeId].htmlDefaultContent = _.bind(currentTemplate.getCustomTemplate, currentTemplate, currentAttributeModel, false, true);\n                    templateInfo.attributes[attributeId].htmlDefaultView = _.bind(currentTemplate.getCustomTemplate, currentTemplate, currentAttributeModel, true, true);\n                    templateInfo.attributes[attributeId].isReadMode = (currentAttributeModel.get(\"mode\") === \"read\");\n                    templateInfo.attributes[attributeId].isWriteMode = (currentAttributeModel.get(\"mode\") === \"write\");\n                    templateInfo.attributes[attributeId].renderOptions =  currentAttributeModel.getOptions();\n                    if (currentAttributeModel.get(\"type\") === \"array\") {\n                        templateInfo.attributes[attributeId].toolsEnabled = templateInfo.attributes[attributeId].isWriteMode &&\n                            (currentAttributeModel.get(\"visibility\") !== \"U\") &&\n                            (currentAttributeModel.getOption(\"rowAddDisable\") !== true ||\n                            currentAttributeModel.getOption(\"rowDelDisable\") !== true ||\n                            currentAttributeModel.getOption(\"rowMoveDisable\") !== true);\n                        templateInfo.attributes[attributeId].rows = _.bind(currentTemplate.getArrayRowInfo, currentTemplate, currentAttributeModel);\n                        templateInfo.attributes[attributeId].tableTools = _.bind(currentTemplate.getArrayTools, currentTemplate, currentAttributeModel);\n                    }\n                });\n                return templateInfo;\n            },\n\n            _isEmptyAttribute: function attributeTemplate_isEmptyAttribute(attributeModel)\n            {\n                var currentTemplate = this;\n                if (attributeModel.get(\"isValueAttribute\")) {\n                    var attrValue = attributeModel.get(\"attributeValue\");\n                    return _.isEmpty(attrValue) || ( attrValue.value === \"\" || attrValue.value === null);\n                }\n                if ((!attributeModel.get(\"content\")) || attributeModel.get(\"content\").length === 0) {\n                    return true;\n                }\n                if (attributeModel.get(\"content\").some) {\n                    return !attributeModel.get(\"content\").some(function attributeTemplate_isEmptyAttribute_checkEmpty(value)\n                    {\n                        return !currentTemplate._isEmptyAttribute(value);\n                    });\n                }\n            },\n\n            /**\n             * Get some data to complete custom attribute template\n             * @returns {{properties: *, attributes: {}}}\n             * @private\n             */\n            getTemplateInfo: function attributeTemplateGetTemplateInfo(attributeModel)\n            {\n                var templateInfo = this.getTemplateModelInfo(attributeModel.getDocumentModel());\n                var attributeId = attributeModel.id;\n                var extraKeys = attributeModel.getOption(\"templateKeys\");\n\n                templateInfo.attribute = templateInfo.attributes[attributeId];\n                if (extraKeys) {\n                    var copyextraKeys = _.clone(extraKeys);\n                    if (copyextraKeys.attribute && copyextraKeys.attribute.rows) {\n                        copyextraKeys.attribute = _.clone(extraKeys.attribute);\n                        delete copyextraKeys.attribute.rows;\n                    }\n                    templateInfo = this._deepExtend(templateInfo, copyextraKeys);\n                }\n                return templateInfo;\n            },\n\n            /**\n             * Recursively extend data\n             *\n             * @param target\n             * @param source\n             * @returns {*}\n             */\n            _deepExtend: function attributeTemplate_deepExtend(target, source)\n            {\n                for (var prop in source) {\n                    if (source.hasOwnProperty(prop)) {\n                        if (prop in target) {\n                            this._deepExtend(target[prop], source[prop]);\n                        } else {\n                            target[prop] = source[prop];\n                        }\n                    }\n                }\n                return target;\n            },\n\n            /**\n             * Construct custom view based on template options\n             *\n             * @param attrModel Attribute model\n             * @param callBackView Callback to call after\n             * @returns {*|HTMLElement}\n             * @param config\n             */\n            renderCustomView: function attributeTemplateCustomView(attrModel, callBackView, config)\n            {\n                var customTemplate = '<div class=\"dcpCustomTemplate\" data-attrid=\"' + attrModel.id + '\">' +\n                    attrModel.getOption(\"template\") + '</div>';\n                var templateInfo = this.getTemplateInfo(attrModel);\n                var $render;\n                var completePromise;\n\n                if (config && !_.isUndefined(config.index) && config.index >= 0) {\n                    templateInfo.attribute.attributeValue = templateInfo.attribute.attributeValue[config.index];\n                }\n                $render = $(Mustache.render(customTemplate || \"\", templateInfo));\n                completePromise = this.completeCustomContent($render, attrModel.getDocumentModel(), callBackView, config);\n                return {\"$el\" : $render, \"promise\": completePromise} ;\n            },\n\n            /**\n             *\n             * Render the custom element of the template\n             *\n             * @param $el\n             * @param documentModel\n             * @param callBackView\n             * @param config\n             */\n            completeCustomContent: function attributeTemplateCompleteCustomContent($el, documentModel, callBackView, config)\n            {\n                var renderElementPromises = [];\n                $el.find(\".dcpCustomTemplate--content\").each(function attributeTemplatecompleteCustomContentEach()\n                {\n                    var attrId = $(this).data(\"attrid\"),\n                        displayLabel = ($(this).data(\"displaylabel\") === true),\n                        currentAttributeModel = documentModel.get('attributes').get(attrId),\n                        attrContent = \"NO VIEW FOR \" + attrId,\n                        view = '',\n                        BackView = null,\n                        // guess if the template is the true version (without template, only the widget)\n                        originalView = ($(this).data(\"originalview\") === true);\n\n                    if (currentAttributeModel) {\n\n                        if (_.isFunction(callBackView)) {\n                            // When called from vColumn to render widget in a cell\n                            callBackView.apply($(this));\n                            attrContent = '';\n                        } else {\n                            try {\n                                switch (currentAttributeModel.get(\"type\")) {\n                                    case \"array\":\n                                        BackView = require(\"dcpDocument/views/attributes/array/vArray\") ;\n                                        break;\n                                    case \"tab\":\n                                        BackView = require('dcpDocument/views/attributes/tab/vTabContent');\n                                        break;\n                                    case \"frame\":\n                                        BackView = require('dcpDocument/views/attributes/frame/vFrame');\n                                        break;\n                                    default:\n                                        BackView = require('dcpDocument/views/attributes/vAttribute');\n                                }\n\n                                //If the attribute has no template, so it's the view with the widget, we annotate it to bind the events\n                                if (!currentAttributeModel.getOption(\"template\")) {\n                                    originalView = true;\n                                }\n\n                                if (originalView === false && currentAttributeModel.customViewRended === true) {\n                                    throw new Error(\"Cannot use \\\"htmlView\\\" / \\\"htmlContent\\\" for itself on own custom view for \" + currentAttributeModel.id+ \". Use \\\"htmlDefaultView\\\" / \\\"htmlDefaultContent\\\" instead\");\n                                }\n                                if (originalView === false) {\n                                    currentAttributeModel.customViewRended = true;\n                                }\n\n                                view = new BackView({\n                                    model: currentAttributeModel,\n                                    originalView: originalView,\n                                    initializeContent: (config && config.initializeContent) || false,\n                                    displayLabel: displayLabel\n                                });\n                                renderElementPromises.push(view.render());\n                                attrContent = view.$el;\n                            } catch (e) {\n                                attrContent= $(\"<div/>\").addClass(\"bg-danger\").text(e.message);\n                            }\n                        }\n                    }\n                    $(this).append(attrContent);\n                });\n                return Promise.all(renderElementPromises);\n            },\n\n            /**\n             * Information used when add new line\n             * @param attributeModel\n             * @param index line index\n             * @private\n             * @returns {{properties: *, attributes: {}}}\n             */\n            getLineInfo: function attributeTemplategetLineInfo(attributeModel, index)\n            {\n                var documentData = attributeModel.getDocumentModel().getDocumentData();\n                var templateInfo = this.getTemplateInfo(attributeModel);\n                var extraKeys = attributeModel.getOption(\"templateKeys\");\n\n                _.each(documentData.attributeLabels, function attributeTemplate_eachLabel(attributeLabel, attributeId)\n                {\n                    var currentAttributeModel = attributeModel.getDocumentModel().get('attributes').get(attributeId);\n                    // Reset some special keys which are not allowed here\n                    if (currentAttributeModel.get(\"type\") === \"array\") {\n                        templateInfo.attributes[attributeId].rows = [];\n                        templateInfo.attributes[attributeId].tableTools = 'NO TABLE TOOL ALLOWED HERE';\n                    }\n                });\n\n                templateInfo.rowTools = this.getRowTool(attributeModel);\n                templateInfo.content = {};\n                attributeModel.get(\"content\").each(function attributeTemplate_eachContent(currentAttribute)\n                {\n                    var attributeId = currentAttribute.id;\n                    var attributeLabel = currentAttribute.get('label');\n\n                    if (!currentAttribute.isDisplayable()) {\n                        return;\n                    }\n\n                    if (currentAttribute.getOption(\"attributeLabel\")) {\n                        attributeLabel = currentAttribute.getOption(\"attributeLabel\");\n                    }\n                    templateInfo.content[attributeId] = {};\n                    templateInfo.content[attributeId].attributeValue = {\n                        value: null, // No value for the moment. Value will be set by array view with default values\n                        displayValue: \"\"\n                    };\n                    templateInfo.content[attributeId].label = attributeLabel;\n                    templateInfo.content[attributeId].htmlContent = '<div class=\"dcpCustomTemplate--row dcpArray__content__cell dcpAttribute__content\" data-displaylabel=\"false\" data-attrid=\"' + attributeId + '\"/>';\n\n                });\n\n                if (extraKeys && extraKeys.attribute && extraKeys.attribute.rows) {\n                    _.each(extraKeys.attribute.rows, function attributeTemplategetLineInfoEach(extraValues, extraKey)\n                    {\n                        templateInfo[extraKey] = extraValues[index];\n                    });\n                }\n\n                return templateInfo;\n            },\n\n            /**\n             * Extract rows template line to customLineTemplate\n             * @param attrModel\n             * @private\n             * @returns {{attribute: {rows: Function}}}\n             */\n            extractRow: function attributeTemplateExtractRow(attrModel)\n            {\n                var scope = this;\n                var info;\n\n                info = {\n                    attribute: {\n                        rows: function attributeTemplateExtractRowContent()\n                        {\n                            return function attributeTemplate_getRowContent(text)\n                            {\n                                scope.customLineTemplate = text.trim();\n                            };\n                        }\n                    }\n                };\n                info.attributes = {};\n                info.attributes[attrModel.id] = info.attributes;\n                return info;\n            },\n\n            /**\n             * Construct custom line (declared in vArray::render and used in wArray::_getLineContent)\n             * @param index\n             * @param attrModel\n             * @returns {*|HTMLElement}\n             */\n            customArrayRowView: function attributeTemplateCustomArrayRowView(index, attrModel)\n            {\n\n                var $render;\n\n                // Extract line to customLineTemplate variable\n                Mustache.render(attrModel.getOption(\"template\") || \"\", this.extractRow(attrModel));\n                $render = $(Mustache.render(\n                    this.customLineTemplate || \"\",\n                    this.getLineInfo(attrModel, index)));\n\n                return $render;\n            },\n\n            /**\n             * Get element where custom template will be inserted (htmlContent and htmlView)\n             * @param attributeModel\n             * @param displayLabel\n             * @param originalView\n             * @private\n             * @returns {string}\n             */\n            getCustomTemplate: function attributeTemplategetCustomTemplate(attributeModel, displayLabel, originalView)\n            {\n                return '<div class=\"dcpCustomTemplate--content '+(displayLabel ? \"dcpCustomTemplate--content--view\" : \"dcpCustomTemplate--content--value\")+\n                    '\" data-displaylabel=\"' + (displayLabel ? \"true\" : \"false\") +\n                    '\" data-originalview=\"' + (originalView ? \"true\" : \"false\") +\n                    '\" data-attrid=\"' + attributeModel.id + '\"/>';\n            },\n\n            /**\n             * Extract dcpArray__tools from content array template\n             * @param attributeModel\n             * @private\n             * @returns {*}\n             */\n            getArrayTools: function attributeTemplateGetArrayTools(attributeModel)\n            {\n                var tpls = attributeModel.getTemplates().attribute[attributeModel.get(\"type\")];\n                if (tpls && tpls.content) {\n                    return $(Mustache.render(tpls.content || \"\", {tools: true})).find(\".dcpArray__tools\").get(0).outerHTML;\n\n                }\n                return 'no tools';\n            },\n\n            /**\n             * Extract dcpArray__content__toolCell from line array template\n             * @param attributeModel\n             * @private\n             * @returns {*}\n             */\n            getRowTool: function attributeTemplateGetRowTool(attributeModel)\n            {\n                var templates = attributeModel.getTemplates().attribute[attributeModel.get(\"type\")];\n                var tool = '';\n                if (templates && templates.line) {\n                    tool = $(Mustache.render(templates.line || \"\",\n                        {\n                            tools: true,\n                            lineCid:_.uniqueId(attributeModel.id)\n                        })).find(\".dcpArray__toolCell\").html();\n                }\n                return tool;\n            },\n\n            /**\n             * Get data for mustache \"rows\" variable\n             * @param attributeModel\n             * @private\n             * @returns {Array}\n             */\n            getArrayRowInfo: function attributeTemplategetArrayRowInfo(attributeModel)\n            {\n\n                var rows = [];\n                var line = this.getRowTool(attributeModel);\n\n                attributeModel.get(\"content\").each(function attributeTemplate_eachContent(currentAttribute)\n                {\n                    var values;\n                    var attributeId = currentAttribute.id;\n                    var attributeLabel = currentAttribute.get('label');\n                    if (!currentAttribute.isDisplayable()) {\n                        return;\n                    }\n\n                    if (currentAttribute.getOption(\"attributeLabel\")) {\n                        attributeLabel = currentAttribute.getOption(\"attributeLabel\");\n                    }\n                    values = currentAttribute.get('attributeValue');\n                    _.each(values, function attributeTemplategetArrayRowInfoEach(singleValue, index)\n                    {\n                        if (_.isUndefined(rows[index])) {\n                            rows[index] = {content: {}};\n                        }\n                        rows[index].index=index;\n                        rows[index].content[attributeId] = {\n                            label: attributeLabel,\n                            attributeValue: singleValue,\n                            htmlContent: '<div class=\"dcpCustomTemplate--row dcpArray__content__cell dcpAttribute__content\"  data-attrid=\"' + currentAttribute.id + '\"/>'\n                        };\n\n                        rows[index].rowTools = line;\n\n                    });\n                });\n\n                return rows;\n            },\n\n            renderClickDesc: function ($tip, nsOn) {\n                $tip.on(\"click\" + nsOn, function vAttributeShowDesc(event)\n                {\n                    event.stopPropagation();\n                    $(this).tooltip(\"toggle\");\n                }).one(\"show.bs.tooltip\", function wDescTooltip () {\n                    var tipElement = $(this).data(\"bs.tooltip\").tip;\n                    if (tipElement) {\n                        $(tipElement).addClass(\"dcpAttribute__description-info\");\n                    }\n                }).one(\"shown.bs.tooltip\", function wDescTooltip () {\n                    var tipElement = $(this).data(\"bs.tooltip\").tip;\n                    if (tipElement) {\n                        $(tipElement).find(\".tooltip-inner\").prepend('<span class=\"btn btn-secondary button-close-error\"><span class=\"fa fa-times\" />&nbsp;</span>');\n\n                        $(tipElement).on(\"click\" + nsOn, \".button-close-error\", function vAttributeCloseDesc(event)\n                        {\n                            event.stopPropagation();\n                            $(tipElement).tooltip(\"hide\");\n                        });\n                    }\n                });\n            },\n\n            /**\n             * Insert attribute description\n             * @param attributeView Backbone view\n             * @param $customElement specific other DOM element instead of default element view\n             */\n            insertDescription: function attributeTemplateInsertDescription(attributeView, $customElement)\n            {\n                var data = attributeView.model.toData(null, true);\n\n                if (!data.renderOptions.description) {\n                    return;\n                }\n                var descriptionTemplate;\n                var $tip;\n                var nsOn = \".v\" + attributeView.model.cid;\n                var $viewElement = $customElement ? $customElement : attributeView.$el;\n                var isFrame = $viewElement.hasClass(\"dcpFrame\");\n                var isArray = $viewElement.hasClass(\"dcpArray\");\n                var isArrayHead = $viewElement.hasClass(\"dcpArray__head__cell\");\n                var isArrayCell = $viewElement.hasClass(\"dcpArray__cell\");\n                var isAttribute = $viewElement.hasClass(\"dcpAttribute\");\n                var isTabContent = $viewElement.hasClass(\"dcpTab__content\");\n                var isTabLabel = $viewElement.hasClass(\"dcpTab__label\");\n                var $descriptionElement;\n\n                descriptionTemplate = attributeView.model.getTemplates().attribute.description;\n                data.renderOptions.description.htmlContentRender = Mustache.render(data.renderOptions.description.htmlContent, data);\n                data.renderOptions.description.htmlTitleRender = Mustache.render(data.renderOptions.description.htmlTitle, data);\n\n                $descriptionElement = $(Mustache.render(descriptionTemplate || \"\", data));\n\n                if (isFrame) {\n                    switch (data.renderOptions.description.position) {\n                        case \"bottom\":\n                            $viewElement.append($descriptionElement);\n                            break;\n                        case \"top\":\n                        case \"topLabel\":\n                            $viewElement.prepend($descriptionElement);\n                            break;\n                        case \"left\":\n                            $viewElement.find(\".dcpFrame__content\").addClass(\"dcpFrame__content--left-description\");\n                            $descriptionElement.insertAfter($viewElement.find(\".dcpFrame__label\"));\n                            break;\n                        case \"right\":\n                            // Need to add class because no have css selector\n                            $viewElement.append($descriptionElement);\n                            $viewElement.find(\".dcpFrame__content\").addClass(\"dcpFrame__content--right-description\");\n                            break;\n                        case \"bottomLabel\":\n                            $descriptionElement.insertAfter($viewElement.find(\".dcpFrame__label\"));\n                            break;\n                        case \"topValue\":\n                            $viewElement.find(\".dcpFrame__content\").prepend($descriptionElement);\n                            break;\n                        case \"bottomValue\":\n                            $viewElement.find(\".dcpFrame__content\").append($descriptionElement);\n                            break;\n                        case \"click\":\n                            $viewElement.append($descriptionElement);\n                            $viewElement.find(\".dcpFrame__label\").prepend('<a class=\"dcpAttribute__label_description\"><span class=\"fa fa-info-circle\"></span></a>');\n                            $tip = $viewElement.find(\".dcpFrame__label > .dcpAttribute__label_description\").tooltip({\n                                html: true,\n                                container: $viewElement,\n                                title: $descriptionElement,\n                                placement: \"auto\",\n                                trigger: \"manual\"\n                            });\n\n                            this.renderClickDesc($tip, nsOn);\n\n\n\n\n                    }\n                }\n                if (isTabContent || isTabLabel) {\n                    switch (data.renderOptions.description.position) {\n                        case \"top\":\n                        case \"topValue\":\n                            if (isTabContent) {\n                                $viewElement.prepend($descriptionElement);\n                            }\n                            break;\n                        case \"bottom\":\n                        case \"bottomValue\":\n                            if (isTabContent) {\n                                $viewElement.append($descriptionElement);\n                            }\n                            break;\n                        case \"click\":\n                            if (isTabLabel) {\n                                $viewElement.append($descriptionElement);\n                                $viewElement.find(\".dcpLabel__text\").prepend('<a class=\"dcpAttribute__label_description\"><span class=\"fa fa-info-circle\"></span></a>');\n\n                                $tip = $viewElement.find(\".dcpAttribute__label_description\").tooltip({\n                                    html: true,\n                                    container: \".dcpDocument\",\n                                    title: $descriptionElement,\n                                    placement: \"auto\",\n                                    trigger: \"manual\"\n                                });\n\n                                this.renderClickDesc($tip, nsOn);\n\n\n                            }\n                            break;\n\n                        case \"bottomLabel\":\n                        case \"topLabel\":\n                        case \"left\":\n                        case \"right\":\n                            console.error(\"Cannot use \\\"\" + data.renderOptions.description.position + \"\\\" description position in tab attribute : \" + data.id);\n                    }\n                }\n                if (isArray) {\n                    switch (data.renderOptions.description.position) {\n                        case \"top\":\n                            $viewElement.prepend($descriptionElement);\n                            break;\n                        case \"topLabel\":\n                            $viewElement.find(\".dcpArray__label\").prepend($descriptionElement);\n                            break;\n                        case \"bottomLabel\":\n                            $viewElement.find(\".dcpArray__label\").append($descriptionElement);\n                            break;\n                        case \"topValue\":\n                            $viewElement.find(\".dcpArray__content\").prepend($descriptionElement);\n                            break;\n                        case \"bottomValue\":\n                            $descriptionElement.insertAfter($viewElement.find(\".dcpArray__table\"));\n                            break;\n                        case \"bottom\":\n                            $viewElement.append($descriptionElement);\n                            break;\n                        case \"click\":\n                            $viewElement.append($descriptionElement);\n                            $viewElement.find(\".dcpArray__label\").prepend('<a class=\"dcpAttribute__label_description\"><span class=\"fa fa-info-circle\"></span></a>');\n\n                            $tip = $viewElement.find(\".dcpArray__label > .dcpAttribute__label_description\").tooltip({\n                                html: true,\n                                container: $viewElement,\n                                title: $descriptionElement,\n                                placement: \"auto\",\n                                trigger: \"manual\"\n                            });\n\n                            this.renderClickDesc($tip, nsOn);\n\n                            break;\n\n                        case \"left\":\n                        case \"right\":\n                            console.error(\"Cannot use \\\"\" + data.renderOptions.description.position + \"\\\" description position in array attribute : \" + data.id);\n                            break;\n                    }\n                }\n                if (isAttribute) {\n                    switch (data.renderOptions.description.position) {\n                        case \"bottom\":\n                            $viewElement.append($descriptionElement);\n                            break;\n                        case \"top\":\n                            $viewElement.prepend($descriptionElement);\n                            break;\n                        case \"left\":\n                            $viewElement.find(\".dcpAttribute__label\").append($descriptionElement);\n                            break;\n                        case \"right\":\n                            $viewElement.find(\".dcpAttribute__content\").append($descriptionElement);\n                            break;\n                        case \"topValue\":\n                            $viewElement.prepend($descriptionElement);\n                            $descriptionElement.addClass(\"dcpAttribute__right\");\n                            break;\n                        case \"topLabel\":\n                            $viewElement.prepend($descriptionElement);\n                            $descriptionElement.addClass(\"dcpAttribute__left\");\n                            break;\n                        case \"bottomValue\":\n                            $viewElement.append($descriptionElement);\n                            $descriptionElement.addClass(\"dcpAttribute__right\");\n                            break;\n                        case \"bottomLabel\":\n                            $viewElement.append($descriptionElement);\n                            $descriptionElement.addClass(\"dcpAttribute__left\");\n                            break;\n                        case \"click\":\n                            $viewElement.append($descriptionElement);\n                            $viewElement.find(\".dcpAttribute__label\").append('<a class=\"dcpAttribute__label_description\"><span class=\"fa fa-info-circle\"></span></a>');\n\n                            $tip = $viewElement.find(\".dcpAttribute__label_description\").tooltip({\n                                html: true,\n                                container: $viewElement,\n                                placement: \"auto\",\n                                title: $descriptionElement,\n                                trigger: \"manual\"\n                            });\n\n                            this.renderClickDesc($tip, nsOn);\n\n\n                    }\n                }\n\n                if (isArrayCell || isArrayHead) {\n                    switch (data.renderOptions.description.position) {\n                        case \"topLabel\":\n                        case \"top\":\n                            if (isArrayHead) {\n                                $viewElement.prepend($descriptionElement);\n                            }\n                            break;\n                        case \"topValue\":\n                            if (isArrayCell) {\n                                $viewElement.prepend($descriptionElement);\n                            }\n                            break;\n                        case \"bottomValue\":\n                            if (isArrayCell) {\n                                $viewElement.append($descriptionElement);\n                            }\n                            break;\n                        case \"bottom\":\n                        case \"bottomLabel\":\n                            if (isArrayHead) {\n                                $viewElement.append($descriptionElement);\n                            }\n                            break;\n                        case \"click\":\n                            if (isArrayHead) {\n                                $viewElement.append($descriptionElement);\n                                $viewElement.prepend('<a class=\"dcpAttribute__label_description\"><span class=\"fa fa-info-circle\"></span></a>');\n\n                                $tip = $viewElement.find(\".dcpAttribute__label_description\").tooltip({\n                                    html: true,\n                                    container: $viewElement,\n                                    placement: \"auto\",\n                                    title: $viewElement.find(\"> .dcpAttribute__description\"),\n                                    trigger: \"manual\"\n                                });\n\n                                this.renderClickDesc($tip, nsOn);\n\n                            }\n                            break;\n                        case \"left\":\n                        case \"right\":\n                            // No use in column context\n                            console.error(\"Cannot use \\\"\" + data.renderOptions.description.position + \"\\\" description position in column attribute : \" + data.id);\n                            break;\n                    }\n                }\n                if (data.renderOptions.description.htmlContent) {\n                    $viewElement.on(\"click\" + nsOn, \".dcpAttribute__description__title\", function vAttribute_descToggle()\n                    {\n                        var $contentElement = $(this).closest(\".dcpAttribute__description\").find(\".dcpAttribute__description__content\");\n                        $(this).find(\".dcpAttribute__description__title__expand\").toggleClass(\"fa-caret-right fa-caret-down\");\n                        $contentElement.slideToggle(200);\n\n                    });\n                    if (data.renderOptions.description.collapsed === true) {\n                        $viewElement.find(\".dcpAttribute__description__title__expand\").toggleClass(\"fa-caret-right fa-caret-down\");\n                        $viewElement.find(\".dcpAttribute__description__content\").hide();\n\n                    }\n                }\n\n            }\n        };\n\n    }\n);\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/views/document/attributeTemplate.js","/*global define*/\ndefine([\n    'jquery',\n    'underscore',\n    'backbone',\n    'mustache'\n], function require_vheader($, _, Backbone, Mustache)\n{\n    'use strict';\n\n    return Backbone.View.extend({\n\n        className: \"dcpDocument\",\n\n        /**\n         * The current model is the document model\n         * The header template comes from template \"sections/header\"\n         */\n        headerTemplate: null,\n\n        initialize: function vHeaderInitialize()\n        {\n            this.listenTo(this.model.get(\"properties\"), 'change', this.updateHeader);\n            this.listenTo(this.model, 'destroy', this.remove);\n            this.listenTo(this.model, 'cleanView', this.remove);\n            this.listenTo(this.model, 'changeValue', this.documentHasChanged);\n            this.headerTemplate = this.getTemplates(\"sections\").header;\n        },\n\n        /**\n         * apply mustache template to inner content\n         * @returns {*}\n         */\n        render: function vheaderRender()\n        {\n            var currentView = this;\n            return (new Promise(_.bind(function vheaderRenderPromise(resolve, reject) {\n                var data = currentView.model.toData(), properties = currentView.model.getModelProperties(),\n                    security = properties.security || false;\n\n                data.document.properties = properties;\n\n                data.document.properties.security = security || {lock: {lockedBy: null}};\n                data.document.properties.security.lock.isLocked = (data.document.properties.security.lock.lockedBy && data.document.properties.security.lock.lockedBy.id > 0);\n\n                var headerRender = $(Mustache.render(currentView.headerTemplate || \"\", data));\n                var $header = currentView.$el;\n                $header.empty();\n                _.each(headerRender.children(), (function eachChildren(elt)\n                {\n                    $header.append(elt);\n                }));\n\n                $header.find(\".dcpDocument__header__lock, .dcpDocument__header__readonly, .dcpDocument__header__modified\").tooltip({\n                    placement: \"bottom\",\n                    html: true\n                });\n\n                return resolve(currentView);\n            }, this)));\n\n        },\n\n        /**\n         * reset mustache template\n         * update window title also\n         * @returns {*}\n         */\n        updateHeader: function vheaderUpdateHeader()\n        {\n            var doctitle = this.model.get(\"properties\").get('title');\n            if (doctitle) {\n                window.document.title = doctitle;\n            }\n            return this.render();\n        },\n\n        getTemplates: function vheadergetTemplates(key)\n        {\n            var templates = {};\n            if (this.model && this.model.get(\"templates\")) {\n                templates = this.model.get(\"templates\");\n            }\n            if (templates[key]) {\n                return templates[key];\n            }\n            if (window.dcp && window.dcp.templates && window.dcp.templates[key]) {\n                return window.dcp.templates[key];\n            }\n            throw new Error(\"Unknown template  \" + key);\n        },\n        documentHasChanged: function vheaderdocumentHasChanged()\n        {\n            var wTitle = window.document.title.replace(/^\\*+/g, \"\");\n\n            if (this.model.hasAttributesChanged()) {\n                this.$el.find(\".dcpDocument__header__modified\").show();\n                window.document.title = \"*\" + wTitle;\n            } else {\n                this.$el.find(\".dcpDocument__header__modified\").hide();\n                window.document.title = wTitle;\n            }\n            if (this.model.hasUploadingFile()) {\n                this.$el.find(\".dcpDocument__header__modified\").addClass(\"fa-spin\");\n            } else {\n                this.$el.find(\".dcpDocument__header__modified\").removeClass(\"fa-spin\");\n            }\n        }\n\n    });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/views/document/header/vHeader.js","/*global define*/\ndefine([\n    'underscore',\n    'backbone',\n    'mustache',\n    'dcpDocument/widgets/menu/wMenu'\n], function (_, Backbone, Mustache, WidgetMenu)\n{\n    'use strict';\n\n    return Backbone.View.extend({\n\n        className: \"dcpDocument\",\n\n        events: {\n            \"dcpmenuexternallinkselected\": \"externalLinkSelected\"\n        },\n\n        /**\n         * The current model is the document model\n         * So menuModel reference the menu model\n         */\n        menuModel: null,\n\n        initialize: function vMenuInitialize()\n        {\n            this.listenTo(this.model.get(\"properties\"), 'change', this.updateWidget);\n            this.listenTo(this.model.get(\"menus\"), 'change', this.updateWidget);\n            this.listenTo(this.model.get(\"menus\"), 'reload', this.updateWidget);\n            this.listenTo(this.model.get(\"attributes\"), 'changeMenuVisibility', this.changeVisibility);\n            this.listenTo(this.model, 'destroy', this.remove);\n            this.listenTo(this.model, 'cleanView', this.remove);\n            this.menuModel = this.model.get(\"menus\");\n        },\n\n        render: function vMenuRender()\n        {\n            var currentView = this;\n            return (new Promise(_.bind(function vMenuRenderPromise(resolve, reject) {\n                currentView.$el.dcpMenu(currentView.model.toData());\n                currentView.refresh();\n                return resolve(currentView);\n            }, this)));\n        },\n\n        externalLinkSelected: function vAttributeExternalLinkSelected(event, options)\n        {\n            var internalEvent = {\n                prevent: false\n            };\n\n            options.attrid = this.model.id;\n            this.model.trigger(\"internalLinkSelected\", internalEvent, options);\n            if (event.prevent) {\n                return this;\n            }\n            this.model.trigger(\"actionAttributeLink\", internalEvent, options);\n            return this;\n        },\n\n        changeVisibility: function vMenuchangeVisibility(event, data)\n        {\n            var menuItem = this.menuModel.get(data.id);\n            var onlyIfVisible = !!data.onlyIfVisible;\n            var visibility;\n            if (menuItem) {\n                visibility = menuItem.get(\"visibility\");\n                if (!onlyIfVisible || visibility !== 'hidden') {\n                    menuItem.set(\"visibility\", data.visibility);\n                }\n            }\n        },\n\n        updateWidget: function vMenuUpdateWidget()\n        {\n            if (this.$el.dcpMenu && this._findWidgetName(this.$el)) {\n                this.$el.dcpMenu(\"destroy\");\n            }\n            return this.render();\n        },\n\n        remove: function vMenuRemove()\n        {\n            if (this.$el.dcpMenu && this._findWidgetName(this.$el)) {\n                this.$el.dcpMenu(\"destroy\");\n            }\n            return Backbone.View.prototype.remove.call(this);\n        },\n\n        _findWidgetName: function vMenu_findWidgetName($element)\n        {\n            return _.find(_.keys($element.data()), function (currentKey)\n            {\n                return currentKey.indexOf(\"dcpDcp\") !== -1;\n            });\n        },\n\n        /**\n         * Recompute responsive in case of scrollbar can appear\n         */\n        refresh: function vMenu_refresh()\n        {\n            if (this.$el.dcpMenu && this._findWidgetName(this.$el)) {\n                this.$el.dcpMenu(\"updateResponsiveMenu\");\n            }\n        }\n\n    });\n\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/views/document/menu/vMenu.js","/*global define, console*/\n\ndefine([\n    'underscore',\n    'jquery',\n    'backbone',\n    'mustache',\n    'dcpDocument/models/mDocumentTab',\n    'dcpDocument/views/document/menu/vMenu',\n    'dcpDocument/views/document/header/vHeader',\n    'dcpDocument/views/attributes/frame/vFrame',\n    'dcpDocument/views/attributes/tab/vTabLabel',\n    'dcpDocument/views/attributes/tab/vTabContent',\n    'dcpDocument/views/document/attributeTemplate',\n    'dcpDocument/models/mTransitionGraph',\n    'dcpDocument/views/workflow/vTransitionGraph',\n    'dcpDocument/i18n/documentCatalog',\n    'dcpDocument/widgets/history/wHistory',\n    'dcpDocument/widgets/properties/wProperties'\n], function vDocument(_, $, Backbone, Mustache, ModelDocumentTab, ViewDocumentMenu, ViewDocumentHeader,\n                      ViewAttributeFrame, ViewAttributeTabLabel, ViewAttributeTabContent,\n                      attributeTemplate, ModelTransitionGraph, ViewTransitionGraph, i18n) {\n    'use strict';\n\n    var checkTouchEvents = function checkTouchEvents() {\n        //From modernizer\n        var bool = false;\n        if (('ontouchstart' in window) || window.DocumentTouch && window.document instanceof window.DocumentTouch) {\n            bool = true;\n        }\n        return bool;\n    };\n\n    return Backbone.View.extend({\n\n        className: \"dcpDocument container-fluid\",\n\n        events:\n            {\n                'click .dcpDocument__body a[href^=\"#action/\"], .dcpDocument__body a[data-action], .dcpDocument__body button[data-action]': 'propagateActionClick',\n                'click .dcpDocument__body a[href^=\"#\"]': 'handleHashClick'\n            },\n\n        /**\n         * Init event\n         */\n        initialize: function vDocumentInitialize() {\n            this.listenTo(this.model, 'destroy', this.remove);\n            this.listenTo(this.model, 'displayLoading', this.displayLoading);\n            this.listenTo(this.model, 'invalid', this.showView);\n            this.listenTo(this.model, 'displayNetworkError', this.displayNetworkError);\n            this.listenTo(this.model, 'actionAttributeLink', this.doStandardAction);\n            this.listenTo(this.model, 'loadDocument', this.loadDocument);\n            this.listenTo(this.model, 'dduiDocumentReady', this.cleanAndRender);\n            this.listenTo(this.model, 'dduiDocumentDisplayView', this.showView);\n        },\n\n        /**\n         * Clean the associated view and re-render it\n         */\n        cleanAndRender: function vDocumentCleanAndRender() {\n            this.trigger(\"loaderShow\", i18n.___(\"Rendering\", \"ddui\"), 70);\n            $(\".dcpStaticErrorMessage\").attr(\"hidden\", true);\n            this.$el.show();\n            this.$el[0].className = this.$el[0].className.replace(/\\bdcpFamily.*\\b/g, '');\n            this.$el.removeClass(\"dcpDocument--view\").removeClass(\"dcpDocument--edit\");\n            try {\n                if (this.historyWidget) {\n                    this.historyWidget.destroy();\n                }\n                if (this.propertiesWidget) {\n                    this.propertiesWidget.destroy();\n                }\n                if (this.helpWidget) {\n                    this.helpWidget.destroy();\n                }\n                if (this.transitionGraph && this.transitionGraph.view) {\n                    this.transitionGraph.view.remove();\n                }\n            } catch (e) {\n                console.error(e);\n            }\n            //  this.trigger(\"cleanNotification\");\n            this.render();\n        },\n\n        /**\n         * Render the document view\n         * @returns {*}\n         */\n        render: function vDocumentRender() {\n            console.time(\"render document view\");\n            var renderPromises = [];\n            var $content, model = this.model, $el = this.$el, currentView = this;\n            var locale = this.model.get('locale');\n            var documentView = this;\n            var htmlBody = '<div class=\"dcpDocument__form form-horizontal\">' +\n                '<div class=\"dcpDocument__frames\"></div>' +\n                '<div style=\"display:none\" class=\"dcpDocument__tabs\">' +\n                '<ul class=\"dcpDocument__tabs__list\"></ul></div></div>';\n            var $body;\n            var tabPlacement = this.model.getOption(\"tabPlacement\") || \"top\";\n            var event = {prevent: false};\n            var viewMenus = [];\n\n            this.$el.removeClass(\"dcpTouch\");\n            if (checkTouchEvents()) {\n                this.$el.addClass(\"dcpTouch\");\n            }\n\n            this.selectedTab = this.model.getOption(\"openFirstTab\");\n            this.model.trigger(\"beforeRender\", event);\n\n            if (event.prevent) {\n                return this;\n            }\n\n            this.template = this.getTemplates(\"body\").trim();\n            this.partials = this.getTemplates(\"sections\");\n\n            // Hide parasite tooltip if any\n            this.$el.find(\"[aria-describedby*='tooltip']\").tooltip(\"hide\");\n            this.$el.empty();\n\n            this.renderCss();\n            this.publishMessages();\n\n            this.updateTitle();\n            this.updateIcon();\n\n            if (!locale) {\n                locale = \"fr-FR\";\n            }\n            $(window).off(\".v\" + this.model.cid);\n\n            $(window).on(\"resize.v\" + this.model.cid, _.bind(this.resizeForFooter, this));\n            $(window).on(\"scroll.v\" + this.model.cid, _.bind(this.fixedTab, this));\n            kendo.culture(locale);\n            //add document base\n            try {\n                var renderData = this.model.toData();\n                renderData.document = attributeTemplate.getTemplateModelInfo(this.model);\n                this.$el.append($(Mustache.render(this.template || \"\", renderData, this.partials)));\n                attributeTemplate.completeCustomContent(this.$el, this.model, null, {initializeContent: true});\n                $body = this.$el.find(\".dcpDocument__body\").append(htmlBody).addClass(\"container-fluid\");\n            } catch (e) {\n                if (window.dcp.logger) {\n                    window.dcp.logger(e);\n                } else {\n                    console.error(e);\n                }\n            }\n\n            this.$el.removeClass(\"dcpDocument--create\");\n            if (this.model.get(\"creationFamid\")) {\n                this.$el.addClass(\"dcpDocument--create\");\n            }\n            this.$el.addClass(\"dcpDocument dcpDocument--\" + this.model.get(\"renderMode\"));\n            this.$el.addClass(\"dcpFamily--\" + this.model.get(\"properties\").get(\"family\").name);\n            this.trigger(\"loading\", 10);\n            //add menu\n            try {\n                this.$el.find(\".dcpDocument__menu\").each(function vDocumentAddMenu() {\n                    var viewMenu = new ViewDocumentMenu({\n                        model: currentView.model,\n                        el: this\n                    });\n                    renderPromises.push(viewMenu.render());\n                    viewMenus.push(viewMenu);\n                });\n            } catch (e) {\n                if (window.dcp.logger) {\n                    window.dcp.logger(e);\n                } else {\n                    console.error(e);\n                }\n            }\n            try {\n                this.$el.find(\".dcpDocument__header\").each(function vDocumentAddHeader() {\n                    renderPromises.push((new ViewDocumentHeader({\n                        model: currentView.model,\n                        el: this\n                    }).render()));\n                });\n            } catch (e) {\n                if (window.dcp.logger) {\n                    window.dcp.logger(e);\n                } else {\n                    console.error(e);\n                }\n            }\n            this.trigger(\"loading\", 20, this.model.get(\"attributes\").length);\n            //add first level attributes\n\n            $content = this.$el.find(\".dcpDocument__frames\");\n            if ($body && $body.length > 0) {\n                this.model.get(\"attributes\").each(function vDocumentRenderAttribute(currentAttr) {\n                    var view, viewTabLabel, viewTabContent;\n                    if (!currentAttr.isDisplayable()) {\n                        currentView.trigger(\"partRender\");\n                        return;\n                    }\n                    if (currentAttr.get(\"type\") === \"frame\" && _.isEmpty(currentAttr.get(\"parent\"))) {\n                        try {\n\n                            view = new ViewAttributeFrame({\n                                model: model.get(\"attributes\").get(currentAttr.id)\n                            });\n                            renderPromises.push(view.render());\n                            $content.append(view.$el);\n\n                        } catch (e) {\n                            if (window.dcp.logger) {\n                                window.dcp.logger(e);\n                            } else {\n                                console.error(e);\n                            }\n                        }\n                    }\n                    if (currentAttr.get(\"type\") === \"tab\" && _.isEmpty(currentAttr.get(\"parent\"))) {\n                        try {\n                            var tabModel = model.get(\"attributes\").get(currentAttr.id);\n                            var tabContent;\n                            viewTabLabel = new ViewAttributeTabLabel({model: tabModel});\n\n                            viewTabContent = new ViewAttributeTabContent({\n                                model: tabModel\n                            });\n                            renderPromises.push(viewTabContent.render());\n\n                            tabContent = viewTabContent.$el;\n\n                            $el.find(\".dcpDocument__tabs__list\").append(viewTabLabel.render().$el);\n\n                            $el.find(\".dcpDocument__tabs\").append(tabContent);\n                            $el.find(\".dcpDocument__tabs\").show();\n                        } catch (e) {\n                            if (window.dcp.logger) {\n                                window.dcp.logger(e);\n                            } else {\n                                console.error(e);\n                            }\n                        }\n                    }\n                    currentView.trigger(\"partRender\");\n                });\n\n                this.kendoTabs = this.$(\".dcpDocument__tabs\").kendoTabStrip({\n                    tabPosition: tabPlacement,\n                    animation: {\n                        open: {\n                            duration: 100,\n                            effects: \"fadeIn\"\n                        }\n                    },\n                    activate: function vDocument(event) {\n                        if (!this._dcpNotFirstactivate) {\n                            _.delay(_.bind(documentView.scrollTobVisibleTab, documentView), 500);\n                            this._dcpNotFirstactivate = true;\n                        }\n                    },\n                    show: function vDocumentShowTab(event) {\n                        var tabId = $(event.item).data(\"attrid\");\n                        var scrollY = $(window).scrollTop();\n                        currentView.$(\".dcpTab__label\").removeClass(\"dcpLabel--active\").addClass(\"dcpLabel--default\");\n                        currentView.$('.dcpLabel[data-attrid=\"' + tabId + '\"]').addClass(\"dcpLabel--active\").removeClass(\"dcpLabel--default\");\n                        if (documentView.selectedTab !== tabId) {\n                            documentView.selectedTab = tabId;\n                            documentView.recordSelectedTab(tabId);\n                        }\n                        _.defer(function selectOneTab() {\n                            if (currentView && currentView.model && currentView.model.get(\"attributes\")) {\n                                var tab = currentView.model.get(\"attributes\").get(tabId);\n                                if (tab) {\n                                    // Hide parasite tooltip if any\n                                    currentView.$el.find(\"[aria-describedby*='tooltip']\").tooltip(\"hide\");\n                                    tab.trigger(\"showTab\");\n                                    _.each(viewMenus, function (viewMenu) {\n                                        viewMenu.refresh();\n                                    });\n                                    _.defer(function () {\n                                        $(window).scrollTop(scrollY);\n\n                                    });\n                                }\n                            }\n                        });\n                    }\n                });\n                if (tabPlacement === \"topProportional\") {\n                    var tabItems = $el.find(\".dcpDocument__tabs__list li\");\n                    if (tabItems.length > 1) {\n                        tabItems.css(\"width\", Math.floor(100 / tabItems.length) - 0.5 + '%');\n                    } else {\n                        tabItems.css(\"width\", \"80%\");\n                    }\n                }\n                if (tabPlacement === \"left\") {\n                    this.$(\".dcpTab__content\").css(\"min-height\", this.$(\".dcpDocument__tabs__list\").height() + \"px\");\n                    this.$(\".dcpDocument__tabs\").addClass(\"dcpDocument__tabs--left\");\n                }\n\n                if (tabPlacement === \"topFix\" && this.kendoTabs) {\n                    this.$(\".dcpDocument__tabs\").addClass(\"dcpDocument__tabs--fixed\");\n\n                    $(window).on(\"resize.v\" + this.model.cid, _.debounce(_.bind(this.responsiveTabMenu, this), 100, false));\n\n                }\n                if (tabPlacement === \"top\" && this.kendoTabs) {\n                    this.$(\".dcpDocument__tabs\").addClass(\"dcpDocument__tabs--fixed\");\n                    $(window).on(\"resize.v\" + this.model.cid, _.debounce(_.bind(this.scrollTabList, this), 100, false));\n                    _.delay(_.bind(this.scrollTabList, this), 500);\n\n                }\n\n                if (this.kendoTabs.length > 0 && this.kendoTabs.data(\"kendoTabStrip\")) {\n                    var selectTab = 'li[data-attrid=' + this.selectedTab + ']';\n                    if (this.selectedTab && $(selectTab).length > 0) {\n                        this.kendoTabs.data(\"kendoTabStrip\").select(selectTab);\n                    } else {\n                        this.kendoTabs.data(\"kendoTabStrip\").select(0);\n                    }\n                }\n            }\n            $(window.document).on(\"drop.v\" + this.model.cid + \" dragover.\" + this.model.cid, function vDocumentPreventDragDrop(e) {\n                e.preventDefault();\n            }).on(\"redrawErrorMessages.v\" + this.model.cid, function vDocumentRedrawErrorMessages() {\n                documentView.model.redrawErrorMessages();\n            });\n            $(window).on(\"resize.v\" + this.model.cid, _.debounce(function vDocumentResizeDebounce() {\n                documentView.model.redrawErrorMessages();\n                documentView.scrollTobVisibleTab();\n            }, 100, false));\n\n            $(window).on(\"resize.v\" + this.model.cid, _.debounce(function vDocumentResizeDebounce() {\n                if (documentView.model.get(\"attributes\")) {\n                    documentView.model.get(\"attributes\").each(function vDocument_triggerClose(currentAttributeModel) {\n                        currentAttributeModel.trigger(\"closeWidget\");\n                    });\n                }\n            }, 100, false));\n\n            this.$el.addClass(\"dcpDocument--show\");\n\n            this.resizeForFooter();\n            console.timeEnd(\"render document view\");\n            Promise.all(renderPromises).then(_.bind(function vDocumentRenderDone() {\n                this.trigger(\"renderDone\");\n            }, this));\n            this.$el.show();\n            if (tabPlacement === \"topFix\" && this.kendoTabs) {\n                _.defer(_.bind(this.responsiveTabMenu, this)); // need to call here to have good dimensions\n            }\n            if (tabPlacement === \"left\") {\n                this.$(\".dcpTab__content\").css(\"width\", \"calc(100% - \" + ($(\".dcpDocument__tabs__list\").width() + 30) + \"px)\");\n            }\n\n            _.delay(function vDocumentEndLoading() {\n                $(\".dcpLoading--init\").removeClass(\"dcpLoading--init\");\n                if (tabPlacement === \"topFix\" && documentView.kendoTabs) {\n                    documentView.responsiveTabMenu(); // need to call here to have good dimensions\n                }\n            }, 500);\n\n            return this;\n        },\n\n        resizeForFooter: function vDocumentresizeForFooter() {\n            var $footer = this.$el.find(\".dcpDocument__footer\");\n            if ($footer.length > 0) {\n                var footerHeight = $footer.height();\n                if (footerHeight > 0) {\n                    $(\"body\").css(\"margin-bottom\", footerHeight + \"px\");\n                }\n            }\n        },\n\n        /**\n         * Scroll to visible tab label\n         */\n        scrollTobVisibleTab: function vDocumentscrollTobVisibleTab() {\n            var kendoTabStrip = (this.kendoTabs) ? this.kendoTabs.data(\"kendoTabStrip\") : null;\n            if (kendoTabStrip && kendoTabStrip._scrollableModeActive) {\n                kendoTabStrip._scrollTabsToItem(this.kendoTabs.find(\"li.k-state-active\"));\n            }\n        },\n\n        fixedTab: function vDocumentfixedTab(event) {\n            // @TODO Need a decision to delete this option or not\n            return;\n            var $tabs = this.$el.find(\".dcpDocument__tabs\");\n            var $ul;\n            if ($tabs.length > 0) {\n                var tabPlacement = this.model.getOption(\"tabPlacement\") || \"top\";\n                var menuHeight = this.$el.find(\".menu__content\").height();\n                var kendoTabStrip = this.kendoTabs.data(\"kendoTabStrip\");\n                var isAlreadyFixed = $tabs.hasClass(\"tab--fixed\");\n                var $liActive = $tabs.find(\"li.k-state-active\");\n                var scrollTop = $(window).scrollTop();\n                var $navButtons = $tabs.find(\".k-bare\");\n                var resizeMode = (event.type === \"resize\");\n                if (scrollTop > ($tabs.offset().top - menuHeight)) {\n                    $tabs.addClass(\"tab--fixed\");\n                    $tabs.css(\"top\", menuHeight + \"px\");\n                    if (tabPlacement === \"top\") {\n                        // Special case for scrolling tabs\n                        $ul = $tabs.find(\".dcpDocument__tabs__list\");\n                        if (resizeMode) {\n                            kendoTabStrip.resize();\n                        }\n                        var $navButtonsVisible = $tabs.find(\".k-bare:visible\");\n                        if ($navButtonsVisible.length > 0) {\n\n                            if (!isAlreadyFixed || resizeMode) {\n                                $ul.css(\"width\", \"\");\n                                if (!$ul.data(\"margins\")) {\n                                    if (parseInt($navButtonsVisible.width()) > 0) {\n                                        $ul.data(\"fixMargins\",\n                                            {left: $navButtonsVisible.width(), right: $navButtonsVisible.width()});\n                                        $ul.data(\"originalMargins\",\n                                            {left: $ul.css(\"margin-left\"), right: $ul.css(\"margin-right\")});\n                                    }\n                                }\n                                if ($ul.data(\"fixMargins\")) {\n                                    $ul.css(\"margin-left\", $ul.data(\"fixMargins\").left);\n                                    $ul.css(\"margin-right\", $ul.data(\"fixMargins\").right);\n                                }\n\n\n                                var ulWidth = $tabs.width() - parseInt($ul.css(\"margin-right\")) - parseInt($ul.css(\n                                    \"margin-left\"));\n                                $ul.css(\"width\", ulWidth + \"px\");\n                                $navButtons.css(\"height\", $ul.outerHeight() + \"px\");\n\n                                $ul.css(\"top\", (menuHeight) + \"px\");\n                                $tabs.find(\".k-bare\").css(\"top\", (menuHeight + 0) + \"px\");\n\n                                if ($liActive.length === 1) {\n                                    kendoTabStrip.activateTab($liActive);\n                                }\n                            }\n                        } else {\n                            if (parseInt($ul.css(\"margin-left\")) > 0) {\n                                $ul.data(\"margins\", {left: $ul.css(\"margin-left\"), right: $ul.css(\"margin-right\")});\n                            }\n                            $ul.css(\"width\", \"\").css(\"margin-right\", \"\").css(\"margin-left\", \"\");\n                        }\n                    }\n                } else {\n                    var $tabContent = this.$el.find(\".dcpTab__content.k-state-active\").first();\n                    var $tabList = this.$el.find(\".dcpDocument__tabs__list\");\n\n                    if ($tabContent.length > 0 && scrollTop < Math.max(($tabContent.offset().top - menuHeight - $tabList.height()), $tabList.height())) {\n                        if (isAlreadyFixed) {\n                            $tabs.removeClass(\"tab--fixed\");\n                            $tabs.css(\"top\", \"\");\n                            if (tabPlacement === \"top\") {\n                                $navButtons.css(\"height\", \"\");\n                                $ul = $tabs.find(\".dcpDocument__tabs__list\");\n                                $ul.css(\"width\", \"\").css(\"top\", \"\");\n                                $tabs.find(\".k-bare\").css(\"top\", \"\");\n                                if ($ul.data(\"originalMargins\")) {\n                                    $ul.css(\"margin-left\", $ul.data(\"originalMargins\").left);\n                                    $ul.css(\"margin-right\", $ul.data(\"originalMargins\").right);\n                                }\n                                if ($liActive.length === 1) {\n                                    kendoTabStrip.activateTab($liActive);\n                                }\n                                kendoTabStrip.resize();\n                            }\n                        }\n                    }\n                }\n            }\n        },\n\n        scrollTabList: function vDocumentScrollTabList(event) {\n            var kendoTabStrip = this.kendoTabs.data(\"kendoTabStrip\");\n            var $tabs = this.$el.find(\".dcpDocument__tabs\");\n\n            if ($tabs.hasClass(\"tab--fixed\")) {\n\n                _.defer(_.bind(this.fixedTab, this, event));\n            } else {\n                if (kendoTabStrip) {\n                    kendoTabStrip.resize();\n                }\n            }\n\n        },\n        /**\n         * Add menu if needed in topFix placement tab\n         */\n        responsiveTabMenu: function vDocumentTabFixMenu() {\n            var $tabLabel = this.$(\".dcpDocument__tabs__list li\");\n\n            var documentWidth = this.$(\".dcpDocument__tabs\").width() - 12;\n            var currentWidth = 0;\n            var hiddens = [];\n            var lastShow = null;\n            var $dropSelect;\n            var $dropTopSelect;\n            var $kendoTabs = this.kendoTabs.data(\"kendoTabStrip\");\n            var liIndex = 0;\n            var $tabs = this.$(\".dcpDocument__tabs\");\n            var $selectedTabId = this.selectedTab;\n            var hiddenSelected = false;\n            var dataSource = null;\n            var iOS = /(iPad|iPhone|iPod)/g.test(navigator.userAgent);\n\n            // $tabs.find(\".dcpDocument__tabs__list\").css(\"overflow\", \"hidden\").css(\"max-height\", \"2.7em\");\n            // Restore initial tabs\n            $tabLabel.show();\n\n            $tabLabel.each(function vDocumentHideTabWidth() {\n                currentWidth += $(this).outerWidth();\n                if (currentWidth > documentWidth) {\n                    $(this).hide();\n                    if (hiddens.length === 0) {\n                        hiddens.push({\n                            tooltipLabel: $(lastShow).data(\"tooltipLabel\"),\n                            label: $(lastShow).find(\".k-link\").text(),\n                            id: $(lastShow).data(\"attrid\"),\n                            index: liIndex - 1\n                        });\n                    }\n                    hiddens.push({\n                        tooltipLabel: $(this).data(\"tooltipLabel\"),\n                        label: $(this).find(\".k-link\").text(),\n                        id: $(this).data(\"attrid\"),\n                        index: liIndex\n                    });\n                } else {\n                    $kendoTabs.enable && $kendoTabs.enable($(this));\n                    lastShow = this;\n                }\n\n                liIndex++;\n            });\n\n            /**\n             * Need to recompute container width\n             */\n            $(\".dcpLabel__select-hide:visible\").each(function vDocumentSelectContainer() {\n                var $container = $(this).closest(\".k-list-container\");\n                var x = $container.offset().left;\n                var maxWidth = ($('body').width() - x - 20) + \"px\";\n\n                $container.css(\"max-width\", maxWidth);\n                $container.closest(\".k-animation-container\").css(\"max-width\", maxWidth);\n                $(this).css(\"max-width\", \"\");\n            });\n\n            if ($tabs.data(\"hiddenTabsLength\") === hiddens.length) {\n                // Optimization if no new tabs to hide\n                if (hiddens.length > 0) {\n                    $kendoTabs && $kendoTabs.disable && $kendoTabs.disable($(lastShow));\n                }\n\n                //$tabs.find(\".dcpDocument__tabs__list\").css(\"overflow\", \"\").css(\"max-height\", \"\");\n                return;\n            }\n\n            // Delete fixed height\n            //$tabLabel.css(\"height\", '');\n            // Record hidden count to optimization\n            $tabs.data(\"hiddenTabsLength\", hiddens.length);\n            $tabLabel.find(\".k-link\").show(); // Restore original link (tab label)\n\n            $dropTopSelect = $tabs.find(\".dcpTab__label__select.k-combobox\").hide();\n            $tabs.find(\"input.dcpTab__label__select[data-role=combobox]\").each(function vDocumentSelectTabClose() {\n                $(this).data(\"kendoComboBox\") &&\n                $(this).data(\"kendoComboBox\").close &&\n                $(this).data(\"kendoComboBox\").close();\n            });\n\n            $tabs.find(\".dcpLabel--select\").removeClass(\"dcpLabel--select k-state-active\");\n            $tabs.find(\".dcpLabel[data-attrid=\" + $selectedTabId + \"]\").addClass(\"k-state-active\");\n\n            if (hiddens.length > 0) {\n\n                // Need to disable tab to use own events managing\n                if (lastShow) {\n                    $kendoTabs.disable($(lastShow));\n                }\n\n                // Hide original link\n                $(lastShow).find(\".k-link\").hide();\n                // Replace it to a dropdown selector\n                hiddenSelected = _.some(hiddens, function vDocumentSomeHiddens(item) {\n                    return (item.id === $selectedTabId);\n                });\n\n                if (hiddenSelected) {\n                    $(lastShow).addClass(\"k-state-active\");\n                } else {\n                    if ($(lastShow).data(\"attrid\") !== $selectedTabId) {\n                        $(lastShow).removeClass(\"k-state-active\");\n                    }\n                }\n\n                $(lastShow).addClass(\"dcpLabel--select\");\n                //$(lastShow).height(currentHeight - 5);\n                if ($dropTopSelect.length === 0) {\n                    $dropSelect = $('<input class=\"dcpTab__label__select\" />');\n                    $(lastShow).append($dropSelect);\n                    $dropSelect.kendoComboBox({\n                        value: hiddenSelected ? $selectedTabId : hiddens[0].id,\n                        dataSource: hiddens,\n                        dataTextField: \"label\",\n                        dataValueField: \"id\",\n                        dataBound: function vDocumentTabSelectDatabound() {\n                            var myTab = $(this.element).closest(\"li\");\n                            var liItem = $tabs.find(\"li[data-attrid=\" + this.value() + \"]\");\n                            myTab.data(\"tooltipLabelSelect\", liItem.data(\"tooltipLabel\"));\n                        },\n                        select: function vDocumentTabSelectSelect(event) {\n                            var dataItem = this.dataSource.at(event.item.index());\n                            var liItem = $tabs.find(\"li[data-attrid=\" + dataItem.id + \"]\");\n                            var myTab = $(this.element).closest(\"li\");\n\n                            myTab.data(\"tooltipLabelSelect\", dataItem.tooltipLabel);\n                            // Need to reset class and enable to really trigger show events\n                            myTab.removeClass(\"k-state-active\");\n                            $kendoTabs.enable(myTab);\n                            $kendoTabs.select(liItem);\n                            $kendoTabs.disable(myTab);\n                            myTab.addClass(\"k-state-active\");\n                            myTab.find(\".k-input\").blur(); // Because input is read only\n                        },\n                        open: function vDocumentTabSelectOpen() {\n                            // Need to compute width of container to see elements\n                            // Set max-width to not be out of body\n                            var $ul = $(this.ul);\n                            var $li = $(this.element).closest(\"li\");\n                            var x = $li.offset().left;\n                            var bodyWidth = $('body').width();\n                            $ul.css(\"max-width\", Math.max((bodyWidth - x - 20), $(lastShow).width()) + \"px\");\n                            $ul.css(\"min-width\", $li.width());\n                            _.defer(function vDocumentSelectTabOpen() {\n                                $ul.closest(\".k-animation-container\").addClass(\"menu__select_container\");\n                            });\n                        },\n\n                        template: function vDocumentTabSelectTemplate(event) {\n                            if (event.tooltipLabel) {\n                                return Mustache.render('<span class=\"dcpLabel__select--tooltip\" data-tooltipLabel=\"{{tooltipLabel}}\">{{label}}</span>', event);\n                            }\n                            return event.label;\n                        }\n                    });\n\n                    $dropSelect.data(\"kendoComboBox\").ul.addClass(\"dcpLabel__select-hide\");\n                    // The container width is computed by open event\n                    $dropSelect.data(\"kendoComboBox\").list.width(\"auto\");\n                    // No use input selector\n                    $(lastShow).find(\"input\").attr(\"aria-readonly\", \"true\").prop(\"readonly\", true);\n                    $(lastShow).find(\".k-select\").prepend($(\"<span/>\").addClass(\"dcpLabel__count\"));\n\n                    $dropSelect.data(\"kendoComboBox\").ul.tooltip({\n                        selector: \"li.k-item \",\n                        placement: \"left\",\n                        container: \".dcpDocument\",\n                        html: true,\n                        title: function vDocumentTabSelectTitle() {\n                            return $(this).find(\".dcpLabel__select--tooltip\").attr(\"data-tooltipLabel\");\n                        }\n                    });\n                    $dropSelect.parent().find(\".k-input\").css(\"width\", \"\");\n\n                } else {\n                    // Reuse dropDown created previously\n                    $dropTopSelect.show();\n                    $dropSelect = $tabs.find(\"input.dcpTab__label__select[data-role=combobox]\");\n                    $(lastShow).append($dropTopSelect); // Move to new lastShow\n                    if ($dropSelect.data(\"kendoComboBox\")) {\n                        $dropSelect.data(\"kendoComboBox\").value(hiddenSelected ? $selectedTabId : hiddens[0].id);\n                        dataSource = new kendo.data.DataSource({\n                            data: hiddens\n                        });\n                        $dropSelect.data(\"kendoComboBox\").setDataSource(dataSource);\n                    }\n                }\n\n                // Add count in select button\n                $(lastShow).find(\".dcpLabel__count\").text(hiddens.length);\n\n                if (!$tabs.data(\"selectFixOn\")) {\n                    // Add callback only one time\n                    $tabs.on(\"click\", \".dcpLabel--select .k-dropdown-wrap .k-input\", function vDocumentTabSelectClick(event) {\n                        var selectedTab = $kendoTabs.select().data(\"attrid\");\n                        var selectedItem = $tabs.data(\"selectFixOn\").data(\"kendoComboBox\").value();\n                        var liItem = $tabs.find(\"li[data-attrid=\" + selectedItem + \"]\");\n                        var myTab = $(this).closest(\"li\");\n\n                        if (selectedItem !== selectedTab) {\n                            myTab.removeClass(\"k-state-active\");\n                            $kendoTabs.enable(myTab);\n                            $kendoTabs.select(liItem);\n                            $kendoTabs.disable(myTab);\n                            myTab.addClass(\"k-state-active\");\n                        }\n                    });\n\n                    $tabs.on(\"focus\", \".dcpLabel--select .k-dropdown-wrap .k-input\", function vDocumentTabFocus() {\n                        $(this).blur();\n                    });\n                }\n\n                // Memorize dropdown to reuse it in callback and to listen only one\n                $tabs.data(\"selectFixOn\", $dropSelect);\n            }\n            if ('ontouchstart' in document.documentElement && iOS) {\n                $(\"body\").off('show.bs.tooltip').on('show.bs.tooltip', \"[data-original-title]\", function vDocumentWorkaroundIosTouch(e) {\n                    // prevent ios double tap\n                    var $tooltip = $(this);\n                    var tooltipObject = $tooltip.data(\"bs.tooltip\");\n\n                    if (tooltipObject &&\n                        tooltipObject.inState.click === false &&\n                        tooltipObject.inState.focus === false &&\n                        tooltipObject.inState.hover === false\n                    ) {\n                        return;\n                    }\n\n                    if ('ontouchstart' in document.documentElement) {\n                        if (!$tooltip.data(\"showios\")) {\n                            e.preventDefault();\n                            $tooltip.data(\"showios\", true);\n                            _.delay(function vDocumentWorkaroundIosDelay() {\n                                $tooltip.tooltip(\"show\");\n                                $tooltip.data(\"showios\", false);\n                                _.delay(function vDocumentWorkaroundIosSecondDelay() {\n                                    $tooltip.tooltip(\"hide\");\n                                }, 2000);\n                            }, 500);\n                        }\n                    }\n                });\n            }\n\n            //$tabs.find(\".dcpDocument__tabs__list\").css(\"overflow\", \"\").css(\"max-height\", \"\");\n\n        },\n\n        /**\n         *\n         * Register the current tab for the current user\n         *\n         * @param tabId\n         */\n        recordSelectedTab: function vDocumentRecordSelectedTab(tabId) {\n            if (this.model.get(\"initid\")) {\n                var tagTab = new ModelDocumentTab({\"initid\": this.model.get(\"initid\"), \"tabId\": tabId});\n                tagTab.save();\n            }\n        },\n\n        /**\n         * Publish associated model message\n         */\n        publishMessages: function vDocumentPublishMessages() {\n            var currentView = this;\n            _.each(this.model.get(\"messages\"), function vDocumentPublishAMessage(aMessage) {\n                currentView.trigger(\"showMessage\", {\n                    type: aMessage.type,\n                    title: aMessage.contentText,\n                    htmlMessage: aMessage.contentHtml\n                });\n            });\n        },\n\n        /**\n         * Inject associated CSS in the DOM\n         *\n         * Inject new CSS, remove old CSS\n         */\n        renderCss: function vDocumentRenderCss(noRemove) {\n            // add custom css style\n            var $head = $(\"head\"),\n                cssLinkTemplate = _.template('<link rel=\"stylesheet\" type=\"text/css\" ' +\n                    'href=\"<%= path %>\" data-id=\"<%= key %>\" data-view=\"true\">'),\n                customCss = this.model.get(\"customCSS\");\n\n            if (noRemove !== true) {\n                //Remove old CSS\n\n                _.each($(\"link[data-view=true]\"), function vDocumentRemoveOldCSS(currentLink) {\n                    var findCss = function vDocumentFindCss(currentCss) {\n                        return $(currentLink).data(\"id\") === currentCss.key;\n                    };\n                    if (_.find(customCss, findCss) === undefined) {\n                        $(currentLink).remove();\n                    }\n                });\n            }\n            // Inject new CSS\n            _.each(customCss, function vDocumentInjectNewCSS(cssItem) {\n                var $existsLink = $('link[rel=stylesheet][data-id=' + cssItem.key + ']');\n\n                if ($existsLink.length === 0) {\n                    if (document.createStyleSheet) {\n                        // Special thanks to IE : ! up to 31 css cause errors...\n                        document.createStyleSheet(cssItem.path);\n                    }\n                    $head.append(cssLinkTemplate(cssItem));\n                }\n            });\n        },\n\n        /**\n         * Show the help document in dialog\n         *\n         */\n        showHelp: function vDocumentShowHelp(event, helpId, attrid) {\n            var $document = $(this.el);\n            var scope = this;\n            var $dialogDiv = $document.data(\"dcpHelpDocument-\" + helpId);\n            var currentTarget = (event.originalEvent) ? event.originalEvent.currentTarget : event.currentTarget;\n            var htmlLink = {\n                target: \"_dialog\",\n                windowWidth: \"400px\",\n                windowHeight: \"300px\",\n                windowTitle: '<span class=\"fa fa-question-circle\"></span> ' + i18n.___(\"Info\", \"ddui\")\n            };\n\n            require.ensure(['dcpDocument/document'], function vDocumentHelp() {\n                require('dcpDocument/document');\n                var helpX, helpY, bodyH, dialogH, dialogW;\n\n                if (!$dialogDiv || $dialogDiv.is(\":visible\") === false) {\n\n                    if (scope.helpWidget) {\n                        scope.helpWidget.destroy();\n                    }\n                    $dialogDiv = $('<div/>').addClass(\"dcpHelp-wrapper\");\n\n                    $dialogDiv.kendoWindow({\n                        title: htmlLink.windowTitle,\n                        width: htmlLink.windowWidth,\n                        height: htmlLink.windowHeight,\n                        iframe: true,\n                        content: \"about:blank\",\n                        actions: [\n                            \"Maximize\",\n                            \"Close\"\n                        ],\n                        close: function vDocumentSelectHelpClose() {\n                            $(\".dcpLabel__help__link--selected\").removeClass(\"dcpLabel__help__link--selected\");\n                        }\n                    });\n\n                    $dialogDiv.on(\"documentcreate\", function vDocumentHelpCreate() {\n                        $dialogDiv.find(\"> iframe\").addClass(\"k-content-frame\");\n                    });\n\n                    $dialogDiv.document({\n                        \"initid\": helpId,\n                        withoutResize: true\n                    }).on(\"documentloaded\", function vDocumentSelectHelpChapter() {\n                        _.defer(function vDocumentHelpReady() {\n                            $dialogDiv.document(\n                                \"triggerEvent\",\n                                \"custom:helppageSelect\",\n                                attrid);\n                        });\n                    });\n\n                    $document.data(\"dcpHelpDocument-\" + helpId, $dialogDiv);\n                } else {\n                    $dialogDiv.document(\n                        \"triggerEvent\",\n                        \"custom:helppageSelect\",\n                        attrid);\n                }\n\n                scope.helpWidget = $dialogDiv.data('kendoWindow');\n                $(\".dcpLabel__help__link--selected\").removeClass(\"dcpLabel__help__link--selected\");\n\n                if ($(currentTarget).length > 0) {\n                    $(currentTarget).addClass(\"dcpLabel__help__link--selected\");\n\n                    // Compute new position of help dialog window\n                    helpX = $(currentTarget).offset().left;\n                    helpY = $(currentTarget).offset().top;\n                    bodyH = $(\"body\").height();\n                    dialogH = $(scope.helpWidget.wrapper).closest(\".k-window\").height();\n                    dialogW = $(scope.helpWidget.wrapper).closest(\".k-window\").width();\n                    if (helpX > dialogW + 50) {\n                        helpX = helpX - dialogW - 30;\n                    } else {\n                        helpX = helpX + 30;\n                    }\n\n                    if (helpY > bodyH - dialogH) {\n                        helpY = bodyH - dialogH - 50;\n                    }\n\n                    helpY = helpY < 0 ? 0 : helpY;\n\n                    $(scope.helpWidget.wrapper).css({\n                        top: (helpY) + \"px\",\n                        left: (helpX) + \"px\"\n                    });\n                } else {\n                    scope.helpWidget.center();\n                }\n                scope.helpWidget.open();\n\n            }, \"wDocument\");\n        },\n\n        /**\n         * Show the history widget\n         *\n         */\n        showHistory: function vDocumentShowHistory(docid) {\n            var scope = this;\n            var $target = $('<div class=\"document-history\"/>');\n            this.historyWidget = $target.dcpDocumentHistory({\n                documentId: docid || this.model.get(\"properties\").get(\"initid\"),\n                window: {\n                    width: \"80%\",\n                    height: \"80%\",\n                    title: i18n.___(\"Document History\", \"historyUi\")\n                },\n                labels: {\n                    version: i18n.___(\"Version\", \"historyUi\"),\n                    revision: i18n.___(\"Rev\", \"historyUi\"),\n                    state: i18n.___(\"State\", \"historyUi\"),\n                    activity: i18n.___(\"Activity\", \"historyUi\"),\n                    owner: i18n.___(\"Owner\", \"historyUi\"),\n                    code: i18n.___(\"Code\", \"historyUi\"),\n                    date: i18n.___(\"Date\", \"historyUi\"),\n                    diff: i18n.___(\"Diff\", \"historyUi\"),\n                    level: i18n.___(\"Level\", \"historyUi\"),\n                    message: i18n.___(\"Message\", \"historyUi\"),\n                    pastRevision: i18n.___(\"past Revision\", \"historyUi\"),\n                    showDetail: i18n.___(\"Show details\", \"historyUi\"),\n                    hideDetail: i18n.___(\"Hide details\", \"historyUi\"),\n                    showNotice: i18n.___(\"Show notices\", \"historyUi\"),\n                    noOneNotice: i18n.___(\"No one notices\", \"historyUi\"),\n                    hideNotice: i18n.___(\"Hide notices\", \"historyUi\"),\n                    filterMessages: i18n.___(\"Filter messages\", \"historyUi\"),\n                    linkRevision: i18n.___(\"See revision number #\", \"historyUi\"),\n                    historyTitle: i18n.___(\"History for {{title}}\", \"historyUi\"),\n                    loading: i18n.___(\"Loading ...\", \"historyUi\"),\n                    revisionDiffLabels: {\n                        \"title\": i18n.___(\"Difference between two revisions\", \"historyDiffUi\"),\n                        \"first\": i18n.___(\"First document\", \"historyDiffUi\"),\n                        \"second\": i18n.___(\"Second document\", \"historyDiffUi\"),\n                        \"attributeId\": i18n.___(\"Attribute id\", \"historyDiffUi\"),\n                        \"attributeLabel\": i18n.___(\"Attribute label\", \"historyDiffUi\"),\n                        \"documentHeader\": i18n.___(\"{{title}}  (Revision : {{revision}}). <br/>Created on <em>{{revdate}}</em>\", \"historyDiffUi\"),\n                        \"filterMessages\": i18n.___(\"Filter data\", \"historyDiffUi\"),\n                        \"showOnlyDiff\": i18n.___(\"Show only differences\", \"historyDiffUi\"),\n                        \"showAll\": i18n.___(\"Show all\", \"historyDiffUi\")\n                    }\n                }\n            }).data(\"dcpDocumentHistory\");\n\n            this.historyWidget.open();\n            this.historyWidget.element.on(\"viewRevision\", function vDocumentViewRevision(event, data) {\n                scope.model.fetchDocument({\n                    initid: data.initid,\n                    revision: data.revision\n                });\n            });\n        },\n\n        /**\n         * Lock document\n         *\n         */\n        lockDocument: function vDocumentLockDocument() {\n            this.model.lockDocument();\n        },\n        /**\n         * Lock document\n         *\n         */\n        unlockDocument: function vDocumentUnLockDocument() {\n            this.model.unlockDocument();\n        },\n        /**\n         * Show the transition view\n         *\n         */\n        showtransition: function vDocumentShowtransition(transition, nextState) {\n            this.model.trigger(\"showTransition\", nextState, transition);\n        },\n\n        /**\n         * Show the transition view\n         *\n         */\n        showTransitionGraph: function vDocumentShowtransitionGraph() {\n            var documentView = this;\n            var transitionGraph = {};\n            var $target = $('<div class=\"dcpTransitionGraph\"/>');\n            //Init transition model\n            transitionGraph.model = new ModelTransitionGraph({\n                documentId: this.model.id,\n                state: this.model.get(\"properties\").get(\"state\")\n            });\n\n            transitionGraph.model.fetch({\n                success: function vDocumentTransitionSuccess() {\n                    //Init transition view\n                    transitionGraph.view = new ViewTransitionGraph({\n                        model: transitionGraph.model,\n                        el: $target\n                    });\n                    transitionGraph.view.render();\n                    transitionGraph.view.$el.on(\"viewTransition\", function vDocumentTransitionView(event, nextState) {\n                        transitionGraph.view.remove();\n                        documentView.model.trigger(\"showTransition\", nextState);\n                    });\n                }\n            });\n\n            this.transitionGraph = transitionGraph;\n        },\n        /**\n         * Show the properties widget\n         *\n         */\n        showProperties: function vDocumentShowProperties(docid) {\n            var scope = this;\n            var $target = $('<div class=\"document-properties\"/>');\n\n            this.propertiesWidget = $target.dcpDocumentProperties({\n                documentId: docid || this.model.get(\"properties\").get(\"initid\"),\n                window: {\n                    width: \"500px\",\n                    height: \"80%\",\n                    title: i18n.___(\"Document properties\", \"propertyUi\")\n                },\n                labels: {\n                    identifier: i18n.___(\"Identifier\", \"propertyUi\"),\n                    title: i18n.___(\"Title\", \"propertyUi\"),\n                    logicalName: i18n.___(\"Logical name\", \"propertyUi\"),\n                    revision: i18n.___(\"Revision number\", \"propertyUi\"),\n                    version: i18n.___(\"Version\", \"propertyUi\"),\n                    family: i18n.___(\"Family\", \"propertyUi\"),\n                    lockedBy: i18n.___(\"Locked by\", \"propertyUi\"),\n                    createdBy: i18n.___(\"Created by\", \"propertyUi\"),\n                    notLocked: i18n.___(\"Not locked\", \"propertyUi\"),\n                    confidential: i18n.___(\"Confidential\", \"propertyUi\"),\n                    notConfidential: i18n.___(\"Not confidential\", \"propertyUi\"),\n                    creationDate: i18n.___(\"Creation date\", \"propertyUi\"),\n                    lastModificationDate: i18n.___(\"Last modification date\", \"propertyUi\"),\n                    lastAccessDate: i18n.___(\"Last access date\", \"propertyUi\"),\n                    profil: i18n.___(\"Profil\", \"propertyUi\"),\n                    profilReference: i18n.___(\"Profil reference\", \"propertyUi\"),\n                    viewController: i18n.___(\"View controller\", \"propertyUi\"),\n                    property: i18n.___(\"Property\", \"propertyUi\"),\n                    propertiesTitle: i18n.___(\"Properties for {{title}}\", \"propertyUi\"),\n                    propertyValue: i18n.___(\"Value\", \"propertyUi\"),\n                    workflow: i18n.___(\"Workflow\", \"propertyUi\"),\n                    activity: i18n.___(\"Activity\", \"propertyUi\")\n                }\n            }).data(\"dcpDocumentProperties\");\n\n            this.propertiesWidget.open();\n            this.propertiesWidget.element.on(\"viewDocument\", function vDocumentViewDocument(event, data) {\n                scope.model.fetchDocument({initid: data});\n            });\n        },\n\n        /**\n         * Update the title of the current page\n         */\n        updateTitle: function vDocumentUpdateTitle() {\n            var title = this.model.get(\"properties\").get(\"title\");\n\n            if (!_.isEmpty(title)) {\n                document.title = title;\n            }\n        },\n\n        /**\n         * Update the icon of the current page\n         */\n        updateIcon: function vDocumentUpdateIcon() {\n            $(\"link[rel='shortcut icon']\").attr(\"href\", this.model.get(\"properties\").get(\"icon\"));\n        },\n\n        /**\n         * Delete the current document\n         *\n         */\n        deleteDocument: function dvDocumentDocumentDelete() {\n            this.model.deleteDocument();\n        },\n\n        /**\n         * Display the loading widget\n         */\n        displayLoading: function vDocumentDisplayLoading(options) {\n            var text = i18n.___(\"Loading\", \"ddui\"), avance = 50;\n            options = options || {};\n            if (this.$el.find(\".dcpDocument--disabled\") === 0) {\n                this.$el.append('<div class=\"dcpDocument--disabled\"/>');\n            }\n            if (options.isSaving) {\n                text = i18n.___(\"Recording\", \"ddui\");\n                avance = 70;\n            }\n            if (options.text) {\n                text = options.text;\n            }\n            this.trigger(\"cleanNotification\");\n            this.trigger(\"loaderShow\", text, avance);\n        },\n\n        /**\n         * Show the view\n         *\n         * Hide the loader, show the view\n         */\n        showView: function vDocumentShowView() {\n            this.$el.hide();\n            this.$el.find(\".dcpDocument--disabled\").remove();\n            this.trigger(\"loaderHide\");\n            this.$el.show();\n            this.model.redrawErrorMessages();\n        },\n\n        /**\n         * Switch the view\n         *\n         * @param viewId\n         */\n        closeDocument: function vDocumentCloseDocument(viewId) {\n            if (!viewId) {\n                if (this.model.get(\"renderMode\") === \"edit\") {\n                    viewId = \"!defaultEdition\";\n                } else {\n                    viewId = \"!defaultConsultation\";\n                }\n            }\n            this.loadDocument({\n                initid: this.model.get(\"initid\"),\n                viewId: viewId\n            });\n        },\n\n        /**\n         * Save the current document\n         */\n        saveDocument: function vDocumentSaveDocument() {\n            this.trigger(\"cleanNotification\");\n            var currentView = this, saveDocument = this.model.saveDocument();\n            //Use promise and display success when done\n            if (saveDocument && saveDocument.then) {\n                saveDocument.then(function vDocumentSaveDisplaySuccess() {\n                    currentView.trigger(\"showSuccess\", {title: i18n.___(\"Document Recorded\", \"ddui\")});\n                });\n            }\n        },\n\n        /**\n         * Save and close the current document\n         */\n        saveAndCloseDocument: function vDocumentSaveAndCloseDocument(viewId) {\n            this.trigger(\"cleanNotification\");\n            var currentView = this, saveDocument = this.model.saveDocument();\n            if (saveDocument && saveDocument.then) {\n                saveDocument.then(function vDocumentSaveAndCloseSuccess() {\n                    var initid = currentView.model.get(\"initid\");\n\n                    currentView.model.fetchDocument({\n                        initid: initid,\n                        viewId: viewId || \"!defaultConsultation\"\n                    });\n\n                });\n            }\n        },\n\n        /**\n         * Create the current document\n         */\n        createDocument: function vDocumentCreateDocument() {\n            var currentView = this, saveDocument = this.model.saveDocument();\n            if (saveDocument && saveDocument.then) {\n                saveDocument.then(function vDocumentCreateDisplaySuccess() {\n                    currentView.trigger(\"showSuccess\", {title: i18n.___(\"Document Created\", \"ddui\")});\n                });\n            }\n        },\n\n        /**\n         * Create the current document\n         */\n        createAndCloseDocument: function vDocumentCreateDocument(viewId) {\n            var currentView = this, saveDocument = this.model.saveDocument();\n            if (saveDocument && saveDocument.then) {\n                saveDocument.then(function vDocumentCreateAndCloseSuccess() {\n                    var initid = currentView.model.get(\"initid\");\n\n                    currentView.model.fetchDocument({\n                        initid: initid,\n                        viewId: viewId || \"!defaultConsultation\"\n                    });\n\n                });\n            }\n        },\n\n        /**\n         * load another document document  : confirm if modified\n         * options : {initid, viewId, revision}\n         * callbacks : {success, error}\n         */\n        loadDocument: function vDocumentLoadDocument(options, callbacks) {\n            var confirmWindow;\n            var documentView = this;\n\n            callbacks = callbacks || {};\n\n            if (this.model.hasAttributesChanged()) {\n                confirmWindow = $('body').dcpConfirm({\n                    title: i18n.___(\"Confirm close document\", \"ddui\"),\n                    width: \"45rem\",\n                    height: \"12rem\",\n                    maxWidth: $(window).width(),\n                    messages: {\n                        okMessage: i18n.___(\"Abort modification\", \"ddui\"),\n                        cancelMessage: i18n.___(\"Stay on the form\", \"ddui\"),\n                        htmlMessage: i18n.___(\"The form has been modified without saving\", \"ddui\"),\n                        textMessage: ''\n                    },\n                    confirm: function wMenuConfirm() {\n                        documentView.model.fetchDocument({\n                            initid: options.initid,\n                            viewId: options.viewId,\n                            revision: options.revision\n                        }).then(callbacks.success, callbacks.error);\n                    },\n                    cancel: function wLoadCancel() {\n                        if (callbacks && _.isFunction(callbacks.error)) {\n                            callbacks.error({\n                                errorMessage: {\n                                    code: \"USERCANCEL\",\n                                    contentText: i18n.___(\"User has cancelled the action.\", \"ddui\")\n                                }\n                            });\n                        }\n                    },\n                    templateData: {templates: this.model.get(\"templates\")}\n                });\n                confirmWindow.data('dcpWindow').open();\n            } else {\n                this.model.fetchDocument({\n                    initid: options.initid,\n                    viewId: options.viewId,\n                    revision: options.revision\n                }).then(callbacks.success, callbacks.error);\n            }\n        },\n\n        /**\n         * Restore the deleted document\n         *\n         * @returns {exports}\n         */\n        restoreDocument: function vDocumentRestoreDocument() {\n            this.model.restoreDocument();\n        },\n\n        propagateActionClick: function vDocumentPropagateActionClick(event) {\n            var $target = $(event.currentTarget),\n                action,\n                options,\n                eventOptions,\n                internalEvent = {\n                    prevent: false\n                };\n\n            event.preventDefault();\n            if (event.stopPropagation) {\n                event.stopPropagation();\n            }\n\n            action = $target.data('action') || $target.attr(\"href\");\n            options = action.substring(8).split(\":\");\n            eventOptions = {\n                target: event.target,\n                eventId: options.shift(),\n                options: options\n            };\n\n            this.model.trigger(\"internalLinkSelected\", internalEvent, eventOptions);\n            if (internalEvent.prevent) {\n                return this;\n            }\n\n            return this.doStandardAction(internalEvent, eventOptions);\n        },\n\n        handleHashClick: function vDocumenthandleHashClick(event) {\n            var $target = $(event.currentTarget), href = $target.attr('href');\n\n            if (!href || !href.substring || href.substring(0, 7) === '#action') {\n                return;\n            }\n\n            event.preventDefault();\n            if (event.stopPropagation) {\n                event.stopPropagation();\n            }\n\n            window.location.hash = href;\n        },\n\n        /**\n         * Propagate menu event\n         *test\n         * @param event\n         * @param options\n         * @returns {*}\n         */\n        doStandardAction: function vDocumentdoStandardAction(event, options) {\n            var eventArgs = options.options;\n\n            if (options.eventId === \"document.save\") {\n                return this.saveDocument();\n            }\n            if (options.eventId === \"document.saveAndClose\") {\n                return this.saveAndCloseDocument(eventArgs[0]);\n            }\n            if (options.eventId === \"document.history\") {\n                return this.showHistory(eventArgs[0]);\n            }\n            if (options.eventId === \"document.transition\") {\n                return this.showtransition(eventArgs[0], eventArgs[1]);\n            }\n            if (options.eventId === \"document.transitionGraph\") {\n                return this.showTransitionGraph();\n            }\n            if (options.eventId === \"document.properties\") {\n                return this.showProperties(eventArgs[0]);\n            }\n            if (options.eventId === \"document.delete\") {\n                return this.deleteDocument();\n            }\n            if (options.eventId === \"document.close\") {\n                return this.closeDocument(eventArgs[0]);\n            }\n            if (options.eventId === \"document.edit\") {\n                return this.closeDocument(\"!defaultEdition\");\n            }\n            if (options.eventId === \"document.create\") {\n                return this.createDocument();\n            }\n            if (options.eventId === \"document.createAndClose\") {\n                return this.createAndCloseDocument(eventArgs[0]);\n            }\n            if (options.eventId === \"document.load\") {\n                return this.loadDocument({\n                    initid: eventArgs[0], viewId: eventArgs[1], revision: eventArgs[2]\n                });\n            }\n            if (options.eventId === \"document.lock\") {\n                return this.lockDocument();\n            }\n            if (options.eventId === \"document.unlock\") {\n                return this.unlockDocument();\n            }\n            if (options.eventId === \"document.restore\") {\n                return this.restoreDocument();\n            }\n            if (options.eventId === \"document.help\") {\n                return this.showHelp(event, eventArgs[0], eventArgs[1]);\n            }\n        },\n\n        displayNetworkError: function vDocument_displayNetworkError() {\n            this.$el.hide();\n            $(\".dcpStaticErrorMessage\").removeAttr(\"hidden\");\n        },\n\n        /**\n         * Get the template for the current view\n         *\n         * @param key\n         * @returns {*}\n         */\n        getTemplates: function vDocumentGetTemplates(key) {\n            var templates = {};\n            if (this.model && this.model.get(\"templates\")) {\n                templates = this.model.get(\"templates\");\n            }\n            if (templates[key]) {\n                return templates[key];\n            }\n            // Get from a gobal element (for unittest)\n            if (window.dcp && window.dcp.templates && window.dcp.templates[key]) {\n                return window.dcp.templates[key];\n            }\n            throw new Error(\"Unknown template  \" + key);\n        },\n\n        /**\n         * Destroy the associated widget and suppress event listener before remov the dom\n         *\n         * @returns {*}\n         */\n        remove: function vDocumentRemove() {\n            try {\n                if (this.kendoTabs && this.kendoTabs.data(\"kendoTabStrip\")) {\n                    this.kendoTabs.data(\"kendoTabStrip\").destroy();\n                }\n\n            } catch (e) {\n                if (window.dcp.logger) {\n                    window.dcp.logger(e);\n                } else {\n                    console.error(e);\n                }\n            }\n            $(window).off(\".\" + this.model.cid);\n            $(window.document).off(\".\" + this.model.cid);\n\n            return Backbone.View.prototype.remove.call(this);\n        }\n    });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/views/document/vDocument.js","define([\n    'underscore',\n    'jquery',\n    'backbone',\n    'mustache',\n    'dcpDocument/views/document/vDocument',\n    'dcpDocument/widgets/window/wDialog'\n], function vTransition(_, $, Backbone, Mustache, ViewDocument)\n{\n    'use strict';\n\n    return ViewDocument.extend({\n\n        messages: [],\n\n        templates: {\n            htmlContent: '<div class=\"dcpTransition--content-activity\" >' +\n            ' <span class=\"dcpTransition--activity\" style=\"border-color:{{transition.beginState.color}}\">{{transition.beginState.displayValue}}</span>' +\n            '<span class=\"dcpTransition--transition {{^transition.id}}dcpTransition--transition--invalid{{/transition.id}}\" >{{transition.label}}</span>' +\n            '<span class=\"dcpTransition--arrow\"><span class=\"fa fa-caret-right fa-2x {{^transition.id}}dcpTransition--transition--invalid{{/transition.id}}\"></span></span>' +\n            '<span class=\"dcpTransition--activity\" style=\"border-color:{{transition.endState.color}}\">{{transition.endState.displayValue}}</span> ' +\n            '</div>',\n\n            htmlStateContent: '<div class=\"dcpTransition--content-activity\">' +\n            '<span class=\"dcpTransition--success\" >{{labels.success}}</span>' +\n            '</div>',\n\n            htmlStateButtons: '<button title=\"{{labels.close}}\" class=\"dcpTransition-button-close btn btn-outline-secondary btn-sm\">' +\n            '{{labels.close}} </button>',\n\n            htmlLoading: '<div class=\"dcpTransition--loading\"><span class=\"fa fa-2x fa-spinner fa-spin\"></span> {{labels.inprogress}}</div>',\n\n            htmlButtons: '{{#hasAttributes}}<button class=\"dcpTransition-button-cancel btn btn-outline-secondary btn-sm\">{{labels.cancel}}</button>' +\n            '<button title=\"{{transition.label}}\" ' +\n            'class=\"dcpTransition-button-ok btn {{#transition.id}}btn-primary{{/transition.id}}  {{^transition.id}}btn-danger{{/transition.id}} btn-sm\">' +\n            '{{labels.confirm}}</button>{{/hasAttributes}}'\n        },\n\n        events: {\n            \"click .dcpTransition-button-ok \": \"clickOnOk\",\n            \"click .dcpTransition-button-cancel\": \"clickOnCancel\",\n            \"click .dcpTransition-button-close\": \"clickOnClose\"\n        },\n\n        initialize: function vTransition_initialize(options)\n        {\n            //Call parent\n            ViewDocument.prototype.initialize.apply(this, arguments);\n            this.listenTo(this.model, 'showError', this.displayError);\n            //this.listenTo(this.model, 'invalid', this.displayError);\n            this.listenTo(this.model, 'request', this.transitionDisplayLoading);\n            this.listenTo(this.model, 'hide', function vTransition_hide()\n            {\n                this.$el.hide();\n            });\n            this.listenTo(this.model, 'show', function vTransition_show()\n            {\n                this.$el.show();\n            });\n            this.listenTo(this.model, 'close', function vTransition_close()\n            {\n                if (this.transitionWindow) {\n                    this.transitionWindow.close();\n                }\n            });\n            this.options = options;\n        },\n\n        remove: function vTransition_remove()\n        {\n            if (this.transitionWindow) {\n                this.transitionWindow.close();\n            }\n            //Call parent\n            ViewDocument.prototype.remove.apply(this, arguments);\n            //Remove custom CSS\n            var customCss = _.pluck(this.model.get(\"customCSS\"), \"key\");\n            if (customCss.length > 0) {\n                _.each(customCss, function vTransition_removeLink(cssKey)\n                {\n                    $('link[data-view=true][data-id=\"' + cssKey + '\"]').remove();\n                });\n            }\n        },\n\n        displayError: function vTransition_displayError(error)\n        {\n            var workflow = this.model.get(\"workflow\"),\n                attributes = this.model.get(\"attributes\"),\n                $okButton = this.$el.find(\".dcpTransition-button-ok\"),\n                $cancelButton = this.$el.find(\".dcpTransition-button-cancel\"),\n                errorMessage;\n            this.reactiveWidget();\n            if (_.isObject(error)) {\n                if (error.errorCode === \"offline\") {\n                    errorMessage = '<div class=\"dcpTransition--error\">{{{htmlMessage}}}</div>';\n                } else {\n                    errorMessage = '<div class=\"dcpTransition--error\">{{title}} {{{htmlMessage}}}</div>';\n                }\n                $(Mustache.render(errorMessage || \"\", error)).insertBefore(this.$el.find(\".dcpTransition--buttons\"));\n            }\n            if (attributes.length === 0) {\n                $okButton.hide();\n                $cancelButton.text(workflow.labels.close);\n            } else {\n                //noinspection JSUnresolvedVariable\n                $okButton.text(workflow.labels.retry);\n            }\n        },\n\n        cleanAndRender: function vTransition_cleanAndRender()\n        {\n            var workflow = this.model.get(\"workflow\"),\n                transition = workflow.transition,\n                state = workflow.state;\n\n            this.render();\n            this.displayMessages(this.model.get(\"messages\"));\n            this.clearError();\n            this.reactiveWidget();\n            if (!transition && state) {\n                this.model.trigger(\"success\", this.messages);\n            }\n        },\n        /**\n         * Inject associated CSS in the DOM\n         *\n         * Inject new CSS, no remove old CSS\n         */\n        renderCss: function vTransitionRenderCss()\n        {\n            ViewDocument.prototype.renderCss.apply(this, [true]);\n        },\n        updateTitle: function vTransitionupdateTitle()\n        {\n            // No update title\n        },\n        updateIcon: function vTransitionupdateIcon()\n        {\n            // No update icon\n        },\n        clearError: function vTransition_clearError()\n        {\n            this.$el.find(\".dcpTransition--error\").remove();\n        },\n\n        reactiveWidget: function vTransition_reactiveWidget()\n        {\n\n            var workflow = this.model.get(\"workflow\"),\n                attributes = this.model.get(\"attributes\"),\n                $loading = this.$el.find(\".dcpTransition--loading\"),\n                $okButton = this.$el.find(\".dcpTransition-button-ok\"),\n                $cancelButton = this.$el.find(\".dcpTransition-button-cancel\");\n\n            if (attributes.length > 0) {\n                if (workflow && workflow.labels.confirm) {\n                    $okButton.text(workflow.labels.confirm);\n                }\n                $okButton.prop(\"disabled\", false);\n            }\n            $cancelButton.prop(\"disabled\", false);\n\n            this.$el.find(\".dcpDocument--disabled\").remove();\n            $loading.hide();\n        },\n\n        /**\n         * Display the loading widget\n         */\n        transitionDisplayLoading: function vTransition_transitionDisplayLoading()\n        {\n            var $loading = this.$el.find(\".dcpTransition--loading\"),\n                $okButton = this.$el.find(\".dcpTransition-button-ok\"),\n                $cancelButton = this.$el.find(\".dcpTransition-button-cancel\");\n\n            $loading.show();\n            this.clearError();\n            $okButton.prop(\"disabled\", true);\n            $cancelButton.prop(\"disabled\", true);\n        },\n\n        displayMessages: function vTransition_displayMessages(messages)\n        {\n            var currentView = this,\n                template = '<div class=\"dcpTransition--message dcpTransition--message--{{type}}\">{{contentText}} {{{contentHtml}}}</div>',\n                $message = this.$el.find(\".dcpTransition--messages\");\n\n            this.messages = [];\n\n            _.each(messages, function vTransition_analyzeCurrentMessage(message)\n            {\n                $message.append($(Mustache.render(template || \"\", message)));\n                //noinspection JSUnresolvedVariable\n                currentView.messages.push({\n                    title: message.contentText,\n                    type: message.type,\n                    htmlMessage: message.contentHtml\n                });\n            });\n        },\n\n        /**\n         * Render the document view\n         * @returns {*}\n         */\n        render: function vTransition_render()\n        {\n            var currentView = this,\n                workflow = this.model.get(\"workflow\"),\n                attributes = this.model.get(\"attributes\"),\n                transition = workflow.transition,\n                state = workflow.state;\n\n            //Call parent\n            ViewDocument.prototype.render.apply(this, arguments);\n\n            workflow.hasAttributes = (attributes.length > 0);\n            if (transition) {\n                // Transition ask\n                this.$el.find(\".dcpTransition--header\").append(Mustache.render(this.templates.htmlContent || \"\", workflow));\n                this.$el.find(\".dcpTransition--messages\").append(Mustache.render(this.templates.htmlLoading || \"\", workflow));\n                this.$el.find(\".dcpTransition--buttons\").append(Mustache.render(this.templates.htmlButtons || \"\", workflow));\n                this.$el.find(\".dcpTransition-button-ok\").tooltip();\n\n                if (attributes.length === 0) {\n                    // Direct send transition without user control\n                    _.defer(function vTransition_saveForMe()\n                    {\n                        var event = {prevent: false}, saveXhr;\n                        currentView.model.trigger(\"beforeChangeState\", event);\n                        if (event.prevent === false) {\n                            saveXhr = currentView.model.save();\n                            if (saveXhr) {\n                                saveXhr.then(function vTransition_direct_afterSave()\n                                {\n                                    currentView.model.trigger(\"success\", currentView.getMessages());\n                                }).fail(function vTransition_direct_error(response, statusTxt, errorTxt)\n                                {\n                                    if (response.responseJSON) {\n                                        _.each(response.responseJSON.messages, function vTransition_clickOnOk_displayError(aMessage)\n                                        {\n                                            currentView.displayError({\n                                                title: aMessage.contentText\n                                            });\n                                        });\n                                    } else {\n                                        if (errorTxt && !errorTxt.title && errorTxt.message) {\n                                            errorTxt.title = errorTxt.message;\n                                            currentView.displayError(errorTxt);\n                                        } else\n                                            if (_.isString(errorTxt)) {\n                                                currentView.displayError({title: errorTxt});\n                                            }\n                                    }\n                                });\n                            }\n                        }\n                    });\n                }\n                this.$el.attr(\"data-state\", state.id);\n                if (transition.id) {\n                    this.$el.attr(\"data-transition\", transition.id);\n                }\n\n                // No use border color if same as background\n                _.defer(function vTransition_renderWhiteOnWhite()\n                {\n                    currentView.$el.find(\".dcpTransition--activity\").each(function vTransition_renderBorderColor()\n                    {\n                        if (currentView.$el.css(\"background-color\") === $(this).css(\"border-color\")) {\n                            $(this).css(\"border-color\", \"\");\n                        }\n                    });\n                });\n\n            } else\n                if (state) {\n                    // Transition success\n                    this.$el.find(\".dcpTransition--header\").append(Mustache.render(this.templates.htmlStateContent || \"\", workflow));\n                    this.$el.find(\".dcpTransition--buttons\").append(Mustache.render(this.templates.htmlStateButtons || \"\", workflow));\n                    this.$el.find(\".dcpTransition-button-close\").tooltip();\n\n                }\n\n            if (!this.transitionWindow) {\n                this.transitionWindow = this.$el.dcpDialog({\n                    window: {\n                        // maxWidth: \"600px\",\n                        height: \"auto\",\n                        close: function registerCloseEvent(e)\n                        {\n                            var event = {prevent: false};\n                            currentView.model.trigger(\"beforeChangeStateClose\", event);\n                            if (event.prevent !== false) {\n                                e.preventDefault();\n                            }\n                        }\n                    }\n                }).data(\"dcpDialog\");\n                this.$el.kendoWindow(\"title\", workflow.transition.label);\n                this.transitionWindow.open();\n            }\n            this.trigger(\"renderTransitionWindowDone\");\n        },\n\n        clickOnOk: function vTransition_clickOnOk()\n        {\n            var event = {prevent: false}, currentView = this, saveXhr;\n            this.model.trigger(\"beforeChangeState\", event);\n\n            if (event.prevent === false) {\n                saveXhr = this.model.save();\n                if (saveXhr) {\n                    saveXhr.then(function vTransition_clickOnOk_afterSave()\n                    {\n                        currentView.model.trigger(\"success\", currentView.getMessages());\n                    }).fail(function vTransition_clickOnOk_error(response, statusTxt, errorTxt)\n                    {\n                        if (response.responseJSON) {\n                            _.each(response.responseJSON.messages, function vTransition_clickOnOk_displayError(aMessage)\n                            {\n                                currentView.displayError({\n                                    title: aMessage.contentText\n                                });\n                            });\n                        } else {\n                            if (errorTxt && !errorTxt.title && errorTxt.message) {\n                                errorTxt.title = errorTxt.message;\n                                currentView.displayError(errorTxt);\n                            } else\n                                if (_.isString(errorTxt)) {\n                                    currentView.displayError({title: errorTxt});\n                                }\n                        }\n                    });\n                }\n            }\n        },\n\n        clickOnCancel: function vTransition_clickOnCancel()\n        {\n            this.transitionWindow.close();\n        },\n\n        clickOnClose: function vTransition_clickOnClose()\n        {\n            this.transitionWindow.close();\n        },\n\n        getMessages: function vTransition_getMessages()\n        {\n            var messages = [];\n            _.each(this.model.get(\"messages\"), function vTransition_getMessagesAMessage(aMessage)\n            {\n                messages.push({\n                    type: aMessage.type,\n                    title: aMessage.contentText,\n                    htmlMessage: aMessage.contentHtml\n                });\n            });\n            return messages;\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/views/workflow/vTransition.js","define([\n    'underscore',\n    'jquery',\n    'backbone',\n    'mustache',\n    'dcpDocument/i18n/documentCatalog',\n    'dcpDocument/widgets/window/wDialog'\n], function vTransitionGraph(_, $, Backbone, Mustache, i18n)\n{\n    'use strict';\n\n    return Backbone.View.extend({\n\n        messages: [],\n\n        remove: function vTransitionGraph_remove()\n        {\n            if (this.transitionGraphWindow && this.$el.data(\"kendoWindow\")) {\n                this.transitionGraphWindow.destroy();\n\n            }\n\n            //Call parent\n            Backbone.View.prototype.remove.apply(this, arguments);\n        },\n\n        /**\n         * Render the document view\n         * @returns {*}\n         */\n        render: function vTransitionGraph_render()\n        {\n            var currentView = this;\n\n            this.$el.append($('<div class=\"dcpTransitionGraph--from\"/>' +\n            '<div class=\"dcpTransitionGraph--to\"/>'));\n\n            this.displayCurrentState();\n\n            // Init Events\n            this.$el.on(\"mouseover\", \".dcpTransitionGraph--to .dcpTransitionGraph_state\", function vTransitionGraph_renderMouseOver()\n            {\n                var to = $(this).data(\"to\");\n                if (!$(this).hasClass(\"dcpTransitionGraph_state--error\")) {\n\n                    currentView.$el.find(\".dcpTransitionGraph__arrow--\" + to).addClass(\"dcpTransitionGraph__arrow--selected\");\n                }\n            });\n            this.$el.on(\"mouseout\", \".dcpTransitionGraph--to .dcpTransitionGraph_state\", function vTransitionGraph_renderMouseOut()\n            {\n\n                currentView.$el.find(\".dcpTransitionGraph__arrow\").removeClass(\"dcpTransitionGraph__arrow--selected\");\n            });\n\n            this.$el.on(\"click\", \".dcpTransitionGraph--to .dcpTransitionGraph_state\", function vTransitionGraph_renderClick()\n            {\n                var to = $(this).data(\"to\");\n\n                 if (! $(this).hasClass(\"dcpTransitionGraph_state--error\")) {\n                     currentView.$el.trigger(\"viewTransition\", to);\n                 }\n\n            });\n\n            this.$el.find(\".dcpTransitionGraph_state \").tooltip({\n                placement: \"top\",\n                html: true\n            });\n\n            if (!this.transitionGraphWindow) {\n                this.transitionGraphWindow = this.$el.dcpDialog({\n                    window: {\n                        height: \"auto\",\n                        width: \"600px\",\n                        close: function registerCloseEvent()\n                        {\n                            currentView.remove();\n                        },\n                        activate: function vTransitionGraph_windowActivate()\n                        {\n                            currentView.displayArrows();\n                            currentView.previousHeight = currentView.$el.height();\n                        },\n                        resize: function vTransitionGraph_windowResize()\n                        {\n                            var isMaximized = currentView.$el.data(\"kendoWindow\").options.isMaximized;\n\n                            if (!isMaximized && currentView.isMaximizedNow) {\n\n                                currentView.$el.find(\".dcpTransitionGraph--to\").height(currentView.previousHeight);\n                                currentView.$el.find(\".dcpTransitionGraph--from\").height(currentView.previousHeight);\n                                currentView.isMaximizedNow = false;\n                            }\n                            currentView.displayArrows();\n\n                            if (!isMaximized) {\n                                currentView.previousHeight = currentView.$el.height();\n                            } else {\n                                currentView.isMaximizedNow = true;\n                            }\n                        }\n                    }\n                }).data(\"dcpDialog\");\n                this.$el.kendoWindow(\"title\", i18n.___(\"Transition Graph\", \"ddui\"));\n                this.transitionGraphWindow.open();\n            }\n        },\n\n        displayCurrentState: function vTransitionGraphdisplayCurrentState()\n        {\n            var tpl = '<div class=\"dcpTransitionGraph_state {{#transition.error}}dcpTransitionGraph_state--error{{/transition.error}}\" ' +\n                'data-to=\"{{id}}\" {{^transition.error}}title=\"{{title}}{{transition.error}}\"{{/transition.error}} style=\"border-color:{{color}}\">{{displayValue}}' +\n                '{{#transition.error}}<div class=\"dcpTransitionGraph_state_message\">{{transition.error}}</div>{{/transition.error}}' +\n                '</div>';\n            var states = this.model.get(\"workflowStates\");\n            var currentState = this.model.get(\"state\");\n            var currentView = this;\n\n            this.$el.find(\".dcpTransitionGraph--from\").append(Mustache.render(tpl || \"\", _.extend(currentState, {title:i18n.___(\"Current workflow activity\",\"ddui\")})));\n\n            _.each(states, function vTransitionGraphdisplayCurrentStateEach(item)\n            {\n                if (item.transition && item.transition.authorized !== false) {\n                    item.title = Mustache.render(i18n.___(\"Next step. Apply transition {{label}}\", \"ddui\"), {label: item.transition.label});\n                    currentView.$el.find(\".dcpTransitionGraph--to\").append(Mustache.render(tpl, item));\n                }\n            });\n        },\n\n        displayArrows: function vTransitionGraph_displayArrows()\n        {\n            var states = this.model.get(\"workflowStates\");\n            var currentView = this;\n\n            var $from = this.$el.find(\".dcpTransitionGraph--from .dcpTransitionGraph_state\");\n            var $to;\n\n            this.$el.find(\".dcpTransitionGraph__arrow\").remove();\n\n            this.$el.find(\".dcpTransitionGraph--to\").height(this.$el.height());\n            this.$el.find(\".dcpTransitionGraph--from\").height(this.$el.height());\n            _.each(states, function vTransitionGraph_connectStates(item)\n            {\n                if (item.transition && item.transition.authorized !== false) {\n                    $to = currentView.$el.find(\".dcpTransitionGraph--to .dcpTransitionGraph_state[data-to=\" + item.id + \"]\");\n                    currentView.connect($from.get(0), $to.get(0), 2, item);\n                }\n            });\n        },\n\n        /**\n         * return element top, left, width, height\n         * @param el DOM element\n         * @returns {*|jQuery}\n         */\n        getOffset: function vTransitionGraph_getOffset(el)\n        {\n            var offset = $(el).offset();\n            offset.width = $(el).outerWidth();\n            offset.height = $(el).outerHeight();\n            return offset;\n        },\n\n        /**\n         * draw a line connecting elements\n         * @param div1 from div\n         * @param div2 to div\n         * @param thickness of the arraow\n         * @param item transition info\n         */\n        connect: function vTransitionGraph_connect(div1, div2, thickness, item)\n        {\n            var off1 = this.getOffset(div1);\n            var off2 = this.getOffset(div2);\n            var origin = this.getOffset(this.$el.get(0));\n\n            // bottom right\n            var x2 = off1.left + off1.width - origin.left;\n            var y2 = off1.top + (off1.height / 2) - origin.top;\n            // top right\n            var x1 = off2.left - origin.left;\n            var y1 = off2.top + (off2.height / 2) - origin.top;\n            // distance\n            var length = Math.sqrt(((x2 - x1) * (x2 - x1)) + ((y2 - y1) * (y2 - y1)));\n            // center\n            var cx = ((x1 + x2) / 2) - (length / 2);\n            var cy = ((y1 + y2) / 2) - (thickness / 2);\n            // angle\n            var angle = Math.atan2((y1 - y2), (x1 - x2)) * (180 / Math.PI);\n\n            //\n            var htmlLine = \"<div class='dcpTransitionGraph__arrow dcpTransitionGraph__arrow--{{id}} {{#error}}dcpTransitionGraph__arrow--error{{/error}}' \" +\n                \"style=' height:{{height}}px;left:{{left}}px; top:{{top}}px; width:{{width}}px;\" +\n                \" -moz-transform:rotate({{angle}}deg); \" +\n                \"-webkit-transform:rotate({{angle}}deg); \" +\n                \"-o-transform:rotate({{angle}}deg); \" +\n                \"-ms-transform:rotate({{angle}}deg); \" +\n                \"transform:rotate({{angle}}deg);' ><div class='dcpTransitionGraph__arrow__label'>{{text}}</div>\" +\n                \"<span class='dcpTransitionGraph__arrow__end fa fa-2x fa-caret-right'></span> </div>\";\n\n            this.$el.append(Mustache.render(htmlLine || \"\", {\n                error:item.transition.error,\n                id: item.id,\n                height: thickness,\n                width: length,\n                top: cy,\n                left: cx,\n                angle: angle,\n                text: item.transition.label\n            }));\n        }\n\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/views/workflow/vTransitionGraph.js","(function umdRequire(root, factory) {\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'underscore',\n            'mustache',\n            'dcpDocument/widgets/widget'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window._, window.Mustache);\n    }\n}(window, function require_array($, _, Mustache) {\n    'use strict';\n\n    $.widget(\"dcp.dcpArray\", {\n\n        options: {\n            tools: true,\n            nbLines: 0,\n            renderOptions: {\n                rowCountThreshold: -1,\n                rowAddDisable: false,\n                rowDelDisable: false,\n                rowMoveDisable: false,\n                rowMinLimit: -1,\n                rowMinDefault: 0,\n                rowMaxLimit: -1,\n                collapse: false,\n                arrayBreakPoints: {\n                    transpositionRule: \"@media (max-width: 768px)\",\n                    upRule: \"@media (max-width: 1200px)\"\n                }\n            },\n            displayLabel: true,\n            customTemplate: false,\n            labels: {\n                closeErrorMessage: \"Close message\",\n                limitMaxMessage: \"Row count limit to {{limit}}\",\n                limitMinMessage: \"Min row limit is {{limit}}\"\n            }\n        },\n\n        /**\n         * get Selected line element (jquery, length = 0 if no selected)\n         * @returns {*}\n         */\n        getSelectedLineElement: function dcpArraygetSelectedLineElement() {\n            return this.element.find('.dcpArray__content__line--selected.active');\n        },\n        /**\n         * get Selected line index (0 : first, null : no selected line)\n         * @returns {*}\n         */\n        getSelectedLineIndex: function dcpArray_getSelectedLineIndex() {\n            var index = this.getSelectedLineElement().data(\"line\");\n            if (_.isUndefined(index) || _.isNull(index)) {\n                return null;\n            }\n            return index;\n        },\n        /**\n         *\n         * @private\n         */\n        _create: function dcpArray_create() {\n            this.options.tools = this.options.mode === \"write\" && this.options.visibility !== \"U\";\n            if (this.options.renderOptions.rowAddDisable === true &&\n                this.options.renderOptions.rowDelDisable === true &&\n                this.options.renderOptions.rowMoveDisable === true) {\n                this.options.tools = false;\n            }\n            if (this.options.renderOptions.attributeLabel) {\n                this.options.label = this.options.renderOptions.attributeLabel;\n            }\n\n            this.initializing = true;\n            this._initDom().then(_.bind(function onDomOK() {\n                this._trigger(\"widgetReady\");\n            }, this));\n            this._initActionClickEvent();\n            this._bindEvents();\n            if (this.options.renderOptions.collapse === \"collapse\") {\n                this.toggleCollapse(null, true);\n            }\n            this.initializing = false;\n        },\n\n        _initDom: function dcpArray_initDom() {\n            return new Promise(_.bind(function dcpArray_initDom_initDom(resolve, reject) {\n                var scope = this, $table;\n                if (this.options.mode === \"read\" && this.options.nbLines === 0 && this.options.showEmpty !== true) {\n                    if (this.options.showEmpty) {\n                        this.element.addClass(\"card card-default\");\n                        // showEmptyCOntent option\n                        if (this.options.displayLabel !== false) {\n                            this.element.append(Mustache.render(this._getTemplate(\"label\") || \"\", this.options));\n                            if (this.options.renderOptions.labelPosition === \"left\") {\n                                this.element.find(\".dcpLabel\").addClass(\"dcpArray__label--left\");\n                            }\n                        }\n\n                        this.element.append(this.options.showEmpty);\n\n                    }\n                } else {\n                    this.element.addClass(\"card card-default\");\n                    if (this.options.displayLabel !== false) {\n                        this.element.append(Mustache.render(this._getTemplate(\"label\") || \"\", _.extend(this.options, {\n                            collapsable: (this.options.renderOptions.collapse !== \"none\"),\n                            displayCount: (this.options.renderOptions.rowCountThreshold >= 0 && this.options.nbLines >= this.options.renderOptions.rowCountThreshold)\n                        })));\n                    }\n\n                    if (this.options.customTemplate) {\n                        // The template is already composed on view\n                        this.element.append(this.options.customTemplate);\n                        this.element.find(\".dcpCustomTemplate table.dcpArray__table tbody tr\").addClass(\"dcpArray__content__line\");\n                        this._indexLine();\n                        this.element.find(\".dcpArray__content__line\").attr(\"data-attrid\", this.options.id);\n                        this.element.find(\".dcpCustomTemplate\").addClass(\"dcpArray__content dcpArray__content--open\");\n\n                    } else {\n                        _.each(this.options.content, function wArrayCopyRenderContent(anOption) {\n                            // Need duplicate because Mustache is confused when 2 attributes has same name\n                            anOption.contentRenderOptions = anOption.renderOptions;\n                        });\n                        this.element.append(Mustache.render(this._getTemplate(\"content\") || \"\", this.options));\n\n                        if (this.options.mode === \"write\") {\n                            this.element.find(\".dcpArray__content\").addClass(\"dcpArray--tooltips\");\n                            this.element.tooltip({\n                                selector: \".dcpArray--tooltips .dcpArray__content__toolCell span, .dcpArray--tooltips .dcpArray__tools .dcpArray__button\",\n                                placement: function (tooltipDom, targetDom) {\n                                    // Auto hide after 3s\n                                    _.delay(function () {\n                                        $(targetDom).tooltip(\"hide\");\n                                    }, 3000);\n                                    if ($(targetDom).closest(\".dcpArray__tools\").length > 0) {\n                                        return \"bottom\";\n                                    }\n                                    return \"top\";\n                                },\n                                container: \".dcpDocument\",\n\n                                delay: {\n                                    hide: 0,\n                                    show: 500\n                                }\n                            });\n                        }\n                    }\n                    if (this.options.displayLabel !== false) {\n                        var labelPosition = this.options.renderOptions.labelPosition;\n                        if (labelPosition === \"auto\" || labelPosition === \"left\") {\n                            this.element.find(\".dcpArray__label\").addClass(\"dcpAttribute__left\");\n                            this.element.find(\".dcpArray__content\").addClass(\"dcpAttribute__right\");\n                            this.element.addClass(\"dcpArray--left\");\n                        }\n\n                        this.element.find(\".dcpAttribute__right\").addClass(\"dcpAttribute__labelPosition--\" + labelPosition);\n                        this.element.find(\".dcpAttribute__left\").addClass(\"dcpAttribute__labelPosition--\" + labelPosition);\n                        this.element.addClass(\"dcpAttribute__labelPosition--\" + labelPosition);\n                    }\n\n                    if (this.options.renderOptions.rowAddDisable === true) {\n                        this.element.find(\".dcpArray__button--add, .dcpArray__button--copy\").hide();\n                    }\n\n                    // Set system css classes\n                    $table = this.element.find(\".dcpArray__table\");\n                    $table.addClass(\"table table-condensed table-hover table-bordered responsive\");\n                    $table.find(\"> tbody\").addClass(\"dcpArray__body\").attr(\"data-attrid\", this.options.id);\n                    $table.find(\"> thead\").attr(\"data-attrid\", this.options.id).find(\"tr\").addClass(\"dcpArray__head\").attr(\"data-attrid\", this.options.id);\n\n                    if (this.options.mode === \"write\" && this.options.renderOptions.rowMoveDisable !== true) {\n                        //Initiate drag drop events\n                        this.element.find('tbody').kendoDraggable({\n                            axis: \"y\",\n                            container: scope.element.find('tbody'),\n                            filter: '.dcpArray__content__toolCell__dragDrop',\n                            hint: function dcpArrayhint(element) {\n                                var dragLine = element.closest('tr');\n                                var lineWidth = dragLine.width();\n                                var classTable = element.closest('table').attr(\"class\");\n\n                                scope._hideTooltips();\n                                scope._disableTooltips();\n\n                                return $('<table/>').addClass(\"dcpArray__dragLine \" + classTable).css(\"width\", lineWidth).css(\"margin-left\", \"-\" + (element.offset().left - dragLine.offset().left) + \"px\").append(dragLine.clone());\n                            },\n                            dragstart: function dcpArraydragstart(event) {\n                                if (event.currentTarget) {\n                                    var dragLine = $(event.currentTarget).closest('tr');\n                                    dragLine.css(\"opacity\", \"0\");\n                                    dragLine.data(\"fromLine\", dragLine.data(\"line\"));\n                                }\n                            },\n                            dragend: function dcpArraydragend(event) {\n                                if (event.currentTarget) {\n                                    var dragLine = $(event.currentTarget).closest('tr');\n                                    dragLine.css(\"opacity\", \"\");\n                                    scope._trigger(\"lineMoved\", {}, {\n                                        fromLine: dragLine.data(\"fromLine\"),\n                                        toLine: dragLine.data(\"line\")\n                                    });\n                                }\n\n                                scope._enableTooltips();\n                            }\n                        });\n\n                        this.element.find('tbody').kendoDropTargetArea({\n                            filter: '.dcpArray__content__line[data-attrid=\"' + this.options.id + '\"]',\n                            dragenter: function dragenter(event) {\n                                if (event.currentTarget) {\n                                    var drap = event.draggable.currentTarget.closest('tr');\n                                    var drop = event.dropTarget;\n                                    var drapLine = drap.data(\"line\");\n                                    var dropLine = drop.data(\"line\");\n                                    if (drapLine > dropLine) {\n                                        drap.insertBefore(drop);\n                                    } else {\n                                        drap.insertAfter(drop);\n                                    }\n                                    scope._indexLine();\n                                }\n                            }\n                        });\n                    }\n                    this.element.on(\"click\" + this.eventNamespace, \".button-close-error\", function destroyTable(/*event*/) {\n                        scope.element.find(\".dcpArray__content table.table\").tooltip(\"destroy\");\n                    });\n                }\n                _.delay(_.bind(this._initCSSResponsive, this), 10);\n                this.addAllLines(this.options.nbLines).then(resolve)[\"catch\"](reject);\n            }, this));\n\n        },\n        /**\n         * Init event for #action/ links\n         *\n         * @protected\n         */\n        _initActionClickEvent: function wAttributeInitActionClickEvent() {\n            var scopeWidget = this;\n\n            this.element.on(\"click.\" + this.eventNamespace, 'a[href^=\"#action/\"], a[data-action], button[data-action]', function wAttributeActionClick(event) {\n                var $this = $(this),\n                    action,\n                    options,\n                    eventOptions;\n\n                event.preventDefault();\n                if (event.stopPropagation) {\n                    event.stopPropagation();\n                }\n\n                action = $this.data('action') || $this.attr(\"href\");\n                options = action.substring(8).split(\":\");\n                eventOptions = {\n                    target: event.target,\n                    index: -1,\n                    eventId: options.shift(),\n                    options: options\n                };\n\n                scopeWidget._trigger(\"externalLinkSelected\", event, eventOptions);\n                return this;\n            });\n        },\n        _initCSSResponsive: function _initCSSResponsive() {\n            // I9 not support transposition table\n            var useTransposition = ($(\"html.k-ie9\").length === 0);\n\n            this.element.append(Mustache.render(this._getTemplate(\"responsive\") || \"\", _.extend(this.options, {useTransposition: useTransposition})));\n\n            if (useTransposition) {\n                this.element.find(\"table.dcpArray__table\").addClass(\"responsive\");\n                var cssString, cssTemplate,\n                    headers = _.map(this.element.find(\"table.responsive > thead th\"), function addResponsiveKey(currentElement, index) {\n                        var $currentElement = $(currentElement);\n                        var $label = $currentElement.find(\".dcpArray__head__label\");\n\n                        if ($label.length === 0) {\n                            $label = $currentElement;\n                        }\n                        $label.attr(\"data-responsiveKey\", \"rk\" + index);\n                        return {\n                            \"key\": $label.attr(\"data-responsiveKey\"),\n                            \"attrid\": $label.data(\"attrid\"),\n                            \"label\": $label.text().trim()\n                        };\n                    });\n\n                // Generate CSS string\n                cssString = \"<style>\" + this.options.renderOptions.arrayBreakPoints.transpositionRule + \" { \";\n\n                cssTemplate = _.template('.dcpArray__content[data-attrid=' + this.options.id + '] .dcpAttribute__content[data-responsiveKey=<%= key %>]:before { content: \"<%= label %>\"; }');\n\n                _.each(headers, function initCssHeader(currentHeader) {\n                    currentHeader.label = currentHeader.label.replace(/([\\\\\"])/g, \"\\\\$1\").replace(/\\n/g, \" \");\n                    cssString += cssTemplate(currentHeader);\n                });\n                cssString += \" }</style>\";\n\n                this.element.append(cssString);\n            }\n        },\n\n        _hideTooltips: function wArray__hideTooltips() {\n            var $element = this.element;\n            $element.find('[aria-describedby^=tooltip]').tooltip(\"hide\");\n            _.delay(function _hideTooltipsOneAgain() {\n                // Need redo cause animation delay of 500ms\n                $element.find('[aria-describedby^=tooltip]').tooltip(\"hide\");\n            }, 500);\n        },\n        _disableTooltips: function wArray__disableTooltips() {\n            this.element.find(\".dcpArray__content\").removeClass(\"dcpArray--tooltips\");\n        },\n        _enableTooltips: function wArray__enableTooltips() {\n            this.element.find(\".dcpArray__content\").addClass(\"dcpArray--tooltips\");\n        },\n\n        _bindEvents: function dcpArray_bindEvents() {\n            var currentWidget = this;\n            this.element.on(\"click\" + this.eventNamespace, \".dcpArray__content__toolCell__check input\", function selectLineEvent() {\n                var $this = $(this);\n                var isAlreadyChecked = $this.closest(\".dcpArray__content__line\").hasClass(\"dcpArray__content__line--selected\");\n                currentWidget._hideTooltips();\n                currentWidget._unSelectLines();\n                if (isAlreadyChecked) {\n                    currentWidget.element.find(\".dcpArray__copy\").prop(\"disabled\", true);\n                    $(this).prop(\"checked\", false).removeAttr(\"checked\");\n                } else {\n                    $this.find('.fa-check').show();\n                    $this.closest(\".dcpArray__content__line\").addClass(\"dcpArray__content__line--selected active\");\n                    currentWidget.element.find(\".dcpArray__copy\").prop(\"disabled\", false);\n                    $(this).prop(\"checked\", true).attr(\"checked\", \"checked\");\n                }\n            });\n            this.element.on(\"click\" + this.eventNamespace, \".dcpArray__add\", function addLineEvent() {\n                var selectedLine = currentWidget.getSelectedLineIndex();\n                currentWidget._hideTooltips();\n                if (currentWidget.options.renderOptions.rowMaxLimit < 0 || currentWidget.options.nbLines < currentWidget.options.renderOptions.rowMaxLimit) {\n                    if (selectedLine === null || _.isUndefined(selectedLine)) {\n                        currentWidget.options.nbLines += 1;\n                        currentWidget.addLine(currentWidget.options.nbLines - 1, {\n                            needAddValue: true,\n                            useSelectedLine: true\n                        });\n                    } else {\n                        currentWidget.options.nbLines += 1;\n                        currentWidget.addLine(selectedLine, {needAddValue: true, useSelectedLine: true});\n                    }\n                }\n            });\n            this.element.on(\"click\" + this.eventNamespace, \".dcpArray__copy\", function copyLineEvent() {\n                var selectedLine = currentWidget.getSelectedLineIndex();\n\n                currentWidget._hideTooltips();\n                if (currentWidget.options.renderOptions.rowMaxLimit < 0 || currentWidget.options.nbLines < currentWidget.options.renderOptions.rowMaxLimit) {\n                    currentWidget.options.nbLines += 1;\n                    currentWidget.copyLine(selectedLine, {needAddValue: true, useSelectedLine: true});\n                }\n\n            });\n            this.element.on(\"click\" + this.eventNamespace, \".dcpArray__content__toolCell__delete button\", function deleteLineEvent() {\n                currentWidget._hideTooltips();\n                currentWidget.removeLine($(this).closest(\".dcpArray__content__line\").data(\"line\"));\n                currentWidget.element.find(\".dcpArray__copy\").prop(\"disabled\", true);\n\n            });\n            this.element.on(\"click\" + this.eventNamespace, \".dcpArray--collapsable\", function toogleTable() {\n                currentWidget.toggleCollapse.apply(currentWidget);\n            });\n        },\n\n        toggleCollapse: function toggleCollapse(event, hideNow) {\n            this._hideTooltips();\n            var $contentElement = this.element.find(\".dcpArray__content\");\n            this.element.find(\".dcp__array__caret\").toggleClass(\"fa-caret-right fa-caret-down\");\n            $contentElement.toggleClass(\"dcpArray__content--open dcpArray__content--close\");\n            if (hideNow) {\n                $contentElement.hide();\n            } else {\n                $contentElement.slideToggle(200);\n            }\n        },\n\n        /**\n         * Redraw label with current count\n         */\n        redrawLabel: function wArrayRedrawLabel() {\n            this.element.find(\".dcpArray__label\").html(\n                $(Mustache.render(this._getTemplate(\"label\") || \"\", _.extend(this.options, {\n                    displayCount: (this.options.renderOptions.rowCountThreshold >= 0 && this.options.nbLines >= this.options.renderOptions.rowCountThreshold)\n                }))).html()\n            );\n        },\n        setLines: function wArraySetLines(lineNumber, options) {\n            return (new Promise(_.bind(function wArraySetLines_promise(resolve, reject) {\n                var linesPromise = [];\n                if (!this.initializing) {\n                    // No auto add lines when array is initializing itself\n                    var currentLineNumber = this.options.nbLines;\n                    var i;\n                    if (lineNumber > currentLineNumber) {\n                        for (i = 0; i < (lineNumber - currentLineNumber); i += 1) {\n                            linesPromise.push(this.addLine(currentLineNumber + i, options));\n                        }\n                        Promise.all(linesPromise).then(resolve)[\"catch\"](reject);\n                    } else if (lineNumber < currentLineNumber) {\n                        for (i = 0; i < (currentLineNumber - lineNumber); i += 1) {\n                            this.removeLine(this.options.nbLines - 1, options);\n                        }\n                        resolve();\n                    }\n                } else {\n                    resolve();\n                }\n            }, this)));\n        },\n\n        addAllLines: function dcpArrayaddAllLines(lineNumber) {\n            var i, min, allPromiseLines = [];\n            this.element.find(\".dcpArray__body\").empty();\n\n            for (i = 0; i < lineNumber; i += 1) {\n                this.addLine(i);\n            }\n\n            min = Math.max(this.options.renderOptions.rowMinLimit, this.options.renderOptions.rowMinDefault);\n            if (min > 0) {\n                if (this.options.nbLines < min) {\n                    for (i = this.options.nbLines; i < min; i += 1) {\n                        allPromiseLines.push(this.addLine(i, {needAddValue: true}));\n                    }\n                }\n            }\n            return Promise.all(allPromiseLines).then(_.bind(function allLineAdded() {\n                this._trigger(\"linesGenerated\");\n            }, this));\n        },\n\n        _getLineContent: function dcpArray_getLineContent(index) {\n            var $content = \"NULL LINE\";\n\n            this.options.lineCid = _.uniqueId(this.options.id);\n            if (this.options.customTemplate) {\n                $content = this.options.customLineCallback.apply(this, [index]);\n                $content.addClass(\"dcpArray__content__line\");\n                $content.attr(\"data-attrid\", this.options.id);\n            } else {\n                $content = $(Mustache.render(this._getTemplate(\"line\") || \"\", _.extend({lineNumber: index}, this.options)));\n            }\n            $content.find(\".dcpArray__content__toolCell\").closest('td').addClass(\"dcpArray__toolCell\");\n\n            if (this.options.renderOptions.rowDelDisable === true) {\n                $content.find(\".dcpArray__content__toolCell__delete\").hide();\n            }\n            if (this.options.renderOptions.rowMoveDisable === true) {\n                $content.find(\".dcpArray__content__toolCell__dragDrop\").hide();\n            }\n            _.each($content.find(\">td\"), function dcpArray_addCssClass(currentCell, index) {\n                $(currentCell).find(\".dcpArray__content__cell\").attr(\"data-responsiveKey\", \"rk\" + (index)).closest('td').addClass(\"dcpArray__cell\");\n            });\n            return $content;\n        },\n\n        _addNewLine: function dcpArray_addNewLine(lineNumber, options) {\n            if (!_.isNumber(lineNumber)) {\n                throw new Error(\"You need to indicate the line number\");\n            }\n\n            var $content = this._getLineContent(lineNumber);\n            var selectedLine = [];\n\n            if (options && options.useSelectedLine) {\n                selectedLine = this.getSelectedLineElement();\n            }\n\n            if (selectedLine.length === 1) {\n                $content.insertBefore(selectedLine);\n            } else {\n                this.element.find(\".dcpArray__body\").append($content);\n            }\n            this._indexLine();\n            this.redrawLabel();\n            this._activateRowLimits();\n\n            return $content;\n        },\n\n        /**\n         * Disable/Enable Add/copy button\n         */\n        _activateRowLimits: function wArray_activateRowLimits() {\n            var currentWidget = this;\n            if (this.options.renderOptions.rowMaxLimit >= 0) {\n                if (this.options.nbLines >= this.options.renderOptions.rowMaxLimit) {\n                    this.element.find(\".dcpArray__add, .dcpArray__copy\").prop(\"disabled\", true);\n                    this.element.find(\".dcpArray__button--add, .dcpArray__button--copy\").each(function dcpArray_initLine() {\n                        var $this = $(this);\n                        if (!$this.data(\"originalTitle\")) {\n                            $this.data(\"originalTitle\", $this.attr(\"title\"));\n                        }\n                        // reset tooltip\n                        $this.tooltip(\"hide\").data(\"bs.tooltip\", null);\n\n                        $this.attr(\"title\", Mustache.render(currentWidget.options.labels.limitMaxMessage || \"\",\n                            {limit: currentWidget.options.renderOptions.rowMaxLimit}\n                        ));\n                    });\n                } else {\n                    this.element.find(\".dcpArray__add, .dcpArray__copy\").prop(\"disabled\", false);\n                    this.element.find(\".dcpArray__button--add, .dcpArray__button--copy\").each(function dcpArray_initLine() {\n                        // reset tooltip\n                        $(this).tooltip(\"hide\").data(\"bs.tooltip\", null);\n                        $(this).attr(\"title\", $(this).data(\"originalTitle\"));\n                    });\n                }\n            }\n\n            if (this.options.renderOptions.rowMinLimit >= 0) {\n                if (this.options.nbLines <= this.options.renderOptions.rowMinLimit) {\n                    this.element.find(\".dcpArray__content__toolCell__delete button\").prop(\"disabled\", true);\n                    this.element.find(\".dcpArray__content__toolCell__delete\").each(function dcpArray_initLine() {\n                        if (!$(this).data(\"originalTitle\")) {\n                            $(this).data(\"originalTitle\", $(this).attr(\"title\"));\n                        }\n                        // reset tooltip\n                        $(this).tooltip(\"hide\").data(\"bs.tooltip\", null);\n\n                        $(this).attr(\"title\", Mustache.render(currentWidget.options.labels.limitMinMessage || \"\",\n                            {limit: currentWidget.options.renderOptions.rowMinLimit}\n                        ));\n                    });\n                } else {\n                    this.element.find(\".dcpArray__content__toolCell__delete button\").prop(\"disabled\", false);\n                    this.element.find(\".dcpArray__content__toolCell__delete\").each(function dcpArray_initLine() {\n                        // reset tooltip\n                        $(this).tooltip(\"hide\").data(\"bs.tooltip\", null);\n                        $(this).attr(\"title\", $(this).data(\"originalTitle\"));\n                    });\n                }\n            }\n        },\n\n        addLine: function dcpArrayaddLine(lineNumber, options) {\n            return (new Promise(_.bind(function dcpArrayaddLine_promise(resolve, reject) {\n                var $content = this._addNewLine(lineNumber, options);\n                if ($content) {\n                    options = _.defaults(options || {}, {\"silent\": false, \"needAddValue\": false});\n                    if (options.silent !== true) {\n                        this._trigger(\"lineAdded\", {}, {\n                            line: lineNumber,\n                            element: $content,\n                            needAddValue: options.needAddValue,\n                            resolve: resolve,\n                            reject: reject\n                        });\n                    }\n                }\n            }, this)));\n\n        },\n\n        copyLine: function dcpArraycopyLine(lineNumber, options) {\n            return (new Promise(_.bind(function dcpArrayaddLine_promise(resolve, reject) {\n                var $content = this._addNewLine(lineNumber, options);\n                if ($content) {\n                    this._trigger(\"lineAdded\", {}, {line: lineNumber, element: $content, copyValue: true});\n                }\n            }, this)));\n        },\n\n        removeLine: function dcpArrayremoveLine(line, options) {\n            options = options || {};\n            this.element.find(\"[data-line=\" + line + \"]\").remove();\n            this._indexLine();\n            if (options.silent !== true) {\n                this._trigger(\"lineRemoved\", {}, {line: line});\n            }\n            this.redrawLabel();\n            this._activateRowLimits();\n        },\n\n        _destroy: function dcpArray_destroy() {\n            var tbody = this.element.find('tbody');\n            if (tbody && tbody.data(\"kendoDropTargetArea\")) {\n                tbody.data(\"kendoDropTargetArea\").destroy();\n            }\n            if (tbody && tbody.data(\"kendoDraggable\")) {\n                tbody.data(\"kendoDraggable\").destroy();\n            }\n            this.element.empty();\n            this._super();\n        },\n\n        _indexLine: function dcpArray_indexLine() {\n            var i = 0;\n            this.element.find(\".dcpArray__content__line\").each(\n                function numeroteLine() {\n                    $(this).attr(\"data-line\", i).data(\"line\", i);\n                    i += 1;\n                }\n            );\n            this.options.nbLines = i;\n        },\n\n        _unSelectLines: function dcpArray_unSelectLines() {\n            this.element.find(\".dcpArray__content__toolCell__check .fa-check\").hide();\n            this.element.find(\".dcpArray__content__line--selected\").removeClass(\"dcpArray__content__line--selected active\");\n        },\n        /**\n         * Display tooltip an error message\n         *\n         * @param message string or array of [{message:, index:}, ...]\n         */\n        setError: function dcpArray_SetError(message) {\n            var scope = this;\n            var $target = this.element.find(\".dcpArray__content table.table\");\n            if (message) {\n                $target.tooltip({\n                    placement: \"top\",\n                    trigger: \"manual\",\n                    animation: false,\n                    html: true,\n                    title: function dcpArray_computeTitleError()\n                    {\n                        var rawMessage = $('<div/>').text(message).html();\n                        return '<div>' + '<span title=\"' + scope.options.labels.closeErrorMessage + '\" class=\"btn fa fa-times button-close-error\"> XY &nbsp;</span>' + scope.options.id +  rawMessage + '</div>';\n                    }\n\n                }).one(\"shown.bs.tooltip\", function wErrorTooltip () {\n                    var tipElement = $(this).data(\"bs.tooltip\").tip;\n                    if (tipElement) {\n                        $(tipElement).addClass(\"has-error\");\n                    }\n                }).tooltip(\"show\").addClass(\"dcpArray--error\");\n            } else {\n                $target.tooltip(\"hide\").removeClass(\"dcpArray--error\");\n\n            }\n        },\n        /**\n         * Get the template of the current attribute\n         *\n         * The template can be in the options or in a global var of dcp namespace (initiated by require for widget)\n         *\n         * @param key\n         * @returns string\n         * @private\n         */\n        _getTemplate: function dcpArray_getTemplate(key) {\n            if (this.options.templates && this.options.templates[key]) {\n                return this.options.templates[key];\n            }\n            if (window.dcp && window.dcp.templates && window.dcp.templates[this.getType()] && window.dcp.templates[this.getType()][key]) {\n                return window.dcp.templates[this.getType()][key];\n            }\n            if (window.dcp && window.dcp.templates && window.dcp.templates[\"default\"] && window.dcp.templates[\"default\"][key]) {\n                return window.dcp.templates[\"default\"][key];\n            }\n            throw new Error(\"Unknown template  \" + key + \"/\" + this.options.type);\n\n        },\n\n        getType: function dcpArray_getType() {\n            return \"array\";\n        }\n\n    });\n\n    return $.fn.dcpArray;\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/array/wArray.js","/*global define, _super, kendoColorPicker*/\n\n(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'underscore',\n            'mustache',\n            'dcpDocument/widgets/attributes/text/wText'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window._, window.Mustache);\n    }\n}(window, function require_wColor($, _, Mustache) {\n    'use strict';\n\n    $.widget(\"dcp.dcpColor\", $.dcp.dcpText, {\n\n        options :     {\n            type :          \"color\",\n\n            renderOptions : {\n                kendoColorConfiguration : {\n                    buttons:false\n                }\n            },\n            labels : {\n            }\n        },\n        /**\n         * The kendoColorPicker widget instance\n         */\n        kendoWidget : null,\n\n        _initDom : function wColorInitDom() {\n            this.element.addClass(\"dcpAttribute__content\");\n            this.element.attr(\"data-type\", this.getType());\n            this.element.attr(\"data-attrid\", this.options.id);\n            if (parseFloat(this.options.attributeValue.displayValue) === parseFloat(this.options.attributeValue.value)) {\n                this.options.attributeValue.displayValue = this.formatNumber(this.options.attributeValue.value);\n            }\n\n            //noinspection JSPotentiallyInvalidConstructorUsage,JSAccessibilityCheck\n            $.dcp.dcpAttribute.prototype._initDom.apply(this, []);\n\n            this.kendoWidget = this.element.find(\".dcpAttribute__value--edit\");\n            if (this.kendoWidget) {\n                if (this.options.hasAutocomplete) {\n                    this.activateAutocomplete(this.kendoWidget);\n                } else {\n                    this._activateColor(this.kendoWidget);\n\n                    if (this.kendoWidget.hasClass(\"form-control\")) {\n                        this.element.find(\".k-colorpicker\").addClass(\"form-control\");\n                    }\n                }\n            }\n            if (this.element.find(\".dcpAttribute__content__buttons button\").length === 0) {\n                this.element.find(\".k-picker-wrap\").\n                    addClass(\"dcpAttribute__content__nobutton\");\n            }\n            var colorTag = $(\"<div></div>\", { \"class\": \"dcpAttribute__content__color__tag\"});\n            colorTag.css('background-color', this.options.attributeValue.value);\n            this.element.find(\".dcpAttribute__value--read\").prepend(colorTag);\n        },\n\n        _initChangeEvent : function wcolInitChangeEvent() {\n            // set by widget if no autocomplete\n            if (this.options.hasAutocomplete) {\n                this._super();\n            }\n        },\n\n        setValue : function wcolSetValue(value) {\n            // this._super.(value);\n            // Don't call dcpText::setValue()\n\n            value = _.clone(value);\n\n            if (_.has(value, \"value\") && !_.has(value, \"displayValue\")) {\n                value.displayValue = this.formatNumber(value.value);\n            }\n\n            $.dcp.dcpAttribute.prototype.setValue.apply(this, [value]);\n\n            if (this.getMode() === \"write\") {\n                var originalValue = this.kendoWidget.data(\"kendoColorPicker\").value();\n                // : explicit lazy equal\n                //noinspection JSHint\n                if (originalValue != value.value) {\n                    this.kendoWidget.data(\"kendoColorPicker\").value(value.value);\n                    // Modify value only if different\n                    this.flashElement();\n                }\n            } else if (this.getMode() === \"read\") {\n                this.getContentElements().text(value.displayValue);\n                this.element.find(\".dcpAttribute__value--read\").css(\"border-color\", value.value);\n            } else {\n                throw new Error(\"Attribute \" + this.options.id + \" unkown mode \" + this.getMode());\n            }\n        },\n\n        _activateColor : function wcolActivateNumber(inputValue) {\n            return inputValue.kendoColorPicker(this.getKendoColorOptions());\n        },\n\n        formatNumber : function wcolFormatNumber(value) {\n            return kendo.toString(value, this.getKendoColorOptions().format);\n        },\n\n        /**\n         * Get kendo option from normal options and from renderOptions.kendoNumeric\n         * @returns {*}\n         */\n        getKendoColorOptions : function wColorgetKendoColorOptions() {\n            var scope = this,\n                kendoOptions = {},\n                defaultOptions = {\n                    change :   function wColor_onchange() {\n                        // Need to set by widget to honor decimals option\n                        scope.setValue({value : this.value()});\n                    }\n                };\n\n            if (_.isObject(scope.options.renderOptions.kendoColorConfiguration)) {\n                kendoOptions = scope.options.renderOptions.kendoColorConfiguration;\n            }\n            return _.extend(defaultOptions, kendoOptions);\n        },\n\n        getType : function wcolGetType() {\n            return \"color\";\n        },\n\n        testValue : function wcolTestValue(value) {\n            this._super(value);\n            if (!_.isNumber(value.value)) {\n                throw new Error(\"The value must be a number for (attrid : \" + this.options.id + \")\");\n            }\n        },\n\n        close : function wColor_close() {\n            if (this.kendoWidget && this.kendoWidget.data(\"kendoColorPicker\")) {\n                this.kendoWidget.data(\"kendoColorPicker\").close();\n            }\n            this._super();\n        },\n\n        _destroy : function _destroy() {\n            if (this.kendoWidget && this.kendoWidget.data(\"kendoColorPicker\")) {\n                this.kendoWidget.data(\"kendoColorPicker\").destroy();\n            }\n            this._super();\n        }\n\n    });\n\n    return $.fn.dcpColor;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/color/wColor.js","/*global define, _super*/\n\n(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'underscore',\n            'mustache',\n            'dcpDocument/widgets/attributes/text/wText',\n            'kendo-culture-fr'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window._, window.Mustache);\n    }\n}(window, function wDate($, _, Mustache)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpDate\", $.dcp.dcpText, {\n\n        options: {\n            type: \"date\",\n            minDate: new Date(1700, 0, 1),\n            renderOptions: {\n                kendoDateConfiguration: {\n                    parseFormats: [\"yyyy-MM-dd\"],\n                    format: null\n                }\n            },\n            labels: {\n                invalidDate: \"Invalid Date\"\n            }\n        },\n\n        kendoWidgetClass: \"kendoDatePicker\",\n\n        _initDom: function wDateInitDom()\n        {\n\n            if (this.options.renderOptions.kendoDateConfiguration.format) {\n                this.options.attributeValue.displayValue = this.formatDate(this.parseDate(this.options.attributeValue.value));\n            }\n            if (this.getMode() === \"read\") {\n                if (this.options.renderOptions.format) {\n                    this.options.attributeValue.formatValue = Mustache.render(this.options.renderOptions.format || \"\",\n                        this.options.attributeValue);\n                }\n            }\n            this.element.addClass(\"dcpAttribute__content\");\n            this.element.attr(\"data-type\", this.getType());\n            this.element.attr(\"data-attrid\", this.options.id);\n            //noinspection JSPotentiallyInvalidConstructorUsage,JSAccessibilityCheck\n            $.dcp.dcpAttribute.prototype._initDom.apply(this, []);\n\n            this.kendoWidget = this.element.find(\".dcpAttribute__value--edit\");\n\n            if (this.kendoWidget.length) {\n                if (this.options.hasAutocomplete) {\n                    this.activateAutocomplete(this.kendoWidget);\n                } else {\n                    this._activateDate(this.kendoWidget);\n                }\n            }\n\n            if (this.element.find(\".dcpAttribute__content__buttons button\").length === 0) {\n                this.element.find(\".k-picker-wrap\").addClass(\"dcpAttribute__content__nobutton\");\n            }\n        },\n\n        _initChangeEvent: function wDate_initChangeEvent()\n        {\n            // set by widget if no autocomplete\n            if (this.options.hasAutocomplete) {\n                this._super();\n            }\n        },\n\n        setValue: function wDateSetValue(value)\n        {\n            // this._super.(value);\n            // Don't call dcpText::setValue()\n\n            var originalValue, originalDate;\n            value = _.clone(value);\n            if (_.has(value, \"value\") && !_.has(value, \"displayValue\")) {\n                value.displayValue = this.formatDate(this.parseDate(value.value));\n            } else {\n                if (this.options.renderOptions.kendoDateConfiguration.format) {\n                    value.displayValue = this.formatDate(this.parseDate(value.value));\n                }\n            }\n\n            //noinspection JSPotentiallyInvalidConstructorUsage\n            $.dcp.dcpAttribute.prototype.setValue.call(this, value);\n\n            if (this.getMode() === \"write\") {\n                originalValue = this.convertDateToPseudoIsoString(this.kendoWidget.data(this.kendoWidgetClass).value());\n                // : explicit lazy equal\n                //noinspection JSHint, EqualityComparisonWithCoercionJS\n                if (originalValue != value.value) {\n                    if (value.value) {\n                        originalDate = new Date(value.value);\n                        if (!isNaN(originalDate.getTime())) {\n                            this.kendoWidget.data(this.kendoWidgetClass).value(originalDate);\n                        }\n                    } else {\n                        this.getContentElements().val('');\n                    }\n                    // Modify value only if different\n                    if (originalValue || value.value) {\n                        this.flashElement();\n                    }\n                }\n            } else\n                if (this.getMode() === \"read\") {\n                    this.getContentElements().text(value.displayValue);\n                } else {\n                    throw new Error(\"Attribute \" + this.options.id + \" unkown mode \" + this.getMode());\n                }\n        },\n\n        _activateDate: function wDateSetValueActivateDate(inputValue)\n        {\n            var currentWidget = this;\n            var kOptions = this.getKendoOptions();\n\n            kOptions.change = function wDateChange()\n            {\n                if (this.value() !== null) {\n                    // only valid date are setted\n                    // wrong date are set by blur event\n                    var isoDate = currentWidget.convertDateToPseudoIsoString(this.value());\n                    // Need to set by widget to use raw date\n                    currentWidget.setValue({value: isoDate, displayValue: inputValue.val()});\n                }\n            };\n\n            inputValue.kendoDatePicker(kOptions);\n\n            // Workaround for date paste : change event is not trigger in this case\n            inputValue.on(\"paste\" + this.eventNamespace, function wDatePaste()\n            {\n                var $input = $(this);\n                _.defer(function wDatePasteAfter()\n                {\n                    // set Value after\n                    inputValue.data(\"kendoDatePicker\").value($input.val().trim());\n                    inputValue.data(\"kendoDatePicker\").trigger(\"change\");\n                });\n            });\n\n            this._controlDate(inputValue);\n        },\n\n        _controlDate: function wDateControlDate(inputValue)\n        {\n            var currentWidget = this;\n            inputValue.on('blur' + this.eventNamespace, function validateDate(/*event*/)\n            {\n                var dateValue = $(this).val().trim();\n\n                if (currentWidget.invalidDate) {\n                    currentWidget.setError(null); // clear Error before\n                    currentWidget.invalidDate = false;\n                }\n\n                currentWidget._setVisibilitySavingMenu(\"visible\");\n\n                if (dateValue) {\n                    if (!currentWidget.parseDate(dateValue)) {\n\n                        currentWidget._setVisibilitySavingMenu(\"disabled\");\n                        _.defer(function wDateFocus()\n                        {\n                            currentWidget._getFocusInput().focus();\n                        });\n                        currentWidget.invalidDate = true;\n                        currentWidget.setError(currentWidget.options.labels.invalidDate);\n                    }\n                }\n            });\n        },\n\n        formatDate: function wDateFormatDate(value)\n        {\n            if (this.options.renderOptions.kendoDateConfiguration.format) {\n                return kendo.toString(value, this.options.renderOptions.kendoDateConfiguration.format);\n            }\n            return kendo.toString(value, \"d\");\n        },\n\n        parseDate: function wDateParseDate(value)\n        {\n            var parseFormat = this.options.renderOptions.kendoDateConfiguration.parseFormats;\n            var goodDate = kendo.parseDate(value);\n            if (goodDate) {\n                return goodDate;\n            }\n            if (this.options.renderOptions.kendoDateConfiguration.format) {\n                parseFormat.push(this.options.renderOptions.kendoDateConfiguration.format);\n            }\n            return kendo.parseDate(value, parseFormat);\n        },\n\n        convertDateToPseudoIsoString: function wDateconvertDateToPseudoIsoString(dateObject)\n        {\n            if (dateObject && _.isDate(dateObject)) {\n                return dateObject.getFullYear() + '-' + this.padNumber(dateObject.getMonth() + 1) + '-' + this.padNumber(dateObject.getDate());\n            }\n            return '';\n        },\n\n        padNumber: function wDatePadNumber(number)\n        {\n            if (number < 10) {\n                return '0' + number;\n            }\n            return number;\n        },\n\n        /**\n         * Get kendo option from normal options and from renderOptions.kendoNumeric\n         * @returns {*}\n         */\n        getKendoOptions: function wDategetKendoOptions()\n        {\n            var currentWidget = this,\n                kendoOptions = {},\n                defaultOptions = {\n                    min: this.options.minDate\n                };\n\n            if (_.isObject(currentWidget.options.renderOptions.kendoDateConfiguration)) {\n                kendoOptions = currentWidget.options.renderOptions.kendoDateConfiguration;\n            }\n\n            return _.extend(defaultOptions, kendoOptions);\n        },\n\n        close: function wDate_close()\n        {\n            if (this.kendoWidget.data(this.kendoWidgetClass)) {\n                this.kendoWidget.data(this.kendoWidgetClass).close();\n            }\n            return this._super();\n        },\n\n        _destroy: function wDateDestroy()\n        {\n            if (this.kendoWidget.data(this.kendoWidgetClass)) {\n                this.kendoWidget.data(this.kendoWidgetClass).destroy();\n            }\n            this._super();\n        }\n    });\n\n    return $.fn.dcpDate;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/date/wDate.js","/*global define*/\n\n(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'underscore',\n            'mustache',\n            'dcpDocument/widgets/attributes/wAttribute'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window._, window.Mustache);\n    }\n}(window, function require_wDocid($, _, Mustache)\n{\n    'use strict';\n\n    //noinspection JSUnusedGlobalSymbols\n    $.widget(\"dcp.dcpDocid\", $.dcp.dcpAttribute, {\n\n        options: {\n            type: \"docid\",\n            renderOptions: {\n                kendoMultiSelectConfiguration: {\n                    minLength: 1,\n                    itemTemplate: '<div class=\"dcpAutocomplete\"><span class=\"k-state-default\">#= data.title#</span>' +\n                    '#if (data.message) {#' +\n                    '<div class=\"dcpAutocomplete--#= data.message.type#\">#: data.message.contentText# #= data.message.contentHtml#</div>' +\n                    '#}# </div>'\n                },\n                kendoComboBoxConfiguration: {\n                    template: '<div class=\"dcpAutocomplete\"><span class=\"k-state-default\">#= data.title#</span>' +\n                    '#if (data.message) {#' +\n                    '<div class=\"dcpAutocomplete--#= data.message.type#\">#: data.message.contentText# #= data.message.contentHtml#</div>' +\n                    '#}# </div>'\n                },\n                editDisplay: \"autoCompletion\"\n            },\n            labels: {\n                allSelectedDocument: \"No more matching\"\n            }\n        },\n\n        kendoWidget: null,\n\n        _initDom: function wDocidInitDom()\n        {\n            var scope = this;\n            this.element.addClass(\"dcpAttribute__content\");\n            this.element.attr(\"data-type\", this.getType());\n            this.element.attr(\"data-attrid\", this.options.id);\n\n            if (this._isMultiple()) {\n                this.options.attributeValues = _.toArray(this.options.attributeValue);\n                this.options.isMultiple = true;\n            }\n\n            if (this.getMode() === \"read\") {\n                if (this.options.renderOptions.format) {\n                    if (this._isMultiple()) {\n                        _.each(this.options.attributeValues, function wDocidinitDomFormat(singleValue)\n                        {\n                            singleValue.formatValue = Mustache.render(scope.options.renderOptions.format,\n                                singleValue);\n                        });\n                    } else {\n                        this.options.attributeValue.formatValue = Mustache.render(this.options.renderOptions.format,\n                            this.options.attributeValue);\n                    }\n                }\n                if (this.options.renderOptions.documentIconSize) {\n                    var reSize = /sizes\\/([0-9xcfs]+)/;\n                    var noIcon = ([\"0\", \"0x0\", \"x0\"].indexOf(this.options.renderOptions.documentIconSize) !== -1);\n                    if (this._isMultiple()) {\n                        _.each(this.options.attributeValues, function wDocidResizeIcons(singleValue)\n                        {\n                            if (noIcon) {\n                                singleValue.icon = null;\n                            } else\n                                if (singleValue.icon) {\n                                    singleValue.icon = singleValue.icon.replace(reSize, \"sizes/\" + scope.options.renderOptions.documentIconSize);\n                                }\n                        });\n                    } else\n                        if (noIcon) {\n                            this.options.attributeValue.icon = null;\n                        } else\n                            if (this.options.attributeValue.icon) {\n                                this.options.attributeValue.icon = this.options.attributeValue.icon.replace(reSize, \"sizes/\" + this.options.renderOptions.documentIconSize);\n                            }\n                }\n\n                //noinspection JSPotentiallyInvalidConstructorUsage,JSAccessibilityCheck\n                $.dcp.dcpAttribute.prototype._initDom.apply(this, []);\n\n            } else\n                if (this.getMode() === \"write\") {\n                    //noinspection JSPotentiallyInvalidConstructorUsage,JSAccessibilityCheck\n                    $.dcp.dcpAttribute.prototype._initDom.apply(this, []);\n                    this.kendoWidget = this.element.find(\".dcpAttribute__value--docid\");\n                    if (this.options.renderOptions.placeHolder) {\n                        this.options.renderOptions.kendoMultiSelectConfiguration.placeholder = this.options.renderOptions.placeHolder;\n                    }\n                    if (this._isMultiple()) {\n                        this._decorateMultipleValue(this.kendoWidget);\n                    } else {\n                        switch (this.options.renderOptions.editDisplay) {\n                            case \"singleMultiple\" :\n                                this._decorateSingleValue(this.kendoWidget);\n\n                                break;\n                            case \"autoCompletion\":\n                                this.singleCombobox(this.kendoWidget);\n                                break;\n                            case \"list\":\n                                this.singleDropdown(this.kendoWidget);\n                                break;\n                            default:\n                                this.singleCombobox(this.kendoWidget);\n                        }\n                    }\n                    this._updateCreateButton();\n                }\n        },\n\n        _updateCreateButton: function wDocid_updateCreateButton()\n        {\n            var currentValue = this.options.attributeValue;\n            var buttonsConfig = this.options.renderOptions.buttons;\n\n            this.element.find(\".dcpAttribute__content__button--create\").each(function wDocid_updateCreateButtonEach()\n            {\n                var $button = $(this);\n                var buttonIndex = $button.data(\"index\");\n                var buttonConfig = buttonsConfig[buttonIndex];\n\n                $button.prop(\"disabled\", false);\n                if (currentValue.value) {\n                    $button.html(buttonConfig.renderHtmlContent + buttonConfig.htmlEditContent);\n                    // @TODO Find an efficient way to verify edit access of target\n                    /*\n                     if (!currentValue.value) {\n                     $button.prop(\"disabled\", true);\n                     }*/\n                } else {\n                    // also when mutiple always create\n                    $button.html(buttonConfig.renderHtmlContent + buttonConfig.htmlCreateContent);\n                }\n            });\n        },\n\n        /**\n         * Init event when a hyperlink is associated to the attribute\n         *\n         * @protected\n         */\n        _initLinkEvent: function wDocidInitLinkEvent()\n        {\n            this._super();\n            var htmlLink = this.getLink();\n            var currentWidget = this;\n            if (htmlLink) {\n                this.element.on(\"click.\" + this.eventNamespace, '.dcpAttribute__content__link', function wDocidInitLinkOnClick(event)\n                {\n                    var $this = $(this);\n                    if (htmlLink.target === \"_render\") {\n                        event.preventDefault();\n                        currentWidget._trigger(\"fetchdocument\", event, {\n                            \"index\": $this.data(\"index\"),\n                            \"tableLine\": $this.closest(\".dcpArray__content__line\").data(\"line\")\n                        });\n                    }\n                });\n            }\n            return this;\n        },\n        _initButtonsEvent: function _initButtonsEvent()\n        {\n            var currentWidget = this;\n            this._super();\n\n            this.element.on(\"click\" + this.eventNamespace, \".dcpAttribute__content__button--create\", function wAttributeButtonClick(event)\n            {\n                var buttonsConfig = currentWidget.options.renderOptions.buttons;\n                var $button = $(this);\n                var buttonIndex = $button.data(\"index\");\n                var buttonConfig = buttonsConfig[buttonIndex];\n\n                currentWidget._trigger(\"externalLinkSelected\", event, {\n                    target: event.target,\n                    eventId: \"attribute.createDocumentRelation\",\n                    index: currentWidget._getIndex(),\n                    buttonConfig: buttonConfig\n                });\n            });\n            this.element.tooltip({\n                selector: \".dcpAttribute__content__buttons button\",\n                placement: \"top\",\n                trigger: \"hover\",\n                html: true,\n                title: function wAttributeGetButtonTitle()\n                {\n                    var title = $(this).data(\"title\");\n                    var attrValue = currentWidget.getValue();\n                    return Mustache.render(title || \"\", attrValue);\n                },\n                container: this.element\n            });\n\n            return this;\n        },\n        /**\n         * Define inputs for focus\n         * @protected\n         */\n        _getFocusInput: function wDocidFocusInput()\n        {\n            return this.element.find('input');\n        },\n\n        /**\n         * Get kendo option from normal options and from renderOptions.kendoMultiSelectConfiguration\n         * @returns {*}\n         */\n        getKendoOptions: function wDocidGetKendoOptions(inputValue, extraOptions)\n        {\n            var currentWidget = this;\n            var options = {\n                autoBind: false,\n                clearButton: false,\n                dataTextField: \"docTitle\",\n                dataValueField: \"docId\",\n                highlightFirst: true,\n                //value: values,\n                dataSource: {\n                    // type: \"json\",\n                    serverFiltering: true,\n                    transport: {\n                        read: function wDocidSelectRead(options)\n                        {\n                            currentWidget._hasBeenRequested = true;\n                            options.data.index = currentWidget._getIndex();\n                            return currentWidget.options.autocompleteRequest.call(null, options, currentWidget._getIndex());\n                        }\n                    },\n                    schema: {\n                        // Add already recorded data to items\n                        data: function wDocidSelectSchema(items)\n                        {\n                            //Add new elements\n                            _.each(items, function wDocidDataCompose(currentItem)\n                            {\n                                if (currentItem.values && currentItem.values[currentWidget.options.id]) {\n                                    currentItem.docId = currentItem.values[currentWidget.options.id].value;\n                                    currentItem.docTitle = currentItem.values[currentWidget.options.id].displayValue;\n                                }\n                            });\n\n                            //Suppress multiple items\n                            return _.uniq(items, false, function wDocidDataUniq(currentItem)\n                            {\n                                return currentItem.docId || currentItem.message;\n                            });\n                        }\n                    }\n                },\n                select: function kendoDocidSelect(event)\n                {\n                    if (!event.item || _.isUndefined(event.item.index())) {\n                        return;\n                    }\n\n                    var valueIndex = currentWidget._getIndex();\n                    var dataItem = this.dataSource.at(event.item.index()).toJSON();\n\n                    if (dataItem.message) {\n                        event.preventDefault();\n                    } else {\n                        //The object returned by dataSource.at are internal kendo object so I clean it with toJSON\n\n                        _.defer(function wDocidChangeOnSelect()\n                        {\n                            // Change others attributes designed by help returns\n                            currentWidget._trigger(\"changeattrsvalue\", event, {\n                                dataItem: dataItem,\n                                valueIndex: valueIndex\n                            }, currentWidget._getIndex());\n                        });\n                    }\n\n                },\n                change: function kendoChangeSelect(event)\n                {\n                    // set in case of delete item\n                    var oldValues = currentWidget.options.attributeValue;\n                    var displayValue;\n                    var newValues = [];\n                    var kMultiSelect = this;\n                    var widgetValue = this.value();\n\n                    if (_.isArray(widgetValue)) {\n                        _.each(widgetValue, function wDocidSelectChange(val)\n                        {\n                            if (!_.isUndefined(val)) {\n                                displayValue = _.where(oldValues, {value: val});\n                                if (displayValue.length === 0) {\n                                    displayValue = _.where(kMultiSelect.dataSource.data(), {docId: val});\n                                    if (displayValue.length > 0) {\n                                        displayValue = displayValue[0].docTitle;\n                                    } else {\n                                        displayValue = \"-\";\n                                    }\n                                } else {\n                                    displayValue = displayValue[0].displayValue;\n                                }\n\n                                newValues.push({value: val, displayValue: displayValue});\n                            }\n                        });\n\n                        if (!currentWidget._isMultiple()) {\n                            if (newValues.length > 0) {\n                                newValues = newValues[0];\n                            } else {\n                                newValues = {value: null, displayValue: \"\"};\n                            }\n                        }\n\n                    } else {\n                        if (widgetValue) {\n                            displayValue = _.where(kMultiSelect.dataSource.data(), {docId: widgetValue});\n                            if (displayValue.length > 0) {\n                                displayValue = displayValue[0].docTitle;\n                                newValues = {value: widgetValue, displayValue: displayValue};\n                            } else {\n                                newValues = {value: null, displayValue: \"\"};\n                            }\n                        } else {\n                            newValues = {value: null, displayValue: \"\"};\n                        }\n                    }\n\n                    currentWidget.setValue(newValues, event);\n                },\n                open: function wDocidSelectOpen(event)\n                {\n                    if (currentWidget._hasBeenRequested !== true) {\n                        event.preventDefault();\n                        currentWidget.kendoWidgetObject.search(\"\");\n                    }\n                    this.ul.addClass(\"dcpAttribute__select--docid\");\n                },\n                close: function wDocidSelectClose() {\n                    currentWidget._hasBeenRequested = false;\n                },\n                filtering: function wDocidSelectOpen()\n                {\n                    this._isFiltering = true;\n                },\n                dataBound: function wDocidFilteringNoOne()\n                {\n                    if (this._isFiltering) {\n                        if (this.ul.find(\"li:not(.k-state-selected)\").length === 0 && this.ul.find(\"li.k-state-selected\").length > 0) {\n                            // No one more : display\n                            var $noOne = $('<li class=\"k-item\"/>')\n                                .append('<span class=\"k-state-default\"/>')\n                                .append($('<span class=\"k-state-error dcpAttribute__select--docid-none\"/>')\n                                    .text(currentWidget.options.labels.allSelectedDocument));\n                            this.ul.append($noOne);\n                        }\n                        this._isFiltering = false;\n                    }\n                }\n            };\n\n            if (extraOptions) {\n                options = _.extend(options, extraOptions);\n            }\n            if (this.options.renderOptions.kendoComboBoxConfiguration) {\n                options = _.extend(this.options.renderOptions.kendoComboBoxConfiguration, options);\n            }\n\n            return options;\n        },\n\n        /**\n         * When docid is not multiple, it is a multiselect limited to one element\n         * @param inputValue select  element\n         */\n        _decorateSingleValue: function wDocidDecorateSingleValue(inputValue)\n        {\n\n            this.options.attributeValues = [];\n            if (this.options.attributeValue) {\n                this.options.attributeValues.push(this.options.attributeValue);\n            }\n\n            this._decorateMultipleValue(inputValue, {\n                    maxSelectedItems: 1\n                }\n            );\n\n            if (this.options.attributeValue && this.options.attributeValue.value !== null) {\n                this.element.find('.dcpAttribute__value--docid--button').attr(\"disabled\", \"disabled\");\n                this.element.find('input.k-input').attr(\"disabled\", \"disabled\");\n\n            }\n        },\n\n        _decorateMultipleValue: function wDocidDecorateMultipleValue(inputValue, extraOptions)\n        {\n            var options = this.getKendoOptions(inputValue, {\n                filter: \"contains\"\n            });\n            var currentWidget = this,\n                values = _.map(this.options.attributeValues, function wDocidSelectMap(val)\n                {\n                    var info = {};\n                    info.docTitle = val.displayValue;\n                    info.docId = val.value;\n                    return info;\n                });\n\n            if (extraOptions) {\n                options = _.extend(options, extraOptions);\n            }\n\n            if (this.options.renderOptions.kendoMultiSelectConfiguration) {\n                options = _.extend(this.options.renderOptions.kendoMultiSelectConfiguration, options);\n            }\n            //noinspection JSUnresolvedFunction\n            inputValue.kendoMultiSelect(options);\n            this.kendoWidgetObject = inputValue.data(\"kendoMultiSelect\");\n            this.kendoWidgetObject.dataSource.data(values);\n\n            if (this.options.attributeValues.value !== null) {\n                // Init kendo widget with identifier array\n                this.kendoWidgetObject.value(_.filter(_.map(values, function wDocidInitValue(item)\n                {\n                    return item.docId;\n                }), function wDocidFilterEmpty(item)\n                {\n                    return !_.isEmpty(item);\n                }));\n            }\n            this.element.on(\"click\" + this.eventNamespace, '.dcpAttribute__value--docid--button', function wDocidSelectClick(event)\n            {\n                event.preventDefault();\n                currentWidget.kendoWidgetObject.search(\"\");\n            });\n\n            this.element.find('.dcpAttribute__value--docid--button[title]').tooltip({\n                html: true\n            });\n        },\n\n        singleDropdown: function wDocidSingleDropdown(inputValue)\n        {\n            var kendoOptions = this.getKendoOptions(inputValue);\n\n            this.kendoWidgetObject = inputValue.kendoDropDownList(kendoOptions).data(\"kendoDropDownList\");\n\n            this.kendoWidgetObject.list.find(\".k-list-optionlabel\").addClass(\"placeholder--clear\");\n            this.kendoWidgetObject.value(this.options.attributeValue.value);\n            this.element.find(\".dcpAttribute__value--docid--button\").parent().hide();\n        },\n\n        singleCombobox: function wDocidSingleCombobox(inputValue)\n        {\n            var kendoOptions = this.getKendoOptions(inputValue, {\n                filter: \"startswith\" //@TODO use filter option in standard auto complete\n            });\n            var kendoSelect;\n\n            this.kendoWidgetObject = inputValue.kendoComboBox(kendoOptions).data(\"kendoComboBox\");\n            kendoSelect = this.kendoWidgetObject;\n            this.kendoWidgetObject.list.find(\".k-list-optionlabel\").addClass(\"placeholder--clear\");\n\n            if (this.options.attributeValue && this.options.attributeValue.value) {\n                kendoSelect.dataSource.add({\n                    docId: this.options.attributeValue.value,\n                    docTitle: this.options.attributeValue.displayValue\n                });\n            }\n\n            if (this.options.attributeValue.value) {\n                // Init value in kendo only if any : if not call to server is performed\n                this.kendoWidgetObject.value(this.options.attributeValue.value);\n            }\n            this.element.find(\".dcpAttribute__value--docid--button\").parent().hide();\n        },\n\n        /**\n         * Return true if attribut has multiple option\n         * @returns bool\n         */\n        hasMultipleOption: function wDocidHasMultipleOption()\n        {\n            return (this.options.options && this.options.options.multiple === \"yes\");\n        },\n\n        setValue: function wDocidSetValue(value, event)\n        {\n            var newValues;\n            this._super(value, event);\n            if (this.getMode() === \"write\") {\n                if (!this.hasMultipleOption() && this.options.renderOptions.editDisplay === \"singleMultiple\") {\n                    if (!_.isArray(value)) {\n                        if (value.value !== null) {\n                            value = [value];\n                        } else {\n                            value = [];\n                        }\n                    } else\n                        if (value.length === 1 && value.value === null) {\n                            value = [];\n                        }\n                    if (value.length === 0) {\n                        this.element.find('.dcpAttribute__value--docid--button').removeAttr(\"disabled\");\n                        this.element.find('input.k-input').removeAttr(\"disabled\");\n                    } else {\n                        this.element.find('.dcpAttribute__value--docid--button').attr(\"disabled\", \"disabled\");\n                        this.element.find('input.k-input').attr(\"disabled\", \"disabled\");\n                    }\n                }\n\n                if (this.hasMultipleOption() || this.options.renderOptions.editDisplay === \"singleMultiple\") {\n                    newValues = _.map(value, function wDocidMapValue(val)\n                    {\n                        return val.value;\n                    });\n\n                } else {\n                    newValues = value.value;\n                }\n                var kendoSelect = this.kendoWidgetObject;\n                var originalValues = _.clone(kendoSelect.value());\n                // update values in kendo widget\n\n                var dataOri = _.map(_.filter(kendoSelect.dataSource.data(), function wDocIdFilter(item)\n                {\n                    return !_.isEmpty(item.docId);\n                }), function wDocidFilterEmpty(currentElement)\n                {\n                    return {\n                        docId: currentElement.docId,\n                        docTitle: currentElement.docTitle\n                    };\n                });\n\n                if (!_.isArray(value)) {\n                    value = [value];\n                }\n                _.each(value, function wDocidEachData(val)\n                {\n                    var info = {};\n\n                    if (!_.some(dataOri, function wDocidEachUniq(elt)\n                        {\n                            return val && elt.docId === val.value;\n                        })\n                    ) {\n                        // add more static data in dataSource\n                        if (val.value !== null) {\n                            info.docTitle = val.displayValue;\n                            info.docId = val.value;\n                            kendoSelect.dataSource.add(info);\n                        }\n                    }\n                });\n\n                if (!this._isEqual(originalValues, newValues)) {\n                    kendoSelect.value(newValues);\n                    this.flashElement();\n                }\n                this._updateCreateButton();\n\n            } else\n                if (this.getMode() === \"read\") {\n                    this.redraw();\n                } else {\n                    throw new Error(\"Attribute \" + this.options.id + \" unkown mode \" + this.getMode());\n                }\n        },\n\n        _isEqual: function(values1, values2) {\n            var convertToString = function(currentValue) {\n                if (!currentValue || !currentValue.toString) {\n                    currentValue = \"\";\n                }\n                return currentValue.toString();\n            };\n            if (!_.isArray(values1)) {\n                values1 = [values1];\n            }\n            if (!_.isArray(values2)) {\n                values2 = [values2];\n            }\n            values1 = _.filter(_.uniq(_.map(values1, convertToString)), function(value) {return !!value;});\n            values2 = _.filter(_.uniq(_.map(values2, convertToString)), function(value) {return !!value;});\n            return _.isEqual(values1, values2);\n        },\n\n        close: function wDocid_close()\n        {\n            if (this.kendoWidget && this.kendoWidgetObject) {\n                this.kendoWidgetObject.close();\n            }\n        },\n\n        getType: function wDocid_getType()\n        {\n            return \"docid\";\n        },\n\n        _destroy: function wDocid__destroy()\n        {\n            if (this.kendoWidget && this.kendoWidgetObject) {\n                this.kendoWidgetObject.destroy();\n            }\n            $(\".dcpDocid-create-window\").each(function wDocid_destroyWindow()\n            {\n                var kWindow = $(this).data(\"dcpWindow\");\n                if (kWindow) {\n                    kWindow.destroy();\n                }\n            });\n            this._super();\n        }\n\n    });\n\n    return $.fn.dcpDocid;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/docid/wDocid.js","(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'dcpDocument/widgets/attributes/int/wInt'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery);\n    }\n}(window,  function require_double($) {\n    'use strict';\n\n    $.widget(\"dcp.dcpDouble\", $.dcp.dcpInt, {\n\n        options: {\n            type: \"double\",\n            renderOptions : {\n                decimalPrecision : null, // unlimited precision\n                numberFormat :  '#,#.######################'\n            }\n        },\n\n        _initDom: function wDoubleInitDom() {\n            if (this.options.renderOptions.decimalPrecision !== null && this.options.renderOptions.decimalPrecision >= 0) {\n                // view decimal precision\n                this.options.renderOptions.numberFormat = '#,#.' ;\n                for (var idx=0;idx<this.options.renderOptions.decimalPrecision; idx++) {\n                    this.options.renderOptions.numberFormat += '0';\n                }\n            }\n\n            this._super();\n        },\n        /**\n         * Get kendo option from normal options and from renderOptions.kendoNumeric\n         * @returns {*}\n         */\n        getKendoNumericOptions: function wDoubleGetKendoNumericOptions () {\n            var options=this._super(); // get from wInt\n            //Limits are linked to this bug => https://github.com/telerik/kendo-ui-core/issues/423\n            if (options.max === null) {\n                options.max = 9.99999e19;\n            }\n            if (options.min === null) {\n                options.min = -9.9999e19;\n            }\n            if (this.options.renderOptions.decimalPrecision !== null) {\n                options.decimals = this.options.renderOptions.decimalPrecision;\n            } else {\n                options.decimals = 20;\n            }\n            return options;\n        },\n\n        getType: function wDoubleGetType () {\n            return \"double\";\n        }\n\n    });\n\n    return $.fn.dcpDouble;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/double/wDouble.js","/*global define */\n(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'underscore',\n            'mustache',\n            'dcpDocument/widgets/attributes/wAttribute'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window._, window.Mustache);\n    }\n}(window, function require_wenum($, _, Mustache, dcpAttribute)\n{\n    'use strict';\n\n    var localeCompareSupportsLocales = (function testLocaleCompareSupportsLocales()\n    {\n        try {\n            'foo'.localeCompare('bar', 'i');\n        } catch (e) {\n            return e.name === 'RangeError';\n        }\n        return false;\n    })();\n\n    $.widget(\"dcp.dcpEnum\", $.dcp.dcpAttribute, {\n\n        options: {\n            type: \"enum\",\n            sourceValues: [], // [{key:\"the key\", label:\"the label\"}, ...}]\n            sourceUri: null, // when enum definition is dynamically get by server request\n            labels: {\n                invalidEntry: \"Invalid Entry\",\n                invertSelection: \"Click to answer {{displayValue}}\",\n                selectMessage: 'Select',\n                unselectMessage: 'UnSelect',\n                chooseAnotherChoice: \"Choose another choice\",\n                selectAnotherChoice: \"Select choice\",\n                displayOtherChoice: \"** {{value}} **\"\n            },\n            renderOptions: {\n                kendoDropDownConfiguration: {\n                    filter: \"none\",\n                    autoBind: true\n                },\n                kendoComboBoxConfiguration: {\n                    filter: \"startswith\"\n                },\n                kendoMultiSelectConfiguration: {\n                    filter: \"startswith\"\n                },\n                editDisplay: \"list\", // possible values are [\"list', 'vertical', 'horizontal', 'autoCompletion']'\n                useFirstChoice: false,\n                useSourceUri: false,\n                useOtherChoice: false,\n                placeHolder: 'Select', // Message to display when no useFirstChoice is true and no value selected\n                orderBy: false\n            }\n        },\n        _initDom: function wEnumInitDom()\n        {\n            var currentWidget = this;\n            if (this.getMode() === \"write\" &&\n                this.options.renderOptions &&\n                this.options.renderOptions.orderBy) {\n                switch (this.options.renderOptions.orderBy) {\n                    case 'key':\n                        if (this.options.sourceValues && this.options.sourceValues.sort) {\n                            this.options.sourceValues = this.options.sourceValues.sort(function wEnum_initDomSortKey(a, b)\n                            {\n                                if (a.key === b.key) {\n                                    return 0;\n                                }\n                                return (a.key < b.key) ? -1 : 1;\n                            });\n                        }\n                        break;\n                    case 'label':\n                        if (this.options.sourceValues && this.options.sourceValues.sort) {\n                            this.options.sourceValues = this.options.sourceValues.sort(function wEnum_initDomSortLabel(a, b)\n                            {\n                                if (localeCompareSupportsLocales) {\n                                    return String(a.label).localeCompare(String(b.label), currentWidget.options.locale, {\n                                        numeric: true,\n                                        caseFirst: false\n                                    });\n                                } else {\n                                    return String(a.label).localeCompare(String(b.label));\n                                }\n                            });\n                        }\n                        break;\n                }\n            }\n            if (this._isMultiple()) {\n                this.options.isMultiple = true;\n                _.each(this.options.attributeValue, function wEnumDisplayOthers(singleValue)\n                {\n                    if (singleValue) {\n                        singleValue.exists = (singleValue.exists !== false);\n\n                        if (singleValue.exists === false) {\n                            singleValue.displayValue = Mustache.render(currentWidget.options.labels.displayOtherChoice, singleValue);\n                        }\n                    }\n                });\n            } else {\n                if (this.options.attributeValue.exists === false) {\n                    this.options.attributeValue.displayValue = Mustache.render(this.options.labels.displayOtherChoice, this.options.attributeValue);\n                }\n            }\n\n            if (this.getMode() === \"read\") {\n                if (this._isMultiple()) {\n                    this.options.attributeValues = _.toArray(this.options.attributeValue);\n                    this.options.isMultiple = true;\n                } else {\n                    this.options.attributeValues = [this.options.attributeValue];\n                    this.options.isMultiple = false;\n                }\n                this._super();\n            }\n\n            if (this.getMode() === \"write\") {\n                if (this.options.options && this.options.options.eformat === \"auto\") {\n                    this.options.renderOptions.useSourceUri = true;\n                }\n\n                if (this.options.renderOptions.useOtherChoice === true) {\n                    this.options.otherUuid = _.uniqueId(\"enum\");\n                }\n                if (this.options.index >= 0) {\n                    var enumIndex = this.element.closest(\"table\").data(\"enumIndex\");\n\n                    if (!enumIndex) {\n                        enumIndex = {};\n                    }\n                    if (!enumIndex[this.options.id]) {\n                        enumIndex[this.options.id] = 0;\n                    }\n                    this.options.inArray = true;\n                    this.options.enumIndex = enumIndex[this.options.id];\n                    enumIndex[this.options.id]++;\n                    this.element.closest(\"table\").data(\"enumIndex\", enumIndex);\n                }\n                this._initMainElementClass();\n                if (this._isMultiple()) {\n                    switch (this.options.renderOptions.editDisplay) {\n                        case \"autoCompletion\" :\n                        case \"list\" :\n                            this.multipleSelect();\n                            break;\n                        case \"horizontal\" :\n                        case \"vertical\" :\n                            this.checkboxButtons();\n                            break;\n                        case \"bool\":\n                            throw new Error(\"Enum bool display cannot be applied to a multiple attribute : \" + this.options.id);\n                        default:\n                            this.multipleSelect();\n                    }\n                    this.element.on(\"click\" + this.eventNamespace, '.dcpAttribute__value--enum--button', function wEnumSelectClick(event)\n                    {\n                        event.preventDefault();\n                        currentWidget.kendoWidgetObject.search(\"\");\n                    });\n                } else {\n                    switch (this.options.renderOptions.editDisplay) {\n                        case \"autoCompletion\" :\n                            this.singleCombobox();\n                            break;\n                        case \"list\" :\n                            this.singleDropdown();\n                            break;\n                        case \"bool\" :\n                            this.boolButtons();\n                            break;\n                        case \"horizontal\" :\n                        case \"vertical\" :\n                            this.radioButtons();\n                            break;\n                        default:\n                            this.singleDropdown();\n                    }\n                }\n\n            }\n\n            this.noButtonDisplay();\n        },\n        getSingleEnumData: function wEnumGetSingleEnumData()\n        {\n            var source = [];\n            var scope = this;\n            var selectedIndex = -1;\n            var item;\n\n            if (this.options.renderOptions.useSourceUri) {\n                source = [this.options.attributeValue];\n                selectedIndex = this.options.attributeValue.value;\n            } else {\n                _.each(this.options.sourceValues, function wEnum_prepareValue(enumItem)\n                {\n                    if (enumItem.key !== '' && enumItem.key !== ' ') {\n                        item = {};\n\n                        item.value = enumItem.key;\n                        item.displayValue = enumItem.label || '';\n                        item.exists = enumItem.exists !== false;\n                        item.enumUuid = _.uniqueId(\"enum\");\n\n                        // : no === because json encode use numeric cast when index is numeric\n                        //noinspection JSHint\n                        if (enumItem.key == scope.options.attributeValue.value) {\n                            selectedIndex = source.length;\n                            item.selected = true;\n                        } else {\n                            item.selected = false;\n                        }\n\n                        source.push(item);\n                    }\n                });\n                if (selectedIndex === -1 && this.options.attributeValue && !_.isUndefined(this.options.attributeValue.value) && this.options.attributeValue.value !== null) {\n                    selectedIndex = source.length;\n                    source.push({\n                        value: this.options.attributeValue.value,\n                        displayValue: this.options.attributeValue.displayValue || '',\n                        selected: true,\n                        exists: false,\n                        enumUuid: _.uniqueId(\"enum\")\n                    });\n                }\n            }\n\n            return {data: source, index: selectedIndex};\n        },\n\n        getMultipleEnumData: function wEnumGetMultipleEnumData()\n        {\n            var source = [];\n            var selectedValues = [];\n            var isIn = false;\n            var item;\n            var values = [];\n\n            if (this.options.attributeValue && this.options.attributeValue.value !== null) {\n                values = _.toArray(this.options.attributeValue);\n            }\n\n            if (this.options.renderOptions.useSourceUri) {\n                source = values;\n                selectedValues = _.pluck(values, \"value\");\n            } else {\n\n                _.each(this.options.sourceValues, function wEnum_prepareMultipleValue(enumItem)\n                {\n                    item = {};\n                    item.value = enumItem.key;\n                    item.displayValue = enumItem.label || '';\n                    item.selected = false;\n                    item.exists = enumItem.exists !== false;\n                    item.enumUuid = _.uniqueId(\"enum\");\n                    isIn = _.some(values, function wEnum_findSelected(aValue)\n                    {\n                        //noinspection JSHint\n                        return (aValue.value == enumItem.key);\n                    });\n\n                    // : no === because json encode use numeric cast when index is numeric\n                    //noinspection JSHint\n                    if (isIn) {\n                        item.selected = true;\n                    }\n\n                    source.push(item);\n                });\n\n                _.each(values, function wEnum_addOtherValues(singleValue)\n                {\n                    if (singleValue.value !== null && singleValue.value !== '') {\n                        if (singleValue.exists === false) {\n                            item = {};\n                            item.value = singleValue.value;\n                            item.displayValue = singleValue.displayValue;\n                            item.selected = true;\n                            item.exists = false;\n                            item.enumUuid = _.uniqueId(\"enum\");\n                            source.push(item);\n                        }\n                        selectedValues.push(singleValue.value);\n                    }\n                });\n            }\n\n            return {\n                data: source,\n                selectedValues: selectedValues\n            };\n        },\n\n        retrieveItems: function wEnumretrieveItemse(done)\n        {\n            var scope = this,\n                requestData = {};\n\n            if (this.options.renderOptions.orderBy) {\n                requestData.orderBy = this.options.renderOptions.orderBy;\n            }\n\n            // Get enums data and defer render\n            $.ajax({\n                type: \"GET\",\n                url: this.options.sourceUri,\n                dataType: \"json\",\n                data: requestData\n            }).done(function wEnum_retrieveDone(result)\n            {\n                scope.options.sourceValues = result.data.enumItems;\n                scope.options.renderOptions.useSourceUri = false;\n                done(scope);\n            }).fail(function wEnum_retrieveFail(response)\n            {\n                $('body').trigger(\"notification\", {\n                    htmlMessage: \"Enumerate \" + scope.options.id,\n                    message: response.statusText,\n                    type: \"error\"\n                });\n            });\n        },\n\n        noButtonDisplay: function wEnumNoDisplayButton()\n        {\n            if (this.element.find(\".dcpAttribute__content__buttons button\").length === 0) {\n                this.element.find(\".dcpAttribute__value--enumbuttons\").addClass(\"dcpAttribute__content__nobutton\");\n                this.element.find(\".dcpAttribute__content__buttons\").hide();\n            }\n        },\n\n        boolButtons: function wEnumBoolButtons()\n        {\n            var enumData;\n            var tplOption = this.options;\n            var scope = this;\n\n            if (this.options.renderOptions.useSourceUri) {\n                this.retrieveItems(function wEnum_onRetrieveDone(theWidget)\n                {\n                    theWidget.boolButtons();\n                });\n                return;\n            }\n\n            enumData = this.getSingleEnumData();\n            tplOption.enumValues = enumData.data;\n\n            if (tplOption.enumValues.length > 1) {\n                tplOption.enumValues[0].off = true;\n                tplOption.enumValues[1].on = true;\n            }\n\n            this.options.isMultiple = true; // Just to have checkbox\n\n            this.options.renderOptions.useOtherChoice = false; // Always : no use this options\n            this.element.append(Mustache.render(this._getTemplate('writeToggle') || \"\", this.options));\n            this.options.isMultiple = false; // restore isMultiple : it never can be multiple\n\n            if (scope.options.labels.invertSelection) {\n                this.element.find(\".dcpAttribute__value--toggle\").each(function wEnum_insertTooltip(kItem)\n                {\n                    if (tplOption.enumValues[kItem]) {\n                        $(this).tooltip({\n                            trigger: \"hover\",\n                            container: scope.element,\n                            title: Mustache.render(scope.options.labels.invertSelection || \"\",\n                                tplOption.enumValues[(kItem + 1) % 2])\n                        });\n                    }\n                });\n            }\n\n            this.noButtonDisplay();\n\n            this.element.on(\"click\" + this.eventNamespace, \".dcpAttribute__value--toggle\", function wEnum_booleanClick(event)\n            {\n                event.preventDefault();\n                // Invert selection\n                _.some(tplOption.enumValues, function wEnum_comboSetValue(item)\n                {\n                    if (scope.options.attributeValue.value === null || item.value !== scope.options.attributeValue.value) {\n                        scope.setValue(item, event);\n                        return true;\n                    }\n                    return false;\n                });\n            });\n\n            this.getContentElements().each(function wEnum_addKButton()\n            {\n                $(this).closest(\".dcpAttribute__value--enumlabel\").addClass(\"k-button\");\n\n            });\n            if (scope.options.attributeValue.value === null) {\n                // Set to first enum item if empty\n                var firstItem = tplOption.enumValues[0];\n                if (firstItem) {\n                    scope.setValue({value: firstItem.value, displayValue: firstItem.displayValue});\n                }\n            }\n\n        },\n        /**\n         * Identify the input where is the raw value\n         * @returns {*}\n         */\n        getContentElements: function wEnum_getContentElements()\n        {\n            if (this.options.inArray && (\n                this.options.renderOptions.editDisplay === \"horizontal\" ||\n                this.options.renderOptions.editDisplay === \"vertical\" ||\n                this.options.renderOptions.editDisplay === \"bool\")) {\n\n                return this.element.find('.dcpAttribute__value[name=\"' + this.options.id + '[' + this.options.enumIndex + ']\"]');\n            } else {\n                return this._super();\n            }\n        },\n\n        radioButtons: function wEnumRadioButtons()\n        {\n            var enumData;\n            var tplOption = this.options;\n            var labels;\n            var scope = this;\n            var hasNotExists;\n\n            if (this.options.renderOptions.useSourceUri) {\n                this.retrieveItems(function wEnum_retrieveDone(theWidget)\n                {\n                    theWidget.radioButtons();\n                });\n                return;\n            }\n\n            enumData = this.getSingleEnumData();\n\n            tplOption.enumValues = enumData.data;\n            hasNotExists = _.some(enumData.data, function wEnum_findNotExistItem(item)\n            {\n                return (item.exists === false);\n            });\n\n            if (hasNotExists === true) {\n                // No set twice for radio\n                this.options.renderOptions.useOtherChoice = false;\n            }\n            this.element.append(Mustache.render(this._getTemplate('writeRadio') || \"\", this.options));\n            labels = this.element.find(\".dcpAttribute__value--enumlabel\");\n\n            this.noButtonDisplay();\n            labels.on(\"change\" + this.eventNamespace, \"input[type=radio]\", function wEnum_onchange(event)\n            {\n                var newValue = {};\n                newValue.value = $(this).val();\n                newValue.displayValue = $(this).closest(\".dcpAttribute__value--enumlabel\").find(\"label\").text().trim();\n                scope.setValue(newValue, event);\n            });\n\n            this.getContentElements().each(function wEnum_addKButton()\n            {\n                $(this).closest(\"label\").addClass(\"k-button\");\n\n            });\n            if (scope.options.renderOptions.useFirstChoice && scope.options.attributeValue.value === null) {\n                // Set to first enum item if empty\n                var firstItem = tplOption.enumValues[0];\n                if (firstItem) {\n                    scope.setValue({value: firstItem.value, displayValue: firstItem.displayValue});\n                }\n            }\n\n            if (scope.options.labels.selectMessage) {\n                this.element.find(\".dcpAttribute__value--enumbuttons\").tooltip({\n                    container: \".dcpDocument\",\n                    selector: '.dcpAttribute__value--enumlabel--text',\n                    trigger: \"hover\",\n                    title: function wEnum_titleTooltip()\n                    {\n                        if ($(this).closest(\".dcpAttribute__value--enumlabel\").find(\"input\").prop(\"checked\")) {\n                            return null;\n                        } else {\n                            return Mustache.render(scope.options.labels.selectMessage, {\n                                displayValue: $(this).text(),\n                                value: $(this).parent().find(\"input\").val()\n                            });\n                        }\n                    }\n                });\n            }\n\n            this._checkRadioOther();\n        },\n        checkboxButtons: function wEnumRadioButtons()\n        {\n            var enumData;\n            var tplOption = this.options;\n            var scope = this;\n\n            if (this.options.renderOptions.useSourceUri) {\n                this.retrieveItems(function wEnum_onDone(theWidget)\n                {\n                    theWidget.checkboxButtons();\n                });\n                return;\n            }\n            enumData = this.getMultipleEnumData();\n            tplOption.enumValues = enumData.data;\n\n            this.element.append(Mustache.render(this._getTemplate('writeRadio') || \"\", this.options));\n\n            this.noButtonDisplay();\n            this.element.on(\"change\" + this.eventNamespace, \".dcpAttribute__value--enumlabel input[type=checkbox]\", function wEnum_onChange(event)\n            {\n\n                var newValue = [];\n\n                scope.getContentElements().each(function wEnum_findChecked()\n                {\n                    var $this = $(this);\n                    if ($this.prop(\"checked\")) {\n                        var itemValue = {};\n                        itemValue.value = $this.val();\n                        itemValue.displayValue = $this.closest('label').text().trim();\n                        newValue.push(itemValue);\n                    }\n                });\n\n                scope.setValue(newValue, event);\n            });\n\n            this.getContentElements().each(function wEnum_addKButton()\n            {\n                $(this).closest(\"label\").addClass(\"k-button\");\n            });\n\n            if (this.options.labels.selectMessage) {\n                this.element.find(\".dcpAttribute__value--enumbuttons\").tooltip({\n                    container: \".dcpDocument\",\n                    selector: '.dcpAttribute__value--enumlabel--text',\n                    trigger: \"hover\",\n                    title: function wEnum_Cb_titleTooltip()\n                    {\n                        var $this = $(this);\n                        if ($this.closest(\".dcpAttribute__value--enumlabel\").find(\"input\").prop(\"checked\")) {\n\n                            return Mustache.render(scope.options.labels.unselectMessage, {\n                                displayValue: $(this).text(),\n                                value: $(this).parent().find(\"input\").val()\n                            });\n                        } else {\n                            return Mustache.render(scope.options.labels.selectMessage, {\n                                displayValue: $(this).text(),\n                                value: $(this).parent().find(\"input\").val()\n                            });\n                        }\n                    }\n                });\n            }\n            if (this.options.renderOptions.useOtherChoice === true) {\n                this._checkBoxOther();\n            }\n        },\n\n        /**\n         * Manage other input for radio\n         * @private\n         */\n        _checkRadioOther: function wEnum__checkRadioOther()\n        {\n            this.element.find(\".dcpAttribute__value--enum--other\").on(\"focus\" + this.eventNamespace, function wEnumRadioOtherInputClick()\n            {\n\n                $(this).trigger(\"change\");\n\n            }).on(\"change\" + this.eventNamespace, function wEnumRadioOtherInputChange()\n            {\n                var $label = $(this).closest(\".dcpAttribute__value--enumlabel\");\n                var $input = $label.find(\".dcpAttribute__value--edit\");\n                $input.val($(this).val());\n                // Trigger change label input to real set value\n                $label.find(\"input[type=radio]\").trigger(\"change\");\n            }).on(\"keyup\" + this.eventNamespace, function wEnumRadioOtherInputKeyReturn(event)\n            {\n                var code = (event.keyCode ? event.keyCode : event.which);\n                if (code === 13 || code === 10) {\n                    $(this).blur();\n                }\n            });\n        },\n\n        /**\n         * Manage other input for checkbox\n         * @private\n         */\n        _checkBoxOther: function wEnum__checkBoxOther()\n        {\n            this.element.on(\"focus\" + this.eventNamespace, \".dcpAttribute__value--enum--other\", function wEnumCheckOtherInputClick()\n            {\n                $(this).trigger(\"change\");\n            }).on(\"change\" + this.eventNamespace, \".dcpAttribute__value--enum--other\", function wEnumCheckOtherInputChange()\n            {\n                var $label = $(this).closest(\".dcpAttribute__value--enumlabel\");\n                var $input = $label.find(\".dcpAttribute__value--edit\");\n                var $hasEmpty;\n                var $checkbox = $label.find(\"input[type=checkbox]\");\n\n                $input.val($(this).val());\n\n                $hasEmpty = _.some($(this).closest(\".dcpAttribute__value--enumbuttons\").find(\".dcpAttribute__value--enum--other\"), function wEnum_findEmptyOther(item)\n                {\n                    return $(item).val() === \"\";\n                });\n\n                if (!$hasEmpty) {\n                    var $newOne = $label.clone();\n                    var uuid = _.uniqueId(\"enum\");\n                    $newOne.find(\"input[type=checkbox]\").attr(\"id\", uuid);\n                    $newOne.find(\"label\").attr(\"for\", uuid);\n                    // add new input if no one free found\n                    $label.parent().append($newOne);\n                    $newOne.find(\"input\").val(\"\").prop(\"checked\", false);\n\n                    if (!$checkbox.prop(\"checked\")) {\n                        $label.find(\"label\").trigger(\"click\");\n                    }\n                }\n                // resend change trigger because this hook is call before the checkbox onchange event\n                $checkbox.trigger(\"change\");\n\n            }).on(\"keyup\" + this.eventNamespace, \".dcpAttribute__value--enum--other\", function wEnumCheckOtherInputKeyReturn(event)\n            {\n                var code = (event.keyCode ? event.keyCode : event.which);\n                if (code === 13 || code === 10) {\n                    $(this).blur(); // Change event will be triggered\n                }\n            });\n        },\n        singleDropdown: function wEnumSingleDropdown()\n        {\n            var kendoOptions = this.getKendoOptions();\n            var kddl;\n            this.element.append(Mustache.render(this._getTemplate('write') || \"\", this.options));\n            this.kendoWidget = this.element.find(\".dcpAttribute__value--edit\");\n            kddl = this.kendoWidget.kendoDropDownList(kendoOptions).data(\"kendoDropDownList\");\n            this.kendoWidgetObject = this.kendoWidget.data(\"kendoDrobDownList\");\n            kddl.list.find(\".k-list-optionlabel\").addClass(\"placeholder--clear\");\n        },\n        multipleSelect: function wEnumMultipleSelect()\n        {\n            var kendoOptions = this.getKendoOptions();\n            this.element.append(Mustache.render(this._getTemplate('write') || \"\", this.options));\n            this.kendoWidget = this.element.find(\".dcpAttribute__value--edit\");\n            this.kendoWidget.kendoMultiSelect(kendoOptions);\n            this.kendoWidgetObject = this.kendoWidget.data(\"kendoMultiSelect\");\n        },\n\n        singleCombobox: function wEnumSingleCombobox()\n        {\n            var kendoOptions = this.getKendoOptions();\n            var kddl;\n            var currentWidget = this;\n\n            this.element.append(Mustache.render(this._getTemplate('write') || \"\", this.options));\n            this.kendoWidget = this.element.find(\".dcpAttribute__value--edit\");\n\n            kddl = this.kendoWidget.kendoComboBox(kendoOptions).data(\"kendoComboBox\");\n\n            this.kendoWidgetObject = kddl;\n            if (this.options.renderOptions.useSourceUri) {\n                if (this.options.attributeValue.value === null) {\n                    //kddl.dataSource.data([]);\n                    kddl.value('');\n                } else {\n                    kddl.dataSource.data([this.options.attributeValue]);\n                    kddl.value(this.options.attributeValue.value);\n                }\n            } else {\n                if (this.options.attributeValue.value) {\n                    kddl.value(this.options.attributeValue.value);\n                }\n            }\n            this.element.on(\"click\" + this.eventNamespace, \".dcpAttribute__content__button--delete\", function wEnumDeleteFilter()\n            {\n                currentWidget.setError(null);\n                kddl.dataSource.filter({});\n                kddl.value('');\n            });\n\n        },\n\n        /**\n         *Set new value to widget\n         * @param value value {value:...., displayValue} or array of {value:...., displayValue}\n         * @param event\n         */\n        setValue: function wEnumSetValue(value, event)\n        {\n            var kddl, newValues;\n            var currentWidget = this;\n            if (this.options.renderOptions.editDisplay === \"bool\") {\n                // This display has only 2 values and cannot be set to null\n                if (value.value === null) {\n                    if (this.options.enumValues[0]) {\n                        value = this.options.enumValues[0];\n                    }\n                }\n            }\n            this._super(value, event);\n            if (this.getMode() === \"write\") {\n                if (this._isMultiple()) {\n                    switch (this.options.renderOptions.editDisplay) {\n                        case \"autoCompletion\":\n                        case \"list\":\n                            kddl = this.kendoWidget.data(\"kendoMultiSelect\");\n                            newValues = _.map(value, function wEnum_findValues(val)\n                            {\n                                if (!currentWidget.options.renderOptions.useSourceUri) {\n                                    if (!kddl.dataSource.get(val.value)) {\n                                        kddl.dataSource.add(val);\n                                    }\n                                }\n                                return val.value;\n                            });\n                            if (!_.isEqual(kddl.value(), newValues)) {\n                                this.flashElement();\n                                if (this.options.renderOptions.useSourceUri) {\n                                    if (newValues.length > 0) {\n                                        _.each(value, function wEnumCompleteExists(singleValue)\n                                        {\n                                            singleValue.exists = (singleValue.exists !== false);\n                                        });\n                                        kddl.dataSource.data(value);\n                                    }\n                                }\n                                kddl.value(newValues);\n                            }\n                            break;\n\n                        case \"horizontal\":\n                        case \"vertical\":\n                            this.getContentElements().each(function wEnum_findValues()\n                            {\n                                var $this = $(this);\n                                var inputValue = $this.val();\n\n                                var isIn = _.some(value, function wEnum_isIn(x)\n                                {\n                                    //noinspection JSHint\n                                    return (x.value == inputValue);\n                                });\n                                if (isIn) {\n                                    $this.prop(\"checked\", true);\n                                    $this.closest(\".dcpAttribute__value--enumlabel\").addClass(\"selected\");\n                                } else {\n                                    $this.prop(\"checked\", false);\n                                    $this.closest(\".dcpAttribute__value--enumlabel\").removeClass(\"selected\");\n                                }\n                            });\n\n                            this.element.find(\".dcpAttribute__value--enumlabel--text\").tooltip(\"hide\");\n                            break;\n                        default:\n                            throw new Error(\"Unknow Enum mode : \" + this.options.renderOptions.editDisplay);\n\n                    }\n                } else {\n                    switch (this.options.renderOptions.editDisplay) {\n                        case \"autoCompletion\":\n                            kddl = this.kendoWidget.data(\"kendoComboBox\");\n                            if (!_.isEqual(kddl.value(), value.value)) {\n                                this.flashElement();\n\n                                if (value.value !== null) {\n                                    if (this.options.renderOptions.useSourceUri) {\n                                        kddl.dataSource.data([value]);\n                                    } else {\n                                        if (!kddl.dataSource.get(value.value)) {\n                                            kddl.dataSource.add(value);\n                                        }\n                                    }\n                                    this.setError(null);\n                                    kddl.value(value.value);\n                                } else {\n                                    kddl.value('');\n                                }\n                            }\n                            break;\n                        case \"list\":\n                            kddl = this.kendoWidget.data(\"kendoDropDownList\");\n\n                            if (!_.isEqual(kddl.value(), (value.value || \"\"))) {\n                                this.flashElement();\n                                if (!kddl.dataSource.get(value.value)) {\n                                    kddl.dataSource.add(value);\n                                }\n\n                                // kendo need empty string (not null) to clear input\n                                kddl.value(value.value || \"\");\n                            }\n                            break;\n                        case \"bool\":\n                            this.getContentElements().each(function wEnum_parseElements()\n                            {\n                                var $this = $(this);\n                                var isOn;\n                                //noinspection JSHint\n                                if ($this.data(\"togglevalue\").toString() === value.value) {\n                                    if (!$this.hasClass(\"selected\")) {\n                                        if ($this.hasClass(\"on\")) {\n                                            isOn = true;\n                                            $this.removeClass(\"on\").addClass(\"off\");\n                                        } else\n                                            if ($this.hasClass(\"off\")) {\n                                                $this.removeClass(\"off\").addClass(\"on\");\n                                                isOn = false;\n                                            }\n                                        $this.addClass(\"selected\").removeClass(\"unselected\");\n\n                                        _.defer(function wEnumAnimateBool()\n                                        {\n                                            if (isOn === true) {\n                                                $this.addClass(\"on\").removeClass(\"off\");\n                                            } else {\n                                                $this.addClass(\"off\").removeClass(\"on\");\n                                            }\n                                        });\n                                    }\n                                } else {\n                                    $this.removeClass(\"selected\").addClass(\"unselected\");\n                                }\n                            });\n                            this.element.find(\".dcpAttribute__value--enumlabel\").tooltip(\"hide\");\n\n                            break;\n                        case \"horizontal\":\n                        case \"vertical\":\n                            this.getContentElements().each(function wEnum_parseElements()\n                            {\n                                var $this = $(this);\n                                //noinspection JSHint\n                                if ($this.val() == value.value) {\n                                    $this.prop(\"checked\", true);\n                                    $this.closest(\".dcpAttribute__value--enumlabel\").addClass(\"selected\");\n                                } else {\n                                    $this.prop(\"checked\", false);\n                                    $this.closest(\".dcpAttribute__value--enumlabel\").removeClass(\"selected\");\n                                }\n                            });\n\n                            this.element.find(\".dcpAttribute__value--enumlabel--text\").tooltip(\"hide\");\n                            break;\n                        default:\n                            throw new Error(\"Unknow Enum mode : \" + this.options.renderOptions.editDisplay);\n\n                    }\n                }\n            } else {\n                this._super(value, event);\n                this.redraw();\n            }\n        },\n        /**\n         * method use for transport multiselect widget\n         * @param options\n         */\n        autocompleteRequestEnum: function wEnumAutocompleteRequestEnum(options)\n        {\n            var requestData = {}, scope = this;\n\n            if (options.data.filter && options.data.filter.filters && options.data.filter.filters.length > 0) {\n                requestData.keyword = options.data.filter.filters[0].value;\n                requestData.operator = options.data.filter.filters[0].operator;\n            }\n            if (this.options.renderOptions.orderBy) {\n                requestData.orderBy = this.options.renderOptions.orderBy;\n            }\n\n            if (!this.options.sourceUri) {\n                throw new Error(\"Enum : sourceUri must be defined if renderOption useSourceUri is set to true\");\n            }\n            $.ajax({\n                type: \"GET\",\n                url: this.options.sourceUri,\n                data: requestData,\n                dataType: \"json\",\n                success: function wEnum_onAutoCompleteSuccess(result)\n                {\n                    var info = [];\n                    _.each(result.data.enumItems, function wEnum_analyzeResult(enumItem)\n                    {\n                        info.push({\n                            value: enumItem.key,\n                            displayValue: enumItem.label || '',\n                            exists: enumItem.exists !== false\n                        });\n                    });\n                    if (!scope._isMultiple()) {\n                        if (scope.options.attributeValue.value !== null) {\n                            if (!_.contains(_.pluck(info, \"value\"), scope.options.attributeValue.value)) {\n                                if (scope.options.attributeValue.displayValue === scope.options.attributeValue.value) {\n                                    scope.options.attributeValue.displayValue =\n                                        Mustache.render(scope.options.labels.displayOtherChoice, scope.options.attributeValue);\n                                }\n                                info.push(scope.options.attributeValue);\n                            }\n                        }\n                    } else {\n                        _.each(scope.options.attributeValue, function wEnumAddOtherInUri(singleValue)\n                        {\n                            var hasValue = _.some(info, function wEnumVerifyValue(singleInfo)\n                            {\n                                return singleInfo.value === singleValue.value;\n                            });\n                            if (!hasValue) {\n                                info.push(singleValue);\n                            }\n                        });\n                    }\n\n                    // notify the data source that the request succeeded\n                    options.success(info);\n                },\n                error: function wEnum_onAutoCompleteError(result)\n                {\n                    // notify the data source that the request failed\n                    options.error(result);\n                }\n            });\n        },\n        /**\n         * Get kendo option from normal options and from renderOptions.kendoNumeric\n         * @returns {*}\n         */\n        getKendoOptions: function wEnumGetKendoOptions()\n        {\n            var scope = this,\n                source = null,\n                kendoOptions = {},\n                defaultOptions = {};\n\n            if (this._isMultiple()) {\n\n                source = this.getMultipleEnumData();\n\n                defaultOptions = {\n                    dataTextField: \"displayValue\",\n                    dataValueField: \"value\",\n                    clearButton: false,\n                    dataSource: (this.options.renderOptions.useSourceUri) ? source.data : new kendo.data.DataSource({\n                        data: source.data,\n                        schema: {model: {id: \"value\"}}\n                    }),\n                    placeholder: this.options.renderOptions.placeHolder,\n                    value: source.selectedValues,\n\n                    change: function wEnum_onChange(event)\n                    {\n                        event.preventDefault(); // no fire change event\n                        // set in case of delete item\n\n                        var kdData = _.toArray(scope.kendoWidget.data(\"kendoMultiSelect\").dataItems());\n                        var newValues = [];\n                        _.each(kdData, function wEnum_pushNewValues(val)\n                        {\n                            newValues.push({\n                                value: val.value,\n                                displayValue: val.displayValue,\n                                exists: val.exists !== false\n                            });\n                        });\n                        scope.setValue(newValues, event);\n                    },\n                    open: function wEnum_open(event)\n                    {\n                        _.bind(scope._kOpen, scope, event, this)();\n                    },\n                    /**\n                     * When other input is in list do not autoclose list to enter a new value\n                     * @param event\n                     */\n                    close: function wEnum_multipleClose(event)\n                    {\n                        _.bind(scope._kClose, scope, event, this)();\n                    }\n                };\n\n                if (_.isObject(scope.options.renderOptions.kendoMultiSelectConfiguration)) {\n                    kendoOptions = scope.options.renderOptions.kendoMultiSelectConfiguration;\n                }\n            } else {\n                source = this.getSingleEnumData();\n\n                defaultOptions = {\n                    /*valuePrimitive: true,*/\n                    dataTextField: \"displayValue\",\n                    dataValueField: \"value\",\n                    clearButton: false,\n                    optionLabel: {\n                        displayValue: this.options.renderOptions.placeHolder + ' ',\n                        value: '',\n                        exists: true\n                    },\n                    optionLabelTemplate: '<span class=\"placeholder\">#: displayValue #</span>',\n                    dataSource: (this.options.renderOptions.useSourceUri) ? source.data : new kendo.data.DataSource({\n                        data: source.data,\n                        schema: {model: {id: \"value\"}}\n                    }),\n                    index: (source.index < 0) ? undefined : source.index,\n                    autoBind: false,\n\n                    change: function wEnum_onChange(event)\n                    {\n                        if (this.value() && this.selectedIndex === -1) {\n                            scope.setError(scope.options.labels.invalidEntry);\n                            scope._getFocusInput().each(function wEnum_onChange()\n                            {\n                                this.focus();\n                            });\n                        } else {\n                            scope.setError(null);\n\n                            var newValue = {value: this.value(), displayValue: this.text()};\n                            scope.setValue(newValue, event);\n                        }\n                    },\n                    dataBound: function wEnum_dataBound()\n                    {\n                        if (scope.options.renderOptions.useFirstChoice && scope.options.attributeValue.value === null) {\n                            // Set to first enum item if empty\n                            var firstItem = this.dataSource.at(0);\n                            if (firstItem) {\n                                scope.setValue({value: firstItem.value, displayValue: firstItem.displayValue});\n                            }\n                        }\n                    },\n                    open: function wEnum_open(event)\n                    {\n                        _.bind(scope._kOpen, scope, event, this)();\n                    },\n                    /**\n                     * When other input is in list do not autoclose list to enter a new value\n                     * @param event\n                     */\n                    close: function wEnum_close(event)\n                    {\n                        _.bind(scope._kClose, scope, event, this)();\n                    }\n                };\n\n                if (this.options.renderOptions.editDisplay === \"autoCompletion\") {\n\n                    defaultOptions.index = -1;\n                    defaultOptions.value = this.options.attributeValue.value;\n                    defaultOptions.placeholder = this.options.renderOptions.placeHolder;\n\n                    if (_.isObject(scope.options.renderOptions.kendoComboBoxConfiguration)) {\n                        kendoOptions = scope.options.renderOptions.kendoComboBoxConfiguration;\n                    }\n                } else {\n\n                    if (_.isObject(scope.options.renderOptions.kendoDropDownConfiguration)) {\n                        kendoOptions = scope.options.renderOptions.kendoDropDownConfiguration;\n                    }\n                }\n            }\n\n            if (scope.options.renderOptions.useOtherChoice === true) {\n                // add \"other\" input in header list\n                defaultOptions.headerTemplate = $('<div><div class=\"dcpAttribute__value--enum-other\"><div class=\"input-group dcpAttribute__value--enum-other-content\">' +\n                    '<input class=\"form-control\" type=\"text\" placeholder=\"' + scope.options.labels.chooseAnotherChoice + '\"/>' +\n                    '<span class=\"input-group-btn\"><button class=\"btn btn-primary dcpAttribute__value--enum-other-select\">' + scope.options.labels.selectAnotherChoice + '</button></span> ' +\n                    '</div></div></div>').html();\n            }\n\n            if (this.options.renderOptions.useSourceUri) {\n                defaultOptions.dataSource = {\n                    data: source.data,\n                    index: source.index,\n                    // type: \"json\",\n                    serverFiltering: true,\n                    minLength: 0,\n                    transport: {\n                        read: _.bind(scope.autocompleteRequestEnum, scope)\n                    }\n                };\n            }\n            return _.extend(defaultOptions, kendoOptions);\n        },\n\n        _kSelectOther: function wEnumkSelect(event, kWidget, newValue)\n        {\n            kWidget.dataSource.filter({});\n            if (this._isMultiple()) {\n                var kdData = _.toArray(kWidget.dataItems());\n                var newValues = [];\n\n                _.each(kdData, function wEnum_pushNewValues(val)\n                {\n                    newValues.push({\n                        value: val.value,\n                        displayValue: val.displayValue,\n                        exists: val.exists\n                    });\n                });\n\n                newValues.push({\n                    value: newValue,\n                    exists: false,\n                    displayValue: Mustache.render(this.options.labels.displayOtherChoice, {value: newValue})\n                });\n\n                this.setValue(newValues, event);\n            } else {\n                this.setValue({\n                    value: newValue,\n                    exists: false,\n                    displayValue: Mustache.render(this.options.labels.displayOtherChoice, {value: newValue})\n                }, event);\n            }\n\n            $(\".dcpAttribute__value--enum-other input\").blur();\n            kWidget.close();\n        },\n\n        /**\n         * When other input is in list do not autoclose list to enter a new value\n         * @param event\n         * @param kWidget kendo widget\n         */\n        _kClose: function wEnumkClose(event, kWidget)\n        {\n            if (this.options.renderOptions.useOtherChoice === true) {\n                var $otherInput = kWidget.ul.closest(\".k-list-container\").find(\".dcpAttribute__value--enum-other\");\n                if ($otherInput.data(\"dcpEnumOtherFirstClose\") !== false ||\n                    $otherInput.find(\"input\").is(\":focus\")\n                ) {\n                    event.preventDefault();\n                    $otherInput.data(\"dcpEnumOtherFirstClose\", false);\n                }\n            }\n        },\n\n        _kOpen: function wEnumkOpen(event, kWidget)\n        {\n            var scope = this;\n            /**\n             * Special events for \"other\" choice input\n             */\n            if (this.options.renderOptions.useOtherChoice === true) {\n                var $container = kWidget.ul.closest(\".k-list-container\");\n                var $otherInput = $container.find(\".dcpAttribute__value--enum-other\");\n\n                if ($otherInput.length === 1 && $otherInput.data(\"dcpEnumOtherInitialized\") !== true) {\n                    $otherInput.data(\"dcpEnumOtherInitialized\", true);\n                    $otherInput.find(\".dcpAttribute__value--enum-other-select\").prop(\"disabled\", true);\n                    $container.prepend($otherInput);\n\n                    $otherInput.on(\"click\" + this.eventNamespace, \"input\",\n                        /**\n                         * Apply setValue and close list when confirm button is clicked\n                         * @param event\n                         */\n                        function wEnumSetOtherClick(event)\n                        {\n                            event.preventDefault();\n                            $(this).focus();\n                            $(this).data(\"dcpEnumOtherHasFocus\", true);\n                        });\n                    $container.on(\"click\" + this.eventNamespace, \"li.k-item\",\n                        /**\n                         * Force close for \"normal\" choice because autoclose is disabled\n                         */\n                        function wEnumItemClick()\n                        {\n                            var $input = $container.find(\".dcpAttribute__value--enum-other input\");\n                            $input.blur();\n                            kWidget.close();\n                        });\n\n                    $otherInput.on(\"keyup\" + this.eventNamespace, \"input\",\n                        /**\n                         * Apply setValue and close list when return key is pressed\n                         * @param event\n                         */\n                        function wEnumSetOtherKeyPress(event)\n                        {\n                            var code = (event.keyCode ? event.keyCode : event.which);\n                            var $input = $container.find(\".dcpAttribute__value--enum-other input\");\n                            var newValue = $input.val();\n                            if (code === 13 || code === 10) {\n                                if (newValue) {\n                                    _.bind(scope._kSelectOther, scope, event, kWidget, newValue)();\n                                }\n                            } else {\n                                kWidget.search(newValue);\n                            }\n                            $otherInput.find(\".dcpAttribute__value--enum-other-select\").prop(\"disabled\", !newValue);\n                        });\n\n                    $otherInput.on(\"click\" + this.eventNamespace, \".dcpAttribute__value--enum-other-select\", function wEnumSetOtherClick(event)\n                    {\n                        var $input = $container.find(\".dcpAttribute__value--enum-other input\");\n                        var newValue = $input.val();\n                        if (newValue) {\n                            _.bind(scope._kSelectOther, scope, event, kWidget, newValue)();\n                        }\n                    });\n                }\n\n                $container.find(\".dcpAttribute__value--enum-other\").data(\"dcpEnumOtherFirstClose\", true);\n            }\n        },\n\n        close: function wEnum_close()\n        {\n            if (this.kendoWidget && this.kendoWidget.data(\"kendoDropDownList\")) {\n                this.kendoWidget.data(\"kendoDropDownList\").close();\n            }\n            if (this.kendoWidget && this.kendoWidget.data(\"kendoComboBox\")) {\n                this.kendoWidget.data(\"kendoComboBox\").close();\n            }\n            if (this.kendoWidget && this.kendoWidget.data(\"kendoMultiSelect\")) {\n                this.kendoWidget.data(\"kendoMultiSelect\").close();\n            }\n            return this._super();\n        },\n\n        getType: function wEnum_getType()\n        {\n            return \"enum\";\n        },\n\n        _destroy: function wEnum_destroy()\n        {\n            if (this.kendoWidget && this.kendoWidget.data(\"kendoDropDownList\")) {\n                this.kendoWidget.data(\"kendoDropDownList\").destroy();\n            }\n            if (this.kendoWidget && this.kendoWidget.data(\"kendoComboBox\")) {\n                this.kendoWidget.data(\"kendoComboBox\").destroy();\n            }\n            if (this.kendoWidget && this.kendoWidget.data(\"kendoMultiSelect\")) {\n                this.kendoWidget.data(\"kendoMultiSelect\").destroy();\n            }\n            this._super();\n        }\n\n    });\n\n    return $.fn.dcpEnum;\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/enum/wEnum.js","/*global define*/\n(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'underscore',\n            'mustache',\n            'dcpDocument/widgets/attributes/text/wText'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window._, window.Mustache);\n    }\n}(window, function wFileWidget($, _, Mustache)\n{\n    'use strict';\n\n    //noinspection JSUnusedLocalSymbols\n    $.widget(\"dcp.dcpFile\", $.dcp.dcpText, {\n\n        uploadingFiles: 0, // file upload in progress\n        options: {\n            type: \"file\",\n            renderOptions: {\n                contentDisposition: false,\n                htmlLink: {},\n                placeHolder: \"Click to upload file\"\n            },\n            labels: {\n                dropFileHere: \"Drop file here\",\n                tooltipLabel: \"Choose file\",\n                downloadLabel: \"Download file\",\n                recording: \"Recording\",\n                transferring: \"Transferring\",\n                kiloByte: \"kB\",\n                byte: \"B\"\n            }\n        },\n\n        _initDom: function wFileInitDom()\n        {\n            var visibleInput;\n            if (this.getMode() === \"read\") {\n                var urlSep = '?';\n                if (this.options.attributeValue.url) {\n                    if (!this.options.renderOptions.htmlLink.url) {\n                        if (this.options.attributeValue.url) {\n                            urlSep = (this.options.attributeValue.url.indexOf('?') >= 0) ? \"&\" : \"?\";\n                            if (this.options.renderOptions.contentDisposition === \"inline\") {\n                                this.options.attributeValue.url = this.options.attributeValue.url.replace('&inline=no', '');\n                                this.options.attributeValue.url += urlSep + 'inline=yes';\n                            } else {\n                                this.options.attributeValue.url = this.options.attributeValue.url.replace('&inline=yes', '');\n                                this.options.attributeValue.url += urlSep + 'inline=no';\n                            }\n                        }\n                        this.options.renderOptions.htmlLink.url = this.options.attributeValue.url;\n\n                        if (!this.options.renderOptions.htmlLink.title) {\n                            this.options.renderOptions.htmlLink.title = this.options.attributeValue.displayValue;\n                            if (this.options.attributeValue.size >= 1024) {\n                                this.options.renderOptions.htmlLink.title += '<br/>(' + (Math.round(this.options.attributeValue.size / 1024)) + ' ' +\n                                    this.options.labels.kiloByte + ')';\n                            } else {\n                                this.options.renderOptions.htmlLink.title += '<br/>(' + this.options.attributeValue.size + ' ' +\n                                    this.options.labels.byte + ')';\n                            }\n                        }\n                    }\n\n                }\n            }\n            if (this.options.renderOptions.mimeIconSize) {\n                if ([\"0\", \"0x0\", \"x0\"].indexOf(this.options.renderOptions.mimeIconSize) !== -1) {\n                    this.options.attributeValue.icon = null;\n                } else {\n                    var reSize = /sizes\\/([^\\/]+)/;\n                    this.options.attributeValue.icon = this.options.attributeValue.icon.replace(reSize, \"sizes/\" + this.options.renderOptions.mimeIconSize);\n                }\n            }\n            this._super();\n            if (this.getMode() === \"write\") {\n                visibleInput = this.element.find(\"input[type=text]\");\n                visibleInput.attr(\"title\", this.options.labels.tooltipLabel);\n                visibleInput.attr(\"placeholder\", this.options.renderOptions.placeHolder);\n                this.element.find(\".dcpAttribute__content__button--file\").attr(\"title\", this.options.labels.downloadLabel);\n\n                visibleInput.tooltip({\n                    trigger: \"hover\",\n                    placement: \"bottom\",\n                    container: \".dcpDocument\"\n                });\n                this.element.find(\"input[type=file]\").attr(\"fileValue\", this.options.attributeValue.value || null);\n            }\n        },\n\n        _initEvent: function wFileInitEvent()\n        {\n            var currentWidget = this;\n            if (this.getMode() === \"write\") {\n                this._initUploadEvent();\n            }\n\n            // Add trigger when try to download file\n            this.element.on(\"click.\" + this.eventNamespace, '.dcpAttribute__content__link', function wFileClickDownload(event)\n            {\n                currentWidget._trigger(\"downloadFile\", event, {\n                    $el: currentWidget.element,\n                    index: currentWidget._getIndex()\n                });\n            });\n\n            this._super();\n        },\n\n        _initChangeEvent: function wFileInitChangeEvent()\n        {\n            // set by widget if no autocomplete\n            if (this.options.hasAutocomplete) {\n                this._super();\n            }\n        },\n\n        _initUploadEvent: function wFileInitUploadEvent()\n        {\n            var currentWidget = this;\n            var inputFile = this.element.find(\"input[type=file]\");\n            var inputText = this.element.find(\".dcpAttribute__value\");\n            var fileUrl = this.options.attributeValue.url;\n\n            if (fileUrl) {\n                this.element.on(\"click\" + this.eventNamespace, \".dcpAttribute__content__button--file\", function wFileOnButtonClickr(event)\n                {\n                    var isNotPrevented = currentWidget._trigger(\"downloadFile\", event, {\n                        $el: currentWidget.element,\n                        index: currentWidget._getIndex()\n                    });\n                    if (isNotPrevented) {\n                        var url = fileUrl, $base = $(\"base\");\n\n                        if (isNotPrevented) {\n                            if ($base.length > 0) {\n                                // For IE : Not honor base href in this case\n                                url = $base.attr(\"href\") + url;\n                            }\n                            window.open(url);\n                        }\n                    }\n                });\n            } else {\n                this.element.find(\".dcpAttribute__content__button--file\").attr(\"disabled\", \"disabled\");\n            }\n\n            if (!_.isUndefined(window.FormData)) {\n                this.element.on(\"dragenter\" + this.eventNamespace, \".dcpAttribute__dragTarget\", function wFileOnDragEnter(event)\n                {\n                    inputText.val(currentWidget.options.attributeValue.displayValue);\n                    event.stopPropagation();\n                    event.preventDefault();\n                });\n                this.element.on(\"dragover\" + this.eventNamespace, \".dcpAttribute__dragTarget\", function wFileOnDragOver(event)\n                {\n                    inputText.val(currentWidget.options.labels.dropFileHere);\n                    event.stopPropagation();\n                    event.preventDefault();\n                    currentWidget.element.addClass(\"dcpAttribute__value--dropzone\");\n                });\n                this.element.on(\"dragleave\" + this.eventNamespace, \".dcpAttribute__dragTarget\", function wFileOnLeave(event)\n                {\n                    inputText.val(currentWidget.options.attributeValue.displayValue);\n                    event.stopPropagation();\n                    event.preventDefault();\n                    currentWidget.element.removeClass(\"dcpAttribute__value--dropzone\");\n                });\n\n                this.element.on(\"drop\" + this.eventNamespace, \".dcpAttribute__dragTarget\", function wFileOnDrop(event)\n                {\n                    inputText.val(currentWidget.options.attributeValue.displayValue);\n                    currentWidget.element.removeClass(\"dcpAttribute__value--dropzone\");\n                    event.stopPropagation();\n                    event.preventDefault();\n\n                    var dt = event.originalEvent.dataTransfer;\n                    var files = dt.files;\n                    if (files.length > 0) {\n                        currentWidget.uploadFile(files[0]);\n                    }\n                });\n\n                this.element.on(\"click\" + this.eventNamespace, \".dcpAttribute__value\", function wFileOnClick()\n                {\n                    inputFile.trigger(\"click\");\n                });\n\n                this.element.on(\"keydown\" + this.eventNamespace, \".dcpAttribute__value\", function wFileFilterKeys(event)\n                {\n                    if (event.keyCode !== 9 && event.keyCode !== 32 && event.keyCode !== 13) {\n                        event.preventDefault();\n                    }\n                });\n                this.element.on(\"keyup\" + this.eventNamespace, \".dcpAttribute__value\", function wFileSelectKeys(event)\n                {\n                    if (event.keyCode !== 9) {\n                        event.preventDefault();\n                        if (event.keyCode === 32 || event.keyCode === 13) {\n                            inputFile.trigger(\"click\");\n                        }\n                    }\n                });\n\n                this.element.on(\"change\" + this.eventNamespace, \"input[type=file]\", function wFileChange(/*event*/)\n                {\n                    if (this.files && this.files.length > 0) {\n                        currentWidget.uploadFile(this.files[0]);\n                    }\n                });\n\n            } else {\n                this.addOldBrowserForm();\n\n                this.element.on(\"change\" + this.eventNamespace, \"input[type=file]\", function wFileChangeOld(/*event*/)\n                {\n                    currentWidget.uploadFileForm();\n                });\n            }\n        },\n\n        getWidgetValue: function wFilegetWidgetValue()\n        {\n            var $inputFile = this.element.find(\"input[type=file]\");\n            return $inputFile.attr(\"fileValue\") || null;\n        },\n\n        /**\n         * Add real form and iframe for browsers without FormData\n         */\n        addOldBrowserForm: function wFileAddOldBrowserForm()\n        {\n            var inputFile = this.element.find(\"input[type=file]\");\n            var inputText = this.element.find(\".dcpAttribute__value\");\n            var inputId = inputFile.attr(\"id\");\n            var fileTarget = \"fileupload\" + inputId + '-' + this.options.index;\n            var originalText = inputText.val();\n            var scope = this;\n            var formHtml = '<form id=\"form{{id}}\" target=\"{{target}}\" method=\"POST\" enctype=\"multipart/form-data\" action=\"api/v1/temporaryFiles/?alt=html\">' +\n                '</form><iframe style=\"display:none\" name=\"{{target}}\"></iframe>';\n            $(Mustache.render(formHtml || \"\", {id: inputId, target: fileTarget})).insertAfter(inputFile);\n\n            var container = '<div class=\"dcpFile__form\"/>';\n\n            $(container).insertAfter(inputText).append(inputText);\n\n            this.element.find(\"form\").append(inputFile).css(\"display\", \"inline\");\n\n            this.element.find(\".dcpFile__form\").append(this.element.find(\"form\"));\n\n            inputFile.show();\n            this.element.addClass(\"dcpFile--old-browser\");\n\n            inputFile.attr(\"title\", inputText.attr(\"data-original-title\"));\n            inputFile.tooltip({\n                trigger: \"hover\",\n                placement: \"bottom\",\n                container: \".dcpDocument\"\n            });\n            this.element.find(\"iframe\").on(\"load\", function wFileLoad()\n            {\n                if ($(this).contents().find(\"textarea\").length === 0) {\n                    // fake load when insert iframe\n                    return;\n                }\n                var response = JSON.parse($(this).contents().find(\"textarea\").val());\n\n                if (response.exceptionMessage) {\n                    _.each(response.messages, function wFileMessages(errorMessage)\n                    {\n\n                        $('body').trigger(\"notification\", {\n                            htmlMessage: errorMessage.contentHtml,\n                            message: errorMessage.contentText,\n\n                            type: errorMessage.type\n                        });\n\n                    });\n                } else {\n                    var dataFile = response.data.file;\n                    scope.setValue({\n                        value: dataFile.reference,\n                        size: dataFile.size,\n                        fileName: dataFile.fileName,\n                        displayValue: dataFile.fileName,\n                        creationDate: dataFile.cdate,\n                        thumbnail: dataFile.thumbnailUrl,\n                        url: dataFile.downloadUrl,\n                        icon: dataFile.iconUrl\n                    });\n                }\n\n                inputText.val(originalText);\n                inputText.removeClass(\"dcpAttribute__value--transferring\");\n                scope._setVisibilitySavingMenu(\"visible\");\n            });\n\n        },\n\n        /**\n         * Condition before upload file\n         * @param file\n         * @returns {boolean}\n         */\n        uploadCondition: function wFileUploadCondition(file)\n        {\n            return true;\n        },\n\n        uploadFileForm: function wFileUploadFileForm()\n        {\n            var inputText = this.element.find(\".dcpAttribute__value\");\n\n            var inputFile = this.element.find(\"input[type=file]\");\n            this._setVisibilitySavingMenu(\"disabled\");\n\n            inputText.addClass(\"dcpAttribute__value--transferring\");\n            inputText.val(this.options.labels.transferring + ' ' + inputFile.val().split(/[\\\\/]/).pop());\n            this.element.find(\"form\").submit();\n        },\n\n        uploadFile: function wFileUploadFile(firstFile)\n        {\n            var inputText = this.element.find(\".dcpAttribute__value\");\n            var formData = new FormData();\n            var newFileName = firstFile.name;\n            var originalText = inputText.val();\n            var originalBgColor = inputText.css(\"background-color\");\n            var currentWidget = this;\n            var event = {prevent: false};\n            var currentFileValue = this.options.attributeValue;\n            var $inputFile = this.element.find(\"input[type=file]\");\n\n            if (!this.uploadCondition(firstFile)) {\n                return;\n            }\n\n            var isNotPrevented = currentWidget._trigger(\"uploadfile\", event, {\n                $el: currentWidget.element,\n                index: currentWidget._getIndex(),\n                file: firstFile\n            });\n            if (!isNotPrevented) {\n                return;\n            }\n            //currentWidget.setValue(currentFileValue);\n            currentWidget.uploadingFiles++;\n            formData.append('dcpFile', firstFile);\n            $inputFile.prop(\"disabled\", true);\n\n            inputText.addClass(\"dcpAttribute__value--transferring\");\n            var infoBgColor = inputText.css(\"background-color\");\n            $.ajax({\n                type: 'POST',\n                url: \"api/v1/temporaryFiles/\",\n                processData: false,\n                contentType: false,\n                cache: false,\n                data: formData,\n\n                xhr: function wFileXhrAddProgress()\n                {\n                    var xhrObject = $.ajaxSettings.xhr();\n                    if (xhrObject.upload) {\n                        xhrObject.upload.addEventListener('progress', function wFileProgress(event)\n                        {\n                            var percent = 0;\n                            var position = event.loaded || event.position;\n                            var total = event.total;\n                            if (event.lengthComputable) {\n                                percent = Math.ceil(position / total * 100);\n                            }\n                            if (percent >= 100) {\n                                inputText.val(currentWidget.options.labels.recording + ' ' + newFileName);\n                                inputText.removeClass(\"dcpAttribute__value--transferring\");\n                                inputText.addClass(\"dcpAttribute__value--recording progress-bar active progress-bar-striped\");\n                                inputText.css(\"background\", \"\");\n                                inputText.css(\"background-image\", \"\");\n                            } else {\n                                inputText.addClass(\"dcpAttribute__value--transferring\");\n                                inputText.val(currentWidget.options.labels.transferring + ' ' + newFileName);\n                                inputText.css(\"background-color\", \"red\");\n                                inputText.css(\"background\", \"linear-gradient(to right,\" +\n                                    infoBgColor + \" 0%,\" +\n                                    infoBgColor + \" \" + percent + \"%,\" +\n                                    originalBgColor + (percent + 1) + \"%,\" +\n                                    originalBgColor + \" 100%) \");\n                            }\n                        }, false);\n                    }\n                    return xhrObject;\n                }\n\n            }).done(function wFileUploadDone(data)\n            {\n                var dataFile = data.data.file;\n                var event = {prevent: false};\n                var fileValue = {\n                    value: dataFile.reference,\n                    size: dataFile.size,\n                    fileName: dataFile.fileName,\n                    displayValue: dataFile.fileName,\n                    creationDate: dataFile.cdate,\n                    thumbnail: dataFile.thumbnailUrl,\n                    url: dataFile.downloadUrl,\n                    icon: dataFile.iconUrl\n                };\n\n                currentWidget.uploadingFiles--;\n\n                currentWidget.setValue(fileValue);\n                currentWidget._trigger(\"uploadfiledone\", event, {\n                    $el: currentWidget.element,\n                    index: currentWidget._getIndex(),\n                    file: fileValue\n                });\n\n            }).fail(function wFileUploadFail(data)\n            {\n                currentWidget.uploadingFiles--;\n                currentWidget._trigger(\"uploadfiledone\", event, {\n                    $el: currentWidget.element,\n                    index: currentWidget._getIndex(),\n                    file: null\n                });\n                inputText.css(\"background-image\", \"url(\" + currentWidget.options.attributeValue.icon + ')');\n                var result = JSON.parse(data.responseText);\n                if (result) {\n                    _.each(result.messages, function wFileErrorMessages(errorMessage)\n                    {\n\n                        $('body').trigger(\"notification\", {\n                            htmlMessage: errorMessage.contentHtml,\n                            message: errorMessage.contentText,\n\n                            type: errorMessage.type\n                        });\n\n                    });\n                } else {\n                    inputText.css(\"background\", \"\");\n                    $('body').trigger(\"notification\", {\n                        htmlMessage: 'File <b>' + firstFile.name + '</b> cannot be uploaded',\n                        message: event.statusText,\n                        type: \"error\"\n                    });\n                }\n\n            }).always(function wFileUploadEnd()\n            {\n                $inputFile.prop(\"disabled\", false);\n                inputText.val(originalText);\n                inputText.css(\"background\", \"\");\n                inputText.removeClass(\"progress-bar active progress-bar-striped dcpAttribute__value--transferring dcpAttribute__value--recording\");\n            });\n\n        },\n\n        /**\n         * Modify value to widget and send notification to the view\n         * @param value\n         */\n        setValue: function wFileSetValue(value)\n        {\n            var $inputFile = this.element.find(\"input[type=file]\");\n            // call wAttribute:::setValue() :send notification\n            this._super(value);\n\n            if (this.getMode() === \"write\" && this.uploadingFiles === 0) {\n                this.redraw();\n            }\n\n            $inputFile.attr(\"fileValue\", (value) ? value.value : null);\n        },\n\n        /**\n         * Return the url of common link\n         * @returns {*}\n         */\n        getLink: function wFileGetLink()\n        {\n            var link = this._super();\n            if (this.options.attributeValue.url && (!link || !link.url)) {\n                link.url = this.options.attributeValue.url;\n            }\n\n            return link;\n        },\n\n        getType: function wFileGetType()\n        {\n            return \"file\";\n        }\n\n    });\n\n    return $.fn.dcpFile;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/file/wFile.js","/*global define, _super*/\n(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'underscore',\n            'dcpDocument/widgets/attributes/text/wText'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window._);\n    }\n}(window, function require_htmltext($, _)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpHtmltext\", $.dcp.dcpText, {\n\n        options: {\n            type: \"htmltext\",\n            renderOptions: {\n                anchors: {\n                    target: \"_blank\"\n                },\n                toolbar: 'Basic',\n                height: '100px',\n                toolbarStartupExpanded: true,\n                ckEditorConfiguration: {},\n                ckEditorAllowAllTags:false\n            },\n            locale: \"en\"\n        },\n\n        ckEditorInstance: null,\n\n        _initDom: function wHtmltext_InitDom()\n        {\n            var currentWidget = this, bind_super = _.bind(this._super, this), bindInitEvent = _.bind(this._initEvent, this);\n            try {\n                this.popupWindows = {};\n                if (this.getMode() === \"write\") {\n                    (function wHtmltext_umdRequire(factory)\n                    {\n                        if (typeof define === 'function' && define.amd) {\n                            require.ensure([\n                                'documentCkEditor'\n                            ], () => {\n                                require('documentCkEditor');\n                                factory()\n                            }, \"documentCkEditor\");\n                        } else {\n                            //noinspection JSUnresolvedVariable\n                            factory();\n                        }\n                    }(function wHtmltext_initEditDom()\n                    {\n                        var options = _.extend(currentWidget.ckOptions(), currentWidget.options.renderOptions.ckEditorConfiguration);\n                        bind_super();\n                        if (currentWidget.options.renderOptions.ckEditorAllowAllTags) {\n                            // Allow all HTML tags\n                            options.allowedContent = {\n                                $1: {\n                                    // Use the ability to specify elements as an object.\n                                    elements: window.CKEDITOR.dtd,\n                                    attributes: true,\n                                    styles: true,\n                                    classes: true\n                                }\n                            };\n                            options.disallowedContent = 'script; *[on*]';\n                        }\n                        currentWidget.ckEditorInstance = currentWidget.getContentElements().ckeditor(\n                            options\n                        ).editor;\n                        currentWidget.options.attributeValue.value = currentWidget.ckEditorInstance.getData();\n                        bindInitEvent();\n                    }));\n                } else {\n                    bind_super();\n                }\n            } catch (e) {\n                if (window.dcp.logger) {\n                    window.dcp.logger(e);\n                } else {\n                    console.error(e);\n                }\n            }\n        },\n\n        /**\n         * Define option set for ckEditor widget\n         * @returns {{language: string, contentsCss: string[], removePlugins: string, toolbarCanCollapse: boolean, entities: boolean, filebrowserImageBrowseUrl: string, filebrowserImageUploadUrl: string, toolbar_Full: *[], toolbar_Default: *[], toolbar_Simple: *[], toolbar_Basic: *[], removeButtons: string}}\n         */\n        ckOptions: function wHtmlTextCkOptions()\n        {\n            var locale = this.options.locale;\n            var hrefBase=$(\"head base\").attr(\"href\") || \"\"; // no use document.baseURI because get complete url if no base href defined\n            if (this.options.renderOptions.toolbar) {\n                this.options.renderOptions.ckEditorConfiguration.toolbar = this.options.renderOptions.toolbar;\n            }\n            if (this.options.renderOptions.height) {\n                this.options.renderOptions.ckEditorConfiguration.height = this.options.renderOptions.height;\n            }\n            if (!_.isUndefined(this.options.renderOptions.toolbarStartupExpanded)) {\n                this.options.renderOptions.ckEditorConfiguration.toolbarStartupExpanded = this.options.renderOptions.toolbarStartupExpanded;\n            }\n            return {\n                language: locale.substring(0, 2),\n                contentsCss: ['css/a4/document/ckeditor.css'],\n                removePlugins: 'elementspath', // no see HTML path elements\n                toolbarCanCollapse: true,\n                entities: false, // no use HTML entities\n                baseHref : hrefBase,\n                filebrowserImageBrowseUrl: hrefBase+'?sole=Y&app=FDL&action=CKIMAGE',\n                filebrowserImageUploadUrl: hrefBase+'?sole=Y&app=FDL&action=CKUPLOAD',\n                toolbar_Full: [\n                    {\n                        name: 'document',\n                        items: ['Sourcedialog', '-', 'NewPage', 'DocProps', 'Preview', 'Print', '-', 'Templates']\n                    },\n                    {\n                        name: 'clipboard',\n                        items: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo']\n                    },\n                    {name: 'editing', items: ['Find', 'Replace', '-', 'SelectAll', '-']},\n                    {\n                        name: 'forms',\n                        items: ['Form', 'Checkbox', 'Radio', 'TextField', 'Textarea', 'Select', 'Button', 'ImageButton',\n                            'HiddenField']\n                    },\n                    '/',\n                    {\n                        name: 'basicstyles',\n                        items: ['Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat']\n                    },\n                    {\n                        name: 'paragraph',\n                        items: ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', 'CreateDiv',\n                            '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock', '-', 'BidiLtr', 'BidiRtl']\n                    },\n                    {name: 'links', items: ['Link', 'Unlink']},\n                    {\n                        name: 'insert',\n                        items: ['Image', 'Table', 'HorizontalRule', 'Smiley', 'SpecialChar', 'PageBreak', 'Iframe']\n                    },\n                    '/',\n                    {name: 'styles', items: ['Styles', 'Format', 'Font', 'FontSize']},\n                    {name: 'colors', items: ['TextColor', 'BGColor']},\n                    {name: 'tools', items: ['Maximize', 'ShowBlocks', '-', 'About']}\n                ],\n                toolbar_Default: [\n                    {name: 'document', items: ['Sourcedialog']},\n                    {\n                        name: 'clipboard',\n                        items: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo']\n                    },\n                    {name: 'editing', items: ['Find', 'Replace', '-', 'SelectAll']},\n                    {\n                        name: 'basicstyles',\n                        items: ['Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat']\n                    },\n                    {\n                        name: 'paragraph',\n                        items: ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', 'CreateDiv',\n                            '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock', '-', 'BidiLtr', 'BidiRtl']\n                    },\n                    {name: 'links', items: ['Link', 'Unlink']},\n                    {name: 'insert', items: ['Image', 'Table', 'HorizontalRule', 'SpecialChar', 'PageBreak', 'Iframe']},\n                    {name: 'styles', items: ['Styles', 'Format', 'Font', 'FontSize']},\n                    {name: 'colors', items: ['TextColor', 'BGColor']},\n                    {name: 'tools', items: ['Maximize', 'ShowBlocks', '-', 'About']}\n                ],\n                toolbar_Simple: [\n                    {name: 'document', items: []},\n                    {name: 'basicstyles', items: ['Bold', 'Italic', 'Underline', 'Strike', '-', 'RemoveFormat']},\n                    {\n                        name: 'paragraph', items: ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-',\n                        '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock']\n                    },\n                    {name: 'links', items: ['Link', 'Unlink']},\n                    {name: 'insert', items: ['Image', 'Table', 'SpecialChar']},\n                    {name: 'styles', items: ['Format', 'FontSize']},\n                    {name: 'colors', items: ['TextColor', 'BGColor']},\n                    {name: 'tools', items: ['Maximize', 'Sourcedialog', '-', 'About']}\n                ],\n                toolbar_Basic: [\n                    {\n                        name: 'links',\n                        items: ['Bold', 'Italic', '-', 'NumberedList', 'BulletedList', '-', 'Link', 'Unlink', '-', 'Maximize', 'About']\n                    }\n                ],\n                removeButtons: \"\"\n            };\n        },\n\n        _initEvent: function _initEvent()\n        {\n            var currentWidget = this;\n            this._super();\n            if (this.ckEditorInstance) {\n                this.ckEditorInstance.on(\"change\", function wHtmltext_change()\n                {\n                    currentWidget.setValue({value: this.getData()});\n                });\n\n                this.ckEditorInstance.on(\"focus\", function wHtmltext_focus()\n                {\n                    var ktTarget = currentWidget.element.find(\".input-group\");\n                    currentWidget.showInputTooltip(ktTarget);\n                    currentWidget.element.find(\".cke\").addClass(\"k-state-focused\");\n                    currentWidget.element.closest(\".dcpAttribute__content\").addClass(\"dcpAttribute--focus\");\n                });\n\n                this.ckEditorInstance.on(\"blur\", function wHtmltext_blur()\n                {\n                    var ktTarget = currentWidget.element.find(\".input-group\");\n                    currentWidget.hideInputTooltip(ktTarget);\n                    currentWidget.element.find(\".cke\").removeClass(\"k-state-focused\");\n                    currentWidget.element.closest(\".dcpAttribute__content\").removeClass(\"dcpAttribute--focus\");\n                });\n\n                this.ckEditorInstance.on(\"instanceReady\", function wHtmltext_loaded()\n                {\n                    currentWidget._trigger(\"widgetReady\");\n                });\n\n                this.element.on(\"postMoved\" + this.eventNamespace, function wHtmlTextOnPostMoved(event, eventData)\n                {\n                    if (eventData && (eventData.to === currentWidget.options.index )) {\n                        currentWidget.redraw();\n                    }\n                });\n            }\n\n            //If we are not in CKEDITOR mode, we take care of anchor and redirect it\n            if (this.getMode() !== \"write\") {\n                this.element.on(\"click.\" + this.eventNamespace, 'a:not([href^=\"#action/\"]):not([data-action])', function wHtmlAnchorClick(event) {\n                    var internalEvent = {prevent: false},\n                        anchor = this,\n                        $anchor = $(this),\n                        isNotPrevented,\n                        anchorsConfig,\n                        anchorsTarget,\n                        wFeature = '',\n                        href,\n                        dcpWindow;\n\n                    if (event.stopPropagation) {\n                        event.stopPropagation();\n                    }\n                    event.preventDefault();\n\n                    anchorsConfig = _.extend({}, currentWidget.options.renderOptions.anchors);\n\n                    isNotPrevented = currentWidget._trigger(\"anchorClick\", internalEvent, {\n                        $el: currentWidget.element,\n                        index: currentWidget._getIndex(),\n                        options: {\n                            anchor: anchor,\n                            anchorsConfig: anchorsConfig\n                        }\n                    });\n                    if (isNotPrevented) {\n                        var $base = $(\"base\");\n                        var isAbsUrl = new RegExp('^(?:[a-z]+:)?//', 'i');\n\n                        anchorsTarget = anchorsConfig.target || \"_blank\";\n                        href = anchor.href;\n\n                        if ($anchor.attr(\"href\") && $anchor.attr(\"href\").substring(0, 1) === \"#\") {\n                            href = window.location.protocol +\n                                \"//\" + window.location.hostname +\n                                (window.location.port ? ':' + window.location.port: '') +\n                                (window.location.pathname ? window.location.pathname : '/') +\n                                (window.location.search ? window.location.search : '')\n                                +$anchor.attr(\"href\");\n                        }\n\n                        switch (anchorsTarget) {\n                            case \"_dialog\":\n                                if (currentWidget.popupWindows[href]) {\n                                    dcpWindow = currentWidget.popupWindows[href];\n                                } else {\n                                    dcpWindow = $('<div/>').appendTo('body').dcpWindow({\n                                        width: anchorsConfig.windowWidth,\n                                        height: anchorsConfig.windowHeight,\n                                        modal: anchorsConfig.modal,\n                                        content: href,\n                                        iframe: true\n                                    });\n\n                                    currentWidget.popupWindows[href] = dcpWindow;\n                                    dcpWindow.data('dcpWindow').kendoWindow().center();\n                                }\n                                dcpWindow.data('dcpWindow').open();\n                                break;\n                            case \"_self\":\n                                // For IE : Not honor base href in this case\n                                if (!isAbsUrl.test(href)) {\n                                    window.location.href = $base.attr(\"href\") + href;\n                                } else {\n                                    window.location.href = href;\n                                }\n                                break;\n                            default:\n                                if (anchorsConfig.windowWidth || anchorsConfig.windowHeight) {\n                                    if (anchorsConfig.windowWidth) {\n                                        wFeature += \"width=\" + parseInt(anchorsConfig.windowWidth, 10) + \",\";\n                                    }\n                                    if (anchorsConfig.windowHeight) {\n                                        wFeature += \"height=\" + parseInt(anchorsConfig.windowHeight, 10) + \",\";\n                                    }\n                                    wFeature += \"resizable=yes,scrollbars=yes\";\n                                }\n                                if (!isAbsUrl.test(href)) {\n                                    href= $base.attr(\"href\") + href;\n                                }\n                                window.open(href, anchorsTarget, wFeature);\n                                break;\n                        }\n                    }\n                });\n            }\n        },\n        /**\n         * Define inputs for focus\n         * @protected\n         */\n        _getFocusInput: function wHtmltext_getFocusInput()\n        {\n            return this.element;\n        },\n        /**\n         * No use parent change\n         */\n        _initChangeEvent: function wHtmltext_initChangeEvent()\n        {\n\n        },\n\n        getWidgetValue: function wHtmltext_getWidgetValue()\n        {\n            return this.getContentElements().val();\n        },\n\n        /**\n         * Change the value of the widget\n         * @param value\n         */\n        setValue: function wHtmltextSetValue(value)\n        {\n            value = _.clone(value);\n            if (value.value === null) {\n                // ckEditor restore original value if set to null\n                value.value = '';\n            }\n            if (_.has(value, \"value\") && !_.has(value, \"displayValue\")) {\n                value.displayValue = value.value;\n            }\n            if (this.getMode() === \"write\") {\n                // Flash element only\n                var originalValue = this.ckEditorInstance.getData();\n                // : explicit lazy equal\n\n                //noinspection JSHint\n                if (originalValue.trim() != value.value.trim()) {\n\n                    // Modify value only if different\n                    this.getContentElements().val(value.value);\n                    this.flashElement(this.element.find('iframe'));\n                }\n            } else\n                if (this.getMode() === \"read\") {\n                    this.getContentElements().html(value.displayValue);\n                } else {\n                    throw new Error(\"Attribute \" + this.options.id + \" unknown mode \" + this.getMode());\n                }\n\n            // call wAttribute::setValue()\n            $.dcp.dcpAttribute.prototype.setValue.call(this, value);\n        },\n\n        getType: function wHtmltext_getType()\n        {\n            return \"htmltext\";\n        },\n\n        _destroy: function wHtmlTextDestroy()\n        {\n            var currentWidget = this;\n            if (this.ckEditorInstance && this.ckEditorInstance.destroy) {\n                if (this.ckEditorInstance.status === \"loaded\" || this.ckEditorInstance.status === \"ready\") {\n                    this.ckEditorInstance.destroy();\n                    _.defer(function wHtmltext_deferDestroy()\n                    {\n                        currentWidget._destroy();\n                    });\n                    return;\n                } else\n                    if (this.ckEditorInstance.status === \"unloaded\") {\n                        this.ckEditorInstance.on(\"loaded\", function wHtmltext_loaded()\n                        {\n                            currentWidget._destroy();\n                        });\n                        return;\n                    }\n            }\n            _.each(this.popupWindows, function wHtmltextDestroyPopup(pWindow)\n            {\n                pWindow.data('dcpWindow').destroy();\n            });\n            this._super();\n        },\n\n        /**\n         * Trigger a ready event when widget is render\n         */\n        _triggerReady: function wAttributeReady()\n        {\n            if (this.getMode() !== \"write\") {\n                this._super();\n            }\n        }\n\n    });\n\n    return $.fn.dcpHtmltext;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/htmltext/wHtmltext.js","(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'mustache',\n            'dcpDocument/widgets/attributes/file/wFile'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window.Mustache);\n    }\n}(window, function wImageWidget($, Mustache)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpImage\", $.dcp.dcpFile, {\n\n        options: {\n            type: \"image\",\n            labels: {\n                dropFileHere: \"Drop image here\",\n                placeHolder: \"Click to upload an image\",\n                tooltipLabel: \"Choose image\",\n                downloadLabel: \"Download the image\"\n            },\n            renderOptions: {\n                thumbnailSize: \"100x100\"\n            }\n        },\n\n        _initDom: function wImageInitDom()\n        {\n            if (this.getMode() === \"read\") {\n                if (this.options.attributeValue.url) {\n                    if (!this.options.renderOptions.htmlLink.url) {\n                        if (this.options.renderOptions.thumbnailSize ) {\n                            var reSize = /sizes\\/([^\\/]+)/;\n                            this.options.attributeValue.thumbnail=this.options.attributeValue.thumbnail.replace(reSize,\"sizes/\"+this.options.renderOptions.thumbnailSize)+\".png\";\n\n                        } else\n                            if (!this.options.renderOptions.thumbnailSize) {\n                                this.options.attributeValue.thumbnail = this.options.attributeValue.url;\n                            }\n                    }\n\n                }\n            }\n            if (this.options.attributeValue.thumbnail) {\n                this.options.attributeValue.hash = this.options.attributeValue.creationDate.replace(/[ :-]/g, \"\");\n                this.options.attributeValue.thumbnail+='?c='+this.options.attributeValue.hash ;\n            }\n            this._super();\n        },\n\n        _initEvent: function wFileInitEvent()\n        {\n            this._super();\n            if (this.getMode() === \"read\") {\n                this._initDisplayEvent();\n            }\n\n        },\n\n        _initDisplayEvent: function wImageinitDisplayEvent()\n        {\n            var scope = this;\n            var htmlLink = this.getLink();\n            this.element.off(\"click\");\n            this.element.on(\"click\" + this.eventNamespace, '.dcpAttribute__content__link', function wImageClick(event)\n            {\n\n                if (htmlLink.target === \"_dialog\") {\n                    event.preventDefault();\n                    var index = $(this).data(\"index\");\n                    var bdw = $('<div class=\"dcpImage-window\"><img class=\"img-responsive\" src=\"' + $(this).attr(\"href\") + '\"/></div>');\n                    $('body').append(bdw);\n                    // $(this).attr(\"href\"),\n                    var dw = bdw.kendoWindow({\n                        title: scope.options.attributeValue.displayValue,\n                        width: htmlLink.windowWidth,\n                        height: htmlLink.windowHeight,\n                        iframe: false,\n                        actions: [\n                            \"Maximize\",\n                            \"Close\"\n                        ]\n                    });\n\n                    dw.data(\"kendoWindow\").center().open();\n                }\n            });\n        },\n\n        /**\n         * Condition before upload file\n         * @returns {boolean}\n         */\n        uploadCondition: function wImageUploadCondition(file)\n        {\n            if (file.type.substr(0, 5) !== \"image\") {\n                this.setError(\"Invalid image file\");\n                return false;\n            }\n            this.setError(null);\n            return true;\n        },\n\n        getType: function wImageGetType()\n        {\n            return \"image\";\n        }\n\n    });\n\n    return $.fn.dcpImage;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/image/wImage.js","/*global define*/\n(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'underscore',\n            'mustache',\n            'dcpDocument/widgets/attributes/text/wText',\n            'kendo-culture-fr'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window._, window.Mustache);\n    }\n}(window, function requireWint($, _, Mustache)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpInt\", $.dcp.dcpText, {\n\n        options: {\n            type: \"int\",\n\n            renderOptions: {\n                kendoNumericConfiguration: {},\n                max: null,\n                min: null,\n                numberFormat: 'n0'\n            },\n            labels: {\n                decreaseLabel: \"Decrease value\",\n                increaseLabel: \"Increase value\"\n            }\n        },\n        /**\n         * The kendoNumericTextBox widget instance\n         */\n        kendoWidget: null,\n\n        _initDom: function wIntInitDom()\n        {\n            this.element.addClass(\"dcpAttribute__content\");\n            this.element.attr(\"data-type\", this.getType());\n            this.element.attr(\"data-attrid\", this.options.id);\n            if (parseFloat(this.options.attributeValue.displayValue) === parseFloat(this.options.attributeValue.value)) {\n                this.options.attributeValue.displayValue = this.formatNumber(this.options.attributeValue.value);\n            }\n\n            if (this.getMode() === \"read\") {\n                if (this.options.renderOptions.format) {\n                    this.options.attributeValue.formatValue = Mustache.render(this.options.renderOptions.format || \"\",\n                        this.options.attributeValue);\n                }\n            }\n\n            //noinspection JSPotentiallyInvalidConstructorUsage,JSAccessibilityCheck\n            $.dcp.dcpAttribute.prototype._initDom.apply(this, []);\n\n            this.kendoWidget = this.element.find(\".dcpAttribute__value--edit\");\n            if (this.kendoWidget) {\n                if (this.options.hasAutocomplete) {\n                    this.activateAutocomplete(this.kendoWidget);\n                } else {\n                    this._activateNumber(this.kendoWidget);\n                }\n            }\n\n            if (this.element.find(\".dcpAttribute__content__buttons button\").length === 0) {\n                this.element.find(\".k-numeric-wrap\").addClass(\"dcpAttribute__content__nobutton\");\n            }\n        },\n\n        _initChangeEvent: function wIntInitChangeEvent()\n        {\n            // set by widget if no autocomplete\n            if (this.options.hasAutocomplete) {\n                this._super();\n            }\n        },\n\n        setValue: function wIntSetValue(value)\n        {\n            // this._super.(value);\n            // Don't call dcpText::setValue()\n\n            value = _.clone(value);\n\n            if (_.has(value, \"value\") && !_.has(value, \"displayValue\")) {\n                value.displayValue = this.formatNumber(value.value);\n            } else {\n                if (parseFloat(value.displayValue) === parseFloat(value.value)) {\n                    value.displayValue = this.formatNumber(value.value);\n                }\n            }\n\n            //noinspection JSPotentiallyInvalidConstructorUsage\n            $.dcp.dcpAttribute.prototype.setValue.apply(this, [value]);\n\n            if (this.getMode() === \"write\") {\n                var originalValue = this.kendoWidget.data(\"kendoNumericTextBox\").value();\n                // : explicit lazy equal\n                //noinspection JSHint\n                if (originalValue != value.value) {\n                    this.kendoWidget.data(\"kendoNumericTextBox\").value(value.value);\n                    // Modify value only if different\n                    this.flashElement();\n                }\n            } else {\n                if (this.getMode() === \"read\") {\n                    this.getContentElements().text(value.displayValue);\n                } else {\n                    throw new Error(\"Attribute \" + this.options.id + \" unkown mode \" + this.getMode());\n                }\n            }\n\n        },\n\n        _activateNumber: function wIntActivateNumber(inputValue)\n        {\n            var kendoWidget, currentCSSClass = inputValue.attr(\"class\");\n            inputValue.removeClass(currentCSSClass);\n            //force display inline-block for work with kendo\n            inputValue.css(\"display\", \"inline-block\");\n            kendoWidget = inputValue.kendoNumericTextBox(this.getKendoNumericOptions());\n            kendoWidget.closest(\".k-widget\").addClass(currentCSSClass);\n            return kendoWidget;\n        },\n\n        formatNumber: function wIntFormatNumber(value)\n        {\n            try {\n                value = kendo.toString(value, this.getKendoNumericOptions().format);\n            } catch (e) {\n                if (window.dcp.logger) {\n                    window.dcp.logger(e);\n                } else {\n                    console.error(e);\n                }\n                console.error(\"Unable to format the number \" + e);\n            }\n            return value;\n        },\n\n        /**\n         * Get kendo option from normal options and from renderOptions.kendoNumeric\n         * @returns {*}\n         */\n        getKendoNumericOptions: function wIntGetKendoNumericOptions()\n        {\n            var scope = this,\n                kendoOptions = {},\n                defaultOptions = {\n                    decimals: 0,\n                    downArrowText: scope.options.labels.decreaseLabel,\n                    upArrowText: scope.options.labels.increaseLabel,\n                    format: scope.options.renderOptions.numberFormat,\n                    max: scope.options.renderOptions.max,\n                    min: scope.options.renderOptions.min,\n                    change: function wIntGetKendoNumericOptions_onChange()\n                    {\n                        // Need to set by widget to honor decimals option\n                        scope.setValue({value: this.value()});\n                    }\n                };\n            if (_.isObject(scope.options.renderOptions.kendoNumericConfiguration)) {\n                kendoOptions = scope.options.renderOptions.kendoNumericConfiguration;\n            }\n\n            return _.extend(defaultOptions, kendoOptions);\n        },\n\n        getType: function wIntGetType()\n        {\n            return \"int\";\n        },\n\n        testValue: function wIntTestValue(value)\n        {\n            this._super(value);\n            if (!_.isNumber(value.value)) {\n                throw new Error(\"The value must be a number for (attrid : \" + this.options.id + \")\");\n            }\n        },\n\n        _destroy: function _destroy()\n        {\n            if (this.kendoWidget && this.kendoWidget.data(\"kendoNumericTextBox\")) {\n                this.kendoWidget.data(\"kendoNumericTextBox\").destroy();\n            }\n            this._super();\n        }\n\n    });\n\n    return $.fn.dcpInt;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/int/wInt.js","(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'underscore',\n            'mustache',\n            'dcpDocument/widgets/widget'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window._, window.Mustache);\n    }\n}(window, function requireDcpLabel($, _, Mustache)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpLabel\", {\n        options: {\n            renderOptions: {\n                helpLinkIdentifier: 0\n            },\n            labels: {\n                helpTitle: \"Info\"\n            }\n        },\n        _create: function wLabel_create()\n        {\n            this._initDom();\n            this._initActionClickEvent();\n        },\n\n        _initDom: function wLabel_initDom()\n        {\n            this.element.addClass(\"dcpAttribute__label control-label dcpLabel\");\n            this.element.append(Mustache.render(this._getTemplate() || \"\", this.options));\n            if (this.options.renderOptions && this.options.renderOptions.attributeLabel) {\n                this.setLabel(this.options.renderOptions.attributeLabel);\n            }\n        },\n\n        /**\n         * Init event for #action/ links\n         *\n         * @protected\n         */\n        _initActionClickEvent: function wAttributeInitActionClickEvent() {\n            var scopeWidget = this;\n\n            this.element.on(\"click.\" + this.eventNamespace, 'a[href^=\"#action/\"], a[data-action], button[data-action]', function wAttributeActionClick(event) {\n                var $this = $(this),\n                    action,\n                    options,\n                    eventOptions;\n\n                event.preventDefault();\n                if (event.stopPropagation) {\n                    event.stopPropagation();\n                }\n\n                action = $this.data('action') || $this.attr(\"href\");\n                options = action.substring(8).split(\":\");\n                eventOptions = {\n                    target: event.target,\n                    index: -1,\n                    eventId: options.shift(),\n                    options: options\n                };\n\n                scopeWidget._trigger(\"externalLinkSelected\", event, eventOptions);\n                return this;\n            });\n        },\n\n        setLabel: function wLabelSetLabel(label)\n        {\n            this.element.find(\"label\").text(label);\n        },\n\n        setError: function wLabelSetError(message)\n        {\n            if (message) {\n                this.element.addClass(\"has-error\");\n            } else {\n                this.element.removeClass(\"has-error\");\n            }\n        },\n\n        _getTemplate: function wLabel_getTemplate()\n        {\n            if (this.options.templates && this.options.templates.label) {\n                return this.options.templates.label;\n            }\n            if (window.dcp && window.dcp.templates && window.dcp.templates.label) {\n                return window.dcp.templates.label;\n            }\n            throw new Error(\"Unknown label template \");\n        }\n    });\n\n    return $.fn.dcpLabel;\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/label/wLabel.js","/*global define*/\n(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'underscore',\n            'dcpDocument/widgets/attributes/text/wText'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window._);\n    }\n}(window,  function requireDcpLongText($, _) {\n    'use strict';\n\n    $.widget(\"dcp.dcpLongtext\", $.dcp.dcpText, {\n\n        options: {\n            type: \"longtext\",\n            renderOptions: {\n                displayedLineNumber: 5\n            }\n        },\n\n        _initDom: function dcpLongtext_initDom() {\n            var maxDisplayedLine = this.options.renderOptions.displayedLineNumber;\n\n            this._super();\n            this._maxLinesNumber(maxDisplayedLine);\n\n        },\n\n        _initEvent: function dcpLongtext_initEvent() {\n            if (this.getMode() === \"write\") {\n                this._initAutoFit();\n            }\n            this._super();\n        },\n\n        _maxLinesNumber: function dcpLongtext_maxLinesNumber(lineNumber) {\n            lineNumber = parseInt(lineNumber, 10);\n            if (lineNumber > 0) {\n                var scope = this;\n                _.defer(function dcpLongtext_deferComputeSize() {\n                    var $element = scope.getContentElements();\n                    var delta = parseFloat($element.css(\"padding-top\")) + parseFloat($element.css(\"padding-bottom\"));\n                    var lineH = $element.css(\"line-height\");\n                    // In IE9 , the result is just a number without unit\n                    if (lineH) {\n                        if (lineH.indexOf(\"px\") > 0) {\n                            $element.css(\"max-height\", (lineNumber * parseFloat(lineH) + delta) + \"px\");\n                        } else {\n                            $element.css(\"max-height\", (lineNumber * 1.1) + \"em\");\n                        }\n                    }\n                });\n            }\n        },\n        /**\n         * Define inputs for focus\n         * @protected\n         */\n        _getFocusInput: function dcpLongtext_getFocusInput() {\n            return this.element.find('textarea[name=\"' + this.options.id + '\"]');\n        },\n\n        _fitToContent: function dcpLongtext_fitToContent($element) {\n\n            var delta = parseFloat($element.css(\"padding-top\")) + parseFloat($element.css(\"padding-bottom\")),\n                element = $element.get(0),\n                maxHeight = parseFloat($element.css(\"max-height\"));\n            if (element && element.scrollHeight > element.clientHeight) {\n\n                $element.height(element.scrollHeight  - delta +1);\n                if (maxHeight > 0) {\n                    if (element.scrollHeight > maxHeight) {\n                        $element.css(\"resize\", \"none\");\n                    } else {\n                        $element.css(\"resize\", \"\");\n                    }\n                }\n            }\n        },\n\n        _initAutoFit: function dcpLongtext_initAutoFit() {\n            var scope = this;\n            _.defer(function dcpLongtext_computeSize() {\n                scope._fitToContent(scope.getContentElements());\n            });\n            this.getContentElements()\n                .on(\"keyup\" + this.eventNamespace, function dcpLongtext_keyUpUpdateSize(event) {\n                    scope._fitToContent($(this));\n                })\n                .on(\"focus\" + this.eventNamespace, function dcpLongtext_focusUpdateSize(event) {\n                    scope._fitToContent($(this));\n                });\n\n            this.element.on(\"show\" + this.eventNamespace, function dcpLongtext_showUpdateSize(event) {\n                    scope._fitToContent(scope.getContentElements());\n                });\n        },\n\n        getType: function dcpLongtext_getType() {\n            return \"longtext\";\n        }\n\n    });\n\n    return $.fn.dcpLongtext;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/longtext/wLongtext.js","(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'dcpDocument/widgets/attributes/double/wDouble'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery);\n    }\n}(window,  function require_money($) {\n    'use strict';\n\n    $.widget(\"dcp.dcpMoney\", $.dcp.dcpDouble, {\n\n        options: {\n            type: \"money\",\n            renderOptions: {\n                currency: '',\n                numberFormat: '#,#.00'\n            }\n        },\n\n        /**\n         * Get kendo option from normal options and from renderOptions.kendoNumeric\n         * @returns {*}\n         */\n        getKendoNumericOptions: function wMoneyGetKendoNumericOptions() {\n            var options = this._super(); // get from wDouble\n            if (this.options.renderOptions.currency) {\n                // view decimal precision\n                switch (this.options.locale.substr(0, 2)) {\n                    case 'en':\n                    case 'ga': // Ireland Irish\n                        // currency before\n                        options.format = this.options.renderOptions.currency.replace('$', '\\\\$') + options.format;\n                        break;\n                    default :\n                        options.format += ' ' + this.options.renderOptions.currency.replace('$', '\\\\$');\n                }\n            }\n\n            return options;\n        },\n\n        getType: function wMoneyGetType() {\n            return \"money\";\n        }\n\n    });\n\n    return $.fn.dcpMoney;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/money/wMoney.js","/*global define*/\n(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'dcpDocument/widgets/attributes/text/wText'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery);\n    }\n}(window, function wPassword($) {\n    'use strict';\n\n    $.widget(\"dcp.dcpPassword\", $.dcp.dcpText, {\n\n        options: {\n            type: \"password\",\n\n            renderOptions: {\n                hideValue: '*****'\n            },\n            labels: {}\n        },\n\n        _initDom: function wasswordInitDom() {\n                if (this.options.attributeValue.value) {\n                    this.options.attributeValue.displayValue = this.options.renderOptions.hideValue;\n                }\n\n            this._super();\n            if (this.getMode() === \"write\") {\n                this._getFocusInput().attr(\"type\", \"password\");\n            }\n        },\n        /**\n         * Hide password to displayValue\n         * @param value\n         */\n        setValue: function wpasswordSetValue(value)\n        {\n            if (value.value) {\n                value.displayValue = this.options.renderOptions.hideValue;\n            }\n\n            this._super(value);\n        },\n        getType: function wIntGetType() {\n            return \"password\";\n        }\n    });\n\n    return $.fn.dcpPassword;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/password/wPassword.js","(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'underscore',\n            'mustache',\n            'dcpDocument/widgets/attributes/wAttribute'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window._, window.Mustache);\n    }\n}(window, function wText($, _, Mustache)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpText\", $.dcp.dcpAttribute, {\n\n        options: {\n            type: \"text\",\n            renderOptions: {\n                maxLength: 0, // char max length\n                placeHolder: '',\n                format: \"\",\n                kendoAutoCompleteConfiguration: {\n                    filter: \"contains\",\n                    minLength: 1,\n                    template: '<div class=\"dcpAutocomplete\"><span class=\"k-state-default\">#= data.title#</span>' +\n                    '#if (data.message) {#' +\n                    '<div class=\"dcpAutocomplete--#= data.message.type#\">#: data.message.contentText# #= data.message.contentHtml#</div>' +\n                    '#}# </div>'\n                }\n            }\n        },\n\n        kendoWidget: null,\n\n        _initDom: function wTextInitDom()\n        {\n            if (this.getMode() === \"read\") {\n                if (this.options.renderOptions.format) {\n                    this.options.attributeValue.formatValue = Mustache.render(this.options.renderOptions.format || \"\",\n                        this.options.attributeValue);\n                }\n            }\n\n            this._super();\n            this.kendoWidget = this.element.find(\".dcpAttribute__value--edit\");\n            if (this.kendoWidget && this.options.hasAutocomplete) {\n                this.activateAutocomplete(this.kendoWidget);\n            } else {\n                if (this.getType() === \"text\") {\n                    this.kendoWidget.addClass(\"k-textbox\");\n                }\n            }\n        },\n\n        _initEvent: function wTextInitEvent()\n        {\n            if (this.getMode() === \"write\") {\n                this._initChangeEvent();\n            }\n            this._super();\n        },\n\n        _initChangeEvent: function wTextInitChangeEvent()\n        {\n            var currentWidget = this;\n            if (this.getMode() === \"write\") {\n                this.getContentElements().on(\"change\" + this.eventNamespace, function wTextChangeElement()\n                {\n                    var newValue = _.clone(currentWidget.options.attributeValue);\n                    newValue.value = $(this).val();\n                    newValue.displayValue = newValue.value;\n                    currentWidget.setValue(newValue);\n                });\n            }\n        },\n\n        /**\n         * Just to be apply in normal input help\n         * @param inputValue\n         */\n        activateAutocomplete: function activateAutocomplete(inputValue)\n        {\n            var currentWidget = this;\n            var systemOption = {\n                dataTextField: \"title\",\n                dataSource: {\n                    // type: \"json\",\n\n                    serverFiltering: true,\n                    transport: {\n                        read: function mapAutoActivated(options)\n                        {\n                            options.data.index = currentWidget._getIndex();\n                            return currentWidget.options.autocompleteRequest.call(null, options);\n                        }\n                    }\n                },\n                filtering: function wTextFiltering(e)\n                {\n                    // space search is used to force new search\n                    if (e.filter.value === \" \") {\n                        e.filter.value = '';\n                    }\n                },\n                select: function kendoAutocompleteSelect(event)\n                {\n                    var valueIndex = currentWidget._getIndex();\n                    var dataItem = this.dataSource.at(event.item.index());\n                    //The object returned by dataSource.at are internal kendo object so I clean it with toJSON\n                    if (dataItem.toJSON) {\n                        dataItem = dataItem.toJSON();\n                    }\n                    event.preventDefault(); // no fire change event\n                    currentWidget._trigger(\"changeattrsvalue\", event, {dataItem: dataItem, valueIndex: valueIndex});\n                }\n            };\n\n            inputValue.kendoAutoComplete(_.extend({}, this.options.renderOptions.kendoAutoCompleteConfiguration, systemOption));\n            this.element.on(\"click\" + this.eventNamespace, '.dcpAttribute__value--autocomplete--button', function wTextClickAutoComplete(event)\n            {\n                event.preventDefault();\n                inputValue.data(\"kendoAutoComplete\").search(' '); // use space search\n            });\n            this.element.find('.dcpAttribute__value--autocomplete--button[title]').tooltip({\n                html: true,\n                container: this.element\n            }).each(function wTextInitLinkTooltip()\n            {\n                $(this).data(\"bs.tooltip\").tip().addClass(\"dcpAttribute__autocomplete\");\n            });\n\n        },\n\n        /**\n         * Modify value to widget and send notification to the view\n         * @param value\n         */\n        setValue: function wTextSetValue(value)\n        {\n\n            var originalValue;\n\n            value = _.clone(value);\n\n            if (_.has(value, \"value\") && !_.has(value, \"displayValue\")) {\n                value.displayValue = value.value;\n            }\n            this._super(value);\n\n            originalValue = this.getWidgetValue();\n\n            if (this.getMode() === \"write\") {\n                // : explicit lazy equal\n                if (value.value === null && originalValue === '') {\n                    originalValue = null;\n                }\n                if (originalValue !== value.value) {\n                    // Modify value only if different\n                    this.getContentElements().val(value.value);\n                    this.flashElement();\n                }\n            } else\n                if (this.getMode() === \"read\") {\n                    this.redraw();\n                } else {\n                    throw new Error(\"Attribute \" + this.options.id + \" unkown mode \" + this.getMode());\n                }\n        },\n\n        getType: function getType()\n        {\n            return \"text\";\n        },\n\n        _destroy: function _destroy()\n        {\n            //Destroy autocomplete if activated\n            if (this.kendoWidget && this.kendoWidget.data(\"kendoAutoComplete\")) {\n                this.kendoWidget.data(\"kendoAutoComplete\").destroy();\n            }\n            this._super();\n        }\n\n    });\n\n    return $.fn.dcpText;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/text/wText.js","(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'underscore',\n            'dcpDocument/widgets/attributes/date/wDate'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window._);\n    }\n}(window,  function ($, _) {\n    'use strict';\n\n    $.widget(\"dcp.dcpTime\", $.dcp.dcpDate, {\n\n        options: {\n            type: \"time\",\n            renderOptions: {\n                kendoTimeConfiguration: {\n                    timeDataFormat: [\"HH:mm\", \"HH:mm:ss\"]\n                }\n            }\n        },\n\n        kendoWidgetClass: \"kendoTimePicker\",\n\n        _initDom: function wTimeInitDom() {\n            if (this.options.renderOptions.kendoTimeConfiguration.format) {\n                this.options.attributeValue.displayValue = this.formatDate(this.parseDate(this.options.attributeValue.value));\n            }\n            this._super();\n        },\n\n        _activateDate: function wTimeActivateDate(inputValue) {\n            var scope = this;\n            var kOptions = this.getKendoOptions();\n\n            kOptions.change = function () {\n                // only valid date are setted\n                // wrong date are set by blur event\n                var isoDate = scope.convertDateToPseudoIsoString(this.value());\n                // Need to set by widget to use raw date\n\n                scope.setValue({value: isoDate, displayValue: inputValue.val()});\n            };\n            inputValue.kendoTimePicker(kOptions);\n            this._controlDate(inputValue);\n            if (this.options.attributeValue && this.options.attributeValue.value) {\n                this.setValue(this.options.attributeValue);\n            }\n        },\n\n        setValue: function wTimeSetValue(value) {\n            var originalValue;\n\n            value = _.clone(value);\n\n\n            if (_.has(value, \"value\") && !_.has(value, \"displayValue\")) {\n                value.displayValue = this.formatDate(this.parseDate(value.value));\n            }\n\n            $.dcp.dcpAttribute.prototype.setValue.call(this, value);\n\n            if (this.getMode() === \"write\") {\n                originalValue = this.convertDateToPseudoIsoString(this.kendoWidget.data(this.kendoWidgetClass).value());\n                // : explicit lazy equal\n                //noinspection JSHint\n                if (originalValue != value.value) {\n                    if (value.value) {\n                        this.kendoWidget.data(this.kendoWidgetClass).value(value.value);\n                    } else {\n                        this.getContentElements().val('');\n                    }\n                    // Modify value only if different\n                    this.flashElement();\n                }\n            } else if (this.getMode() === \"read\") {\n                this.getContentElements().text(value.displayValue);\n            } else {\n                throw new Error(\"Attribute \" + this.options.id + \" unkown mode \" + this.getMode());\n            }\n        },\n\n        getValue: function wTimeGetValue() {\n            var value = this._super();\n            if (value.value && _.isDate(value.value)) {\n                value.value = this.convertDateToPseudoIsoString(value.value);\n            }\n            return value;\n        },\n\n        convertDateToPseudoIsoString: function wTimeConvertDateToPseudoIsoString(date) {\n            if (_.isDate(date)) {\n                return this.padNumber(date.getHours()) + ':' +\n                this.padNumber(date.getMinutes());\n            }\n            return '';\n        },\n\n        formatDate: function wTimeFormatDate(value) {\n            if (this.options.renderOptions.kendoTimeConfiguration.format) {\n                return kendo.toString(value, this.options.renderOptions.kendoTimeConfiguration.format);\n            }\n            return kendo.toString(value, \"T\");\n        },\n\n        parseDate: function wTimeParseDate(value) {\n            return kendo.parseDate(value, this.options.renderOptions.kendoTimeConfiguration.timeDataFormat);\n        },\n\n\n        /**\n         * Get kendo option from normal options and from renderOptions.kendoNumeric\n         * @returns {*}\n         */\n        getKendoOptions: function wTimegetKendoOptions() {\n            var scope = this,\n                kendoOptions = {},\n                defaultOptions = {\n                    min: this.options.minDate\n                };\n\n            if (_.isObject(scope.options.renderOptions.kendoTimeConfiguration)) {\n                kendoOptions = scope.options.renderOptions.kendoTimeConfiguration;\n            }\n\n            return _.extend(defaultOptions, kendoOptions);\n        },\n\n        getType: function () {\n            return \"time\";\n        }\n\n    });\n\n    return $.fn.dcpTime;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/time/wTime.js","(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'dcpDocument/widgets/attributes/date/wDate'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery);\n    }\n}(window,  function requireTimestamp($) {\n    'use strict';\n\n    $.widget(\"dcp.dcpTimestamp\", $.dcp.dcpDate, {\n\n        options: {\n            type: \"timestamp\",\n            minDate: new Date(1700, 0, 1),\n            renderOptions: {\n                kendoDateConfiguration: {\n                    timeFormat: \"HH:mm\", //24 hours format\n                    parseFormats: [\"yyyy-MM-dd HH:mm:ss\", \"yyyy-MM-ddTHH:mm:ss\", \"yyyy-MM-ddTHH:mm\"],\n                    format:null\n                }\n            }\n        },\n\n        kendoWidgetClass: \"kendoDateTimePicker\",\n\n        _initDom: function wTimeStampInitDom() {\n            if (this.options.attributeValue.value) {\n                // Add T (iso date) if not set\n\n                this.options.attributeValue.value= this.replaceAt(this.options.attributeValue.value, 10, 'T');\n\n            }\n            this._super();\n        },\n\n        replaceAt : function wTimeStampReplaceAt(s, n, t) {\n            return s.substring(0, n) + t + s.substring(n + 1);\n        },\n\n        setValue: function wTimeStampSetValue(value) {\n            if (value.value) {\n                // Add T (iso date) if not set\n                value.value= this.replaceAt(value.value, 10, 'T');\n            }\n            this._super(value);\n        },\n\n        _activateDate: function wTimeStamp_activateDate(inputValue) {\n            var currentWidget = this;\n            var kendoOptions = this.getKendoOptions();\n            kendoOptions.change = function wTimeStamp_onChange() {\n                if (this.value() !== null) {\n                    // only valid date are setted\n                    // wrong date are set by blur event\n                    var isoDate = currentWidget.convertDateToPseudoIsoString(this.value());\n                    // Need to set by widget to use raw date\n                    currentWidget.setValue({value: isoDate, displayValue: inputValue.val()});\n                }\n            };\n            inputValue.kendoDateTimePicker(kendoOptions);\n\n            this._controlDate(inputValue);\n        },\n\n        convertDateToPseudoIsoString: function wTimeStamp_convertDateToPseudoIsoString(dateObject) {\n            if (dateObject && typeof dateObject === \"object\") {\n                return dateObject.getFullYear() + '-' +\n                    this.padNumber(dateObject.getMonth() + 1) + '-' +\n                    this.padNumber(dateObject.getDate()) + 'T' +\n                    this.padNumber(dateObject.getHours()) + ':' +\n                    this.padNumber(dateObject.getMinutes()) + ':' +\n                    this.padNumber(dateObject.getSeconds());\n            }\n            return '';\n        },\n\n        formatDate: function wTimeStamp_formatDate(value) {\n            if (this.options.renderOptions.kendoDateConfiguration.format) {\n                return kendo.toString(value, this.options.renderOptions.kendoDateConfiguration.format);\n            }\n            return kendo.toString(value, \"g\");\n        },\n\n        getType: function wTimeStamp_getType() {\n            return \"timestamp\";\n        }\n\n    });\n\n    return $.fn.dcpTimestamp;\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/timestamp/wTimestamp.js","/*global define*/\n\n(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'underscore',\n            'mustache',\n            'dcpDocument/widgets/widget',\n            'tooltip'\n        ], factory);\n    } else {\n        //noinspection JSUnresolvedVariable\n        factory(window.jQuery, window._, window.Mustache);\n    }\n}(window, function wAttributeWidget($, _, Mustache)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpAttribute\", {\n\n        options: {\n            eventPrefix: \"dcpAttribute\",\n            id: null,\n            type: \"abstract\",\n            mode: \"read\",\n            index: -1,\n            labels: {\n                deleteAttributeNames: \"\",\n                deleteLabel: \"\",\n                closeErrorMessage: \"Close message\"\n            },\n            template: null,\n            deleteButton: false,\n            renderOptions: {\n                displayDeleteButton: true\n            },\n            locale: \"fr_FR\"\n        },\n\n        /**\n         * Redraw element with updated values\n         */\n        redraw: function wAttributeRedraw()\n        {\n            this.element.find(\"[aria-describedby*='tooltip']\").tooltip(\"hide\");\n            this.element.empty();\n            this._initDom();\n            this.element.off(this.eventNamespace);\n            this._initEvent();\n            return this;\n        },\n\n        /**\n         * Verify if a common link option is set\n         *\n         * @returns boolean\n         */\n        hasLink: function hasLink()\n        {\n            return Boolean(this.options.renderOptions && this.options.renderOptions.htmlLink && this.options.renderOptions.htmlLink.url);\n        },\n        /**\n         * Return the url of link\n         * @returns string\n         */\n        getLink: function wAttributeGetLink()\n        {\n            if (this.options.renderOptions && this.options.renderOptions.htmlLink) {\n                return this.options.renderOptions.htmlLink;\n            }\n            return null;\n        },\n\n        /**\n         * Flash the element to attract user attention\n         *\n         * @param currentElement\n         */\n        flashElement: function wAttributeFlashElement(currentElement)\n        {\n            if (!currentElement) {\n                currentElement = this.element;\n            }\n            currentElement.addClass('dcpAttribute__value--flash');\n            _.delay(function wAttributeFlashDelay()\n            {\n                currentElement.removeClass('dcpAttribute__value--flash').addClass('dcpAttribute__value--endflash');\n                _.delay(function wAttributeFlashSecondDelay()\n                {\n                    currentElement.removeClass('dcpAttribute__value--endflash');\n                }, 600);\n            }, 10);\n        },\n\n        /**\n         * Display tooltip an error message\n         *\n         * @param message string or array of [{message:, index:}, ...]\n         */\n        setError: function wAttributeSetError(message)\n        {\n            var kt;\n            var scope = this;\n            if (message) {\n                var messages;\n                if (!_.isArray(message)) {\n                    messages = [\n                        {message: message, index: -1}\n                    ];\n                } else {\n                    messages = _.toArray(message);\n                }\n                _.each(messages, function wAttributeSetErrorMsg(indexMessage)\n                {\n                    if ((indexMessage.index === -1) ||\n                        (scope.element.closest('tr').data(\"line\") === indexMessage.index)) {\n                        scope.element.addClass(\"has-error\");\n                        // need to use sub element because tooltip add a div after element\n                        scope.element.find(\".input-group\").tooltip({\n                            placement: \"bottom\",\n                            html: true,\n                            animation: false,\n                            container: scope.element.parent(), //\".dcpDocument\",// no use scope.element because when item is in the bottom of the page a scrollbar can appear\n                            title: function wAttributeSetErrorTitle()\n                            {\n                                var rawMessage = $('<div/>').text(indexMessage.message).html();\n                                return '<div>' + '<span title=\"' + scope.options.labels.closeErrorMessage + '\" class=\"btn fa fa-times button-close-error\">&nbsp;</span>' + rawMessage + '</div>';\n                            },\n                            trigger: \"manual\"\n                        }).one(\"shown.bs.tooltip\", function wErrorTooltip () {\n                            var tipElement = $(this).data(\"bs.tooltip\").tip;\n                            if (tipElement) {\n                                $(tipElement).addClass(\"has-error\");\n                            }\n                        });\n                        scope.element.data(\"hasErrorTooltip\", true);\n                        scope.element.find(\".input-group\").tooltip(\"show\");\n                        // Need to refresh to update position after possible change on element value\n                        _.delay(function wAttributeSetErrorDelay()\n                        {\n                            var $input=scope.element.find(\".input-group\");\n                            //$input.tooltip(\"hide\").tooltip(\"show\");\n                        }, 1);\n                    }\n                });\n            } else {\n                this.element.removeClass(\"has-error\");\n                if (this.element.data(\"hasErrorTooltip\")) {\n                    // No use destroy because the destruction is deferred\n                    kt = this.element.find(\".input-group\");\n                    kt.tooltip(\"hide\").data(\"bs.tooltip\", null);\n                    this.element.data(\"hasErrorTooltip\", false);\n                }\n            }\n\n        },\n\n        /**\n         * Get the type of the widget\n         *\n         * @returns {string}\n         */\n        getType: function getType()\n        {\n            return this.options.type;\n        },\n\n        /**\n         * Get the mode of the widget\n         *\n         * @returns {string} Read|Write\n         */\n        getMode: function getMode()\n        {\n            if (this.options.mode !== \"read\" && this.options.mode !== \"write\" && this.options.mode !== \"hidden\") {\n                throw new Error(\"Attribute \" + this.option.id + \" have unknown mode \" + this.options.mode);\n            }\n            return this.options.mode;\n        },\n\n        /**\n         * Return the value stored in the wiget\n         *\n         * @returns {*|number|.options.attributeValue}\n         */\n        getValue: function wAttributegetValue()\n        {\n            return this.options.attributeValue;\n        },\n\n        /**\n         * Identify the input where is the raw value\n         * @returns {*}\n         */\n        getContentElements: function wAttributeGetContentElements()\n        {\n            return this.element.find('.dcpAttribute__value[name=\"' + this.options.id + '\"]');\n        },\n\n        /**\n         * Return the value of something\n         *\n         *\n         * @returns {*}\n         */\n        getWidgetValue: function getWidgetValue()\n        {\n            return this.getContentElements().val();\n\n        },\n        /**\n         * Set options.attributeValue element and trigger the view\n         *\n         * @param value\n         * @param event\n         */\n        setValue: function wAttributeSetValue(value, event)\n        {\n            this._checkValue(value);\n\n            var isEqual = false;\n\n            if (this._isMultiple()) {\n                isEqual = _.toArray(this.options.attributeValue).length === value.length;\n                if (isEqual) {\n\n                    isEqual = _.isEqual(this.options.attributeValue, value);\n                }\n            } else {\n                isEqual = _.isEqual(this.options.attributeValue.value, value.value);\n            }\n            if (!isEqual) {\n                this.options.attributeValue = value;\n\n                this._trigger(\"change\", event, {\n                    id: this.options.id,\n                    value: this.getValue(),\n                    index: this._getIndex()\n                });\n            }\n        },\n\n        /**\n         * Show the input tooltip\n         * @param  ktTarget DOMElement\n         *\n         * @return dcp.dcpAttribute\n         */\n        hideInputTooltip: function wAttributeHideInputTooltip(ktTarget)\n        {\n            var $ktTarger = $(ktTarget).closest(\".input-group\");\n            if ($ktTarger.data(\"hasTooltip\")) {\n                $ktTarger.tooltip(\"hide\");\n            }\n            return this;\n        },\n\n        /**\n         * Show the input tooltip\n         * @param  ktTarget DOMElement\n         *\n         * @return dcp.dcpAttribute\n         */\n        showInputTooltip: function showInputTooltip(ktTarget)\n        {\n            var scope = this;\n\n            if (scope.options.renderOptions.inputHtmlTooltip) {\n                var $ktTarger = $(ktTarget).closest(\".input-group\");\n                var kt = $ktTarger.data(\"hasTooltip\");\n\n                if (!kt) {\n                    $ktTarger.tooltip({\n                        trigger: \"manual\",\n                        html: true,\n                        title: scope.options.renderOptions.inputHtmlTooltip,\n                        placement: \"bottom\"\n                    }).on(\"shown.bs.tooltip\", function wErrorTooltip () {\n                        var tipElement = $(this).data(\"bs.tooltip\").tip;\n                        if (tipElement) {\n                            $(tipElement).addClass(\"dcpAttribute__editlabel\");\n                        }\n                    });;\n                    $ktTarger.data(\"hasTooltip\", true);\n                }\n                $ktTarger.tooltip(\"show\");\n            }\n            return this;\n        },\n\n        /**\n         * Close the attribute if open\n         *\n         * @returns {dcp.dcpAttribute}\n         */\n        close: function wAttribute_close()\n        {\n            return this;\n        },\n\n        /**\n         * Create the widget\n         * @private\n         */\n        _create: function _create()\n        {\n            var scope = this;\n            //If no id is provided one id generated\n            if (this.options.id === null) {\n                this.options.id = _.uniqueId(\"widget_\" + this.getType());\n            }\n\n            if (_.isUndefined(this.options.attributeValue) || this.options.attributeValue === null) {\n                if (this._isMultiple()) {\n                    this.options.attributeValue = [];\n                } else {\n                    this.options.attributeValue = {\n                        \"value\": null,\n                        displayValue: \"\"\n                    };\n                }\n            }\n            if (this.options.helpOutputs) {\n                this.options.hasAutocomplete = true;\n            }\n\n            if (this.options.renderOptions && this.options.renderOptions.buttons) {\n                // Add index for template to identify buttons\n                this.options.renderOptions.buttons = _.map(this.options.renderOptions.buttons, function wAttributeOptionMap(val, index)\n                {\n                    val.renderHtmlContent = Mustache.render(val.htmlContent || \"\", scope.options.attributeValue);\n                    val.index = index;\n                    return val;\n                });\n            }\n            this.options.emptyValue = _.bind(this._getEmptyValue, this);\n            this.options.hadButtons = this._hasButtons();\n            if (this.options.renderOptions && this.options.renderOptions.labels) {\n                this.options.labels = _.extend(this.options.labels, this.options.renderOptions.labels);\n            }\n\n            if (this.options.renderOptions && this.options.renderOptions.displayDeleteButton === false) {\n                this.options.deleteButton = false;\n            }\n            if (this.getMode() !== \"hidden\") {\n                this._initDom();\n                this._initEvent();\n            }\n\n            this._triggerReady();\n        },\n\n        /**\n         * Destroy the widget\n         *\n         * Suppress widget defined events and delete added dom\n         *\n         * @private\n         */\n        _destroy: function _destroy()\n        {\n            this.element.removeClass(\"dcpAttribute__content\");\n            this.element.removeAttr(\"data-type\");\n            this.element.removeAttr(\"data-attrid\");\n            this.element.empty();\n            this._trigger(\"destroy\");\n            this._super();\n        },\n\n        /**\n         * Init the DOM of the template\n         *\n         * @protected\n         */\n        _initDom: function wAttributeInitDom()\n        {\n            var htmlLink = this.getLink();\n            var scopeWidget = this;\n            this._initMainElementClass();\n            if (htmlLink) {\n                // Add render Url and title on links\n                var originalEscape = Mustache.escape;\n\n                if (this._isMultiple()) {\n                    this.options.attributeValues = _.map(this.options.attributeValue, function wAttributeLinkMultiple(val, index)\n                    {\n                        var urlIndex = index;\n                        Mustache.escape = encodeURIComponent;\n                        scopeWidget._completeRevisionData(val);\n                        if (scopeWidget.options.index >= 0) {\n                            // Use index of row prior to index of multiple value\n                            urlIndex = scopeWidget.options.index;\n                        }\n\n                        if (htmlLink.urls && htmlLink.urls[urlIndex]) {\n                            val.renderUrl = Mustache.render(htmlLink.urls[urlIndex], val);\n                        } else {\n                            val.renderUrl = Mustache.render(htmlLink.url || \"\", val);\n                        }\n                        Mustache.escape = originalEscape;\n                        val.renderTitle = Mustache.render(htmlLink.title || \"\", val);\n                        val.index = index;\n                        return val;\n                    });\n                } else {\n                    Mustache.escape = encodeURIComponent;\n                    this._completeRevisionData(this.options.attributeValue);\n                    if (htmlLink.urls && htmlLink.urls[this.options.index]) {\n                        this.options.renderOptions.htmlLink.renderUrl = Mustache.render(htmlLink.urls[this.options.index], this.options.attributeValue);\n                    } else {\n                        this.options.renderOptions.htmlLink.renderUrl = Mustache.render(htmlLink.url || \"\", this.options.attributeValue);\n                    }\n                    Mustache.escape = originalEscape;\n                    this.options.renderOptions.htmlLink.renderTitle = Mustache.render(htmlLink.title || \"\", this.options.attributeValue);\n                }\n            }\n            this.element.append(Mustache.render(this._getTemplate(this.options.mode) || \"\", this.options));\n\n\n            if (this.element.find(\".dcpAttribute__content__buttons button\").length === 0) {\n                this.element.find(\".dcpAttribute__content__buttons\").hide();\n                this.element.find(\".dcpAttribute__value\").addClass(\"dcpAttribute__content__nobutton\");\n            }\n        },\n\n        /**\n         * Add revision extra data to render link\n         * @param data\n         * @private\n         */\n        _completeRevisionData: function wAttribute_completeRevisionData(data)\n        {\n            data.isRevision = data.revision !== -1 && data.revision !== null && !_.isUndefined(data.revision);\n            if (data.isRevision) {\n                if (data.revision.state) {\n                    data.revisionTarget = \"state:\" + data.revision.state;\n                } else {\n                    data.revisionTarget = data.revision;\n                }\n            }\n        },\n\n        /**\n         * Init the DOM of the template\n         *\n         * @public\n         */\n        _initMainElementClass: function wAttributeInitMainElementClass()\n        {\n            this.element.addClass(\"dcpAttribute__content\");\n            this.element.attr(\"data-type\", this.getType());\n            this.element.attr(\"data-attrid\", this.options.id);\n        },\n        /**\n         * Init the events\n         *\n         * @protected\n         */\n        _initEvent: function _initEvent()\n        {\n            if (this.getMode() === \"write\") {\n                this._initDeleteEvent();\n                this._initButtonsEvent();\n                this._initFocusEvent();\n                this._initMoveEvent();\n            }\n            if (this.getMode() === \"read\") {\n                this._initButtonsEvent();\n                this._initActionClickEvent();\n                this._initLinkEvent();\n            }\n            this._initErrorEvent();\n            return this;\n        },\n\n        /**\n         * Init the focus event for tooltips (only for write attr)\n         *\n         * @protected\n         */\n        _initFocusEvent: function wAttributeInitFocusEvent()\n        {\n            if (this.options.renderOptions && this.options.renderOptions.inputHtmlTooltip) {\n                var scope = this;\n\n                var inputTargetFilter = \".dcpAttribute__value\";\n                this._getFocusInput().on(\"focus\" + this.eventNamespace, function wAttributeFocus(event)\n                {\n                    var ktTarget = $(event.currentTarget).closest(inputTargetFilter);\n                    scope.showInputTooltip(ktTarget);\n                });\n                this._getFocusInput().on(\"blur.\" + this.eventNamespace, function wAttributeBlur(event)\n                {\n                    var ktTarget = $(event.currentTarget).closest(inputTargetFilter);\n                    scope.hideInputTooltip(ktTarget);\n                });\n            }\n            this._getFocusInput().on(\"focus\" + this.eventNamespace, function wAttributeFocus(event)\n            {\n                var $content = $(event.currentTarget).closest(\".dcpAttribute__content\");\n                $content.addClass(\"dcpAttribute--focus\");\n            });\n            this._getFocusInput().on(\"blur\" + this.eventNamespace, function wAttributeFocus(event)\n            {\n                var $content = $(event.currentTarget).closest(\".dcpAttribute__content\");\n                $content.removeClass(\"dcpAttribute--focus\");\n            });\n\n            return this;\n        },\n        /**\n         * Reindex widget when a move is performed in an array\n         *\n         * @protected\n         */\n        _initMoveEvent: function wAttributeInitFocusEvent()\n        {\n            var scope = this;\n            if (this.options.index !== -1) {\n                this.element.on(\"postMoved\" + this.eventNamespace, function wAttributeinitMoveEvent()\n                    {\n                        var domLine = scope.element.closest('tr').data('line');\n                        if (!_.isUndefined(domLine)) {\n                            scope.options.index = domLine;\n                        }\n                    }\n                );\n            }\n            return this;\n        },\n        /**\n         * Init the events associated to buttons (only for write attributes)\n         *\n         * @protected\n         */\n        _initButtonsEvent: function _initButtonsEvent()\n        {\n            var currentWidget = this;\n            this.element.on(\"click\" + this.eventNamespace, \".dcpAttribute__content__button--extra\", function wAttributeButtonClick(event)\n            {\n                var buttonsConfig = currentWidget.options.renderOptions.buttons;\n                var $button = $(this);\n                var buttonIndex = $button.data(\"index\");\n                var buttonConfig = buttonsConfig[buttonIndex];\n                var wFeature = '';\n\n                if (buttonConfig && buttonConfig.url) {\n                    var originalEscape = Mustache.escape;\n                    Mustache.escape = encodeURIComponent;\n                    var url = Mustache.render(buttonConfig.url || \"\", currentWidget.options.attributeValue);\n                    Mustache.escape = originalEscape;\n\n                    if (buttonConfig.target !== \"_dialog\") {\n                        var $base = $(\"base\");\n                        var isAbsUrl = new RegExp('^(?:[a-z]+:)?//', 'i');\n\n                        if (buttonConfig && (buttonConfig.windowWidth || buttonConfig.windowHeight)) {\n                            if (buttonConfig.windowWidth) {\n                                wFeature += \"width=\" + parseInt(buttonConfig.windowWidth, 10) + \",\";\n                            }\n                            if (buttonConfig.windowHeight) {\n                                wFeature += \"height=\" + parseInt(buttonConfig.windowHeight, 10) + \",\";\n                            }\n                            wFeature += \"resizable=yes,scrollbars=yes\";\n                        }\n                        if (!isAbsUrl.test(url)) {\n                            // For IE : Not honor base href in this case\n                            url = $base.attr(\"href\") + url;\n                        }\n                        window.open(url, buttonConfig.target, wFeature);\n                    } else {\n                        var $bdw = $('<div/>');\n                        $('body').append($bdw);\n                        var renderTitle = Mustache.render(buttonConfig.windowTitle || \"\", currentWidget.options.attributeValue);\n                        var dw = $bdw.dcpWindow({\n                            title: renderTitle,\n                            width: buttonConfig.windowWidth,\n                            height: buttonConfig.windowHeight,\n                            content: url,\n                            iframe: true\n                        }).data('dcpWindow');\n                        dw.kendoWindow().center();\n                        dw.open();\n                    }\n                }\n\n                currentWidget._trigger(\"click\", event, {\n                    id: currentWidget.option.id,\n                    value: currentWidget.options.attributeValue,\n                    index: currentWidget._getIndex()\n                });\n            });\n            this.element.tooltip({\n                selector: \".dcpAttribute__content__buttons button\",\n                placement: \"top\",\n                trigger: \"hover\",\n                html: true,\n                title: function wAttributeGetButtonTitle()\n                {\n                    var title = $(this).data(\"title\");\n                    var attrValue = currentWidget.getValue();\n                    return Mustache.render(title || \"\", attrValue);\n                },\n                container: this.element.parent()\n            });\n\n            return this;\n        },\n\n        /**\n         * Init events for delete button on error tooltip\n         *\n         * @protected\n         */\n        _initErrorEvent: function wAttributeInitErrotEvent()\n        {\n            var scope = this;\n            // tooltip is created in same parent\n            this.element.parent().on(\"click\" + this.eventNamespace, \".button-close-error\", function closeError(/*event*/)\n            {\n                if (scope.element.data(\"hasErrorTooltip\")) {\n                    scope.element.find(\".input-group\").tooltip(\"hide\");\n                    scope.element.data(\"hasErrorTooltip\", false);\n                }\n            });\n        },\n        /**\n         * Init events for delete button (only for write attributes)\n         *\n         * @protected\n         */\n        _initDeleteEvent: function wAttributeInitDeleteEvent()\n        {\n            var currentWidget = this;\n\n            // Compose delete button title\n            var $deleteButton = this.element.find(\".dcpAttribute__content__button--delete\");\n            var titleDelete;\n            if (this.options.labels.deleteLabel) {\n                titleDelete = this.options.labels.deleteLabel;\n            } else {\n                titleDelete = $deleteButton.attr('title');\n                titleDelete += this.options.labels.deleteAttributeNames;\n            }\n            $deleteButton.attr('title', titleDelete);\n\n            this.element.on(\"click\" + this.eventNamespace, \".dcpAttribute__content__button--delete\", function destroyTable(event)\n            {\n                currentWidget._trigger(\"delete\", event, {\n                    index: currentWidget._getIndex(),\n                    id: currentWidget.options.id\n                });\n                // main input is focuses after deletion\n                _.defer(function wAttributeDeferDelete()\n                {\n                    currentWidget.element.find(\"input\").focus();\n                });\n            });\n            return this;\n        },\n        /**\n         * Init event for #action/ links\n         *\n         * @protected\n         */\n        _initActionClickEvent: function wAttributeInitActionClickEvent() {\n            var scopeWidget = this;\n\n            this.element.on(\"click.\" + this.eventNamespace, 'a[href^=\"#action/\"], a[data-action], button[data-action]', function wAttributeActionClick(event) {\n                var $this = $(this),\n                    action,\n                    options,\n                    eventOptions;\n\n                event.preventDefault();\n                if (event.stopPropagation) {\n                    event.stopPropagation();\n                }\n\n                action = $this.data('action') || $this.attr(\"href\");\n                options = action.substring(8).split(\":\");\n                eventOptions = {\n                    target: event.target,\n                    index: scopeWidget._getIndex(),\n                    eventId: options.shift(),\n                    options: options\n                };\n\n                scopeWidget._trigger(\"externalLinkSelected\", event, eventOptions);\n                return this;\n            });\n        },\n        /**\n         * Init event when a hyperlink is associated to the attribute\n         *\n         * @protected\n         */\n        _initLinkEvent: function wAttributeInitLinkEvent()\n        {\n            var htmlLink = this.getLink();\n            var scopeWidget = this;\n\n            if (htmlLink) {\n                this.element.on(\"click.\" + this.eventNamespace, '.dcpAttribute__content__link', function wAttributeAttributeClick(event)\n                {\n\n                    var $this = $(this), renderTitle, index, $dialogDiv, dpcWindow, href = $this.attr(\"href\");\n\n                    if (href.substring(0, 8) !== \"#action/\" && !$this.data(\"action\")) {\n                        if (htmlLink.target === \"_dialog\") {\n                            event.preventDefault();\n\n                            index = $(this).data(\"index\");\n                            if (typeof index !== \"undefined\" && index !== null) {\n                                renderTitle = Mustache.render(htmlLink.windowTitle || \"\", scopeWidget.options.attributeValue[index]);\n                            } else {\n                                renderTitle = Mustache.render(htmlLink.windowTitle || \"\", scopeWidget.options.attributeValue);\n                            }\n\n                            $dialogDiv = $('<div/>');\n                            $('body').append($dialogDiv);\n\n                            dpcWindow = $dialogDiv.dcpWindow({\n                                title: renderTitle,\n                                width: htmlLink.windowWidth,\n                                height: htmlLink.windowHeight,\n                                content: href,\n                                iframe: true\n                            });\n\n                            dpcWindow.data('dcpWindow').kendoWindow().center();\n                            dpcWindow.data('dcpWindow').open();\n                        }\n                    }\n                });\n\n                this.element.find('.dcpAttribute__content__link[title]').tooltip({\n                    placement: \"top\",\n                    container: this.element.parent(),\n                    html: true,\n                    trigger: \"hover\"\n                }).each(function wAttributeInitLinkTooltip()\n                {\n                    if ($(this).data(\"bs.tooltip\").tip) {\n                        $(this).data(\"bs.tooltip\").tip().addClass(\"dcpAttribute__linkvalue\");\n                    }\n                });\n            }\n            return this;\n        },\n\n        /**\n         * Get input that can handle focus class\n         *\n         * For the display of the focus class (in helpers)\n         *\n         * @return jquery elements\n         *\n         * @protected\n         */\n        _getFocusInput: function wAttributeFocusInput()\n        {\n            return this.element.find('input[name=\"' + this.options.id + '\"]');\n        },\n\n        /**\n         * Return the index of the attributes (for attribute in a widget array)\n         *\n         * @returns int\n         * @protected\n         */\n        _getIndex: function _getIndex()\n        {\n            if (this.options.index !== -1) {\n                this.options.index = this.element.closest('.dcpArray__content__line').data('line');\n            }\n            return this.options.index;\n        },\n\n        /**\n         * Return the empty value (default value if the attribute is empty)\n         *\n         * @returns {*}\n         * @private\n         */\n        _getEmptyValue: function _getEmptyValue()\n        {\n            if (_.isEmpty(this.options.attributeValue) || this.options.attributeValue.value === null) {\n                if (this.options.renderOptions && this.options.renderOptions.showEmptyContent) {\n                    return this.options.renderOptions.showEmptyContent === true ? \" \" : this.options.renderOptions.showEmptyContent;\n                }\n                return \"\";\n            }\n            return \"\";\n        },\n\n        /**\n         * Get the template of the current attribute\n         *\n         * The template can be in the options or in a global var of dcp namespace (initiated by require for widget)\n         *\n         * @param key\n         * @returns string\n         * @private\n         */\n        _getTemplate: function _getTemplate(key)\n        {\n            if (this.options.templates && this.options.templates[key]) {\n                return this.options.templates[key];\n            }\n            if (window.dcp && window.dcp.templates && window.dcp.templates[this.getType()] && window.dcp.templates[this.getType()][key]) {\n                return window.dcp.templates[this.getType()][key];\n            }\n            if (window.dcp && window.dcp.templates && window.dcp.templates[\"default\"] && window.dcp.templates[\"default\"][key]) {\n                return window.dcp.templates[\"default\"][key];\n            }\n            throw new Error(\"Unknown template  \" + key + \"/\" + this.options.type + \" for \" + this.options.id);\n        },\n\n        /**\n         * Test if the value of the setValue is correct\n         *\n         * @param value\n         * @returns {boolean}\n         */\n        _checkValue: function wAttributeTestValue(value)\n        {\n            //noinspection JSHint\n            if (this._isMultiple()) { // jshint ignore:line\n                // TODO : Verify each array entry\n// jscs:disable disallowEmptyBlocks\n            } else {\n// jscs:enable disallowEmptyBlocks\n                if (!_.isObject(value) || !_.has(value, \"value\") || !_.has(value, \"displayValue\")) {\n                    throw new Error(\"The value must be an object with value and displayValue properties (attrid id :\" + this.options.id + \")\");\n                }\n            }\n            return true;\n        },\n        /**\n         * Check if the attribute is multiple\n         *\n         * @returns boolean\n         * @public\n         */\n        _isMultiple: function _isMultiple()\n        {\n            return (this.options.options && this.options.options.multiple === \"yes\");\n        },\n\n        /**\n         * Check if the widget has buttons\n         *\n         * Used by template for rendering options\n         *\n         * @returns boolean\n         */\n        _hasButtons: function wAttributeHasButtons()\n        {\n            if (this.getMode() === \"write\") {\n                return this.options.hasAutocomplete || this.options.deleteButton || (this.options.renderOptions && this.options.renderOptions.buttons && true);\n            } else {\n                return (this.options.renderOptions && this.options.renderOptions.buttons && true);\n            }\n        },\n        /**\n         * Trigger a ready event when widget is render\n         */\n        _triggerReady: function wAttributeReady()\n        {\n            this._trigger(\"widgetReady\");\n        },\n\n        /**\n         * Trigger an event that should disable save menu on document\n         *\n         * @param visibility\n         * @private\n         */\n        _setVisibilitySavingMenu: function wAttribute_DisableSavingMenu(visibility)\n        {\n            var event = {prevent: false};\n            this._trigger(\"changeattrmenuvisibility\", event, {\n                id: \"save\",\n                onlyIfVisible: true,\n                visibility: visibility\n            });\n            this._trigger(\"changeattrmenuvisibility\", event, {\n                id: \"saveAndClose\",\n                onlyIfVisible: true,\n                visibility: visibility\n            });\n            this._trigger(\"changeattrmenuvisibility\", event, {\n                id: \"createAndClose\",\n                onlyIfVisible: true,\n                visibility: visibility\n            });\n            this._trigger(\"changeattrmenuvisibility\", event, {\n                id: \"create\",\n                onlyIfVisible: true,\n                visibility: visibility\n            });\n        }\n\n    });\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/attributes/wAttribute.js","/* global define, console */\ndefine([\n    'jquery',\n    'underscore',\n    'backbone',\n    'dcpDocument/routers/router',\n    'dcpDocument/models/mDocument',\n    'dcpDocument/controllerObjects/attributeInterface',\n    'dcpDocument/controllerObjects/menuInterface',\n    'dcpDocument/controllerObjects/transitionInterface',\n    'dcpDocument/views/document/vDocument',\n    'dcpDocument/models/mTransition',\n    'dcpDocument/views/workflow/vTransition',\n    'dcpDocument/models/mMenu',\n    'dcpDocument/i18n/documentCatalog',\n    'dcpDocument/widgets/widget',\n    'dcpDocument/widgets/window/wConfirm',\n    'dcpDocument/widgets/window/wLoading',\n    'dcpDocument/widgets/window/wNotification'\n], function documentController($, _, Backbone, Router, DocumentModel,\n                               AttributeInterface, MenuInterface, TransitionInterface,\n                               DocumentView, TransitionModel, TransitionView, MenuModel, i18n)\n{\n    'use strict';\n\n    var ErrorModelNonInitialized = function ErrorModelNonInitialized(message)\n    {\n        this.name = \"ErrorModelNonInitialized\";\n        this.message = message || \"The widget model is not initialized, use fetchDocument to initialise it.\";\n        this.stack = (new Error()).stack;\n    };\n    ErrorModelNonInitialized.prototype = Object.create(Error.prototype);\n    ErrorModelNonInitialized.prototype.constructor = ErrorModelNonInitialized;\n\n    var eventList = [\"beforeRender\", \"ready\", \"change\", \"displayMessage\", \"displayError\", \"validate\",\n        \"attributeBeforeRender\", \"attributeReady\",\n        \"attributeHelperSearch\", \"attributeHelperResponse\", \"attributeHelperSelect\",\n        \"attributeArrayChange\", \"actionClick\",\n        \"attributeAnchorClick\",\n        \"beforeClose\", \"close\",\n        \"beforeSave\", \"afterSave\", \"attributeDownloadFile\", \"attributeUploadFile\", \"attributeUploadFileDone\",\n        \"beforeDelete\", \"afterDelete\",\n        \"beforeRestore\", \"afterRestore\",\n        \"failTransition\", \"successTransition\",\n        \"beforeDisplayTransition\", \"afterDisplayTransition\",\n        \"beforeTransition\", \"beforeTransitionClose\",\n        \"destroy\", \"attributeCreateDialogDocumentBeforeSetFormValues\",\n        \"attributeCreateDialogDocumentBeforeSetTargetValue\", \"attributeCreateDialogDocumentReady\",\n        \"attributeCreateDialogDocumentBeforeClose\", \"attributeCreateDialogDocumentBeforeDestroy\"\n    ];\n\n    $.widget(\"dcp.documentController\", {\n\n        options: {\n            eventPrefix: \"document\",\n            initid: null,\n            viewId: undefined,\n            revision: undefined,\n            constraintList: [],\n            eventListener: [],\n            _model: null,\n            activatedConstraint: {},\n            activatedEventListener: {},\n            _initializedModel: false,\n            _initializedView: false\n        },\n\n        /**\n         * Create widget\n         * @private\n         */\n        _create: function documentController_create()\n        {\n            this.options.constraintList = {};\n            this.options.eventListener = {};\n            this.activatedConstraint = {};\n            this.activatedEventListener = {};\n            this._initializedModel = false;\n            this._initializedView = false;\n            this._customClientData = {};\n            if (!this.options.initid) {\n                console.log(\"Widget initialised without document\");\n                return;\n            }\n            this._initializeWidget({}, this.options.customClientData);\n            this._super();\n        },\n        /**\n         * tryToDestroy the widget\n         *\n         * @return Promise\n         */\n        tryToDestroy: function documentController_tryToDestroy()\n        {\n            var currentWidget = this;\n            return new Promise(function documentController_promiseDestroy(resolve, reject)\n            {\n                var event = {prevent: false};\n                if (!currentWidget._model) {\n                    resolve();\n                    return;\n                }\n                if (currentWidget._model\n                    && currentWidget._model.isModified()\n                    && !window.confirm(currentWidget._model.get(\"properties\").get(\"title\") + \"\\n\" + i18n.___(\"The form has been modified without saving, do you want to close it ?\", \"ddui\"))) {\n                    reject(\"Unable to destroy because user refuses it\");\n                    return;\n                }\n                currentWidget._triggerControllerEvent(\"beforeClose\", event, currentWidget._model.getServerProperties());\n                if (event.prevent) {\n                    reject(\"Unable to destroy because before close refuses it\");\n                    return;\n                }\n                resolve();\n            });\n        },\n        /**\n         * Delete the widget\n         * @private\n         */\n        _destroy: function documentController_destroy()\n        {\n            this._triggerControllerEvent(\"destroy\", this.getProperties());\n            this.options.constraintList = {};\n            this.options.eventListener = {};\n            this.activatedConstraint = {};\n            this.activatedEventListener = {};\n            this._initializedModel = false;\n            this._initializedView = false;\n            this.element.removeData(\"document\");\n            if (this._model) {\n                this._model.trigger(\"destroy\");\n            }\n            this._trigger(\"destroy\");\n            this._super();\n        },\n\n        /**\n         * Initialize the widget\n         *\n         * Create Model, initView\n         *\n         * @param options object {\"success\": fct, \"error\", fct}\n         * @param customClientData object\n         *\n         * @private\n         */\n        _initializeWidget: function documentController_initializeWidget(options, customClientData)\n        {\n            var promise,\n                currentWidget = this,\n                initializeSuccess = function documentController_initializeSuccess()\n                {\n                    currentWidget._initializedModel = true;\n                };\n            options = options || {};\n            this._initExternalElements();\n            this._initModel(this._getModelValue());\n            this._initView();\n            if (options.success) {\n                options.success = _.wrap(options.success, function documentController_fetchSuccess(success)\n                {\n                    initializeSuccess.apply(this, _.rest(arguments));\n                    return success.apply(this, _.rest(arguments));\n                });\n            }\n            if (customClientData) {\n                this._model._customClientData = customClientData;\n            }\n            promise = this._model.fetchDocument(this._getModelValue(), options);\n            if (!options.success) {\n                promise.then(initializeSuccess);\n            }\n\n            this._initRouter({useHistory: !this.options.noRouter});\n\n            return promise;\n        },\n\n        /**\n         * Return essential element of the current document\n         *\n         * @returns {Object}\n         * @private\n         */\n        _getModelValue: function documentController_getModelValue()\n        {\n            return _.pick(this.options, \"initid\", \"viewId\", \"revision\");\n        },\n\n        /**\n         * Generate the dom where the view is inserted\n         * @private\n         */\n        _initDom: function documentController_initDom()\n        {\n            var $document = this.element.find(\".dcpDocument\");\n            if (!this.$document || $document.length === 0) {\n                this.element.append('<div class=\"dcpDocument\"></div>');\n                this.$document = this.element.find(\".dcpDocument\");\n            }\n        },\n\n        /**\n         * Init the model and bind the events\n         *\n         * @param initialValue\n         * @returns DocumentModel\n         * @private\n         */\n        _initModel: function documentController_initModel(initialValue)\n        {\n            var model;\n\n            //Don't reinit the model\n            if (!this._model) {\n                model = new DocumentModel(initialValue);\n                this._model = model;\n                this._initModelEvents();\n            } else {\n                this._reinitModel();\n            }\n            return model;\n        },\n\n        /**\n         * Init the view and bind the events\n         *\n         * @returns {DocumentView}\n         * @private\n         */\n        _initView: function documentController_initView()\n        {\n            var documentView;\n            ///Don't reinit view\n            if (!this.view) {\n                this._initDom();\n                documentView = new DocumentView({model: this._model, el: this.$document[0]});\n                this.view = documentView;\n                this._initViewEvents();\n            }\n            return this.view;\n        },\n\n        /**\n         * Clear and reinit the model with current widget values\n         *\n         * @private\n         */\n        _reinitModel: function documentController_reinitModel()\n        {\n            this._model.set(this._getModelValue());\n        },\n\n        /**\n         * Init the external elements (loading bar and notification widget)\n         * @private\n         */\n        _initExternalElements: function documentController_initExternalElements()\n        {\n            this.$loading = $(\".dcpLoading\").dcpLoading();\n            this.$notification = $('body').dcpNotification(\n                window.dcp.notifications\n            ); // active notification\n        },\n\n        /**\n         * Bind the model event\n         *\n         * Re-trigger the event\n         *\n         * @private\n         */\n        _initModelEvents: function documentController_initEvents()\n        {\n            var currentWidget = this;\n            this._model.listenTo(this._model, \"invalid\", function documentController_triggerShowInvalid(model, error)\n            {\n                var result = currentWidget._triggerControllerEvent(\"displayError\",\n                    currentWidget.getProperties(), error);\n                if (result) {\n                    currentWidget.$notification.dcpNotification(\"showError\", error);\n                }\n            });\n            this._model.listenTo(this._model, \"showError\", function documentController_triggerShowError(error)\n            {\n                var result = currentWidget._triggerControllerEvent(\"displayError\",\n                    currentWidget.getProperties(), error);\n                if (result) {\n                    currentWidget.$notification.dcpNotification(\"showError\", error);\n                }\n            });\n            this._model.listenTo(this._model, \"showMessage\", function documentController_triggerShowMessage(msg)\n            {\n                var result = currentWidget._triggerControllerEvent(\"displayMessage\",\n                    currentWidget.getProperties(), msg);\n                if (result) {\n                    currentWidget.$notification.dcpNotification(\"show\", msg.type, msg);\n                }\n            });\n            this._model.listenTo(this._model, \"sync\", function documentController_triggerSync()\n            {\n                currentWidget._initializedModel = true;\n                currentWidget.options.initid = currentWidget._model.id;\n                currentWidget.options.viewId = currentWidget._model.get(\"viewId\");\n                currentWidget.options.revision = currentWidget._model.get(\"revision\");\n                currentWidget.element.data(\"document\", currentWidget._getModelValue());\n                currentWidget._initActivatedConstraint();\n                currentWidget._initActivatedEventListeners({launchReady: false});\n            });\n            this._model.listenTo(this._model, \"beforeRender\", function documentController_triggerBeforeRender(event)\n            {\n                event.prevent = !currentWidget._triggerControllerEvent(\"beforeRender\",\n                    currentWidget.getProperties(), currentWidget._model.getModelProperties());\n            });\n            this._model.listenTo(this._model, \"beforeClose\", function documentController_triggerBeforeClose(event,\n                                                                                                            nextDocument, customClientData)\n            {\n                if (currentWidget._initializedView !== false) {\n                    event.prevent = !currentWidget._triggerControllerEvent(\"beforeClose\",\n                        currentWidget.getProperties(), nextDocument, customClientData);\n                }\n            });\n            this._model.listenTo(this._model, \"close\", function documentController_triggerClose(oldProperties)\n            {\n                if (currentWidget._initializedView !== false) {\n                    currentWidget._triggerControllerEvent(\"close\",\n                        currentWidget.getProperties(), oldProperties);\n                }\n                currentWidget._initializedView = false;\n            });\n            this._model.listenTo(this._model, \"getCustomClientData\", function documentController_triggerAddCustomData()\n            {\n                try {\n                    currentWidget._model._customClientData = currentWidget.getCustomClientData();\n                } catch (e) {\n\n                }\n            });\n            this._model.listenTo(this._model, \"beforeSave\", function documentController_triggerBeforeSave(event, customClientData)\n            {\n                event.prevent = !currentWidget._triggerControllerEvent(\"beforeSave\",\n                    currentWidget.getProperties(), currentWidget._model.getModelProperties(), customClientData);\n            });\n            this._model.listenTo(this._model, \"afterSave\", function documentController_triggerAfterSave(oldProperties)\n            {\n                currentWidget._triggerControllerEvent(\"afterSave\",\n                    currentWidget.getProperties(), oldProperties);\n            });\n            this._model.listenTo(this._model, \"beforeRestore\", function documentController_triggerBeforeRestore(event)\n            {\n                event.prevent = !currentWidget._triggerControllerEvent(\"beforeRestore\",\n                    currentWidget.getProperties());\n            });\n            this._model.listenTo(this._model, \"afterRestore\", function documentController_triggerAfterRestore(oldProperties)\n            {\n                currentWidget._triggerControllerEvent(\"afterRestore\",\n                    currentWidget.getProperties(), oldProperties);\n            });\n            this._model.listenTo(this._model, \"beforeDelete\", function documentController_triggerBeforeDelete(event, customClientData)\n            {\n                event.prevent = !currentWidget._triggerControllerEvent(\"beforeDelete\",\n                    currentWidget.getProperties(), currentWidget._model.getModelProperties(), customClientData);\n            });\n            this._model.listenTo(this._model, \"afterDelete\", function documentController_triggerAfterDelete(oldProperties)\n            {\n                currentWidget._triggerControllerEvent(\"afterDelete\",\n                    currentWidget.getProperties(), oldProperties);\n            });\n            this._model.listenTo(this._model, \"validate\", function documentController_triggerValidate(event)\n            {\n                event.prevent = !currentWidget._triggerControllerEvent(\"validate\", currentWidget.getProperties());\n            });\n            this._model.listenTo(this._model, \"changeValue\", function documentController_triggerChangeValue(options)\n            {\n                try {\n                    var currentAttribute = currentWidget.getAttribute(options.attributeId),\n                        index = 0, values = currentAttribute.getValue(\"all\"),\n                        mAttribute = currentWidget._getAttributeModel(options.attributeId);\n                    if (mAttribute.getParent().get(\"type\") !== \"array\") {\n                        index = -1;\n                    } else {\n                        _.find(values.current, function documentController_valueIsModified(currentValue)\n                        {\n                            var result, previous = values.previous[index];\n                            if (!previous) {\n                                index++;\n                                return true;\n                            }\n                            if (_.isArray(currentValue)) {\n                                currentValue = currentValue.join(\",\");\n                            }\n                            currentValue = _.has(currentValue, \"value\") ? currentValue.value : currentValue;\n                            if (_.isArray(previous)) {\n                                previous = previous.join(\",\");\n                            }\n                            previous = _.has(previous, \"value\") ? previous.value : previous;\n                            result = previous !== currentValue;\n                            index++;\n                            return result;\n                        });\n                        index--;\n                    }\n                    currentWidget._triggerAttributeControllerEvent(\"change\", currentAttribute,\n                        currentWidget.getProperties(),\n                        currentAttribute,\n                        currentAttribute.getValue(\"all\"),\n                        index\n                    );\n                } catch (error) {\n                    if (!(error instanceof ErrorModelNonInitialized)) {\n                        console.error(error);\n                    }\n                }\n\n            });\n            this._model.listenTo(this._model, \"beforeAttributeRender\", function documentController_triggerAttributeRender(event, attributeId, $el, index)\n            {\n                try {\n                    var currentAttribute = currentWidget.getAttribute(attributeId);\n                    event.prevent = !currentWidget._triggerAttributeControllerEvent(\"attributeBeforeRender\", currentAttribute,\n                        currentWidget.getProperties(),\n                        currentAttribute,\n                        $el,\n                        index\n                    );\n                } catch (error) {\n                    if (!(error instanceof ErrorModelNonInitialized)) {\n                        console.error(error);\n                    }\n                }\n            });\n            this._model.listenTo(this._model, \"attributeRender\", function documentController_triggerAttributeRender(attributeId, $el, index)\n            {\n                try {\n                    var currentAttribute = currentWidget.getAttribute(attributeId);\n                    currentWidget._triggerAttributeControllerEvent(\"attributeReady\", currentAttribute,\n                        currentWidget.getProperties(),\n                        currentAttribute,\n                        $el,\n                        index\n                    );\n                } catch (error) {\n                    if (!(error instanceof ErrorModelNonInitialized)) {\n                        console.error(error);\n                    }\n                }\n\n            });\n            this._model.listenTo(this._model, \"arrayModified\", function documentController_triggerArrayModified(options)\n            {\n                try {\n                    var currentAttribute = currentWidget.getAttribute(options.attributeId);\n                    currentWidget._triggerAttributeControllerEvent(\"attributeArrayChange\", currentAttribute,\n                        currentWidget.getProperties(),\n                        currentAttribute,\n                        options.type,\n                        options.options\n                    );\n                } catch (error) {\n                    if (!(error instanceof ErrorModelNonInitialized)) {\n                        console.error(error);\n                    }\n                }\n\n            });\n            this._model.listenTo(this._model, \"internalLinkSelected\", function documentController_triggerInternalLinkSelected(event, options)\n            {\n                event.prevent = !currentWidget._triggerControllerEvent(\"actionClick\",\n                    currentWidget.getProperties(),\n                    options\n                );\n            });\n            this._model.listenTo(this._model, \"downloadFile\", function documentController_triggerDownloadFile(event, attrid, options)\n            {\n                try {\n                    var currentAttribute = currentWidget.getAttribute(attrid);\n                    event.prevent = !currentWidget._triggerControllerEvent(\"attributeDownloadFile\",\n                        currentWidget.getProperties(),\n                        currentAttribute,\n                        options.$el,\n                        options.index\n                    );\n                } catch (error) {\n                    if (!(error instanceof ErrorModelNonInitialized)) {\n                        console.error(error);\n                    }\n                }\n\n            });\n            this._model.listenTo(this._model, \"uploadFile\", function documentController_triggerUploadFile(event, attrid, options)\n            {\n                try {\n                    var currentAttribute = currentWidget.getAttribute(attrid);\n                    event.prevent = !currentWidget._triggerControllerEvent(\"attributeUploadFile\",\n                        currentWidget.getProperties(),\n                        currentAttribute,\n                        options.$el,\n                        options.index,\n                        {\n                            file: options.file,\n                            hasUploadingFiles: currentWidget._model.hasUploadingFile()\n\n                        }\n                    );\n                } catch (error) {\n                    if (!(error instanceof ErrorModelNonInitialized)) {\n                        console.error(error);\n                    }\n                }\n            });\n            this._model.listenTo(this._model, \"uploadFileDone\", function documentController_triggerUploadFile(event, attrid, options)\n            {\n                try {\n                    var currentAttribute = currentWidget.getAttribute(attrid);\n                    event.prevent = !currentWidget._triggerControllerEvent(\"attributeUploadFileDone\",\n                        currentWidget.getProperties(),\n                        currentAttribute,\n                        options.$el,\n                        options.index,\n                        {\n                            file: options.file,\n                            hasUploadingFiles: currentWidget._model.hasUploadingFile()\n                        }\n                    );\n                } catch (error) {\n                    if (!(error instanceof ErrorModelNonInitialized)) {\n                        console.error(error);\n                    }\n                }\n            });\n            this._model.listenTo(this._model, \"helperSearch\", function documentController_triggerHelperSearch(event, attrid, options)\n            {\n                try {\n                    var currentAttribute = currentWidget.getAttribute(attrid);\n                    event.prevent = !currentWidget._triggerAttributeControllerEvent(\"attributeHelperSearch\", currentAttribute,\n                        currentWidget.getProperties(),\n                        currentAttribute,\n                        options\n                    );\n                } catch (error) {\n                    if (!(error instanceof ErrorModelNonInitialized)) {\n                        console.error(error);\n                    }\n                }\n            });\n            this._model.listenTo(this._model, \"helperResponse\", function documentController_triggerHelperResponse(event, attrid, options)\n            {\n                try {\n                    var currentAttribute = currentWidget.getAttribute(attrid);\n                    event.prevent = !currentWidget._triggerAttributeControllerEvent(\"attributeHelperResponse\", currentAttribute,\n                        currentWidget.getProperties(),\n                        currentAttribute,\n                        options\n                    );\n                } catch (error) {\n                    if (!(error instanceof ErrorModelNonInitialized)) {\n                        console.error(error);\n                    }\n                }\n\n            });\n            this._model.listenTo(this._model, \"helperSelect\", function documentController_triggerHelperSelect(event, attrid, options)\n            {\n                try {\n                    var currentAttribute = currentWidget.getAttribute(attrid);\n                    event.prevent = !currentWidget._triggerAttributeControllerEvent(\"attributeHelperSelect\", currentAttribute,\n                        currentWidget.getProperties(),\n                        currentAttribute,\n                        options\n                    );\n                } catch (error) {\n                    if (!(error instanceof ErrorModelNonInitialized)) {\n                        console.error(error);\n                    }\n                }\n            });\n\n            // listener to prevent default actions when anchorClick is triggered\n            this._model.listenTo(this._model, \"anchorClick\", function documentController_triggerHelperSelect(event, attrid, options)\n            {\n                try {\n                    var currentAttribute = currentWidget.getAttribute(attrid);\n                    event.prevent = !currentWidget._triggerAttributeControllerEvent(\"attributeAnchorClick\",\n                        currentAttribute,\n                        currentWidget.getProperties(),\n                        currentAttribute,\n                        options.$el,\n                        options.index,\n                        options.options\n                    );\n                } catch (error) {\n                    if (!(error instanceof ErrorModelNonInitialized)) {\n                        console.error(error);\n                    }\n                }\n            });\n\n            // Generic listener for addCreateDocumentButton docid render option\n            this._model.listenTo(this._model, \"createDialogListener\", function documentController_triggercreateDialogDocumentOpen(event, attrid, options)\n            {\n                try {\n                    var currentAttribute = currentWidget.getAttribute(attrid);\n                    var triggername = \"attributeCreateDialogDocument\";\n                    // Uppercase first letter\n                    triggername += options.triggerId.charAt(0).toUpperCase() + options.triggerId.slice(1);\n\n                    event.prevent = !currentWidget._triggerAttributeControllerEvent(triggername,\n                        currentAttribute,\n                        currentWidget.getProperties(),\n                        currentAttribute,\n                        options\n                    );\n                } catch (error) {\n                    if (!(error instanceof ErrorModelNonInitialized)) {\n                        console.error(error);\n                    }\n                }\n            });\n            this._model.listenTo(this._model, \"constraint\", function documentController_triggerConstraint(attribute, constraintController)\n            {\n                try {\n                    var currentAttribute = currentWidget.getAttribute(attribute),\n                        currentModel = currentWidget.getProperties(),\n                        $element = $(currentWidget.element),\n                        addConstraint = function documentController_addConstraint(currentConstraint)\n                        {\n                            if (_.isString(currentConstraint)) {\n                                constraintController.addConstraintMessage(currentConstraint);\n                            }\n                            if (_.isObject(currentConstraint) && currentConstraint.message && _.isNumber(currentConstraint.index)) {\n                                constraintController.addConstraintMessage(currentConstraint.message, currentConstraint.index);\n                            }\n                        };\n                    _.each(currentWidget.activatedConstraint, function triggerCurrentConstraint(currentConstraint)\n                    {\n                        try {\n                            if (currentConstraint.attributeCheck.apply($element, [currentAttribute, currentModel])) {\n                                var response = currentConstraint.constraintCheck.call($element,\n                                    currentModel,\n                                    currentAttribute,\n                                    currentAttribute.getValue(\"all\")\n                                );\n                                if (_.isArray(response)) {\n                                    _.each(response, addConstraint);\n                                } else {\n                                    addConstraint(response);\n                                }\n                            }\n                        } catch (e) {\n                            console.error(e);\n                        }\n\n                    });\n                } catch (error) {\n                    if (!(error instanceof ErrorModelNonInitialized)) {\n                        console.error(error);\n                    }\n                }\n\n            });\n            this._model.listenTo(this._model, \"showTransition\", _.bind(currentWidget._initAndDisplayTransition, this));\n            this._model.listenTo(this._model, \"beforeParse\", _.bind(function deleteCustomClient()\n            {\n                //Suppress customClientData after a sucessful transaction\n                try {\n                    currentWidget.getCustomClientData(true);\n                } catch (e) {\n\n                }\n            }, this));\n        },\n\n        /**\n         * Bind the view\n         * Re-trigger the events\n         *\n         * @private\n         */\n        _initViewEvents: function documentController_initViewEvents()\n        {\n            var currentWidget = this;\n            this.view.on(\"cleanNotification\", function documentController_triggerCleanNotification()\n            {\n                currentWidget.$notification.dcpNotification(\"clear\");\n            });\n            this.view.on('loading', function documentController_triggerLoading(data, nbItem)\n            {\n                currentWidget.$loading.dcpLoading('setPercent', data);\n                if (nbItem) {\n                    currentWidget.$loading.dcpLoading('setNbItem', nbItem);\n                }\n            });\n            this.view.on('loaderShow', function documentController_triggerLoaderShow(text, pc)\n            {\n                console.time(\"xhr+render document view\");\n                currentWidget.$loading.dcpLoading('show', text, pc);\n            });\n            this.view.on('loaderHide', function documentController_triggerHide()\n            {\n                currentWidget.$loading.dcpLoading('hide');\n            });\n            this.view.on('partRender', function documentController_triggerPartRender()\n            {\n                currentWidget.$loading.dcpLoading('addItem');\n            });\n            this.view.on('renderDone', function documentController_triggerRenderDone()\n            {\n                console.timeEnd(\"xhr+render document view\");\n                currentWidget.$loading.dcpLoading(\"setPercent\", 100);\n                currentWidget.$loading.dcpLoading(\"setLabel\", null);\n                currentWidget._initializedView = true;\n                currentWidget._triggerControllerEvent(\"ready\", currentWidget.getProperties());\n                _.delay(function documentController_endRender()\n                {\n                    currentWidget.$loading.dcpLoading(\"hide\", true);\n                    console.timeEnd('main');\n                });\n            });\n            this.view.on(\"showMessage\", function documentController_triggerShowMessage(message)\n            {\n                var result = currentWidget._triggerControllerEvent(\"displayMessage\",\n                    currentWidget.getProperties(), message);\n                if (result) {\n                    currentWidget.$notification.dcpNotification(\"show\", message.type, message);\n                }\n            });\n            this.view.on(\"showSuccess\", function documentController_triggerShowSuccess(message)\n            {\n                var result = currentWidget._triggerControllerEvent(\"displayMessage\",\n                    currentWidget.getProperties(), message);\n                if (result) {\n                    currentWidget.$notification.dcpNotification(\"showSuccess\", message);\n                }\n            });\n            this.view.on(\"reinit\", function documentController_triggerReinit()\n            {\n                currentWidget._initModel(currentWidget._getModelValue());\n                currentWidget._initView();\n                currentWidget._model.fetchDocument();\n            });\n        },\n\n        /**\n         * Init the pushstate router\n         *\n         * @private\n         */\n        _initRouter: function documentController_initRouter(config)\n        {\n            if (this.router) {\n                return this.router;\n            }\n            try {\n                if (window.history && history.pushState) {\n                    Backbone.history.start({pushState: true});\n                } else {\n                    //For browser without API history\n                    Backbone.history.start();\n                }\n            } catch (e) {\n                console.error(e);\n            }\n            this.router = new Router({\n                document: this._model,\n                useHistory: (!config || config.useHistory)\n            });\n        },\n\n        /**\n         * Init and display the change state pop-up\n         *\n         * @param nextState\n         * @param transition\n         * @param values\n         * @param withoutInterface\n         * @param reinitOptions\n         */\n        _initAndDisplayTransition: function documentController_initAndDisplayTransition(nextState, transition, values, withoutInterface, reinitOptions)\n        {\n            var $target = $('<div class=\"dcpTransition\"/>'), transitionElements = {}, currentWidget = this, result,\n                transitionInterface,\n                documentServerProperties = this.getProperties();\n\n            return new Promise(function documentController_changeStatePromise(resolve, reject)\n            {\n                result = !currentWidget._triggerControllerEvent(\"beforeDisplayChangeState\",\n                    currentWidget.getProperties(), new TransitionInterface(null, $target, nextState, transition));\n                if (result) {\n                    reject();\n                    return this;\n                }\n\n                //Init transition model\n                transitionElements.model = new TransitionModel({\n                    documentId: currentWidget._model.id,\n                    documentModel: currentWidget._model,\n                    state: nextState,\n                    transition: transition\n                });\n\n                //Init transition view\n                if (withoutInterface !== true) {\n                    transitionElements.view = new TransitionView({\n                        model: transitionElements.model,\n                        el: $target\n                    });\n                }\n\n                transitionInterface = new TransitionInterface(transitionElements.model, $target, nextState, transition);\n\n                if (transitionElements.view) {\n                    //Propagate afterDisplayChange on renderDone\n                    transitionElements.view.once(\"renderTransitionWindowDone\", function documentController_propagateAfter()\n                    {\n                        currentWidget._triggerControllerEvent(\"afterDisplayTransition\",\n                            currentWidget.getProperties(), transitionInterface);\n                    });\n                }\n\n                //Propagate the beforeTransition\n                transitionElements.model.listenTo(transitionElements.model, \"beforeChangeState\", function documentController_propagateBeforeTransition(event)\n                {\n                    event.prevent = !currentWidget._triggerControllerEvent(\"beforeTransition\",\n                        currentWidget.getProperties(), transitionInterface);\n                });\n\n                //Propagate the beforeTransitionClose\n                transitionElements.model.listenTo(transitionElements.model, \"beforeChangeStateClose\", function documentController_propagateTransitionClose(event)\n                {\n                    event.prevent = !currentWidget._triggerControllerEvent(\"beforeTransitionClose\",\n                        currentWidget.getProperties(), transitionInterface);\n                });\n\n                transitionElements.model.listenTo(transitionElements.model, \"showError\", function documentController_propagateTransitionError(error)\n                {\n                    event.prevent = !currentWidget._triggerControllerEvent(\"failTransition\",\n                        currentWidget.getProperties(), transitionInterface, error);\n                    reject({documentProperties: documentServerProperties});\n                });\n\n                transitionElements.model.listenTo(transitionElements.model, 'success', function documentController_TransitionSuccess(messages)\n                {\n                    if (transitionElements.view) {\n                        transitionElements.view.$el.hide();\n                        currentWidget.view.once(\"renderDone\", function documentController_transitionRender()\n                        {\n                            transitionElements.view.remove();\n                            _.each(messages, function documentController_parseMessage(message)\n                            {\n                                currentWidget.view.trigger(\"showMessage\", message);\n                            });\n                        });\n                    }\n\n                    //delete the pop up when the render of the pop up is done\n                    currentWidget._triggerControllerEvent(\"successTransition\",\n                        currentWidget.getProperties(), transitionInterface);\n\n                    reinitOptions = reinitOptions || {revision: -1};\n                    if (!_.has(reinitOptions, \"revision\")) {\n                        reinitOptions.revision = -1;\n                    }\n\n                    //Reinit the main model with last revision\n                    currentWidget.reinitDocument(reinitOptions).then(function documentController_reinitDone()\n                    {\n                        resolve({documentProperties: documentServerProperties});\n                    }, function documentController_reinitFail()\n                    {\n                        reject({documentProperties: documentServerProperties});\n                    });\n\n                });\n\n                transitionElements.model.listenTo(currentWidget._model, \"sync\", function documentController_TransitionClose()\n                {\n                    this.trigger(\"close\");\n                });\n\n                transitionElements.model.fetch({\n                    \"success\": function transitionModel_setDefaultValues()\n                    {\n                        if (values) {\n                            transitionElements.model.setValues(values);\n                        }\n                        if (withoutInterface === true) {\n                            transitionElements.model._loadDocument(transitionElements.model).then(function documentController_TransitionSave()\n                            {\n                                transitionElements.model.save({}, {\n                                    success: function transitionModel_afterSave()\n                                    {\n                                        transitionElements.model.trigger(\"success\");\n                                        resolve({documentProperties: documentServerProperties});\n                                    },\n                                    error: function transitionModel_error()\n                                    {\n                                        reject({documentProperties: documentServerProperties});\n                                    }\n                                });\n                            }).catch(function transitionModel_error()\n                            {\n                                reject({documentProperties: documentServerProperties});\n                            });\n                        } else {\n                            transitionElements.model._loadDocument(transitionElements.model).then(function documentController_TransitionDisplay()\n                            {\n                                transitionElements.model.trigger(\"dduiDocumentReady\");\n                            }).catch(function transitionModel_error()\n                            {\n                                reject({documentProperties: documentServerProperties});\n                            });\n                        }\n                    },\n                    \"error\": function transitionModel_error(theModel, response, options)\n                    {\n                        var errorTxt = {title: \"Transition Error\"};\n                        if (options && options.errorThrown) {\n                            errorTxt.message = options.errorThrown;\n                        }\n                        currentWidget.$notification.dcpNotification(\"showError\", errorTxt);\n                        transitionElements.model.trigger(\"showError\", errorTxt);\n                    }\n                });\n            });\n\n        },\n\n        /**\n         * Get a backbone model of an attribute\n         *\n         * @param attributeId\n         * @returns {*}\n         */\n        _getAttributeModel: function documentController_getAttributeModel(attributeId)\n        {\n            var attributes = this._model.get(\"attributes\");\n            var attribute;\n            if (!attributes) {\n                throw new Error('Attribute models not initialized yet : The attribute \"' + attributeId + '\" cannot be found.');\n            }\n            attribute = this._model.get(\"attributes\").get(attributeId);\n            if (!attribute) {\n                return undefined;\n            }\n            return attribute;\n        },\n\n        _getMenuModel: function documentController_getMenuModel(menuId)\n        {\n            var menus = this._model.get(\"menus\");\n            ;\n            var menu = menus.get(menuId);\n            if (!menu && menus) {\n                menus.each(function documentControllerGetMenuIterate(itemMenu)\n                {\n                    if (itemMenu.get(\"content\")) {\n                        _.each(itemMenu.get(\"content\"), function documentControllerGetSubMenuIterate(subMenu)\n                        {\n                            if (subMenu.id === menuId) {\n                                menu = new MenuModel(subMenu);\n                            }\n                        });\n                    }\n                });\n            }\n            return menu;\n        },\n\n        /**\n         * Get all rendered attributes with their root dom node\n         *\n         * @returns {*}\n         */\n        _getRenderedAttributes: function documentController_getRenderedAttributes()\n        {\n            return this._model.get(\"attributes\").chain().map(function documentController_getRenderedAttribute(currentAttribute)\n            {\n                return {\n                    \"view\": currentAttribute.haveView(),\n                    \"id\": currentAttribute.id\n                };\n            }).filter(function documentController_suppressNoView(currentAttribut)\n            {\n                return currentAttribut.view.haveView;\n            }).value();\n        },\n\n        /**\n         * Get max index of an array\n         *\n         * @param attributeArray\n         * @returns {*}\n         */\n        _getMaxIndex: function documentController_getMaxIndex(attributeArray)\n        {\n            return _.size(attributeArray.get(\"content\").max(function documentController_getMax(currentAttr)\n            {\n                return _.size(currentAttr.get(\"attributeValue\"));\n            }).get(\"attributeValue\"));\n        },\n\n        /**\n         * Activate constraint on the current document\n         * Used on the fetch of a new document\n         *\n         */\n        _initActivatedConstraint: function documentController_initActivatedConstraint()\n        {\n            var currentDocumentProperties = this.getProperties(), currentWidget = this;\n            this.activatedConstraint = {};\n            _.each(this.options.constraintList, function documentController_getActivatedConstraint(currentConstraint)\n            {\n                if (currentConstraint.documentCheck.call($(currentWidget.element), currentDocumentProperties)) {\n                    currentWidget.activatedConstraint[currentConstraint.name] = currentConstraint;\n                }\n            });\n        },\n\n        /**\n         * Activate events on the current document\n         * Used on the fetch of a new document\n         */\n        _initActivatedEventListeners: function documentController_initActivatedEvents(options)\n        {\n            var currentDocumentProperties = this.getProperties(), currentWidget = this;\n            options = options || {};\n            this.activatedEventListener = {};\n            _.each(this.options.eventListener, function documentController_getActivatedEvent(currentEvent)\n            {\n                if (!_.isFunction(currentEvent.documentCheck)) {\n                    currentWidget.activatedEventListener[currentEvent.name] = currentEvent;\n                    return;\n                }\n                if (currentEvent.documentCheck.call($(currentWidget.element), currentDocumentProperties)) {\n                    currentWidget.activatedEventListener[currentEvent.name] = currentEvent;\n                }\n            });\n            //Trigger new added ready event\n            if (this._initializedView !== false && options.launchReady !== false) {\n                this._triggerControllerEvent(\"ready\", currentDocumentProperties);\n                _.each(this._getRenderedAttributes(), function documentController_triggerRenderedAttributes(currentAttribute)\n                {\n                    var objectAttribute = currentWidget.getAttribute(currentAttribute.id);\n                    currentWidget._triggerAttributeControllerEvent(\"attributeReady\", currentAttribute,\n                        currentDocumentProperties,\n                        objectAttribute,\n                        currentAttribute.view.elements\n                    );\n                });\n            }\n        },\n\n        /**\n         * Add new event and autotrigger already done event for ready\n         *\n         * @param newEvent\n         */\n        _addAndInitNewEvents: function documentController_addAndInitNewEvents(newEvent)\n        {\n            var currentDocumentProperties, currentWidget = this, event, uniqueName, $element = $(currentWidget.element);\n            uniqueName = (newEvent.externalEvent ? \"external_\" : \"internal_\") + newEvent.name;\n            this.options.eventListener[uniqueName] = newEvent;\n\n            if (!this._initializedModel) {\n                //early event model is not ready (no trigger, or current register possible)\n                return this;\n            }\n            currentDocumentProperties = this.getProperties();\n            // Check if the event is for the current document\n            if (!_.isFunction(newEvent.documentCheck) || newEvent.documentCheck.call($element, currentDocumentProperties)) {\n                this.activatedEventListener[newEvent.name] = newEvent;\n                // Check if we need to manually trigger this callback (late registered : only for ready events)\n                if (this._initializedView !== false) {\n                    if (newEvent.eventType === \"ready\") {\n                        event = $.Event(newEvent.eventType);\n                        event.target = currentWidget.element;\n                        try {\n                            // add element as function context\n                            newEvent.eventCallback.call($element, event, currentDocumentProperties);\n                        } catch (e) {\n                            console.error(e);\n                        }\n                    }\n                    if (newEvent.eventType === \"attributeReady\") {\n                        event = $.Event(newEvent.eventType);\n                        event.target = currentWidget.element;\n                        _.each(this._getRenderedAttributes(), function documentController_triggerRenderedAttributes(currentAttribute)\n                        {\n                            var objectAttribute = currentWidget.getAttribute(currentAttribute.id);\n                            if (!_.isFunction(newEvent.attributeCheck) || newEvent.attributeCheck.apply($element, [objectAttribute])) {\n                                try {\n                                    // add element as function context\n                                    newEvent.eventCallback.call($element,\n                                        event,\n                                        currentDocumentProperties,\n                                        objectAttribute,\n                                        currentAttribute.view.elements);\n                                } catch (e) {\n                                    console.error(e);\n                                }\n                            }\n                        });\n                    }\n                }\n            }\n        },\n\n        /**\n         * Trigger attribute event\n         *\n         * Similar at trigger document event with a constraint on attribute\n         *\n         * @param eventName\n         * @param attributeInternalElement\n         * @returns {boolean}\n         */\n        _triggerAttributeControllerEvent: function documentController_triggerAttributeControllerEvent(eventName, attributeInternalElement)\n        {\n            var currentWidget = this, args = Array.prototype.slice.call(arguments, 2), event = $.Event(eventName),\n                externalEventArgument,\n                $element = $(currentWidget.element);\n            event.target = currentWidget.element;\n            // internal event trigger\n            args.unshift(event);\n            _.chain(this.activatedEventListener).filter(function documentController__filterUsableEvents(currentEvent)\n            {\n                // Check by eventType (only call callback with good eventType)\n                if (currentEvent.eventType === eventName) {\n                    //Check with attributeCheck if the function exist\n                    if (!_.isFunction(currentEvent.attributeCheck)) {\n                        return true;\n                    }\n                    return currentEvent.attributeCheck.apply($element, [attributeInternalElement, currentWidget.getProperties()]);\n                }\n                return false;\n            }).each(function documentController_applyCallBack(currentEvent)\n            {\n                try {\n                    currentEvent.eventCallback.apply($element, args);\n                } catch (e) {\n                    if (window.dcp && window.dcp.logger) {\n                        window.dcp.logger(e);\n                    } else {\n                        console.error(e);\n                    }\n                }\n            });\n            externalEventArgument = Array.prototype.slice.call(arguments, 0);\n            externalEventArgument.splice(1, 1);\n            currentWidget._triggerExternalEvent.apply(currentWidget, externalEventArgument);\n            return !event.isDefaultPrevented();\n        },\n\n        /**\n         * Trigger a controller event\n         * That kind of event are only for this widget\n         *\n         * @param eventName\n         * @returns {boolean}\n         */\n        _triggerControllerEvent: function documentController_triggerControllerEvent(eventName)\n        {\n            var currentWidget = this, args = Array.prototype.slice.call(arguments, 1), event = $.Event(eventName);\n            event.target = currentWidget.element;\n            // internal event trigger\n            args.unshift(event);\n            _.chain(this.activatedEventListener).filter(function documentController_getEventName(currentEvent)\n            {\n                return currentEvent.eventType === eventName;\n            }).each(function documentController_triggerAnEvent(currentEvent)\n            {\n                try {\n                    currentEvent.eventCallback.apply($(currentWidget.element), args);\n                } catch (e) {\n                    if (window.dcp.logger) {\n                        window.dcp.logger(e);\n                    } else {\n                        console.error(e);\n                    }\n                }\n            });\n            currentWidget._triggerExternalEvent.apply(currentWidget, arguments);\n            return !event.isDefaultPrevented();\n        },\n\n        /**\n         * Trigger event as jQuery standard events (all events are prefixed by document)\n         *\n         * @param type\n         */\n        _triggerExternalEvent: function documentController_triggerExternalEvent(type)\n        {\n            var currentWidget = this, args = Array.prototype.slice.call(arguments, 1), event = $.Event(type);\n            //prepare argument for widget event trigger (we want type, event, data)\n            // add the eventObject\n            args.unshift(event);\n            // add the type\n            args.unshift(type);\n            // concatenate other argument in one element (to respect widget pattern)\n            args[2] = args.slice(2);\n            // suppress other arguments (since they have been concatened)\n            args = args.slice(0, 3);\n            //trigger external event\n            currentWidget._trigger.apply(currentWidget, args);\n        },\n\n        /**\n         * Check if event name is valid\n         *\n         * @param eventName string\n         * @private\n         */\n        _checkEventName: function documentController_checkEventName(eventName)\n        {\n            if (_.isString(eventName) &&\n                (eventName.indexOf(\"custom:\") === 0 ||\n                    _.find(eventList, function documentController_CheckEventType(currentEventType)\n                    {\n                        return currentEventType === eventName;\n                    })\n                )) {\n                return true;\n            }\n            throw new Error(\"The event type \" + eventName + \" is not known. It must be one of \" + eventList.sort().join(\" ,\"));\n        },\n\n        /**\n         * Check if the view is initialized\n         *\n         * @private\n         */\n        _checkInitialisedView: function documentController_checkInitialised()\n        {\n            if (!this._initializedView) {\n                throw new ErrorModelNonInitialized(\"The widget view is not initialized, use fetchDocument to initialise it.\");\n            }\n        },\n\n        /**\n         * Check if the model is initialized\n         *\n         * @private\n         */\n        _checkInitialisedModel: function documentController_checkInitialisedModel()\n        {\n            if (!this._initializedModel) {\n                throw new ErrorModelNonInitialized();\n            }\n        },\n\n        _registerOutputPromise: function documentController_registerOutputPromise(documentPromise, options)\n        {\n            var currentWidget = this;\n            return new Promise(function documentController_reinitPromise(resolve, reject)\n            {\n                documentPromise.then(function documentController_reinitDone(values)\n                    {\n                        if (options && _.isFunction(options.success)) {\n                            try {\n                                if (window.console.warn) {\n                                    window.console.warn(\"Callback \\\"success\\\" is deprecated use promise instead\");\n                                }\n                                options.success.call($(currentWidget.element),\n                                    values.documentProperties || {},\n                                    currentWidget.getProperties());\n                            } catch (exception) {\n                                if (window.dcp.logger) {\n                                    window.dcp.logger(exception);\n                                } else {\n                                    console.error(exception);\n                                }\n                            }\n                        }\n                        resolve({\n                            element: $(currentWidget.element),\n                            previousDocument: values.documentProperties || {},\n                            nextDocument: currentWidget.getProperties()\n                        });\n                    }, function documentController_reinitFail(values)\n                    {\n                        var errorArguments = values.arguments;\n                        var errorMessage = {contentText: \"Undefined error\"};\n\n                        if (values.arguments) {\n                            try {\n                                if (errorArguments && errorArguments[1] && errorArguments[1].responseJSON) {\n                                    errorMessage = errorArguments[1].responseJSON.messages[0];\n                                }\n                            } catch (e) {\n\n                            }\n                            if (errorArguments && errorArguments[0] && errorArguments[0].eventPrevented) {\n                                errorMessage = {contentText: \"Event prevented\"};\n                            }\n                            if (errorArguments && errorArguments[0] && errorArguments[0].errorMessage) {\n                                errorMessage = errorArguments[0].errorMessage;\n                            }\n                        }\n                        if (options && _.isFunction(options.error)) {\n                            try {\n                                if (window.console.warn) {\n                                    window.console.warn(\"Callback \\\"error\\\" is deprecated use promise instead\");\n                                }\n                                options.error.call(\n                                    $(currentWidget.element),\n                                    values.documentProperties || {},\n                                    null, errorMessage);\n                            } catch (exception) {\n                                window.dcp.logger(exception);\n                            }\n                        }\n                        reject({\n                            element: $(currentWidget.element),\n                            previousDocument: values.documentProperties || {},\n                            nextDocument: null,\n                            errorMessage: errorMessage\n                        });\n                    }\n                );\n            });\n        },\n\n        /***************************************************************************************************************\n         * External function\n         **************************************************************************************************************/\n        /**\n         * Reinit the current document (close it and re-open it) : keep the same view, revision, etc...\n         *\n         * @param values object {\"initid\" : int, \"revision\" : int, \"viewId\" : string, \"customClientData\" : mixed}\n         * @param options object {\"success\": fct, \"error\", fct}\n         */\n        reinitDocument: function documentControllerReinitDocument(values, options)\n        {\n            var properties = this.getProperties();\n            this._checkInitialisedModel();\n            values = values || {};\n\n            //Reinit model with server values\n            _.defaults(values, {revision: properties.revision, viewId: properties.viewId, initid: properties.initid});\n\n            return this.fetchDocument(values, options);\n        },\n\n        /**\n         * Fetch a new document\n         * @param values object {\"initid\" : int, \"revision\" : int, \"viewId\" : string, \"customClientData\" : mixed}\n         * @param options object {\"success\": fct, \"error\", fct}\n         */\n        fetchDocument: function documentControllerFetchDocument(values, options)\n        {\n            var documentPromise, callBackPromise;\n            var currentWidget = this;\n            values = _.isUndefined(values) ? {} : values;\n            options = options || {};\n\n            if (!_.isObject(values)) {\n                throw new Error('Fetch argument must be an object {\"initid\":, \"revision\": , \"viewId\": }');\n            }\n\n            if (!values.initid) {\n                throw new Error('initid argument is mandatory');\n            }\n\n            if (!isNaN(values.initid)) {\n                // Convert to numeric initid is possible\n                values.initid = parseInt(values.initid);\n            }\n\n            // Use default values when fetch another document\n            _.defaults(values, {revision: -1, viewId: \"!defaultConsultation\"});\n            _.defaults(options, {force: false});\n\n            _.each(_.pick(values, \"initid\", \"revision\", \"viewId\"), function dcpDocument_setNewOptions(value, key)\n            {\n                currentWidget.options[key] = value;\n            });\n\n            if (!this._model) {\n                documentPromise = this._initializeWidget(options, values.customClientData);\n            } else {\n                if (values.customClientData) {\n                    this._model._customClientData = values.customClientData;\n                }\n\n                if (this._model.isModified() && options.force === false) {\n                    callBackPromise = this._model._promiseCallback();\n                    this._model.trigger(\"loadDocument\",\n                        this._getModelValue(),\n                        {\n                            success: callBackPromise.success,\n                            error: callBackPromise.error\n                        }\n                    );\n                    documentPromise = callBackPromise.promise;\n                } else {\n                    documentPromise = this._model.fetchDocument(this._getModelValue());\n                }\n            }\n            return this._registerOutputPromise(documentPromise, options);\n\n        },\n\n        /**\n         * Save the current document\n         * Reload the interface in the same mode\n         * @param options object {\"success\": fct, \"error\", fct, \"customClientData\" : mixed}\n         *\n         */\n        saveDocument: function documentControllerSave(options)\n        {\n            var documentPromise;\n            options = options || {};\n            this._checkInitialisedModel();\n            if (options.customClientData) {\n                this._model._customClientData = options.customClientData;\n            }\n            documentPromise = this._model.saveDocument();\n            return this._registerOutputPromise(documentPromise, options);\n        },\n\n        /**\n         * Change the workflow state of the document\n         *\n         * @param parameters\n         * @param reinitOptions\n         * @param options\n         */\n        changeStateDocument: function documentController_changeStateDocument(parameters, reinitOptions, options)\n        {\n            var documentPromise;\n            this._checkInitialisedModel();\n            if (!_.isObject(parameters)) {\n                throw new Error('changeStateDocument first argument must be an object {\"nextState\":, \"transition\": , \"values\":, \"unattended\":, \"\" }');\n            }\n            if (!_.isString(parameters.nextState) || !_.isString(parameters.transition)) {\n                throw new Error('nextState and transition arguments are mandatory');\n            }\n            documentPromise = this._initAndDisplayTransition(parameters.nextState, parameters.transition, parameters.values || null,\n                parameters.unattended || false, reinitOptions);\n            return this._registerOutputPromise(documentPromise, options);\n        },\n\n        /**\n         * Delete the current document\n         * Reload the interface in the same mode\n         * @param options object {\"success\": fct, \"error\", fct, \"customClientData\" : mixed}\n         */\n        deleteDocument: function documentControllerDelete(options)\n        {\n            var documentPromise;\n            options = options || {};\n            this._checkInitialisedModel();\n            if (options.customClientData) {\n                this._model._customClientData = options.customClientData;\n            }\n            documentPromise = this._model.deleteDocument();\n            return this._registerOutputPromise(documentPromise, options);\n        },\n\n        /**\n         * Restore the current document\n         * Reload the interface in the same mode\n         * @param options object {\"success\": fct, \"error\", fct, \"customClientData\" : mixed}\n         */\n        restoreDocument: function documentControllerRestore(options)\n        {\n            var documentPromise;\n            options = options || {};\n            this._checkInitialisedModel();\n            if (options.customClientData) {\n                this._model._customClientData = options.customClientData;\n            }\n            documentPromise = this._model.restoreDocument();\n            return this._registerOutputPromise(documentPromise, options);\n        },\n\n        /**\n         * Get a property value\n         *\n         * @param property\n         * @returns {*}\n         */\n        getProperty: function documentControllerGetDocumentProperty(property)\n        {\n            this._checkInitialisedModel();\n            if (property === \"isModified\") {\n                return this._model.isModified();\n            }\n            return this._model.getServerProperties()[property];\n        },\n\n        /**\n         * Get all the properties\n         * @returns {*}\n         */\n        getProperties: function documentControllerGetDocumentProperties()\n        {\n            var properties, ready = true;\n            try {\n                this._checkInitialisedModel();\n            } catch (e) {\n                ready = false;\n                properties = {\n                    \"notLoaded\": true\n                };\n            }\n            if (ready) {\n                properties = this._model.getServerProperties();\n                properties.isModified = this._model.isModified();\n                properties.url = window.location.href;\n            }\n\n            return properties;\n        },\n\n        /**\n         * Check if an attribute exist\n         *\n         * @param attributeId\n         * @return {boolean}\n         */\n        hasAttribute: function documentController_hasAttribute(attributeId)\n        {\n            this._checkInitialisedModel();\n            var attribute = this._model.get(\"attributes\").get(attributeId);\n            return !!attribute;\n        },\n\n        /**\n         * Get the attribute interface object\n         *\n         * @param attributeId\n         * @returns AttributeInterface\n         */\n        getAttribute: function documentControllerGetAttribute(attributeId)\n        {\n            this._checkInitialisedModel();\n            var attributeModel = this._getAttributeModel(attributeId);\n            if (!attributeModel) {\n                return undefined;\n            }\n            return new AttributeInterface(this._getAttributeModel(attributeId));\n        },\n\n        /**\n         * Get all the attributes of the current document\n         *\n         * @returns [AttributeInterface]\n         */\n        getAttributes: function documentControllerGetAttributes()\n        {\n            this._checkInitialisedModel();\n            return this._model.get(\"attributes\").map(function documentController_mapAttribute(currentAttribute)\n                {\n                    return new AttributeInterface(currentAttribute);\n                }\n            );\n        },\n\n        /**\n         * Check if a menu exist\n         *\n         * @param menuId\n         * @return {boolean}\n         */\n        hasMenu: function documentController_hasMenu(menuId)\n        {\n            this._checkInitialisedModel();\n            var menu = this._getMenuModel(menuId);\n            return !!menu;\n        },\n\n        /**\n         * Get the menu interface object\n         *\n         * @param menuId\n         * @returns MenuInterface\n         */\n        getMenu: function documentControllerGetMenu(menuId)\n        {\n            this._checkInitialisedModel();\n            var menu = this._getMenuModel(menuId);\n            if (!menu) {\n                return null;\n            }\n            return new MenuInterface(menu);\n        },\n\n        /**\n         * Get all the menu of the current document\n         *\n         * @returns [MenuInterface]\n         */\n        getMenus: function documentControllerGetMenus()\n        {\n            this._checkInitialisedModel();\n            return this._model.get(\"menus\").map(function documentController_mapMenu(currentMenu)\n                {\n                    return new MenuInterface(currentMenu);\n                }\n            );\n        },\n\n        /**\n         * Get an attribute value\n         *\n         * @param attributeId\n         * @param type string (current|previous|initial|all) what kind of value (default : current)\n         * @returns {*}\n         */\n        getValue: function documentControllerGetValue(attributeId, type)\n        {\n            var attribute;\n            this._checkInitialisedModel();\n            var attributeModel = this._getAttributeModel(attributeId);\n            if (!attributeModel) {\n                return null;\n            }\n            attribute = new AttributeInterface(attributeModel);\n            return attribute.getValue(type);\n        },\n\n        /**\n         * Get all the values\n         *\n         * @returns {*|{}}\n         */\n        getValues: function documentControllerGetValues()\n        {\n            this._checkInitialisedModel();\n            return this._model.getValues();\n        },\n\n        /**\n         * Get customData from render view model\n         * @returns {*}\n         */\n        getCustomServerData: function documentControllerGetServerCustomData()\n        {\n            this._checkInitialisedModel();\n            return this._model.get(\"customServerData\");\n        },\n        /**\n         * Add customData from render view model\n         * @returns {*}\n         */\n        addCustomClientData: function documentControllerAddCustomClientData(documentCheck, value)\n        {\n            var currentWidget = this;\n            this._checkInitialisedModel();\n            //First case no data, so documentCheck is data\n            if (_.isUndefined(value)) {\n                value = documentCheck;\n                documentCheck = {};\n            }\n            //Second case documentCheck is a function and data is object\n            if (_.isFunction(documentCheck) && _.isObject(value)) {\n                documentCheck = {\"documentCheck\": documentCheck};\n            }\n            //Third case documentCheck is an object and data is object => check if documentCheck property exist\n            if (_.isObject(value) && _.isObject(documentCheck)) {\n                documentCheck = _.defaults(documentCheck, {\n                    \"documentCheck\": function clientCustomOK()\n                    {\n                        return true;\n                    },\n                    once: true\n                });\n            } else {\n                throw new Error(\"Constraint must be an value or a function and a value\");\n            }\n            //Register the customClientData\n            _.each(value, function documentControllerAddCustomClientDataEach(currentValue, currentKey)\n            {\n                currentWidget._customClientData[currentKey] = {\n                    \"value\": currentValue,\n                    \"documentCheck\": documentCheck.documentCheck,\n                    \"once\": documentCheck.once\n                };\n            });\n        },\n        /**\n         * Get customData from render view model\n         * @returns {*}\n         */\n        setCustomClientData: function documentControllerSetCustomClientData(documentCheck, value)\n        {\n            console.error(\"this function (setCustomClientData) is deprecated\");\n            return this.addCustomClientData(documentCheck, value);\n        },\n        /**\n         * Get customData from render view model\n         * @returns {*}\n         */\n        getCustomClientData: function documentControllerSetCustomClientData(deleteOnce)\n        {\n            var values = {}, currentWidget = this, $element, properties, newCustomData = {};\n            this._checkInitialisedModel();\n            properties = this.getProperties();\n            $element = $(currentWidget.element);\n            _.each(currentWidget._customClientData, function analyzeCustomClient(currentCustom, key)\n            {\n                if (currentCustom.documentCheck.call($element, properties)) {\n                    values[key] = currentCustom.value;\n                    if (deleteOnce === true && !currentCustom.once) {\n                        newCustomData[key] = currentCustom;\n                    }\n                } else {\n                    if (deleteOnce === true) {\n                        newCustomData[key] = currentCustom;\n                    }\n                }\n            });\n            if (deleteOnce === true) {\n                currentWidget._customClientData = newCustomData;\n            }\n            return values;\n        },\n\n        /**\n         * Delete a custom data\n         * @returns {*}\n         */\n        removeCustomClientData: function documentControllerRemoveCustomClientData(key)\n        {\n            if (this._customClientData[key]) {\n                delete this._customClientData[key];\n            }\n            return this;\n        },\n        /**\n         * Set a value\n         * Trigger a change event\n         *\n         * @param attributeId string attribute identifier\n         * @param value object { \"value\" : *, \"displayValue\" : *}\n         * @returns {*}\n         */\n        setValue: function documentControllerSetValue(attributeId, value)\n        {\n            this._checkInitialisedModel();\n            var attributeModel = this._getAttributeModel(attributeId);\n            if (!attributeModel) {\n                throw new Error(\"Unable to find attribute \" + attributeId);\n            }\n            var attributeInterface = new AttributeInterface(attributeModel);\n            var index;\n            var currentValueLength;\n            var i;\n\n            if (attributeModel.getParent().get(\"type\") === \"array\") {\n                attributeInterface.setValue(value, true); // Just verify value conditions\n                if (!_.isArray(value)) {\n                    index = value.index;\n                } else {\n                    index = value.length - 1;\n                }\n                currentValueLength = attributeInterface.getValue().length;\n\n                // Add new necessary rows before set value\n                for (i = currentValueLength; i <= index; i++) {\n                    this.appendArrayRow(attributeModel.getParent(), {});\n                }\n\n            }\n            return attributeInterface.setValue(value);\n        },\n\n        /**\n         * Add a row to an array\n         *\n         * @param attributeId string attribute array\n         * @param values object { \"attributeId\" : { \"value\" : *, \"displayValue\" : * }, ...}\n         */\n        appendArrayRow: function documentControllerAddArrayRow(attributeId, values)\n        {\n            this._checkInitialisedModel();\n            var attribute = this._getAttributeModel(attributeId);\n\n            if (!attribute) {\n                throw new Error(\"Unable to find attribute \" + attributeId);\n            }\n\n            if (attribute.get(\"type\") !== \"array\") {\n                throw new Error(\"Attribute \" + attributeId + \" must be an attribute of type array\");\n            }\n            if (!_.isObject(values)) {\n                throw new Error(\"Values must be an object where each properties is an attribute of the array for \" + attributeId);\n            }\n            attribute.get(\"content\").each(function documentController_addACell(currentAttribute)\n            {\n                var newValue = values[currentAttribute.id];\n                var currentValue = currentAttribute.getValue();\n                if (_.isUndefined(newValue)) {\n                    // Set default value if no value defined\n                    currentAttribute.createIndexedValue(currentValue.length, false, ( _.isEmpty(values)));\n                } else {\n                    newValue = _.defaults(newValue, {value: \"\", displayValue: newValue.value});\n                    currentAttribute.addValue(newValue);\n                }\n            });\n        },\n\n        /**\n         * Add a row before another row\n         *\n         * @param attributeId string attribute array\n         * @param values object { \"attributeId\" : { \"value\" : *, \"displayValue\" : * }, ...}\n         * @param index int index of the row\n         */\n        insertBeforeArrayRow: function documentControllerInsertBeforeArrayRow(attributeId, values, index)\n        {\n            this._checkInitialisedModel();\n            var attribute = this._getAttributeModel(attributeId), maxValue;\n            if (!attribute) {\n                throw new Error(\"Unable to find attribute \" + attributeId);\n            }\n            if (attribute.get(\"type\") !== \"array\") {\n                throw new Error(\"Attribute \" + attributeId + \" must be an attribute of type array\");\n            }\n            if (!_.isObject(values)) {\n                throw new Error(\"Values must be an object where each properties is an attribute of the array for \" + attributeId);\n            }\n            maxValue = this._getMaxIndex(attribute);\n            if (index < 0 || index > maxValue) {\n                throw new Error(\"Index must be between 0 and \" + maxValue);\n            }\n            attribute.get(\"content\").each(function documentController_addACell(currentAttribute)\n            {\n                var currentValue = values[currentAttribute.id];\n                if (!_.isUndefined(currentValue)) {\n                    currentValue = _.defaults(currentValue, {value: \"\", displayValue: currentValue.value});\n                } else {\n                    currentValue = currentAttribute.attributes.defaultValue;\n                    if (!currentValue) {\n                        currentValue = {value: \"\", displayValue: \"\"};\n                    }\n                }\n                currentAttribute.addIndexedValue(currentValue, index);\n            });\n        },\n\n        /**\n         * Remove an array row\n         * @param attributeId string attribute array\n         * @param index int index of the row\n         */\n        removeArrayRow: function documentControllerRemoveArrayRow(attributeId, index)\n        {\n            this._checkInitialisedModel();\n            var attribute = this._getAttributeModel(attributeId), maxIndex;\n            if (!attribute) {\n                throw new Error(\"Unable to find attribute \" + attributeId);\n            }\n            if (attribute.get(\"type\") !== \"array\") {\n                throw Error(\"Attribute \" + attributeId + \" must be an attribute of type array\");\n            }\n            maxIndex = this._getMaxIndex(attribute) - 1;\n            if (index < 0 || index > maxIndex) {\n                throw Error(\"Index must be between 0 and \" + maxIndex + \" for \" + attributeId);\n            }\n            attribute.get(\"content\").each(function documentController_removeACell(currentAttribute)\n            {\n                currentAttribute.removeIndexValue(index);\n            });\n            attribute.removeIndexedLine(index);\n        },\n\n        /**\n         * Add a constraint to the widget\n         *\n         * @param options object { \"name\" : string, \"documentCheck\": function}\n         * @param callback function callback called when the event is triggered\n         * @returns {*}\n         */\n        addConstraint: function documentControlleraddConstraint(options, callback)\n        {\n            var currentConstraint, currentWidget = this, uniqueName;\n            if (_.isUndefined(callback) && _.isFunction(options)) {\n                callback = options;\n                options = {};\n            }\n            if (_.isObject(options) && _.isUndefined(callback)) {\n                if (!options.name) {\n                    throw new Error(\"When a constraint is initiated with a single object, this object needs to have the name property \".JSON.stringify(options));\n                }\n            } else {\n                _.defaults(options, {\n                    \"documentCheck\": function documentController_defaultDocumentCheck()\n                    {\n                        return true;\n                    },\n                    \"attributeCheck\": function documentController_defaultAttributeCheck()\n                    {\n                        return true;\n                    },\n                    \"constraintCheck\": callback,\n                    \"name\": _.uniqueId(\"constraint\"),\n                    \"externalConstraint\": false,\n                    \"once\": false\n                });\n            }\n            currentConstraint = options;\n            if (!_.isFunction(currentConstraint.constraintCheck)) {\n                throw new Error(\"An event need a callback\");\n            }\n            //If constraint is once : wrap it an callback that execute callback and delete it\n            if (currentConstraint.once === true) {\n                currentConstraint.eventCallback = _.wrap(currentConstraint.constraintCheck, function documentController_onceWrapper(callback)\n                {\n                    try {\n                        callback.apply(this, _.rest(arguments));\n                    } catch (e) {\n                        console.error(e);\n                    }\n                    currentWidget.removeConstraint(currentConstraint.name, currentConstraint.externalConstraint);\n                });\n            }\n            uniqueName = (currentConstraint.externalConstraint ? \"external_\" : \"internal_\") + currentConstraint.name;\n            this.options.constraintList[uniqueName] = currentConstraint;\n            this._initActivatedConstraint();\n            return currentConstraint.name;\n        },\n\n        /**\n         * List the constraint of the widget\n         *\n         * @returns {*}\n         */\n        listConstraints: function documentControllerListConstraint()\n        {\n            return this.options.constraintList;\n        },\n\n        /**\n         * Remove a constraint of the widget\n         *\n         * @param constraintName\n         * @param allKind\n         * @returns {*}\n         */\n        removeConstraint: function documentControllerRemoveConstraint(constraintName, allKind)\n        {\n            var removed = [], newConstraintList, constraintList,\n                testRegExp = new RegExp(\"\\\\\" + constraintName + \"$\");\n// jscs:disable disallowImplicitTypeConversion\n            allKind = !!allKind;\n// jscs:enable disallowImplicitTypeConversion\n            newConstraintList = _.filter(this.options.constraintList, function documentController_removeConstraint(currentConstrait)\n            {\n                if ((allKind || !currentConstrait.externalConstraint) && (currentConstrait.name === constraintName || testRegExp.test(currentConstrait.name))) {\n                    removed.push(currentConstrait);\n                    return false;\n                }\n                return true;\n            });\n            constraintList = {};\n            _.each(newConstraintList, function documentController_rebuildConstraintList(currentConstraint)\n            {\n                var uniqueName = (currentConstraint.externalConstraint ? \"external_\" : \"internal_\") + currentConstraint.name;\n                constraintList[uniqueName] = currentConstraint;\n            });\n            this.options.constraintList = constraintList;\n            this._initActivatedConstraint();\n            return removed;\n        },\n\n        /**\n         * Add an event to the widget\n         *\n         * @param eventType string kind of event\n         * @param options object { \"name\" : string, \"documentCheck\": function}\n         * @param callback function callback called when the event is triggered\n         * @returns {*|Window.options.name}\n         */\n        addEventListener: function documentControllerAddEvent(eventType, options, callback)\n        {\n            var currentEvent, currentWidget = this;\n            //options is not mandatory and the callback can be the second parameters\n            if (_.isUndefined(callback) && _.isFunction(options)) {\n                callback = options;\n                options = {};\n            }\n            // the first parameters can be the final object (chain removeEvent and addEvent)\n            if (_.isObject(eventType) && _.isUndefined(options) && _.isUndefined(callback)) {\n                currentEvent = eventType;\n                if (!currentEvent.name) {\n                    throw new Error(\"When an event is initiated with a single object, this object needs to have the name property \" + JSON.stringify(currentEvent));\n                }\n            } else {\n                currentEvent = _.defaults(options, {\n                    \"name\": _.uniqueId(\"event_\" + eventType),\n                    \"eventType\": eventType,\n                    \"eventCallback\": callback,\n                    \"externalEvent\": false,\n                    \"once\": false\n                });\n            }\n            // the eventType must be one the list\n            this._checkEventName(currentEvent.eventType);\n            // callback is mandatory and must be a function\n            if (!_.isFunction(currentEvent.eventCallback)) {\n                throw new Error(\"An event needs a callback that is a function\");\n            }\n            //If event is once : wrap it an callback that execute event and delete it\n            if (currentEvent.once === true) {\n                currentEvent.eventCallback = _.wrap(currentEvent.eventCallback, function documentController_onceWrapper(callback)\n                {\n                    currentWidget.removeEventListener(currentEvent.name, currentEvent.externalEvent);\n                    try {\n                        callback.apply(this, _.rest(arguments));\n                    } catch (e) {\n                        console.error(e);\n                    }\n                });\n            }\n            this._addAndInitNewEvents(currentEvent);\n            // return the name of the event\n            return currentEvent.name;\n        },\n\n        /**\n         * List of the events of the current widget\n         *\n         * @returns {*}\n         */\n        listEventListeners: function documentControllerListEvents()\n        {\n            return this.options.eventListener;\n        },\n\n        /**\n         * Remove an event of the current widget\n         *\n         * @param eventName string can be an event name or a namespace\n         * @param allKind remove internal/external events\n         * @returns {*}\n         */\n        removeEventListener: function documentControllerRemoveEvent(eventName, allKind)\n        {\n            var removed = [],\n                testRegExp = new RegExp(\"\\\\\" + eventName + \"$\"), newList, eventList;\n// jscs:disable\n            allKind = !!allKind;\n// jscs:enable\n            newList = _.filter(this.options.eventListener, function documentController_removeCurrentEvent(currentEvent)\n            {\n                if ((allKind || !currentEvent.externalEvent) && (currentEvent.name === eventName || testRegExp.test(currentEvent.name))) {\n                    removed.push(currentEvent);\n                    return false;\n                }\n                return true;\n            });\n            eventList = {};\n            _.each(newList, function documentController__rebuildEventList(currentEvent)\n            {\n                var uniqueName = (currentEvent.externalEvent ? \"external_\" : \"internal_\") + currentEvent.name;\n                eventList[uniqueName] = currentEvent;\n            });\n            this.options.eventListener = eventList;\n            this._initActivatedEventListeners({\"launchReady\": false});\n            return removed;\n        },\n\n        /**\n         * Trigger an event\n         *\n         * @param eventName\n         */\n        triggerEvent: function documentController_triggerEvent(eventName)\n        {\n            this._checkInitialisedModel();\n            this._checkEventName(eventName);\n            return this._triggerControllerEvent.apply(this, arguments);\n        },\n\n        /**\n         * Hide a visible attribute\n         *\n         * @param attributeId\n         */\n        hideAttribute: function documentControllerHideAttribute(attributeId)\n        {\n            this._checkInitialisedView();\n            var attributeModel = this._getAttributeModel(attributeId);\n            if (!attributeModel) {\n                console.log(\"Unable find and hide the attribute \" + attributeId);\n                return;\n            }\n            attributeModel.trigger(\"hide\");\n        },\n        /**\n         * show a visible attribute (previously hidden)\n         *\n         * @param attributeId\n         */\n        showAttribute: function documentControllerShowAttribute(attributeId)\n        {\n            this._checkInitialisedView();\n            var attributeModel = this._getAttributeModel(attributeId);\n            if (!attributeModel) {\n                console.log(\"Unable find and show the attribute \" + attributeId);\n                return;\n            }\n            attributeModel.trigger(\"show\");\n        },\n\n        /**\n         * Display a message to the user\n         *\n         * @param message\n         */\n        showMessage: function documentControllerShowMessage(message)\n        {\n            this._checkInitialisedView();\n            if (_.isString(message)) {\n                message = {\n                    type: \"info\",\n                    message: message\n                };\n            }\n            if (_.isObject(message)) {\n                message = _.defaults(message, {\n                    type: \"info\"\n                });\n            }\n            this.$notification.dcpNotification(\"show\", message.type, message);\n        },\n\n        /**\n         * Display loading bar\n         *\n         * @param message\n         * @param px\n         */\n        maskDocument: function documentController(message, px)\n        {\n            this.$loading.dcpLoading('show');\n            if (message) {\n                this.$loading.dcpLoading('setTitle', message);\n            }\n            if (px) {\n                this.$loading.dcpLoading('setPercent', px);\n            }\n        },\n\n        /**\n         * Hide loading bar\n         */\n        unmaskDocument: function documentController_unmaskDocument(force)\n        {\n            this.$loading.dcpLoading('hide', force);\n        },\n\n        /**\n         * Add an error message to an attribute\n         *\n         * @param attributeId\n         * @param message\n         * @param index\n         */\n        setAttributeErrorMessage: function documentControllersetAttributeErrorMessage(attributeId, message, index)\n        {\n            this._checkInitialisedView();\n            var attributeModel = this._getAttributeModel(attributeId);\n            if (!attributeModel) {\n                console.log(\"Unable find and show the attribute \" + attributeId);\n                return;\n            }\n            attributeModel.setErrorMessage(message, index);\n        },\n\n        /**\n         * Clean the error message of an attribute\n         *\n         * @param attributeId\n         * @param index\n         */\n        cleanAttributeErrorMessage: function documentControllercleanAttributeErrorMessage(attributeId, index)\n        {\n            this._checkInitialisedView();\n            var attributeModel = this._getAttributeModel(attributeId);\n            if (!attributeModel) {\n                console.log(\"Unable find and show the attribute \" + attributeId);\n                return;\n            }\n            attributeModel.setErrorMessage(null, index);\n        },\n\n        injectCSS: function documentController_injectCSS(cssToInject)\n        {\n            this._checkInitialisedView();\n            if (!_.isArray(cssToInject) && !_.isString(cssToInject)) {\n                throw new Error(\"The css to inject must be an array string or a string\");\n            }\n            if (_.isString(cssToInject)) {\n                cssToInject = [cssToInject];\n            }\n\n            this._model.injectCSS(cssToInject);\n        },\n\n        injectJS: function documentController_injectCSS(jsToInject)\n        {\n            this._checkInitialisedView();\n            if (!_.isArray(jsToInject) && !_.isString(jsToInject)) {\n                throw new Error(\"The js to inject must be an array string or a string\");\n            }\n            if (_.isString(jsToInject)) {\n                jsToInject = [jsToInject];\n            }\n\n            return this._model.injectJS(jsToInject);\n        }\n\n    });\n\n    return $.fn.documentController;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/documentController/documentController.js","define([\n    'jquery',\n    'underscore',\n    'mustache',\n    'dcpDocument/widgets/widget',\n    'dcpDocument/widgets/history/wRevisionDiff',\n    'dcpDocument/widgets/window/wDialog'\n], function require_whistory($, _, Mustache)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpDocumentHistory\", $.dcp.dcpDialog, {\n        options: {\n            documentId: 0,\n            window: {\n                modal: true,\n                title: \"Document history\"\n            },\n            labels: {\n                version: \"Version\",\n                revision: \"Rev\",\n                state: \"State\",\n                activity: \"Activity\",\n                owner: \"Owner\",\n                code: \"Code\",\n                date: \"Date\",\n                diff: \"Diff\",\n                level: \"Level\",\n                message: \"Message\",\n                pastRevision: \"\",\n                showDetail: \"Show details\",\n                hideDetail: \"Hide details\",\n                showNotice: \"Show notices\",\n                hideNotice: \"Hide notices\",\n                noOneNotice: \"No one notices\",\n                filterMessages: \"Filter messages\",\n                linkRevision: \"See revision number #\",\n                historyTitle: \"History for {{title}}\",\n                loading: \"Loading ...\",\n                revisionDiffLabels: {}\n            }\n        },\n        htmlCaneva: function dcpDocumentHistoryhtmlCaneva()\n        {\n            return '<table class=\"history-main\"><thead>' +\n                '<tr class=\"history-header\">' +\n                '<th class=\"history-header--date\"/>' +\n                '<th class=\"history-header--message\"/>' +\n                '<th class=\"history-header--owner\"/>' +\n                '<th class=\"history-header--version\"/>' +\n                '<th class=\"history-header--revision\"/>' +\n                '<th class=\"history-header--code\"/>' +\n                '<th class=\"history-header--level\"/>' +\n                '<th class=\"history-header--diff\"/>' +\n                '</tr>' +\n                '</thead></table>';\n        },\n\n        element: null,\n        _create: function dcpDocumentHistory_create()\n        {\n            var widget = this, $widget = $(this);\n\n            this.element.html(this.htmlCaneva());\n            require.ensure(['datatables'], function dcpDocumentWHistory_initTable()\n            {\n                require('datatables.net-bs4/css/dataTables.bootstrap4.css');\n                require('datatables');\n                widget._initDatatable();\n            }, \"ensureDatatables\");\n\n            this.element.data(\"dcpDocumentHistory\", this);\n\n            this._super();\n\n            this.element.on(\"click\" + this.eventNamespace, \".history-button-showdetail\", function whistoryShowDetail()\n            {\n                var noticeButton = widget.element.find(\".history-button-shownotice\");\n                var noticeShowed = noticeButton.data(\"showNotice\");\n                if ($widget.data(\"showDetail\")) {\n                    $widget.data(\"showDetail\", false);\n                    $widget.data(\"showNotice\", false);\n                    $(this).text(widget.options.labels.showDetail).removeClass(\"btn-primary\");\n                    widget.element.find(\".history-comment\").hide();\n\n                    noticeButton.attr(\"disabled\", \"disabled\").removeClass(\"btn-primary\").text(widget.options.labels.showNotice);\n                } else {\n                    $widget.data(\"showDetail\", true);\n                    widget.element.find(\".history-comment\").show();\n                    if (!noticeShowed) {\n                        widget.element.find(\".history-level--notice\").hide();\n                    }\n                    $(this).text(widget.options.labels.hideDetail).addClass(\"btn-primary\");\n                    noticeButton.removeAttr(\"disabled\");\n                }\n            });\n            this.element.on(\"click\" + this.eventNamespace, \".history-button-shownotice\", function whistoryShowNotice()\n            {\n                var $notices = widget.element.find(\".history-level--notice\");\n                if ($widget.data(\"showNotice\")) {\n                    $widget.data(\"showNotice\", false);\n                    $(this).text(widget.options.labels.showNotice).removeClass(\"btn-primary\");\n                    widget.element.find(\".history-level--notice\").hide();\n                } else {\n                    $widget.data(\"showNotice\", true);\n                    if ($notices.length > 0) {\n                        $notices.show();\n                        $(this).text(widget.options.labels.hideNotice).addClass(\"btn-primary\");\n                    } else {\n\n                        $(this).text(widget.options.labels.noOneNotice);\n                    }\n\n                }\n            });\n            this.element.on(\"click\" + this.eventNamespace, \".history-diff-input\", function whistoryShowDiff()\n            {\n                var selectedDiff = widget.element.find(\".history-diff-input:checked\");\n\n                if (selectedDiff.length === 2) {\n                    widget.element.find(\".history-diff-input:not(:checked)\").attr(\"disabled\", \"disabled\");\n                    var $diffTarget = $('<div class=\"revision-diff\"/>');\n                    var diffWidget = $diffTarget.dcpRevisionDiff({\n                        documentId: widget.options.documentId,\n                        firstRevision: $(selectedDiff.get(1)).data(\"revision\"),\n                        secondRevision: $(selectedDiff.get(0)).data(\"revision\"),\n                        window: {\n                            width: \"70%\",\n                            height: \"70%\",\n                            title: widget.options.labels.revisionDiffLabels.title\n                        },\n                        labels: widget.options.labels.revisionDiffLabels\n                    }).data(\"dcpRevisionDiff\");\n\n                    diffWidget.open();\n\n                } else\n                    if (selectedDiff.length < 2) {\n                        widget.element.find(\".history-diff-input\").removeAttr(\"disabled\", \"disabled\");\n                    }\n            });\n\n            this.element.on(\"click\" + this.eventNamespace, \"a[data-document-id]\", function whistoryShowDocument(event)\n            {\n                var docid = $widget.data(\"document-id\");\n                if (docid) {\n                    event.preventDefault();\n                    widget.element.trigger(\"viewRevision\", {\n                        initid: docid,\n                        revision: parseInt($widget.data(\"revision\"))\n                    });\n                }\n            });\n        },\n\n        _fillDataTable: function dcpDocumentHistory_fillDataTable(data)\n        {\n            var myData = [];\n\n            this.dialogWindow.setOptions({\n                title:Mustache.render(this.options.labels.historyTitle,data.data.history[0].properties)\n            });\n\n            _.each(data.data.history, function whistoryFillRevision(revisionInfo)\n            {\n                myData.push({\n                    \"version\": revisionInfo.properties.version,\n                    \"revision\": revisionInfo.properties.revision,\n                    \"code\": '',\n                    \"level\": 'revision',\n                    \"message\": revisionInfo.properties,\n                    \"owner\": revisionInfo.properties.owner.title,\n                    \"date\": revisionInfo.properties.revisionDate,\n                    \"diff\": 1,\n                    \"color\": revisionInfo.properties.state.color,\n                    \"DT_RowClass\": \"history-level--revision\"\n                });\n                _.each(revisionInfo.messages, function whistoryFillMessage(message)\n                {\n                    myData.push({\n                        \"version\": '',\n                        \"revision\": '',\n                        \"code\": message.code,\n                        \"level\": message.level,\n                        \"message\": message.comment,\n                        \"owner\": message.uname,\n                        \"date\": message.date,\n                        \"diff\": 0,\n                        \"DT_RowClass\": \"history-comment history-level--\" + message.level + (revisionInfo.properties.status === \"fixed\" ? \" history-comment--fixed\" : \"\")\n                    });\n                });\n            });\n\n            return myData;\n        },\n\n        _initDatatable: function dcpDocumentHistory_initDatatable()\n        {\n\n            var historyWidget = this;\n            this.element.find('.history-main').dataTable({\n                \"autoWidth\": false,\n                \"ordering\": false,\n                \"dom\": \"<'history-head'<'history-buttons'>f>rtip\",\n                \"paging\": false,\n                // \"scrollY\": \"200px\",\n                \"scrollCollapse\": false,\n                \"info\": false,\n                \"language\": {\n                    \"search\": \" \",\n                    \"loadingRecords\": this.options.labels.loading\n                },\n                \"columns\": [\n                    {\n                        data: \"date\",\n                        name: \"date\",\n                        title: historyWidget.options.labels.date,\n                        className: \"history-date\",\n                        \"render\": function whistoryRenderDate(data)\n                        {\n                            var theDate = new Date(data.substr(0, 10));\n                            // The time is not manage by date because each navigator defer with timezone\n                            return kendo.toString(theDate, \"D\") + ' ' + data.substr(11, 8);\n                        }\n                    },\n                    {\n                        data: \"message\",\n                        name: \"message\",\n                        title: historyWidget.options.labels.message,\n                        className: \"history-message\",\n                        render: function whistoryRenderMessage(data)\n                        {\n                            if (_.isObject(data)) {\n                                if (data.state.reference) {\n\n                                    return '<div class=\"history-state\"><span class=\"history-state-color\" style=\"background-color:' + data.state.color + '\" >&nbsp;</span>' + '<span class=\"history-state-label\">' +\n                                        (data.status === \"fixed\" ? data.state.stateLabel : data.state.activity) +\n                                        '</span></div>';\n                                }\n                                return $(\"<div/>\").text(data.title).html();\n                            } else {\n                                return $(\"<div/>\").text(data).html();\n                            }\n                        }\n                    },\n                    {\n                        data: \"owner\",\n                        name: \"owner\",\n                        title: historyWidget.options.labels.owner,\n                        className: \"history-owner\",\n                        render: function whistoryEncodeMessage(data) {\n                             return $(\"<div/>\").text(data).html();\n                        }\n                    },\n                    {\n                        data: \"version\",\n                        name: \"version\",\n                        title: historyWidget.options.labels.version,\n                        className: \"history-version\",\n                        visible: false,\n                        render: function whistoryEncodeMessage(data) {\n                            return $(\"<div/>\").text(data).html();\n                        }\n                    },\n                    {\n                        data: \"revision\",\n                        name: \"revision\",\n                        title: historyWidget.options.labels.revision,\n                        className: \"history-revision\",\n                        render: function whistoryRenderRevision(data)\n                        {\n                            if (data !== '') {\n                                return '<a class=\"history-revision-link btn btn-default\" href=\"api/v1/documents/' +\n                                    historyWidget.options.documentId +\n                                    '/revisions/' + data + '.html\"' +\n                                    'data-document-id=\"' + historyWidget.options.documentId + '\" ' +\n                                    'data-revision=\"' + data + '\"' +\n                                    '>' +\n                                    historyWidget.options.labels.linkRevision.replace('#', data) + '</a>';\n                            } else {\n                                return data;\n                            }\n                        }\n                    },\n                    {\n                        data: \"code\",\n                        name: \"code\",\n                        title: historyWidget.options.labels.code,\n                        className: \"history-code\",\n                        visible: false,\n                        render: function whistoryEncodeMessage(data) {\n                            return $(\"<div/>\").text(data).html();\n                        }\n                    },\n                    {\n                        data: \"level\",\n                        name: \"level\",\n                        title: historyWidget.options.labels.level,\n                        className: \"history-level\",\n                        visible: false,\n                        render: function whistoryEncodeMessage(data) {\n                            return $(\"<div/>\").text(data).html();\n                        }\n                    },\n                    {\n                        data: \"diff\",\n                        name: \"diff\",\n                        title: historyWidget.options.labels.diff,\n                        className: \"history-diff\",\n                        render: function whistoryRenderDiff(data, renderType, allData)\n                        {\n\n                            if (data === 1) {\n                                return '<input class=\"history-diff-input\" data-revision=\"' + allData.revision + '\" type=\"checkbox\"/>';\n                            } else {\n                                return '';\n                            }\n                        }\n                    }\n                ],\n\n                \"drawCallback\": function whistorydrawCallback()\n                {\n\n                    var noticeShowed = historyWidget.element.find(\".history-button-shownotice\").data(\"showNotice\");\n                    var detailShowed = historyWidget.element.find(\".history-button-showdetail\").data(\"showDetail\");\n\n                    if (detailShowed) {\n                        historyWidget.element.find(\".history-comment\").show();\n                        if (!noticeShowed) {\n                            historyWidget.element.find(\".history-level--notice\").hide();\n                        }\n                    } else {\n                        historyWidget.element.find(\".history-comment\").hide();\n\n                    }\n                },\n\n                \"initComplete\": function whistoryinitComplete()\n                {\n                    var api = this.api();\n                    var data = api.rows({page: 'current'}).data();\n                    // Output the data for the visible rows to the browser's console\n\n                    // show version if not null in one row\n                    var showVersion = false;\n                    var showState = false;\n                    var onlyOneRevision = true;\n                    for (var i = 0; i < data.length; i++) {\n                        if (data[i].version) {\n                            showVersion = true;\n                        }\n                        if (data[i].revision > 0) {\n                            onlyOneRevision = false;\n\n                        }\n                        if (data[i].message && data[i].message.state && data[i].message.state.reference) {\n                            showState = true;\n                        }\n                    }\n                    if (onlyOneRevision) {\n                        //api.column(\"revision:name\").visible(!onlyOneRevision);\n                        historyWidget.element.find(\".history-diff-input\").attr(\"disabled\", \"disabled\");\n                    }\n\n                    if (showVersion) {\n                        api.column(\"version:name\").visible(true);\n                    }\n                    if (showState) {\n                        // Change Label\n                        historyWidget.element.find(\".history-header--message\").html(historyWidget.options.labels.activity);\n                    }\n                    var fixedRevisionRow = historyWidget.element.find(\".history-level--revision\").get(1);\n                    if (fixedRevisionRow) {\n                        var trHead = historyWidget.element.find(\".history-header\").clone();\n                        $('<tr class=\"history-separator\"><td class=\"history-separator-cell\" colspan=\"' + $(trHead).find('th').length + '\"><span>' +\n                            historyWidget.options.labels.pastRevision +\n                            '</span>' +\n                            '</td></tr>').insertBefore(fixedRevisionRow);\n                        $(trHead).insertBefore(fixedRevisionRow);\n                        if (showState) {\n                            $($(\".history-header--message\").get(1)).html(historyWidget.options.labels.state);\n                        }\n                    }\n                    historyWidget.element.find(\".history-comment\").hide();\n                    historyWidget.element.find(\".odd\").removeClass(\"odd\");\n                    historyWidget.element.find(\".even\").removeClass(\"even\");\n                    historyWidget.element.find(\".dataTables_filter input\").addClass(\"form-control form-control-sm\");\n\n                    if (historyWidget.element.find('.history-button-shownotice').length === 0) {\n                        var $buttons=historyWidget.element.find(\".history-buttons\");\n\n                            $buttons.append($('<button class=\"history-button-showdetail btn btn-secondary btn-sm\" >' + historyWidget.options.labels.showDetail + '</button>'));\n                            $buttons.append($('<button disabled=\"disabled\" class=\"history-button-shownotice btn btn-outline-secondary btn-sm\" >' + historyWidget.options.labels.showNotice + '</button>'));\n\n\n                        historyWidget.element.find(\".dataTables_filter input\").attr(\"placeholder\", historyWidget.options.labels.filterMessages);\n                    }\n\n\n\n                },\n\n                \"ajax\": function whistory_getData(data, callback)\n                {\n\n                    $.getJSON(\"api/v1/documents/\" + historyWidget.options.documentId + '/history/').\n                    done(function whistory_getDataDone(response)\n                    {\n                        var tableData = historyWidget._fillDataTable(response);\n                        callback(\n                            {data: tableData}\n                        );\n                    }).fail(function whistory_getDataFail(response)\n                    {\n                        var result = JSON.parse(response.responseText);\n                        _.each(result.messages, function whistory_getDataParseMessage(error)\n                        {\n                            if (error.code === \"CRUD0219\" && error.uri) {\n                                // redirect with the good trash uri\n                                $.getJSON(error.uri.replace('.json', '') + '/history/').\n                                done(function whistory_getDataRedirect(response)\n                                {\n                                    var tableData = historyWidget._fillDataTable(response);\n                                    callback(\n                                        {data: tableData}\n                                    );\n                                }).fail(function whistory_getDataFail(response)\n                                {\n                                    var result = JSON.parse(response.responseText);\n                                    _.each(result.messages, function whistory_getDataFailParseMessage(error)\n                                    {\n                                        if (error.type === \"error\") {\n                                            $('body').trigger(\"notification\", {\n                                                type: error.type,\n                                                message: error.contentText\n                                            });\n                                        }\n                                    });\n                                    console.error(\"fail\", response);\n                                });\n                            } else\n                                if (error.type === \"error\") {\n                                    $('body').trigger(\"notification\", {\n                                        type: error.type,\n                                        message: error.contentText\n                                    });\n                                }\n                        });\n                        console.error(\"fail\", response);\n                    });\n                }\n            }).addClass('table table-condensed table-bordered table-hover');\n\n        },\n\n        _destroy: function dcpDocumentHistory_destroy()\n        {\n            var $history = this.element.find('.history-main');\n\n            if ($history.DataTable) {\n                $history.DataTable().destroy();\n            }\n            this._super();\n        }\n\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/history/wHistory.js","define([\n    'jquery',\n    'underscore',\n    'mustache',\n    'dcpDocument/widgets/widget',\n    'dcpDocument/widgets/window/wDialog'\n], function require_revisiondiff($, _, Mustache) {\n    'use strict';\n\n    $.widget(\"dcp.dcpRevisionDiff\",  $.dcp.dcpDialog, {\n        options :        {\n            documentId :     0,\n            firstRevision :  0,\n            secondRevision : 0,\n            window :         {\n                modal :     true,\n                animation : {\n                    open :     {\n                        effects :  \"fade:in\",\n                        duration : 1000\n                    }, close : {\n                        effects :  \"fade:out\",\n                        duration : 1000\n                    }\n                },\n                actions :   [\n                    \"Maximize\",\n                    \"Close\"\n                ],\n                visible :   false,\n                height :    \"300px\",\n                width :     \"500px\",\n                title :     \"Document difference\"\n            },\n            labels :         {\n                \"first\" :          \"First document\",\n                \"second\" :         \"Second document\",\n                \"attributeId\" :    \"Attribute id\",\n                \"attributeLabel\" : \"Attribute label\",\n                \"documentHeader\" : '\"{{title}}\"  (Revision : {{revision}}). <br/>Created on <em>{{revdate}}</em>',\n                \"filterMessages\" : \"Filter data\",\n                \"showOnlyDiff\" :   \"Show only differences\",\n                \"showAll\" :        \"Show all\"\n            }\n        },\n        firstDocument :  null,\n        secondDocument : null,\n\n        _create :        function dcpRevisionDiff__create() {\n            var currentWidget = this, $widget = $(this);\n\n            this.element.html(this.htmlCaneva());\n            require(['datatables'], function dcpDocumentWHistory_initTable()\n            {\n                require('datatables.net-bs4/css/dataTables.bootstrap4.css');\n                require('datatables');\n                currentWidget._initDatatable();\n            }, \"ensureDatatables\");\n\n            this.element.data(\"dcpRevisionDiff\", this);\n\n            this._super();\n\n            this.element.on(\"click\" + this.eventNamespace, \".revision-diff-button-showonlydiff\", function dcpRevisionDiff_showDiff() {\n                if ($widget.data(\"showOnlyDiff\")) {\n                    $widget.data(\"showOnlyDiff\", false);\n                    $(this).text(currentWidget.options.labels.showOnlyDiff).removeClass(\"btn-primary\");\n                    currentWidget.element.find(\".revision-diff-equal\").show();\n                } else {\n                    $widget.data(\"showOnlyDiff\", true);\n                    currentWidget.element.find(\".revision-diff-equal\").hide();\n                    $(this).text(currentWidget.options.labels.showAll).addClass(\"btn-primary\");\n                }\n            });\n\n        },\n\n\n\n        htmlCaneva :            function dcpRevisionDiff_htmlCaneva() {\n            return '<table class=\"revision-diff-main\"><thead>' +\n            '<tr class=\"revision-diff-header\">' +\n            '<th class=\"revision-diff-header--attribute-id\"/>' +\n            '<th class=\"revision-diff-header--attribute-label\"/>' +\n            '<th class=\"revision-diff-header--first\"/>' +\n            '<th class=\"revision-diff-header--second\"/>' +\n            '</tr>' +\n            '</thead></table>';\n        },\n        _initDatatable :        function dcpRevisionDiff__initDatatable() {\n\n            var revisionDiffWidget = this;\n            this.element.find('.revision-diff-main').dataTable({\n                \"autoWidth\" :      false,\n                \"ordering\" :       false,\n                \"paging\" :         false,\n                \"dom\": \"<'revision-head'<'revision-diff-buttons'>f>rtip\",\n                // \"scrollY\": \"200px\",\n                \"scrollCollapse\" : false,\n                \"info\" :           false,\n                \"language\" :       {\n                    \"search\" : \" \"\n                },\n                \"columns\" :        [\n                    {\n                        data :      \"attributeId\",\n                        name :      \"attributeId\",\n                        title :     revisionDiffWidget.options.labels.attributeId,\n                        className : \"revision-diff-attributeid\",\n                        visible :   false\n                    },\n                    {\n                        data :      \"attributeLabel\",\n                        name :      \"attributeLabel\",\n                        title :     revisionDiffWidget.options.labels.attributeLabel,\n                        className : \"revision-diff-attributelabel\"\n\n                    },\n                    {\n                        data :      \"first\",\n                        name :      \"first\",\n                        title :     revisionDiffWidget.options.labels.first,\n                        className : \"revision-diff-first\",\n                        render :    function dcpRevisionDiff_renderFirst(data) {\n                            if (_.isArray(data)) {\n                                return _.pluck(data, 'displayValue').join(', ');\n                            } else {\n                                return data.displayValue;\n                            }\n                        }\n                    },\n                    {\n                        data :      \"second\",\n                        name :      \"second\",\n                        title :     revisionDiffWidget.options.labels.second,\n                        className : \"revision-diff-second\",\n                        render :    function dcpRevisionDiff_renderSecond(data) {\n                            if (_.isArray(data)) {\n                                return _.pluck(data, 'displayValue').join(', ');\n                            } else {\n                                return data.displayValue;\n                            }\n                        }\n                    }\n                ],\n\n                \"initComplete\" : function dcpRevisionDiff_initComplete() {\n                    var api = this.api();\n                    // var data = api.rows({page: 'current'}).data();\n                    // Output the data for the visible rows to the browser's console\n                    $(api.columns('first:name').header()).html(revisionDiffWidget._getDocHeader(revisionDiffWidget.firstDocument));\n                    $(api.columns('second:name').header()).html(revisionDiffWidget._getDocHeader(revisionDiffWidget.secondDocument));\n                    revisionDiffWidget.element.find(\".dataTables_filter input\").attr(\"placeholder\", revisionDiffWidget.options.labels.filterMessages);\n\n                    revisionDiffWidget.element.find(\".dataTables_filter input\").addClass(\"form-control form-control-sm\");\n\n                    var firstHeadCell = revisionDiffWidget.element.find(\".revision-diff-buttons\");\n                    if (firstHeadCell.find('.revision-diff-button-showonlydiff').length === 0) {\n                        firstHeadCell.append($('<button class=\"revision-diff-button-showonlydiff btn btn-secondary btn-sm\" >' + revisionDiffWidget.options.labels.showOnlyDiff + '</button>'));\n                    }\n                },\n\n                \"ajax\" : function dcpRevisionDiff_getData(data, callback) {\n                    var myData = [];\n\n                    $.getJSON(\"api/v1/documents/\" + revisionDiffWidget.options.documentId +\n                    \"/revisions/\" + revisionDiffWidget.options.firstRevision +\n                    \".json?fields=family.structure,document.properties.revdate,document.properties.revision,document.attributes\").\n                        done(function dcpRevisionDiff_getDataDone(data1) {\n                            revisionDiffWidget.firstDocument = data1.data.revision;\n                            $.getJSON(\"api/v1/documents/\" + revisionDiffWidget.options.documentId +\n                            \"/revisions/\" + revisionDiffWidget.options.secondRevision +\n                            \".json?fields=document.properties.revdate,document.properties.revision,document.attributes\").\n                                done(function dcpRevisionDiff_getRevisionDone(data2) {\n                                    revisionDiffWidget.secondDocument = data2.data.revision;\n                                    _.each(data1.data.revision.attributes, function dcpRevisionDiff_analyzeAttribute(firstValue, index) {\n                                        var secondValue = data2.data.revision.attributes[index];\n                                        myData.push({\n                                            attributeId :    index,\n                                            attributeLabel : revisionDiffWidget._findAttributeLabel(data1.data.family.structure, index),\n                                            first :          firstValue,\n                                            second :         secondValue,\n                                            \"DT_RowClass\" :  (revisionDiffWidget.isEqualAttributeValue(firstValue, secondValue)) ? \"revision-diff-equal\" : \"revision-diff-not-equal\"\n                                        });\n\n                                    });\n                                    callback(\n                                        {data : myData}\n                                    );\n                                }).fail(function dcpRevisionDiff_getRevisionFail(xhr) {\n                                    var result = JSON.parse(xhr.responseText);\n                                    window.alert(result.exceptionMessage);\n                                });\n                        }).fail(function dcpRevisionDiff_getDataFail(xhr) {\n                            var result = JSON.parse(xhr.responseText);\n                            window.alert(result.exceptionMessage);\n                        });\n                }\n\n            }).addClass('table table-condensed table-bordered table-hover');\n\n        },\n\n        isEqualAttributeValue : function dcpRevisionDiff_isEqualAttributeValue(v1, v2) {\n            if (_.isEqual(v1, v2)) {\n                return true;\n            }\n\n            if (_.isArray(v1) && _.isArray(v2)) {\n                var values1 = _.pluck(v1, \"value\");\n                var values2 = _.pluck(v2, \"value\");\n                return _.isEqual(values1, values2);\n            }\n            return false;\n        },\n\n        _findAttributeLabel : function wRevisionDiffFindAttributeLabel(structure, aid) {\n            var scope = this;\n            var label = null;\n            _.some(structure, function dcpRevisionDiff_analyzeAttribute(attributInfo, attributId) {\n                if (attributId === aid) {\n                    label = attributInfo.label;\n                    return true;\n                }\n                if (_.isObject(attributInfo.content)) {\n                    var contentLabel = scope._findAttributeLabel(attributInfo.content, aid);\n\n                    if (contentLabel !== null) {\n                        label = contentLabel;\n                        return true;\n                    }\n                }\n                return false;\n\n            });\n            return label;\n        },\n\n        _getDocHeader : function wRevisionDiffGetDocHeader(documentStructure) {\n            var documentHeader = this.options.labels.documentHeader;\n            return Mustache.render(documentHeader || \"\", documentStructure.properties);\n        },\n\n        _destroy : function _destroy() {\n            var $history = this.element.find('.revision-diff-main');\n\n            if ($history.DataTable) {\n                $history.DataTable().destroy();\n            }\n            this._super();\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/history/wRevisionDiff.js","define([\n    \"jquery\",\n    'underscore',\n    'mustache',\n    'dcpDocument/i18n/documentCatalog',\n    'dcpDocument/widgets/widget'\n], function wMenu($, _, Mustache, i18n)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpMenu\", {\n\n        options: {\n            eventPrefix: \"dcpmenu\"\n        },\n\n        kendoMenuWidget: null,\n        _create: function wMenuCreate()\n        {\n            this._tooltips = [];\n            this.popupWindows = [];\n            this._initStructure();\n        },\n\n        _initStructure: function wMenuInitStructure()\n        {\n            var $content, $mainElement, scopeWidget = this;\n            //InitDom\n            $mainElement = $(Mustache.render(this._getTemplate(\"menu\") || \"\", _.extend({uuid: this.uuid}, this.options)));\n            $content = $mainElement.find(\".menu__content\");\n            this._insertMenuContent(this.options.menus, $content);\n            this.element.append($mainElement);\n            //Init kendo widget\n            $content.kendoMenu({\n                openOnClick: true,\n                closeOnClick: true,\n\n                select: function wMenuSelect(event)\n                {\n                    var $menuElement = $(event.item), eventContent, $elementA, href, configMenu, confirmText, confirmOptions,\n                        confirmDcpWindow, target, targetOptions, dcpWindow, $bodyDiv, wFeature = '';\n\n                    // Use specific select only for terminal items\n                    if (!$menuElement.hasClass(\"menu__element--item\")) {\n                        return;\n                    }\n                    $elementA = $(event.item).find('a');\n                    href = $elementA.data('url');\n                    //noinspection JSHint\n                    if (href != '') {\n                        //Display confirm message\n                        if ($elementA.hasClass(\"menu--confirm\")) {\n                            confirmText = Mustache.render($elementA.data('confirm-message') || \"\", scopeWidget.options);\n\n                            configMenu = $menuElement.data(\"menuConfiguration\");\n                            confirmOptions = configMenu.confirmationOptions || {};\n                            confirmDcpWindow = $('body').dcpConfirm({\n                                title: Mustache.render(confirmOptions.title || \"\", scopeWidget.options),\n                                width: confirmOptions.windowWidth,\n                                height: confirmOptions.windowHeight,\n                                messages: {\n                                    okMessage: Mustache.render(confirmOptions.confirmButton || \"\", scopeWidget.options),\n                                    cancelMessage: Mustache.render(confirmOptions.cancelButton || \"\", scopeWidget.options),\n                                    htmlMessage: confirmText,\n                                    textMessage: ''\n                                },\n                                confirm: function wMenuConfirm()\n                                {\n                                    $elementA.removeClass('menu--confirm');\n                                    $elementA.trigger(\"click\");\n                                    $elementA.addClass('menu--confirm');\n                                },\n                                templateData: scopeWidget.options\n                            });\n\n                            scopeWidget.popupWindows.push(confirmDcpWindow.data('dcpWindow'));\n\n                            confirmDcpWindow.data('dcpWindow').open();\n                        } else {\n                            scopeWidget.element.data(\"menu-opening\", false);\n                            //if href is event kind propagate event instead of default behaviour\n                            if (href.substring(0, 8) === \"#action/\") {\n                                event.preventDefault();\n                                if (event.stopPropagation) {\n                                    event.stopPropagation();\n                                }\n                                eventContent = href.substring(8).split(\":\");\n                                scopeWidget._trigger(\"externalLinkSelected\", event, {\n                                    target: event.target || event.item,\n                                    eventId: eventContent.shift(),\n                                    options: eventContent\n                                });\n                            } else {\n                                var $base = $(\"base\");\n                                var isAbsUrl = new RegExp('^(?:[a-z]+:)?//', 'i');\n\n                                target = $elementA.attr(\"target\") || '_self';\n\n                                if ($elementA.attr(\"href\") && $elementA.attr(\"href\").substring(0, 1) === \"#\") {\n                                    href = window.location.protocol +\n                                        \"//\" + window.location.hostname +\n                                        (window.location.port ? ':' + window.location.port: '') +\n                                        (window.location.pathname ? window.location.pathname : '/') +\n                                        (window.location.search ? window.location.search : '')\n                                        +$elementA.attr(\"href\");\n                                }\n\n                                if (target === \"_self\") {\n                                    // For IE : Not honor base href in this case\n\n                                    if (!isAbsUrl.test(href)) {\n                                        window.location.href = $base.attr(\"href\") + href;\n                                    } else {\n                                        window.location.href = href;\n                                    }\n                                } else {\n                                    configMenu = $menuElement.data(\"menuConfiguration\");\n                                    targetOptions = configMenu.targetOptions || {};\n                                    if (target === \"_dialog\") {\n                                        $bodyDiv = $('<div/>');\n                                        $('body').append($bodyDiv);\n                                        dcpWindow = $bodyDiv.dcpWindow({\n                                            title: Mustache.render(targetOptions.title || \"\", window.dcp.documentData),\n                                            width: targetOptions.windowWidth,\n                                            height: targetOptions.windowHeight,\n                                            modal: targetOptions.modal,\n                                            content: href,\n                                            iframe: true\n                                        });\n\n                                        scopeWidget.popupWindows.push(dcpWindow.data('dcpWindow'));\n                                        dcpWindow.data('dcpWindow').kendoWindow().center();\n                                        dcpWindow.data('dcpWindow').open();\n                                    } else {\n                                        if (targetOptions && (targetOptions.windowWidth || targetOptions.windowHeight)) {\n                                            if (targetOptions.windowWidth) {\n                                                wFeature += \"width=\" + parseInt(targetOptions.windowWidth, 10) + \",\";\n                                            }\n                                            if (targetOptions.windowHeight) {\n                                                wFeature += \"height=\" + parseInt(targetOptions.windowHeight, 10) + \",\";\n                                            }\n                                            wFeature += \"resizable=yes,scrollbars=yes\";\n                                        }\n                                        if (!isAbsUrl.test(href)) {\n                                            // For IE : Not honor base href in this case\n                                            href = $base.attr(\"href\") + href;\n                                        }\n                                        window.open(href, target, wFeature);\n                                    }\n                                }\n                            }\n                        }\n                    }\n                },\n                deactivate: function wMenuDeactivate(event)\n                {\n                    var $menuElement = $(event.item);\n\n                    // Use for reopen for Dynamic menu\n                    if ($menuElement.data(\"menu-openAgain\")) {\n                        $menuElement.data(\"menu-openAgain\", false);\n                        $menuElement.data(\"menu-noQuery\", true);\n                        $content.data(\"kendoMenu\").open($menuElement);\n                    }\n                },\n                open: function wMenuOpen(event)\n                {\n\n                    var $menuElement = $(event.item);\n\n                    // Due to iOs artefact, an resize event is send, so need to inhibated during opening menu\n                    scopeWidget.element.data(\"menu-opening\", true);\n                    $menuElement.data(\"bodyWidth\", $('body').width());\n\n                    if (!$menuElement.hasClass(\"menu__element--item\")) {\n                        var menuUrl = $menuElement.data(\"menu-url\");\n                        if (menuUrl) {\n                            // Open Dynamic menu : request server to get menu contents\n                            if (!$menuElement.data(\"menu-noQuery\")) {\n                                var loading = $menuElement.find(\".menu__loading\");\n\n                                if (loading.length > 0) {\n                                    // record initial loading item\n                                    $menuElement.data(\"menu-loading\", loading);\n                                }\n\n                                // Display loading first\n                                if (loading.length === 0 && $menuElement.data(\"menu-loading\")) {\n                                    $menuElement.find(\".listmenu__content\").html('').append($menuElement.data(\"menu-loading\"));\n                                }\n\n                                // Get subMenu\n                                $.get(menuUrl, function wMenuDone(response)\n                                {\n                                    var data=response.data;\n                                    $menuElement.find(\".listmenu__content\").html('');\n\n                                    scopeWidget._insertMenuContent(\n                                        data.content,\n                                        $menuElement.find(\".listmenu__content\"),\n                                        scopeWidget, $menuElement);\n                                    $menuElement.kendoMenu({\n                                        openOnClick: true,\n                                        closeOnClick: true\n                                    });\n\n                                    if (parseInt($menuElement.find(\".k-animation-container\").css(\"left\")) !== 0 &&\n                                        parseInt($menuElement.find(\".k-animation-container\").css(\"right\")) !== 0\n                                    ) {\n                                        // Need to close and reopen to adjust position menu because content has changed\n                                        $menuElement.data(\"menu-openAgain\", true);\n                                        $content.data(\"kendoMenu\").close($menuElement);\n                                    }\n\n                                }).fail(function wMenuFail(data)\n                                {\n                                    try {\n                                        var errorMessage = data.responseText;\n                                        $menuElement.find(\".listmenu__content\").html($('<div/>').text(errorMessage).addClass(\"menu--error\"));\n                                    } catch (e) {\n                                        if (window.dcp.logger) {\n                                            window.dcp.logger(e);\n                                        } else {\n                                            console.error(e);\n                                        }\n                                    }\n                                });\n                            }\n                            $menuElement.data(\"menu-noQuery\", false);\n                        }\n                    }\n                },\n                activate: function wMenuActivate(event)\n                {\n                    // Correct Kendo position list when scrollbar is displayed\n                    var $menuElement = $(event.item);\n                    var $container = $menuElement.find(\".k-animation-container\");\n\n                    var bodyWidth = $menuElement.data(\"bodyWidth\");\n                    var menuWidth = $menuElement.outerWidth();\n                    var menuLeft = $menuElement.offset().left;\n                    var listWidth = $container.outerWidth();\n                    var listLeft = $container.offset().left;\n\n                    // The first condition is for iOS because no scroll window exists\n                    if (($(\"body\").width() > bodyWidth  ) || (window.document.documentElement.scrollHeight > window.document.documentElement.clientHeight)) {\n\n                        // If the list menu is out of the body box, need to move it to the right\n                        if ((listLeft + listWidth) > bodyWidth) {\n                            $container.css(\"left\", \"auto\").css(\"right\", (menuLeft - bodyWidth + menuWidth  ) + \"px\");\n                        }\n\n                    }\n\n                    _.delay(function wMenuOpenDelay()\n                    {\n                        // Due to iOs artefact, an resize event is send, so need to inhibated during opening menu\n                        scopeWidget.element.data(\"menu-opening\", false);\n                    }, 2000);\n                }\n            });\n\n\n             this.element.find(\".menu--left\").last().addClass(\"menu--lastLeft\");\n            /**\n             * Fix menu when no see header\n             */\n            $(window).off(\"scroll.ddui\"); // reset\n\n            if (this.element.prop(\"nodeName\").toUpperCase() === \"NAV\") {\n                $(window).on(\"scroll.ddui\", function wMenuScroll()\n                {\n                    if ($(window).scrollTop() > $mainElement.position().top) {\n                        if (!$mainElement.data(\"isFixed\")) {\n                            $mainElement.data(\"isFixed\", \"1\");\n                            $mainElement.parent().addClass(\"menu--fixed\");\n                            $(window.document).trigger(\"redrawErrorMessages\");\n                        }\n                    } else {\n                        if ($mainElement.data(\"isFixed\")) {\n                            $mainElement.data(\"isFixed\", null);\n                            $mainElement.parent().removeClass(\"menu--fixed\");\n                            $(window.document).trigger(\"redrawErrorMessages\");\n                        }\n                    }\n                });\n            }\n            /**\n             * Responsive Menu\n             */\n            this.kendoMenuWidget = $content.data(\"kendoMenu\");\n            this.kendoMenuWidget.append([\n                {\n                    text: i18n.___(\"Other\", \"UImenu\") + '<span class=\"menu--count\" />',\n                    cssClass: \"menu__element  menu_element--hamburger \",\n                    encoded: false,   // Allows use of HTML for item text\n                    items: []         // List items\n                }]);\n            $(window).on(\"resize.dcpMenu\", _.bind(this.inhibitBarMenu, this));\n            $(window).on(\"resize.dcpMenu\", _.debounce(_.bind(this.updateResponsiveMenu, this), 100, false));\n        },\n\n        inhibitBarMenu: function wMenuInhibitBarMenu()\n        {\n            var widgetMenu = this;\n            if (!widgetMenu.element.data(\"menu-opening\") && this.element.css(\"overflow\") !== \"hidden\") {\n                this.element.find(\"li.k-state-border-down\").each(function wMenuInhibitBarMenuClose()\n                {\n                    widgetMenu.kendoMenuWidget.close($(this));\n                });\n            }\n        },\n\n        /**\n         * Get scrollbar width by adding a element\n         * @returns {number|*}\n         */\n        getScrollBarWidth: function wMenugetScrollBarWidth()\n        {\n            if (!this.scrollBarWidth) {\n                var inner = document.createElement('p');\n                inner.style.width = \"100%\";\n                inner.style.height = \"200px\";\n\n                var outer = document.createElement('div');\n                outer.style.position = \"absolute\";\n                outer.style.top = \"0px\";\n                outer.style.left = \"0px\";\n                outer.style.visibility = \"hidden\";\n                outer.style.width = \"200px\";\n                outer.style.height = \"150px\";\n                outer.style.overflow = \"hidden\";\n                outer.appendChild(inner);\n\n                document.body.appendChild(outer);\n                var w1 = inner.offsetWidth;\n                outer.style.overflow = 'scroll';\n                var w2 = inner.offsetWidth;\n                if (w1 === w2) {\n                    w2 = outer.clientWidth;\n                }\n\n                document.body.removeChild(outer);\n                this.scrollBarWidth = (w1 - w2);\n            }\n\n            return this.scrollBarWidth;\n        },\n\n        /**\n         * Move menu to hamburger which can be displayed in same line menu\n         */\n        updateResponsiveMenu: function wMenuHideResponsiveMenu()\n        {\n            var barMenu = this.element;\n            var $itemMenu = barMenu.find(\"ul.k-menu > .menu__element:not(.menu--important,.menu_element--hamburger)\");\n            var $importantItemMenu = barMenu.find(\"ul.k-menu > .menu__element.menu--important\");\n            var newHiddens = [];\n            var currentWidth = 0;\n            var visibleWidth = 0;\n            var freeWidth = 0;\n            var barmenuWidth = barMenu.width() - 2;\n            var kendoMenu = this.kendoMenuWidget;\n            var $hamburger = $(\".menu_element--hamburger\");\n            var hiddenItemsCount;\n            var visibleItemCount;\n            var $hiddenItems = $($hamburger.find(\"ul\").get(0)).find(\"> li.k-item\");\n            var hiddenLeft = $hiddenItems.length;\n\n            if (barMenu.data(\"menu-opening\")) {\n                // Cannot redraw menu while menu is open because kendo failure occurs in touch device\n                return;\n            }\n            this.inhibitBarMenu();\n            $importantItemMenu.each(function wMenuComputeBarmenuWidth()\n            {\n                barmenuWidth -= $(this).outerWidth();\n            });\n\n            barmenuWidth -= $hamburger.outerWidth();\n\n            // When no scrollbar need to add hypothetic scrollbar width because no event to refresh when scrollbar appear\n            if (window.document.documentElement.scrollHeight <= window.document.documentElement.clientHeight) {\n                barmenuWidth -= this.getScrollBarWidth(); // Supposed that scrollbar width is max 20px\n            }\n\n            visibleItemCount = $itemMenu.length;\n            // Detect free menu available width  and record menu items which not contains to bar menu\n            $itemMenu.each(function wMenuComputeWidth()\n            {\n                currentWidth += ($(this).outerWidth());\n                if (currentWidth > barmenuWidth) {\n                    $(this).data(\"original-width\", $(this).outerWidth());\n                    newHiddens.push(this);\n                } else {\n                    visibleWidth += $(this).outerWidth();\n                }\n                visibleItemCount--;\n\n            });\n\n            freeWidth = barmenuWidth - visibleWidth;\n\n            if (hiddenLeft === 0 && newHiddens.length === 1) {\n                // Special case for the last hidden may visible if hamburger is hide\n                if ($(newHiddens[0]).outerWidth() < (freeWidth + $hamburger.outerWidth())) {\n                    newHiddens = [];\n                }\n            }\n\n            // Move each new hidden menu to hamburger\n            _.each(newHiddens.reverse(), function wMenuItemToHamburger(item)\n            {\n                // Prepend new menu to hamburger\n                if ($hamburger.find(\"li.k-item\").length === 0) {\n                    kendoMenu.append($(item), $hamburger);\n                } else {\n                    kendoMenu.insertBefore($(item), $($hamburger.find(\"li.k-item\").get(0)));\n                }\n            });\n            // No new hidden menu so ...\n            if (newHiddens.length === 0) {\n                // May be show hidden menu\n                $hiddenItems = $($hamburger.find(\"ul\").get(0)).find(\"> li.k-item\");\n                hiddenLeft = $hiddenItems.length;\n                $hiddenItems.each(function wMenuItemFromHamburger()\n                {\n                    if (freeWidth > 0) {\n                        if (hiddenLeft === 1) {\n                            freeWidth += $hamburger.width();\n                        }\n                        currentWidth = $(this).data(\"original-width\");\n\n                        // If available width show move at initial place (right of the hamburger)\n                        if (currentWidth < freeWidth) {\n                            kendoMenu.insertBefore($(this), $hamburger);\n                            freeWidth -= $(this).outerWidth();\n                        } else {\n                            freeWidth = -1; // stop test\n                        }\n                    }\n                });\n            }\n\n            // Number of items in hamburger\n            hiddenItemsCount = $($hamburger.find(\"ul\").get(0)).find(\"> li.k-item\").length;\n\n            // No view hamburger if empty\n            if (hiddenItemsCount === 0) {\n                $hamburger.hide();\n            }\n\n            // See sub-menu count\n            // $hamburger.find(\".menu--count\").text(hiddenItemsCount);\n\n            // View hamburger if not empty\n            if (newHiddens.length > 0) {\n                $hamburger.show();\n            }\n\n            // Restore css set by other resize callback\n            barMenu.css(\"overflow\", \"\").css(\"max-height\", \"\");\n        },\n\n        _insertMenuContent: function wMenuInsertMenuContent(menus, $content, currentWidget, scopeMenu)\n        {\n            var subMenu;\n            var hasBeforeContent = false;\n            currentWidget = currentWidget || this;\n\n            if (scopeMenu) {\n                // Add fake before content if at least one element has before content to align all items\n                _.each(menus, function wMenuInsertMenuContentfake(currentMenu)\n                {\n                    if (currentMenu.iconUrl || currentMenu.beforeContent) {\n                        hasBeforeContent = true;\n                    }\n                });\n                if (hasBeforeContent) {\n                    _.each(menus, function wMenuInsertMenuContentBeforeContent(currentMenu)\n                    {\n                        if (!currentMenu.iconUrl && !currentMenu.beforeContent) {\n                            if (currentMenu.type !== \"separatorMenu\") {\n                                currentMenu.beforeContent = ' ';\n                            }\n                        }\n                    });\n                }\n            }\n\n            _.each(menus, function wMenuInsertMenuContentSet(currentMenu)\n            {\n                var $currentMenu;\n                if (currentMenu.visibility === \"hidden\") {\n                    return;\n                }\n                currentMenu.htmlAttr = [];\n                _.each(currentMenu.htmlAttributes, function wMenuInsertMenuContentSetHtml(attrValue, attrId)\n                {\n                    if (attrId === \"class\") {\n                        currentMenu.cssClass = attrValue;\n                    } else {\n                        currentMenu.htmlAttr.push({\"attrId\": attrId, \"attrValue\": attrValue});\n                    }\n                    if (currentMenu.htmlLabel) {\n                        // reRender for variable labels\n                        currentMenu.htmlLabel = Mustache.render(currentMenu.htmlLabel || \"\", {document: currentWidget.options.document});\n                    }\n                    if (currentMenu.label) {\n                        // reRender for variable labels\n                        currentMenu.label = Mustache.render(currentMenu.label || \"\", {document: currentWidget.options.document});\n                    }\n                    if (currentMenu.tooltipLabel) {\n                        // reRender for variable labels\n                        currentMenu.tooltipLabel = Mustache.render(currentMenu.tooltipLabel || \"\", {document: currentWidget.options.document});\n                    }\n                });\n\n                currentMenu.contentLabel = (currentMenu.htmlLabel || currentMenu.label);\n                currentMenu.disabled = (currentMenu.visibility === 'disabled');\n                if (currentMenu.type === \"listMenu\") {\n                    subMenu = \"listMenu\";\n\n                    $currentMenu = $(Mustache.render(currentWidget._getTemplate(subMenu) || \"\", currentMenu));\n                    currentWidget._insertMenuContent(currentMenu.content || \"\", $currentMenu.find(\".listmenu__content\"), currentWidget, currentMenu);\n                } else {\n                    if (currentMenu.type === \"dynamicMenu\") {\n                        subMenu = \"dynamicMenu\";\n                        if (currentMenu.url) {\n                            currentMenu.document = currentWidget.options.document;\n                            currentMenu.url = Mustache.render(currentMenu.url || \"\", currentMenu);\n                        }\n                        $currentMenu = $(Mustache.render(currentWidget._getTemplate(subMenu) || \"\", currentMenu));\n\n                    } else {\n                        currentMenu.document = currentWidget.options.document;\n                        if (currentMenu.url) {\n                            currentMenu.url = Mustache.render(currentMenu.url || \"\", currentMenu);\n                        }\n                        $currentMenu = $(Mustache.render(currentWidget._getTemplate(currentMenu.type) || \"\", currentMenu));\n\n                    }\n                }\n                if (currentMenu.tooltipLabel) {\n                    currentWidget._tooltips.push($currentMenu.tooltip(\n                        {\n                            trigger: \"hover\",\n                            html: currentMenu.tooltipHtml,\n                            placement: currentMenu.tooltipPlacement ? currentMenu.tooltipPlacement : \"bottom\",\n                            container: \".dcpDocument__menu\"\n                        }));\n                }\n                if (currentMenu.important) {\n                    $currentMenu.addClass(\"menu--important\");\n                }\n                $currentMenu.data(\"menuConfiguration\", currentMenu);\n                $content.append($currentMenu);\n            });\n        },\n\n        _getTemplate: function wMenuTemplate(name)\n        {\n            if (this.options.templates && this.options.templates.menu && this.options.templates.menu[name]) {\n                return this.options.templates.menu[name];\n            }\n            if (window.dcp.templates && window.dcp.templates.menu && window.dcp.templates.menu[name]) {\n                return window.dcp.templates.menu[name];\n            }\n            throw new Error(\"Menu unknown template \" + name);\n        },\n\n        _destroy: function wMenuDestroy()\n        {\n            var kendoWidget = this.element.find(\".menu__content\").data(\"kendoMenu\");\n            if (kendoWidget) {\n                kendoWidget.destroy();\n            }\n            $(window).off(\".dcpMenu\");\n            _.each(this.popupWindows, function wMenuDestroyPopup(pWindow)\n            {\n                pWindow.destroy();\n            });\n\n            _.each(this._tooltips, function wMenuDestroyTooltip(currentTooltip)\n            {\n                currentTooltip.tooltip(\"dispose\");\n            });\n            this.element.empty();\n            this._super();\n        }\n\n    });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/menu/wMenu.js","define([\n    'jquery',\n    'underscore',\n    'mustache',\n    'dcpDocument/widgets/widget',\n    'dcpDocument/widgets/window/wDialog'\n], function require_wProperties($, _, Mustache)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpDocumentProperties\", $.dcp.dcpDialog, {\n        options: {\n            documentId: 0,\n            window: {\n                modal: true,\n                title: \"Document properties\"\n            },\n            labels: {\n                identifier: \"Identifier\",\n                title: \"Title\",\n                logicalName: \"Logical name\",\n                revision: \"Revision number\",\n                version: \"Version\",\n                family: \"Family\",\n                lockedBy: \"Locked by\",\n                createdBy: \"Created by\",\n                notLocked: \"Not locked\",\n                confidential: \"Confidential\",\n                notConfidential: \"Not confidential\",\n                creationDate: \"Creation date\",\n                lastModificationDate: \"Last modification date\",\n                lastAccessDate: \"Last access date\",\n                profil: \"Profil\",\n                profilReference: \"Profil reference\",\n                viewController: \"View controller\",\n                propertiesTitle: \"Properties of {{title}}\",\n                property: \"Property\",\n                propertyValue: \"Value\",\n                workflow: \"Workflow\",\n                activity: \"Activity\"\n            }\n        },\n        documentProperties: null,\n        htmlCaneva: function wProperties_htmlCaneva()\n        {\n            return '<table class=\"properties-main table table-condensed table-hover\"><thead>' +\n                '<tr class=\"properties-header\">' +\n                '<th class=\"properties-header--description\">{{labels.property}}</th>' +\n                '<th class=\"properties-header--value\">{{labels.propertyValue}}</th>' +\n                '</tr></thead>' +\n                '<tbody>' +\n                '<tr><td class=\"properties-description\">{{labels.title}}</td><td class=\"properties-value\">{{title}}</td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.identifier}}</td><td class=\"properties-value\">{{initid}}</td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.logicalName}}</td><td class=\"properties-value\">{{name}}</td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.revision}}</td><td class=\"properties-value\">{{revision}}</td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.version}}</td><td class=\"properties-value\">{{version}}</td></tr>' +\n                '<tr><td class=\"properties-separator\" colspan=\"2\"></td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.workflow}}</td><td class=\"properties-value\"><a  data-document-id=\"{{workflow.id}}\" href=\"api/v1/documents/{{workflow.id}}.html\">{{#workflow.icon}}<img src=\"{{workflow.icon}}\"/>{{/workflow.icon}}{{workflow.title}}</a></td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.activity}}</td><td class=\"properties-value\">{{#state.reference}}<div class=\"properties-value-statecolor\" style=\"background-color:{{state.color}}\"/>{{state.displayValue}}{{/state.reference}}</td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.family}}</td><td class=\"properties-value\"><a data-document-id=\"{{family.id}}\" href=\"api/v1/documents/{{family.id}}.html\"><img src=\"{{family.icon}}\"/>{{family.title}}</a><br/><div class=\"properties-value--famname\">{{family.name}}</div></td></tr>' +\n                '<tr><td class=\"properties-separator\" colspan=\"2\"></td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.createdBy}}</td><td class=\"properties-value\"><a data-document-id=\"{{createdBy.id}}\" href=\"api/v1/documents/{{createdBy.id}}.html\"><img src=\"{{createdBy.icon}}\"/>{{createdBy.title}}</a></td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.lockedBy}}</td><td class=\"properties-value\">' +\n                '{{#security.lock.lockedBy.id}}' +\n                '<a data-document-id=\"{{security.lock.lockedBy.id}}\" href=\"api/v1/documents/{{security.lock.lockedBy.id}}.html\"><img src=\"{{security.lock.lockedBy.icon}}\"/>{{security.lock.lockedBy.title}}</a>' +\n                '{{/security.lock.lockedBy.id}}' +\n                '{{^security.lock.lockedBy.id}}{{labels.notLocked}}{{/security.lock.lockedBy.id}}' +\n                '</td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.confidential}}</td><td class=\"properties-value\">' +\n                '{{#confidential}}' +\n                '{{labels.confidential}}' +\n                '{{/confidential}}' +\n                '{{^confidential}}{{labels.notConfidential}}{{/confidential}}' +\n                '</td></tr>' +\n                '<tr><td class=\"properties-separator\" colspan=\"2\"></td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.creationDate}}</td><td class=\"properties-value\">{{#formatDate}}{{creationDate}}{{/formatDate}}</td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.lastModificationDate}}</td><td class=\"properties-value\">{{#formatDate}}{{lastModificationDate}}{{/formatDate}}</td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.lastAccessDate}}</td><td class=\"properties-value\">{{#formatDate}}{{lastAccessDate}}{{/formatDate}}</td></tr>' +\n                '<tr><td class=\"properties-separator\" colspan=\"2\"></td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.profil}}</td><td class=\"properties-value\"><a data-document-id=\"{{security.profil.id}}\" href=\"api/v1/documents/{{security.profil.id}}.html\">{{#security.profil.icon}}<img src=\"{{security.profil.icon}}\"/>{{/security.profil.icon}}{{security.profil.title}}</a></td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.profilReference}}</td><td class=\"properties-value\"><a data-document-id=\"{{security.profil.reference.id}}\" href=\"api/v1/documents/{{security.profil.reference.id}}.html\">{{#security.profil.reference.icon}}<img src=\"{{security.profil.reference.icon}}\"/>{{/security.profil.reference.icon}}{{security.profil.reference.title}}</a></td></tr>' +\n                '<tr><td class=\"properties-description\">{{labels.viewController}}</td><td class=\"properties-value\"><a data-document-id=\"{{viewController.id}}\" href=\"api/v1/documents/{{viewController.id}}.html\">{{#viewController.icon}}<img src=\"{{viewController.icon}}\"/>{{/viewController.icon}}{{viewController.title}}</a></td></tr>' +\n                '</tbody></table>';\n        },\n\n        _create: function wProperties__create()\n        {\n            var scope = this;\n\n            this._displayProperties();\n\n            this._super();\n\n            this.element.data(\"dcpDocumentProperties\", this);\n            this.element.on(\"click\" + this.eventNamespace, \"a[data-document-id]\", function wProperties_bindClick(event)\n            {\n                var docid = $(this).data(\"document-id\");\n                if (docid) {\n                    event.preventDefault();\n                    scope.element.trigger(\"viewDocument\", docid);\n                }\n            });\n\n        },\n\n        _displayProperties: function wPropertiesGetProperties()\n        {\n            var scope = this;\n            $.getJSON(\"api/v1/documents/\" + this.options.documentId +\n                \".json?fields=document.properties.all\").done(function wProperties_done(data)\n            {\n                var info;\n                scope.documentProperties = data.data.document.properties;\n                info = _.extend(scope.documentProperties, {labels: scope.options.labels});\n                info.formatDate = function wProperties_formatDate()\n                {\n                    return function wProperties_formatDate2(text, render)\n                    {\n                        return kendo.toString(new Date(render(text).replace(' ', 'T')), \"G\");\n                    };\n                };\n                scope.element.html(Mustache.render(scope.htmlCaneva() || \"\", info));\n                //scope.dialogWindow.center();\n\n                scope.dialogWindow.setOptions({\n                    title: Mustache.render(scope.options.labels.propertiesTitle, data.data.document.properties)\n                });\n\n            }).fail(function wProperties_fail(xhr)\n            {\n                var result = JSON.parse(xhr.responseText);\n                window.alert(result.exceptionMessage);\n            });\n        }\n\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/properties/wProperties.js","/*global define*/\n\n(function umdRequire(root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\"jquery\"], factory);\n    } else {\n        factory(window.jQuery);\n    }\n}(window, function documentCatalog(jQuery)\n{\n    \"use strict\";\n\n        var ErrorNoSuchMethod = function widget_ErrorNoSuchMethod(message)\n        {\n            this.name = 'noSuchMethodError';\n            this.message = message || 'No such method for current widget instance';\n        };\n\n        ErrorNoSuchMethod.prototype = Object.create(Error.prototype);\n        ErrorNoSuchMethod.prototype.constructor = ErrorNoSuchMethod;\n\n        (function widget_init($, undefined) {\n\n            var widgetUuid = 0,\n                slice = Array.prototype.slice,\n                _cleanData = $.cleanData;\n            $.cleanData = function widget_cleanData(elems) {\n                var events, elem=null, i;\n                for (i = 0, elem; (elem = elems[i]) != null; i++) { // jshint ignore:line\n                    try {\n                        // Only trigger remove when necessary to save time\n                        events = $._data( elem, \"events\" );\n                        if ( events && events.remove ) {\n                            $( elem ).triggerHandler( \"remove\" );\n                        }\n                    } catch (e) {\n                    }\n                }\n                _cleanData(elems);\n            };\n\n            $.widget = function widget_initWidget(name, Base, prototype) {\n                var fullName, existingConstructor, Constructor, basePrototype,\n                // proxiedPrototype allows the provided prototype to remain unmodified\n                // so that it can be used as a mixin for multiple widgets (#8876)\n                    proxiedPrototype = {},\n                    namespace = name.split(\".\")[ 0 ];\n\n                name = name.split(\".\")[ 1 ];\n                fullName = namespace + \"-\" + name;\n\n                if (!prototype) {\n                    prototype = Base;\n                    Base = $.Widget;\n                }\n\n                if ( $.isArray( prototype ) ) {\n                    prototype = $.extend.apply( null, [ {} ].concat( prototype ) );\n                }\n\n                // create selector for plugin\n                // $.expr[ \":\" ] is deprecated with jQuery 3.0.0+ in favor of $.expr.pseudos\n                // $.expr[ \":\" ][ fullName.toLowerCase() ] = function widget_createSelector(elem) {\n                //     return Boolean($(elem).data(fullName));\n                // };\n                $.expr.pseudos[ fullName.toLowerCase() ] = function widget_createSelector(elem) {\n                  return Boolean($(elem).data(fullName));\n                };\n\n                $[ namespace ] = $[ namespace ] || {};\n                existingConstructor = $[ namespace ][ name ];\n                Constructor = $[ namespace ][ name ] = function widget_Constructor(options, element) {\n                    // allow instantiation without \"new\" keyword\n                    if (!this._createWidget) {\n                        return new Constructor(options, element);\n                    }\n\n                    // allow instantiation without initializing for simple inheritance\n                    // must use \"new\" keyword (the code above always passes args)\n                    if (arguments.length) {\n                        this._createWidget(options, element);\n                    }\n                };\n                // extend with the existing constructor to carry over any static properties\n                $.extend(Constructor, existingConstructor, {\n                    version :            prototype.version,\n                    // copy the object used to create the prototype in case we need to\n                    // redefine the widget later\n                    _proto :             $.extend({}, prototype),\n                    // track widgets that inherit from this widget in case this widget is\n                    // redefined after a widget inherits from it\n                    _childConstructors : []\n                });\n\n                basePrototype = new Base();\n                // we need to make the options hash a property directly on the new instance\n                // otherwise we'll modify the options hash on the prototype that we're\n                // inheriting from\n                basePrototype.options = $.widget.extend({}, basePrototype.options);\n                $.each(prototype, function widget_proxiedElements(prop, value) {\n                    if (!$.isFunction(value)) {\n                        proxiedPrototype[ prop ] = value;\n                        return;\n                    }\n                    proxiedPrototype[ prop ] = (function widget_proxiedProperties() {\n                        var _super = function widget_super() {\n                                return Base.prototype[ prop ].apply(this, arguments);\n                            },\n                            _superApply = function widget_superApply(args) {\n                                return Base.prototype[ prop ].apply(this, args);\n                            };\n                        return function widget_proxied() {\n                            var __super = this._super,\n                                __superApply = this._superApply,\n                                returnValue;\n\n                            this._super = _super;\n                            this._superApply = _superApply;\n\n                            returnValue = value.apply(this, arguments);\n\n                            this._super = __super;\n                            this._superApply = __superApply;\n\n                            return returnValue;\n                        };\n                    })();\n                });\n                Constructor.prototype = $.widget.extend(basePrototype, {\n                }, proxiedPrototype, {\n                    constructor :    Constructor,\n                    namespace :      namespace,\n                    widgetName :     name,\n                    widgetFullName : fullName\n                });\n\n                // If this widget is being redefined then we need to find all widgets that\n                // are inheriting from it and redefine all of them so that they inherit from\n                // the new version of this widget. We're essentially trying to replace one\n                // level in the prototype chain.\n                if (existingConstructor) {\n                    $.each(existingConstructor._childConstructors, function widget_existingConstructor(i, child) {\n                        var childPrototype = child.prototype;\n\n                        // redefine the child widget using the same prototype that was\n                        // originally used, but inherit from the new version of the base\n                        $.widget(childPrototype.namespace + \".\" + childPrototype.widgetName, Constructor, child._proto);\n                    });\n                    // remove the list of existing child constructors from the old constructor\n                    // so the old child constructors can be garbage collected\n                    delete existingConstructor._childConstructors;\n                } else {\n                    Base._childConstructors.push(Constructor);\n                }\n\n                $.widget.bridge(name, Constructor);\n\n                return Constructor;\n            };\n\n            $.widget.extend = function widget_extend(target) {\n                var input = slice.call(arguments, 1),\n                    inputIndex = 0,\n                    inputLength = input.length,\n                    key,\n                    value;\n                for (; inputIndex < inputLength; inputIndex++) {\n                    for (key in input[ inputIndex ]) {  // jshint ignore:line\n                        //noinspection JSUnfilteredForInLoop\n                        value = input[ inputIndex ][ key ];\n                        if (input[ inputIndex ].hasOwnProperty(key) && value !== undefined) {\n                            // Clone objects\n                            if ($.isPlainObject(value)) {\n                                target[ key ] = $.isPlainObject(target[ key ]) ?\n                                    $.widget.extend({}, target[ key ], value) :\n                                    // Don't extend strings, arrays, etc. with objects\n                                    $.widget.extend({}, value);\n                                // Copy everything else by reference\n                            } else {\n                                target[ key ] = value;\n                            }\n                        }\n                    }\n                }\n                return target;\n            };\n\n            $.widget.bridge = function widget_bridge(name, Object) {\n                var fullName = Object.prototype.widgetFullName || name;\n                $.fn[ name ] = function widget_callElement(options) {\n                    var isMethodCall = typeof options === \"string\",\n                        args = slice.call(arguments, 1),\n                        returnValue = this;\n\n                    // allow multiple hashes to be passed on init\n                    options = !isMethodCall && args.length ?\n                        $.widget.extend.apply(null, [ options ].concat(args)) :\n                        options;\n\n                    if (isMethodCall) {\n                        this.each(function widget_eachMethodCall() {\n                            var methodValue,\n                                instance = $(this).data( fullName);\n                            if ( options === \"instance\" ) {\n                                returnValue = instance;\n                                return false;\n                            }\n                            if (!instance) {\n                                return $.error(\"cannot call methods on \" + name + \" prior to initialization; \" +\n                                    \"attempted to call method '\" + options + \"'\");\n                            }\n                            if (!$.isFunction(instance[options]) || options.charAt(0) === \"_\") {\n                                throw new ErrorNoSuchMethod(\"no such method '\" + options + \"' for \" + name + \" widget instance\");\n                            }\n                            methodValue = instance[ options ].apply(instance, args);\n                            if (methodValue !== instance && methodValue !== undefined) {\n                                returnValue = methodValue && methodValue.jquery ?\n                                    returnValue.pushStack(methodValue.get()) :\n                                    methodValue;\n                                return false;\n                            }\n                        });\n                    } else {\n\n                        // Allow multiple hashes to be passed on init\n                        if ( args.length ) {\n                            options = $.widget.extend.apply( null, [ options ].concat( args ) );\n                        }\n\n                        this.each(function widget_eachDataCall() {\n                            var instance = $(this).data(fullName);\n                            if (instance) {\n                                instance.option(options || {})._init();\n                            } else {\n                                $(this).data(fullName, new Object(options, this));\n                            }\n                        });\n                    }\n\n                    return returnValue;\n                };\n            };\n\n            $.Widget = function widget_Widget(/* options, element */) {\n            };\n            $.Widget._childConstructors = [];\n\n            $.Widget.prototype = {\n                widgetName :          \"widget\",\n                defaultElement :      \"<div>\",\n                options :             {\n                    classes: {},\n                    disabled :    false,\n                    eventPrefix : null,\n                    // callbacks\n                    create :      null\n                },\n                _createWidget :       function widget_createWidget(options, element) {\n                    element = $(element || this.defaultElement || this)[ 0 ];\n                    this.element = $(element);\n                    this.uuid = widgetUuid++;\n                    this.eventNamespace = \".\" + this.widgetName + this.uuid;\n                    this.options = $.widget.extend({},\n                        this.options,\n                        this._getCreateOptions(),\n                        options);\n\n                    this.bindings = $();\n                    this.classesElementLookup = {};\n                    if (this.options.eventPrefix === null) {\n                        this.options.eventPrefix = this.widgetName;\n                    }\n\n                    if (element !== this) {\n                        $(element).data(this.widgetFullName, this);\n                        this._on(true, this.element, {\n                            remove : function widget_remove(event) {\n                                if (event.target === element) {\n                                    this.destroy();\n                                }\n                            }\n                        });\n                        this.document = $(element.style ?\n                            // element within the document\n                            element.ownerDocument :\n                            // element is window or document\n                        element.document || element);\n                        this.window = $(this.document[0].defaultView || this.document[0].parentWindow);\n                    }\n                    this.options = $.widget.extend( {},\n                        this.options,\n                        this._getCreateOptions(),\n                        options );\n\n                    this._create();\n\n                    if ( this.options.disabled ) {\n                        this._setOptionDisabled( this.options.disabled );\n                    }\n\n                    this._trigger(\"create\", null, this._getCreateEventData());\n                    this._init();\n                },\n                _getCreateOptions: function widget_getCreateOptions() {\n                    return {};\n                },\n                _getCreateEventData : $.noop,\n                _create :             $.noop,\n                _init :               $.noop,\n\n                destroy :  function widget_destroy() {\n                    var that = this;\n\n                    this._destroy();\n                    $.each( this.classesElementLookup, function widget_destroyClass( key, value ) {\n                        that._removeClass( value, key );\n                    } );\n\n                    // We can probably remove the unbind calls in 2.0\n                    // all event bindings should go through this._on()\n                    this.element\n                        .off( this.eventNamespace )\n                        .removeData( this.widgetFullName );\n                    this.widget()\n                        .off( this.eventNamespace )\n                        .removeAttr( \"aria-disabled\" );\n\n                    // Clean up events and states\n                    this.bindings.off( this.eventNamespace );\n                },\n                _destroy : $.noop,\n\n                widget : function widget_widget() {\n                    return this.element;\n                },\n\n                option :      function widget_option(key, value) {\n                    var options = key,\n                        parts,\n                        curOption,\n                        i;\n\n                    if (arguments.length === 0) {\n                        // don't return a reference to the internal hash\n                        return $.widget.extend({}, this.options);\n                    }\n\n                    if (typeof key === \"string\") {\n                        // handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\n                        options = {};\n                        parts = key.split(\".\");\n                        key = parts.shift();\n                        if (parts.length) {\n                            curOption = options[ key ] = $.widget.extend({}, this.options[ key ]);\n                            for (i = 0; i < parts.length - 1; i++) {\n                                curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\n                                curOption = curOption[ parts[ i ] ];\n                            }\n                            key = parts.pop();\n                            if (arguments.length === 1) {\n                                return curOption[ key ] === undefined ? null : curOption[ key ];\n                            }\n                            curOption[ key ] = value;\n                        } else {\n                            if (arguments.length === 1) {\n                                return this.options[ key ] === undefined ? null : this.options[ key ];\n                            }\n                            options[ key ] = value;\n                        }\n                    }\n\n                    this._setOptions(options);\n\n                    return this;\n                },\n                _setOptions : function widget__setOptions(options) {\n                    var key;\n\n                    for (key in options) { // jshint ignore:line\n                        //noinspection JSUnfilteredForInLoop\n                        this._setOption(key, options[ key ]);\n                    }\n\n                    return this;\n                },\n                _setOption :  function widget__setOption(key, value) {\n                    this.options[ key ] = value;\n\n                    return this;\n                },\n\n                _setOptionClasses: function widget__setOptionClasses( value ) {\n                    var classKey, elements, currentElements;\n\n                    for ( classKey in value ) { // jshint ignore:line\n                        //noinspection JSUnfilteredForInLoop\n                        currentElements = this.classesElementLookup[ classKey ];\n                        //noinspection JSUnfilteredForInLoop\n                        if ( value[ classKey ] === this.options.classes[ classKey ] ||\n                            !currentElements ||\n                            !currentElements.length ) {\n                            continue;\n                        }\n\n                        // We are doing this to create a new jQuery object because the _removeClass() call\n                        // on the next line is going to destroy the reference to the current elements being\n                        // tracked. We need to save a copy of this collection so that we can add the new classes\n                        // below.\n                        elements = $( currentElements.get() );\n                        //noinspection JSUnfilteredForInLoop\n                        this._removeClass( currentElements, classKey );\n\n                        // We don't use _addClass() here, because that uses this.options.classes\n                        // for generating the string of classes. We want to use the value passed in from\n                        // _setOption(), this is the new value of the classes option which was passed to\n                        // _setOption(). We pass this value directly to _classes().\n                        //noinspection JSUnfilteredForInLoop\n                        elements.addClass( this._classes( {\n                            element: elements,\n                            keys: classKey,\n                            classes: value,\n                            add: true\n                        } ) );\n                    }\n                },\n\n                _classes: function widget__classes( options ) {\n                    var full = [];\n                    var that = this, processClassString;\n\n                    options = $.extend( {\n                        element: this.element,\n                        classes: this.options.classes || {}\n                    }, options );\n\n                    processClassString = function widget_processClassString( classes, checkOption ) {\n                        var current, i;\n                        for ( i = 0; i < classes.length; i++ ) {\n                            current = that.classesElementLookup[ classes[ i ] ] || $();\n                            if ( options.add ) {\n                                // unique is deprecated in jQuery 3.0.0+ renamed to uniqueSort\n                                var jqueryVersion = +$().jquery.split('.')[0];\n                                if (jqueryVersion >= 3) {\n                                  current = $( $.uniqueSort( current.get().concat( options.element.get() ) ) );\n                                } else {\n                                  current = $( $.unique( current.get().concat( options.element.get() ) ) );\n                                }\n                            } else {\n                                current = $( current.not( options.element ).get() );\n                            }\n                            that.classesElementLookup[ classes[ i ] ] = current;\n                            full.push( classes[ i ] );\n                            if ( checkOption && options.classes[ classes[ i ] ] ) {\n                                full.push( options.classes[ classes[ i ] ] );\n                            }\n                        }\n                    };\n\n                    if ( options.keys ) {\n                        processClassString( options.keys.match( /\\S+/g ) || [], true );\n                    }\n                    if ( options.extra ) {\n                        processClassString( options.extra.match( /\\S+/g ) || [] );\n                    }\n\n                    return full.join( \" \" );\n                },\n\n                _removeClass: function widget__removeClass( element, keys, extra ) {\n                    return this._toggleClass( element, keys, extra, false );\n                },\n\n                _addClass: function widget__addClass( element, keys, extra ) {\n                    return this._toggleClass( element, keys, extra, true );\n                },\n\n                _toggleClass: function widget__toggleClass( element, keys, extra, add ) {\n                    add = ( typeof add === \"boolean\" ) ? add : extra;\n                    var shift = ( typeof element === \"string\" || element === null ),\n                        options = {\n                            extra: shift ? keys : extra,\n                            keys: shift ? element : keys,\n                            element: shift ? this.element : element,\n                            add: add\n                        };\n                    options.element.toggleClass( this._classes( options ), add );\n                    return this;\n                },\n\n                _on : function widget__on(suppressDisabledCheck, element, handlers) {\n                    var delegateElement,\n                        instance = this;\n\n                    // no suppressDisabledCheck flag, shuffle arguments\n                    if (typeof suppressDisabledCheck !== \"boolean\") {\n                        handlers = element;\n                        element = suppressDisabledCheck;\n                        //suppressDisabledCheck = false;\n                    }\n\n                    // no element argument, shuffle and use this.element\n                    if (!handlers) {\n                        handlers = element;\n                        element = this.element;\n                        delegateElement = this.widget();\n                    } else {\n                        // accept selectors, DOM elements\n                        element = delegateElement = $(element);\n                        this.bindings = this.bindings.add(element);\n                    }\n\n                    $.each(handlers, function widget_iterateHandler(event, handler) {\n                        var handlerProxy = function handlerProxy() {\n                            // allow widgets to customize the disabled handling\n                            // - disabled as an array instead of boolean\n                            // - disabled class as method for disabling individual parts\n                            return ( typeof handler === \"string\" ? instance[ handler ] : handler )\n                                .apply(instance, arguments);\n                        };\n\n                        // copy the guid so direct unbinding works\n                        if (typeof handler !== \"string\") {\n                            handlerProxy.guid = handler.guid =\n                                handler.guid || handlerProxy.guid || $.guid++;\n                        }\n\n                        var match = event.match(/^(\\w+)\\s*(.*)$/),\n                            eventName = match[1] + instance.eventNamespace,\n                            selector = match[2];\n                        // delegate is deprecated in jQuery 3.0.0+ in favor of on method\n                        var jqueryVersion = +$().jquery.split('.')[0];\n                        if (selector) {\n                            if (jqueryVersion >= 3) {\n                              delegateElement.on(eventName, selector, handlerProxy);\n                            } else {\n                              delegateElement.delegate(selector, eventName, handlerProxy);\n                            }\n                        } else {\n                          // bind is deprecated in jQuery 3.0.0+ in favor of on method\n                          if (jqueryVersion >= 3) {\n                            element.on(eventName, handlerProxy);\n                          } else {\n                            element.bind(eventName, handlerProxy);\n                          }\n                        }\n                    });\n                },\n\n                _off : function widget__off(element, eventName) {\n                    eventName = (eventName || \"\").split(\" \").join(this.eventNamespace + \" \") + this.eventNamespace;\n                    element.unbind(eventName).undelegate(eventName);\n                },\n\n                _delay : function widget__delay(handler, delay) {\n                    var handlerProxy = function handlerProxy() {\n                        return ( typeof handler === \"string\" ? instance[ handler ] : handler )\n                            .apply(instance, arguments);\n                    };\n\n                    var instance = this;\n                    return setTimeout(handlerProxy, delay || 0);\n                },\n\n                _trigger : function widget__trigger(type, event, data) {\n                    var prop, orig,\n                        callback = this.options[ type ];\n\n                    data = data || {};\n                    event = $.Event(event);\n                    event.type = this.options.eventPrefix ? this.options.eventPrefix + type : type;\n                    event.type = event.type.toLocaleLowerCase();\n                    // the original event may come from any element\n                    // so we need to reset the target on the new event\n                    event.target = this.element[ 0 ];\n\n                    // copy original event properties over to the new event\n                    orig = event.originalEvent;\n                    if (orig) {\n                        for (prop in orig) {// jshint ignore:line\n                            if (!( prop in event )) {\n                                //noinspection JSUnfilteredForInLoop\n                                event[ prop ] = orig[ prop ];\n                            }\n                        }\n                    }\n\n                    this.element.trigger(event, data);\n                    return !( $.isFunction(callback) &&\n                    callback.apply(this.element[0], [ event ].concat(data)) === false ||\n                    event.isDefaultPrevented() );\n                }\n            };\n\n        })(jQuery);\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/widget.js","define([\n    'jquery',\n    'underscore',\n    'mustache',\n    'dcpDocument/widgets/window/wWindow'\n], function wConfirm($, _, Mustache) {\n    'use strict';\n\n    $.widget(\"dcp.dcpConfirm\", $.dcp.dcpWindow, {\n\n        options: {\n            modal: true,\n            templateData: {\n                templates: {\n                    window: {\n                        confirm:'<div class=\"confirm--body\"> <div class=\"confirm--content\">  <div>{{messages.textMessage}}</div><div>{{{messages.htmlMessage}}}</div> </div> <div class=\"confirm--buttons\"> <button class=\"button--cancel\" type=\"button\">{{messages.cancelMessage}}</button> <button class=\"button--ok k-primary\" type=\"button\">{{messages.okMessage}}</button> </div> </div>'\n                    }\n                }\n            },\n            messages: {\n                textMessage: 'Are you sure ?',\n                htmlMessage: '',\n                okMessage: \"Ok\",\n                cancelMessage: \"Cancel\"\n            },\n            cancel: function wConfirmCancel() {\n            },\n\n            confirm: function wConfirmConfirm() {\n\n            },\n            actions: [\n                \"Close\"\n            ],\n            height: \"150px\"\n\n        },\n\n        _create: function wConfirmCreate() {\n            var scope = this;\n            var scoppedCancel = _.bind(this.options.cancel, this);\n            this.options.close = scoppedCancel;\n            this.options.templateData.messages = this.options.messages || [];\n            this.currentWidget = $(Mustache.render(this._getWindowTemplate('confirm') || \"\", this.options.templateData));\n            this.element.append(this.currentWidget);\n            this.currentWidget.kendoWindow(this.options);\n            this.currentWidget.data(\"kendoWindow\").center();\n\n            this.currentWidget.find('.button--cancel').kendoButton({\n                click: function wConfirmCancelClick() {\n                    scoppedCancel();\n                    scope.destroy();\n                }\n            });\n\n            var scoppedConfirm = _.bind(this.options.confirm, this);\n\n            this.currentWidget.find('.button--ok').kendoButton({\n                click: function wConfirmOkClick() {\n                    scoppedConfirm();\n                    scope.destroy();\n                }\n            });\n\n            this.element.data(\"dcpWindow\", this);\n        }\n\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/window/wConfirm.js","define([\n    'jquery',\n    'underscore',\n    'dcpDocument/widgets/widget'\n], function wDialog($, _)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpDialog\", {\n        options: {\n            window: {\n                modal: true,\n                actions: [\n                    \"Maximize\",\n                    \"Close\"\n                ],\n                visible: false,\n                height: \"300px\",\n                width: \"500px\",\n                title: \"-\"\n            },\n            maximizeWidth:768 // Limit in px to open with maximize\n        },\n\n        dialogWindow: null,\n\n        _create: function dcpDialog_create()\n        {\n            var currentWidget = this;\n            this.element.data(\"dcpDialog\", this);\n            if (!this.options.window.close) {\n                this.options.window.close = function dcpDialog_onclose()\n                {\n                    _.defer(_.bind(currentWidget.destroy, currentWidget));\n                };\n            } else {\n                this.options.window.close = _.wrap(this.options.window.close, function dcpDialog_closeWrap(close, argument)\n                {\n                    var event = arguments[1];\n                    close.apply(this, _.rest(arguments));\n                    if (!event.isDefaultPrevented()) {\n                        _.defer(_.bind(currentWidget.destroy, currentWidget));\n                    }\n                });\n            }\n\n\n            if ($(window).width() <= this.options.maximizeWidth) {\n                this.options.window.width=\"auto\";\n                this.options.window.heigth=\"auto\";\n            }\n            this.dialogWindow = this.element.kendoWindow(this.options.window).data(\"kendoWindow\");\n        },\n\n        open: function dcpDialog_Open()\n        {\n            var kWindow = this.dialogWindow;\n            if ($(window).width() <= this.options.maximizeWidth) {\n                kWindow.setOptions({\n                    actions: [\"Close\"],\n                    animation:false\n                });\n\n                kWindow.open();\n                _.delay(function wDialogMaximize() {\n                    kWindow.maximize(); // Need to defer to wait window to be really opened\n                },100);\n            } else {\n                kWindow.setOptions({\n                    actions: this.options.window.actions\n                });\n                kWindow.center();\n                kWindow.open();\n            }\n        },\n\n        close: function dcpDialog_close()\n        {\n            var kendoWindow = this.dialogWindow;\n            if (kendoWindow) {\n                kendoWindow.close();\n            }\n        },\n\n        _destroy: function dcpDialog_destroy()\n        {\n            if (this.element && this.dialogWindow && this.element.data(\"kendoWindow\")) {\n                this.dialogWindow.destroy();\n                this.dialogWindow = null;\n            } else {\n                this._super();\n            }\n        }\n\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/window/wDialog.js","define([\n    'jquery',\n    'underscore',\n    'dcpDocument/widgets/widget'\n], function ($, _)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpLoading\", {\n        pc: 0,\n        rest: 0,\n        restItem: 0,\n        currentWidget: null,\n        doneItems: 0,\n        original: null,\n\n\n        _create: function dcpLoading_create()\n        {\n            this.stack = 0;\n            this.initBar = this.element.find(\".progress\");\n            this.$title = this.element.find(\".dcpLoading--title\");\n            this.$header = this.element.find(\".dcpLoading--header\");\n\n        },\n\n        reset: function dcpLoadingReset()\n        {\n            this.initBar.show();\n        },\n\n        setTitle: function dcpLoadingsetTitle(val)\n        {\n            this.element.find('.dcpLoading--title').html(val);\n        },\n\n        isDisplayed : function dcpLoadingIsDisplayed() {\n            return this.stack > 0;\n        },\n\n        hide: function dcpLoadinghide(force)\n        {\n            this.stack -= 1;\n            if (!force && this.stack > 0) {\n                return this;\n            }\n            this.stack = 0;\n            this.element.hide();\n            this.element.removeClass(\"dcpLoading--hide\");\n            this.setPercent(0);\n        },\n\n        show: function dcpLoadingshow(text, pc)\n        {\n            this.stack += 1;\n            if (text) {\n                this.setLabel(text);\n            }\n            if (pc) {\n                this.setPercent(pc);\n            }\n            this.element.show();\n            this.$header.show().removeClass(\"dcpLoading--hide\");\n        },\n\n        setLabel: function dcpLoadingsetLabel(text)\n        {\n            if (text) {\n                this.$title.text(text);\n            } else {\n                this.$header.addClass(\"dcpLoading--hide\");\n            }\n        },\n\n        setPercent: function dcpLoadingsetPercent(pc)\n        {\n            var $initbar = this.initBar.find(\".progress-bar\");\n            var rpc = Math.round(pc);\n            this.pc = pc;\n            if (window && window.requestAnimationFrame) {\n                window.requestAnimationFrame(function ()\n                {\n                    $initbar.css(\"width\", rpc + '%');\n                });\n            }\n        },\n\n        setNbItem: function dcpLoadingSetNbItem(restItem)\n        {\n            this.rest = 100 - this.pc;\n            this.restItem = restItem;\n        },\n\n        addItem: function dcpLoadingAddItem(number)\n        {\n            number = number || 1;\n            number = parseInt(number, 10);\n            this.doneItems += number;\n            var pv = (this.rest / this.restItem) * number;\n            this.setPercent(this.pc + pv);\n        },\n\n        _destroy: function dcpLoading_destroy()\n        {\n            this._trigger(\"destroy\");\n            this._super();\n        }\n\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/window/wLoading.js","define([\n    'jquery',\n    'underscore',\n    'dcpDocument/widgets/widget'\n], function wNotification($, _)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpNotification\", {\n\n        options: {\n            // animation:false,\n            autoHideAfter: 5000,\n            appendTo: \"#dcpNotificationContainer\",\n            position: {\n                top: 60, // override by notification.less\n                right: 100\n            },\n            templates: [\n                {\n                    type: \"error\",\n                    template: '<div class=\"dcpNotification--content dcpNotification--error\">' +\n                    '<span class=\"dcpNotification--symbol fa-stack fa-lg\"><span class=\"fa fa-bolt\"></span></span>' +\n                    '<div class=\"dcpNotification--message\"><h1>#: title #</h1>' +\n                    '<p>#: message #</p><p> #= htmlMessage #</p></div></div>'\n                },\n                {\n                    type: \"warning\",\n                    template: '<div class=\"dcpNotification--content dcpNotification--warning\">' +\n                    '<span class=\"dcpNotification--symbol fa-stack fa-lg\"><span class=\"fa fa-warning fa-inverse\"></span></span>' +\n                    '<div class=\"dcpNotification--message\"><h1>#: title #</h1>' +\n                    '<p>#: message #</p><p> #= htmlMessage #</p></div></div>'\n                },\n                {\n                    type: \"info\",\n                    template: '<div class=\"dcpNotification--content dcpNotification--info\">' +\n                    '<span class=\"dcpNotification--symbol fa-stack fa-lg\"><span class=\"fa fa-info fa-inverse fa-flip-horizontal\"></span></span>' +\n                    '<div class=\"dcpNotification--message\"><h1>#: title #</h1>' +\n                    '<p>#: message #</p><p> #= htmlMessage #</p></div></div>'\n                },\n                {\n                    type: \"notice\",\n                    template: '<div class=\"dcpNotification--content dcpNotification--notice\">' +\n                    '<span class=\"dcpNotification--symbol fa-stack fa-lg\"><span class=\"fa fa-info fa-inverse fa-flip-horizontal\"></span></span>' +\n                    '<div class=\"dcpNotification--message\"><h1>#: title #</h1>' +\n                    '<p>#: message #</p><p> #= htmlMessage #</p></div></div>'\n                },\n                {\n                    type: \"success\",\n                    template: '<div class=\"dcpNotification--content dcpNotification--info\">' +\n                    '<span class=\"dcpNotification--symbol fa-stack fa-lg\"><span class=\"fa fa-check fa-inverse\"></span></span>' +\n                    '<div class=\"dcpNotification--message\"><h1>#: title #</h1>' +\n                    '<p>#: message #</p><p> #= htmlMessage #</p></div></div>'\n                }\n            ],\n\n            labels: {\n                moreButton: \"View more ...\",\n                moreWindowTitle:\"Notification\"\n            }\n        },\n        notificationElement: null,\n\n        _create: function wNotificationCreate()\n        {\n            var scope = this;\n            this.notificationElement = $('<div class=\"dcpNotification--widget\" />');\n\n            this.element.append($('<div id=\"dcpNotificationContainer\" class=\"dcpNotifications\"/>'));\n            this.element.append(this.notificationElement);\n\n            this.options.show = _.bind(this.showMore, this);\n            this.notificationElement.kendoNotification(this.options);\n\n            this.element.on(\"notification\", function wNotificationOn(event, data)\n            {\n                scope.show(data.type, data);\n            });\n        },\n\n        showMore: function wNotificationShowMessage(event)\n        {\n            var $boxMessage = event.element;\n            var $message = $boxMessage.find(\".dcpNotification--message\");\n            var $more;\n            var widgetNotification = this;\n\n            if ($message.prop(\"scrollHeight\") > $message.height()) {\n                $more = $('<div class=\"dcpNotification--more\"/>').text(this.options.labels.moreButton);\n                $boxMessage.append($more);\n                $more.on(\"click\", function wNotificationClickMode(event)\n                {\n                    var $clone = $boxMessage.clone();\n                    var cloneWindow;\n\n                    if (widgetNotification.cloneWindow) {\n                        widgetNotification.cloneWindow.destroy();\n                        widgetNotification.cloneWindow = null;\n                    }\n                    $boxMessage.append($clone);\n                    $clone.find(\".dcpNotification--more\").remove();\n                    $clone.find(\".dcpNotification--message\").prepend($clone.find(\".dcpNotification--symbol\"));\n                    event.stopPropagation();\n                    cloneWindow = $clone.kendoWindow({\n                        title:widgetNotification.options.labels.moreWindowTitle,\n                        width: \"400px\"\n                    }).data(\"kendoWindow\");\n                    cloneWindow.center();\n                    widgetNotification.cloneWindow = cloneWindow;\n                });\n            }\n        },\n\n        show: function wNotificationShow(type, options)\n        {\n            options.title = options.title || '';\n            options.message = options.message || '';\n            options.htmlMessage = options.htmlMessage || '';\n            if ($.inArray(type, [\"error\", \"info\", \"warning\", \"success\", \"notice\"]) === -1) {\n                type = \"info\";\n            }\n            this.notificationElement.data(\"kendoNotification\").show({\n                title: options.title,\n                message: options.message,\n                htmlMessage: options.htmlMessage // @TODO NEED TO CLEAN HTML TO PREVENT XSS\n            }, type);\n        },\n\n        showError: function wNotificationShowError(options)\n        {\n            this.show(\"error\", options);\n        },\n\n        showInfo: function wNotificationShowInfo(options)\n        {\n            this.show(\"info\", options);\n        },\n\n        showWarning: function wNotificationShowWarning(options)\n        {\n            this.show(\"warning\", options);\n        },\n\n        showSuccess: function wNotificationShowSuccess(options)\n        {\n            this.show(\"success\", options);\n        },\n\n        clear: function wNotificationClear()\n        {\n            this.notificationElement.kendoNotification(\"hide\");\n            if (this.cloneWindow) {\n                this.cloneWindow.destroy();\n                this.cloneWindow = null;\n            }\n        }\n\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/window/wNotification.js","define([\n    'underscore',\n    'jquery',\n    'dcpDocument/widgets/widget'\n], function wWindow(_, $)\n{\n    'use strict';\n\n    $.widget(\"dcp.dcpWindow\", {\n        intervalId: 0,\n        options: {\n            animation: {\n                open: {\n                    effects: \"fade:in\",\n                    duration: 1000\n                }, close: {\n                    effects: \"fade:out\",\n                    duration: 1000\n                }\n            },\n            actions: [\n                \"Maximize\",\n                \"Close\"\n            ],\n            visible: false,\n            height: \"300px\",\n            width: \"400px\",\n            /**\n             * Try to add iframe title if no title is set\n             */\n            open: function wWindowOpen()\n            {\n                if (!this.options.title) {\n                    try {\n                        var kendoWindow = this;\n                        var iframeTitle = this.element.find('iframe').contents().find(\"title\").html();\n                        if (typeof iframeTitle === \"undefined\") {\n                            _.defer(function wWindowOpenSetTitle()\n                            {\n                                var currentTitle = \"\";\n                                var $content = kendoWindow.element.find('iframe').contents();\n                                kendoWindow.element.find('iframe').on(\"load\", function wWindowOpenSetTitleNow()\n                                {\n                                    try {\n                                        var $scopeWindow = $(this);\n                                        var $content = $scopeWindow.contents();\n\n                                        kendoWindow.setOptions({\n                                            title: currentTitle\n                                        });\n                                        $content.find(\"body\").addClass(\"window-dialog\");\n\n                                    } catch (exp) {\n                                    }\n                                });\n\n                                // Verify if need to change title every seconds\n                                kendoWindow.intervalId = window.setInterval(function wWindowOpenSetTitleIsChanged()\n                                {\n                                    try {\n                                        $content = kendoWindow.element.find('iframe').contents();\n                                        var newTitle = $content.find(\"title\").html();\n                                        var currentIcon = $content.find('link[rel=\"shortcut icon\"]').attr(\"href\");\n\n                                        if (newTitle) {\n                                            $content.find(\"body\").addClass(\"window-dialog\");\n                                            if (currentIcon) {\n                                                newTitle = '<img src=\"' + currentIcon + '\" /> ' + newTitle;\n                                            }\n                                            if (newTitle !== currentTitle) {\n                                                currentTitle = newTitle;\n                                                $(kendoWindow.element).closest(\".k-window\").find(\".k-window-title\").html(newTitle);\n                                            }\n                                        }\n                                    } catch (exp) {\n                                    }\n                                }, 1000);\n                            });\n                        } else {\n                            kendoWindow.setOptions({\n                                title: $(this).contents().find(\"title\").html()\n                            });\n                        }\n                    } catch (exp) {\n                    }\n                }\n            },\n            close: function wWindowClose()\n            {\n                window.clearInterval(this.intervalId);\n            },\n            destroy: function wWindowDestroy()\n            {\n                window.clearInterval(this.intervalId);\n            }\n        },\n\n        currentWidget: null,\n        _create: function wWindowCreate()\n        {\n            this.currentWidget = $('<div class=\"dialog-window\"/>');\n            this.element.append(this.currentWidget);\n            this.element.data(\"dcpWindow\", this);\n\n            this.currentWidget.kendoWindow(this.options);\n        },\n\n        _getWindowTemplate: function wWindowCreate_getWindowTemplate(templateId)\n        {\n            if (this.options.templateData && this.options.templateData.templates &&\n                this.options.templateData.templates.window && this.options.templateData.templates.window[templateId]) {\n                return this.options.templateData.templates.window[templateId];\n            }\n            if (window.dcp && window.dcp.templates && window.dcp.templates.window && window.dcp.templates.window[templateId]) {\n                return window.dcp.templates.window[templateId];\n            }\n            throw new Error(\"Unknown window template  \" + templateId);\n        },\n        destroy: function wWindowDestroy()\n        {\n            window.clearInterval(this.intervalId);\n            if (this.currentWidget && this.currentWidget.data(\"kendoWindow\")) {\n                this.currentWidget.data(\"kendoWindow\").destroy();\n            }\n            this._super();\n        },\n        open: function wWindowopen()\n        {\n            this.currentWidget.data(\"kendoWindow\").open();\n        },\n        close: function wWindowClose()\n        {\n            window.clearInterval(this.intervalId);\n            this.currentWidget.data(\"kendoWindow\").close();\n        },\n        kendoWindow: function wWindowkendoWindow()\n        {\n            return this.currentWidget.data(\"kendoWindow\");\n        }\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./src/Apps/DOCUMENT/IHM/widgets/window/wWindow.js","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = external \"jQuery\"\n// module chunks = mainSmartElement","module.exports = kendo;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"kendo\"\n// module id = external \"kendo\"\n// module chunks = mainSmartElement"],"sourceRoot":""}