/*! v1.0.0-1098-g48daa27 */
!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i=window.webpackJsonp;window.webpackJsonp=function(e,n,r){for(var s,a,l=0,d=[];l<e.length;l++)a=e[l],o[a]&&d.push(o[a][0]),o[a]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);for(i&&i(e,n,r);d.length;)d.shift()()};var n={},o={mainSmartElement:0};e.e=function(t){function i(){a.onerror=a.onload=null,clearTimeout(l);var e=o[t];0!==e&&(e&&e[1](new Error("Loading chunk "+t+" failed.")),o[t]=void 0)}var n=o[t];if(0===n)return new Promise(function(t){t()});if(n)return n[2];var r=new Promise(function(e,i){n=o[t]=[e,i]});n[2]=r;var s=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.timeout=12e4,e.nc&&a.setAttribute("nonce",e.nc),a.src=e.p+""+t+"-"+{documentCkEditor:"92e100782ee1426052a7",ensureDatatables:"7077f57112db8b21358b",wCreateDocument:"437b2dcf17ae14632ec8",wDocument:"1b9b1060dec606e7b8a1"}[t]+".js";var l=setTimeout(i,12e4);return a.onerror=a.onload=i,s.appendChild(a),r},e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="uiAssets/anakeen/prod/",e.oe=function(t){throw console.error(t),t},e(e.s="97640554fbb3ff20724f")}({"05951c2f2bda4691bed3":function(t,e,i){"use strict";(function(t){function i(t){return t&&"[object Function]"==={}.toString.call(t)}function n(t,e){if(1!==t.nodeType)return[];var i=window.getComputedStyle(t,null);return e?i[e]:i}function o(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function r(t){if(!t||-1!==["HTML","BODY","#document"].indexOf(t.nodeName))return window.document.body;var e=n(t),i=e.overflow,s=e.overflowX,a=e.overflowY;return/(auto|scroll)/.test(i+a+s)?t:r(o(t))}function s(t){var e=t&&t.offsetParent,i=e&&e.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TD","TABLE"].indexOf(e.nodeName)&&"static"===n(e,"position")?s(e):e:window.document.documentElement}function a(t){return null!==t.parentNode?a(t.parentNode):t}function l(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return window.document.documentElement;var i=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,n=i?t:e,o=i?e:t,r=document.createRange();r.setStart(n,0),r.setEnd(o,0);var d=r.commonAncestorContainer;if(t!==d&&e!==d||n.contains(o))return function(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||s(t.firstElementChild)===t)}(d)?d:s(d);var c=a(t);return c.host?l(c.host,e):l(t,a(e).host)}function d(t){var e="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",i=t.nodeName;if("BODY"===i||"HTML"===i){var n=window.document.documentElement;return(window.document.scrollingElement||n)[e]}return t[e]}function c(t,e){var i="x"===e?"Left":"Top",n="Left"===i?"Right":"Bottom";return+t["border"+i+"Width"].split("px")[0]+ +t["border"+n+"Width"].split("px")[0]}function u(t,e,i,n){return Math.max(e["offset"+t],e["scroll"+t],i["client"+t],i["offset"+t],i["scroll"+t],j()?i["offset"+t]+n["margin"+("Height"===t?"Top":"Left")]+n["margin"+("Height"===t?"Bottom":"Right")]:0)}function p(){var t=window.document.body,e=window.document.documentElement,i=j()&&window.getComputedStyle(e);return{height:u("Height",t,e,i),width:u("Width",t,e,i)}}function h(t){return q({},t,{right:t.left+t.width,bottom:t.top+t.height})}function f(t){var e={};if(j())try{e=t.getBoundingClientRect();var i=d(t,"top"),o=d(t,"left");e.top+=i,e.left+=o,e.bottom+=i,e.right+=o}catch(t){}else e=t.getBoundingClientRect();var r={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},s="HTML"===t.nodeName?p():{},a=s.width||t.clientWidth||r.right-r.left,l=s.height||t.clientHeight||r.bottom-r.top,u=t.offsetWidth-a,f=t.offsetHeight-l;if(u||f){var m=n(t);u-=c(m,"x"),f-=c(m,"y"),r.width-=u,r.height-=f}return h(r)}function m(t,e){var i=j(),o="HTML"===e.nodeName,s=f(t),a=f(e),l=r(t),c=n(e),u=+c.borderTopWidth.split("px")[0],p=+c.borderLeftWidth.split("px")[0],m=h({top:s.top-a.top-u,left:s.left-a.left-p,width:s.width,height:s.height});if(m.marginTop=0,m.marginLeft=0,!i&&o){var g=+c.marginTop.split("px")[0],v=+c.marginLeft.split("px")[0];m.top-=u-g,m.bottom-=u-g,m.left-=p-v,m.right-=p-v,m.marginTop=g,m.marginLeft=v}return(i?e.contains(l):e===l&&"BODY"!==l.nodeName)&&(m=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=d(e,"top"),o=d(e,"left"),r=i?-1:1;return t.top+=n*r,t.bottom+=n*r,t.left+=o*r,t.right+=o*r,t}(m,e)),m}function g(t){var e=t.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===n(t,"position")||g(o(t)))}function v(t,e,i,n){var s={top:0,left:0},a=l(t,e);if("viewport"===n)s=function(t){var e=window.document.documentElement,i=m(t,e),n=Math.max(e.clientWidth,window.innerWidth||0),o=Math.max(e.clientHeight,window.innerHeight||0),r=d(e),s=d(e,"left");return h({top:r-i.top+i.marginTop,left:s-i.left+i.marginLeft,width:n,height:o})}(a);else{var c=void 0;"scrollParent"===n?"BODY"===(c=r(o(t))).nodeName&&(c=window.document.documentElement):c="window"===n?window.document.documentElement:n;var u=m(c,a);if("HTML"!==c.nodeName||g(a))s=u;else{var f=p(),v=f.height,b=f.width;s.top+=u.top-u.marginTop,s.bottom=v+u.top,s.left+=u.left-u.marginLeft,s.right=b+u.left}}return s.left+=i,s.top+=i,s.right-=i,s.bottom-=i,s}function b(t,e,i,n,o){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var s=v(i,n,r,o),a={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},l=Object.keys(a).map(function(t){return q({key:t},a[t],{area:function(t){return t.width*t.height}(a[t])})}).sort(function(t,e){return e.area-t.area}),d=l.filter(function(t){var e=t.width,n=t.height;return e>=i.clientWidth&&n>=i.clientHeight}),c=d.length>0?d[0].key:l[0].key,u=t.split("-")[1];return c+(u?"-"+u:"")}function _(t,e,i){return m(i,l(e,i))}function y(t){var e=window.getComputedStyle(t),i=parseFloat(e.marginTop)+parseFloat(e.marginBottom),n=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return{width:t.offsetWidth+n,height:t.offsetHeight+i}}function w(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function k(t,e,i){i=i.split("-")[0];var n=y(t),o={width:n.width,height:n.height},r=-1!==["right","left"].indexOf(i),s=r?"top":"left",a=r?"left":"top",l=r?"height":"width",d=r?"width":"height";return o[s]=e[s]+e[l]/2-n[l]/2,o[a]=i===a?e[a]-n[d]:e[w(a)],o}function C(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function x(t,e,n){return(void 0===n?t:t.slice(0,function(t,e,i){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===i});var n=C(t,function(t){return t[e]===i});return t.indexOf(n)}(t,"name",n))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=t.function||t.fn;t.enabled&&i(n)&&(e.offsets.popper=h(e.offsets.popper),e.offsets.reference=h(e.offsets.reference),e=n(e,t))}),e}function T(t,e){return t.some(function(t){var i=t.name;return t.enabled&&i===e})}function D(t){for(var e=[!1,"ms","Webkit","Moz","O"],i=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<e.length-1;n++){var o=e[n],r=o?""+o+i:t;if(void 0!==window.document.body.style[r])return r}return null}function A(t,e,i,n){var o="BODY"===t.nodeName,s=o?window:t;s.addEventListener(e,i,{passive:!0}),o||A(r(s.parentNode),e,i,n),n.push(s)}function E(){this.state.eventsEnabled||(this.state=function(t,e,i,n){i.updateBound=n,window.addEventListener("resize",i.updateBound,{passive:!0});var o=r(t);return A(o,"scroll",i.updateBound,i.scrollParents),i.scrollElement=o,i.eventsEnabled=!0,i}(this.reference,this.options,this.state,this.scheduleUpdate))}function M(){this.state.eventsEnabled&&(window.cancelAnimationFrame(this.scheduleUpdate),this.state=function(t,e){return window.removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}(this.reference,this.state))}function V(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function O(t,e){Object.keys(e).forEach(function(i){var n="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&V(e[i])&&(n="px"),t.style[i]=e[i]+n})}function S(t,e,i){var n=C(t,function(t){return t.name===e}),o=!!n&&t.some(function(t){return t.name===i&&t.enabled&&t.order<n.order});if(!o){var r="`"+e+"`",s="`"+i+"`";console.warn(s+" modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return o}function L(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=G.indexOf(t),n=G.slice(i+1).concat(G.slice(0,i));return e?n.reverse():n}function I(t,e,i,n){var o=[0,0],r=-1!==["right","left"].indexOf(n),s=t.split(/(\+|\-)/).map(function(t){return t.trim()}),a=s.indexOf(C(s,function(t){return-1!==t.search(/,|\s/)}));s[a]&&-1===s[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,d=-1!==a?[s.slice(0,a).concat([s[a].split(l)[0]]),[s[a].split(l)[1]].concat(s.slice(a+1))]:[s];return(d=d.map(function(t,n){var o=(1===n?!r:r)?"height":"width",s=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,s=!0,t):s?(t[t.length-1]+=e,s=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,i,n){var o=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+o[1],s=o[2];if(!r)return t;if(0===s.indexOf("%")){var a=void 0;switch(s){case"%p":a=i;break;case"%":case"%r":default:a=n}return h(a)[e]/100*r}if("vh"===s||"vw"===s)return("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*r;return r}(t,o,e,i)})})).forEach(function(t,e){t.forEach(function(i,n){V(i)&&(o[e]+=i*("-"===t[n-1]?-1:1))})}),o}Object.defineProperty(e,"__esModule",{value:!0});for(var N=["native code","[object MutationObserverConstructor]"],W="undefined"!=typeof window,P=["Edge","Trident","Firefox"],$=0,F=0;F<P.length;F+=1)if(W&&navigator.userAgent.indexOf(P[F])>=0){$=1;break}var R=W&&function(t){return N.some(function(e){return(t||"").toString().indexOf(e)>-1})}(window.MutationObserver)?function(t){var e=!1,i=0,n=document.createElement("span");return new MutationObserver(function(){t(),e=!1}).observe(n,{attributes:!0}),function(){e||(e=!0,n.setAttribute("x-index",i),i+=1)}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},$))}},U=void 0,j=function(){return void 0===U&&(U=-1!==navigator.appVersion.indexOf("MSIE 10")),U},B=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},H=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),z=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},J=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],G=J.slice(3),Q={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},K={placement:"bottom",eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,i=e.split("-")[0],n=e.split("-")[1];if(n){var o=t.offsets,r=o.reference,s=o.popper,a=-1!==["bottom","top"].indexOf(i),l=a?"left":"top",d=a?"width":"height",c={start:z({},l,r[l]),end:z({},l,r[l]+r[d]-s[d])};t.offsets.popper=q({},s,c[n])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var i=e.offset,n=t.placement,o=t.offsets,r=o.popper,s=o.reference,a=n.split("-")[0],l=void 0;return l=V(+i)?[+i,0]:I(i,r,s,a),"left"===a?(r.top+=l[0],r.left-=l[1]):"right"===a?(r.top+=l[0],r.left+=l[1]):"top"===a?(r.left+=l[0],r.top-=l[1]):"bottom"===a&&(r.left+=l[0],r.top+=l[1]),t.popper=r,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var i=e.boundariesElement||s(t.instance.popper);t.instance.reference===i&&(i=s(i));var n=v(t.instance.popper,t.instance.reference,e.padding,i);e.boundaries=n;var o=e.priority,r=t.offsets.popper,a={primary:function(t){var i=r[t];return r[t]<n[t]&&!e.escapeWithReference&&(i=Math.max(r[t],n[t])),z({},t,i)},secondary:function(t){var i="right"===t?"left":"top",o=r[i];return r[t]>n[t]&&!e.escapeWithReference&&(o=Math.min(r[i],n[t]-("right"===t?r.width:r.height))),z({},i,o)}};return o.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";r=q({},r,a[e](t))}),t.offsets.popper=r,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,i=e.popper,n=e.reference,o=t.placement.split("-")[0],r=Math.floor,s=-1!==["top","bottom"].indexOf(o),a=s?"right":"bottom",l=s?"left":"top",d=s?"width":"height";return i[a]<r(n[l])&&(t.offsets.popper[l]=r(n[l])-i[d]),i[l]>r(n[a])&&(t.offsets.popper[l]=r(n[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){if(!S(t.instance.modifiers,"arrow","keepTogether"))return t;var i=e.element;if("string"==typeof i){if(!(i=t.instance.popper.querySelector(i)))return t}else if(!t.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var o=t.placement.split("-")[0],r=t.offsets,s=r.popper,a=r.reference,l=-1!==["left","right"].indexOf(o),d=l?"height":"width",c=l?"Top":"Left",u=c.toLowerCase(),p=l?"left":"top",f=l?"bottom":"right",m=y(i)[d];a[f]-m<s[u]&&(t.offsets.popper[u]-=s[u]-(a[f]-m)),a[u]+m>s[f]&&(t.offsets.popper[u]+=a[u]+m-s[f]);var g=a[u]+a[d]/2-m/2,v=n(t.instance.popper,"margin"+c).replace("px",""),b=g-h(t.offsets.popper)[u]-v;return b=Math.max(Math.min(s[d]-m,b),0),t.arrowElement=i,t.offsets.arrow={},t.offsets.arrow[u]=Math.round(b),t.offsets.arrow[p]="",t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(T(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var i=v(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement),n=t.placement.split("-")[0],o=w(n),r=t.placement.split("-")[1]||"",s=[];switch(e.behavior){case Q.FLIP:s=[n,o];break;case Q.CLOCKWISE:s=L(n);break;case Q.COUNTERCLOCKWISE:s=L(n,!0);break;default:s=e.behavior}return s.forEach(function(a,l){if(n!==a||s.length===l+1)return t;n=t.placement.split("-")[0],o=w(n);var d=t.offsets.popper,c=t.offsets.reference,u=Math.floor,p="left"===n&&u(d.right)>u(c.left)||"right"===n&&u(d.left)<u(c.right)||"top"===n&&u(d.bottom)>u(c.top)||"bottom"===n&&u(d.top)<u(c.bottom),h=u(d.left)<u(i.left),f=u(d.right)>u(i.right),m=u(d.top)<u(i.top),g=u(d.bottom)>u(i.bottom),v="left"===n&&h||"right"===n&&f||"top"===n&&m||"bottom"===n&&g,b=-1!==["top","bottom"].indexOf(n),_=!!e.flipVariations&&(b&&"start"===r&&h||b&&"end"===r&&f||!b&&"start"===r&&m||!b&&"end"===r&&g);(p||v||_)&&(t.flipped=!0,(p||v)&&(n=s[l+1]),_&&(r=function(t){return"end"===t?"start":"start"===t?"end":t}(r)),t.placement=n+(r?"-"+r:""),t.offsets.popper=q({},t.offsets.popper,k(t.instance.popper,t.offsets.reference,t.placement)),t=x(t.instance.modifiers,t,"flip"))}),t},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,i=e.split("-")[0],n=t.offsets,o=n.popper,r=n.reference,s=-1!==["left","right"].indexOf(i),a=-1===["top","left"].indexOf(i);return o[s?"left":"top"]=r[i]-(a?o[s?"width":"height"]:0),t.placement=w(e),t.offsets.popper=h(o),t}},hide:{order:800,enabled:!0,fn:function(t){if(!S(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,i=C(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<i.top||e.left>i.right||e.top>i.bottom||e.right<i.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var i=e.x,n=e.y,o=t.offsets.popper,r=C(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==r&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==r?r:e.gpuAcceleration,l=f(s(t.instance.popper)),d={position:o.position},c={left:Math.floor(o.left),top:Math.floor(o.top),bottom:Math.floor(o.bottom),right:Math.floor(o.right)},u="bottom"===i?"top":"bottom",p="right"===n?"left":"right",h=D("transform"),m=void 0,g=void 0;if(g="bottom"===u?-l.height+c.bottom:c.top,m="right"===p?-l.width+c.right:c.left,a&&h)d[h]="translate3d("+m+"px, "+g+"px, 0)",d[u]=0,d[p]=0,d.willChange="transform";else{var v="bottom"===u?-1:1,b="right"===p?-1:1;d[u]=g*v,d[p]=m*b,d.willChange=u+", "+p}var _={"x-placement":t.placement};return t.attributes=q({},_,t.attributes),t.styles=q({},d,t.styles),t.arrowStyles=q({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return O(t.instance.popper,t.styles),function(t,e){Object.keys(e).forEach(function(i){!1!==e[i]?t.setAttribute(i,e[i]):t.removeAttribute(i)})}(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&O(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,i,n,o){var r=_(0,e,t),s=b(i.placement,r,e,t,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return e.setAttribute("x-placement",s),O(e,{position:"absolute"}),i},gpuAcceleration:void 0}}},Y=function(){function t(e,n){var o=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};B(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(o.update)},this.update=R(this.update.bind(this)),this.options=q({},t.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e.jquery?e[0]:e,this.popper=n.jquery?n[0]:n,this.options.modifiers={},Object.keys(q({},t.Defaults.modifiers,r.modifiers)).forEach(function(e){o.options.modifiers[e]=q({},t.Defaults.modifiers[e]||{},r.modifiers?r.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return q({name:t},o.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&i(t.onLoad)&&t.onLoad(o.reference,o.popper,o.options,t,o.state)}),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return H(t,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=_(this.state,this.popper,this.reference),t.placement=b(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.offsets.popper=k(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position="absolute",t=x(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,T(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.left="",this.popper.style.position="",this.popper.style.top="",this.popper.style[D("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return E.call(this)}},{key:"disableEventListeners",value:function(){return M.call(this)}}]),t}();Y.Utils=("undefined"!=typeof window?window:t).PopperUtils,Y.placements=J,Y.Defaults=K,e.default=Y}).call(e,i("698d75b157f24ae829cc"))},"061678c35a7b82df6628":function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("61b480911316cdda77a4")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e,i){return t.widget("dcp.dcpColor",t.dcp.dcpText,{options:{type:"color",renderOptions:{kendoColorConfiguration:{buttons:!1}},labels:{}},kendoWidget:null,_initDom:function(){this.element.addClass("dcpAttribute__content"),this.element.attr("data-type",this.getType()),this.element.attr("data-attrid",this.options.id),parseFloat(this.options.attributeValue.displayValue)===parseFloat(this.options.attributeValue.value)&&(this.options.attributeValue.displayValue=this.formatNumber(this.options.attributeValue.value)),t.dcp.dcpAttribute.prototype._initDom.apply(this,[]),this.kendoWidget=this.element.find(".dcpAttribute__value--edit"),this.kendoWidget&&(this.options.hasAutocomplete?this.activateAutocomplete(this.kendoWidget):(this._activateColor(this.kendoWidget),this.kendoWidget.hasClass("form-control")&&this.element.find(".k-colorpicker").addClass("form-control"))),0===this.element.find(".dcpAttribute__content__buttons button").length&&this.element.find(".k-picker-wrap").addClass("dcpAttribute__content__nobutton");var e=t("<div></div>",{class:"dcpAttribute__content__color__tag"});e.css("background-color",this.options.attributeValue.value),this.element.find(".dcpAttribute__value--read").prepend(e)},_initChangeEvent:function(){this.options.hasAutocomplete&&this._super()},setValue:function(i){if(i=e.clone(i),e.has(i,"value")&&!e.has(i,"displayValue")&&(i.displayValue=this.formatNumber(i.value)),t.dcp.dcpAttribute.prototype.setValue.apply(this,[i]),"write"===this.getMode()){this.kendoWidget.data("kendoColorPicker").value()!=i.value&&(this.kendoWidget.data("kendoColorPicker").value(i.value),this.flashElement())}else{if("read"!==this.getMode())throw new Error("Attribute "+this.options.id+" unkown mode "+this.getMode());this.getContentElements().text(i.displayValue),this.element.find(".dcpAttribute__value--read").css("border-color",i.value)}},_activateColor:function(t){return t.kendoColorPicker(this.getKendoColorOptions())},formatNumber:function(t){return kendo.toString(t,this.getKendoColorOptions().format)},getKendoColorOptions:function(){var t=this,i={},n={change:function(){t.setValue({value:this.value()})}};return e.isObject(t.options.renderOptions.kendoColorConfiguration)&&(i=t.options.renderOptions.kendoColorConfiguration),e.extend(n,i)},getType:function(){return"color"},testValue:function(t){if(this._super(t),!e.isNumber(t.value))throw new Error("The value must be a number for (attrid : "+this.options.id+")")},close:function(){this.kendoWidget&&this.kendoWidget.data("kendoColorPicker")&&this.kendoWidget.data("kendoColorPicker").close(),this._super()},_destroy:function(){this.kendoWidget&&this.kendoWidget.data("kendoColorPicker")&&this.kendoWidget.data("kendoColorPicker").destroy(),this._super()}}),t.fn.dcpColor})},"0627c604219b27e8bb7c":function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("61b480911316cdda77a4"),i("9bddf72f85a3a88d8c7b")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e,i){return t.widget("dcp.dcpInt",t.dcp.dcpText,{options:{type:"int",renderOptions:{kendoNumericConfiguration:{},max:null,min:null,numberFormat:"n0"},labels:{decreaseLabel:"Decrease value",increaseLabel:"Increase value"}},kendoWidget:null,_initDom:function(){this.element.addClass("dcpAttribute__content"),this.element.attr("data-type",this.getType()),this.element.attr("data-attrid",this.options.id),parseFloat(this.options.attributeValue.displayValue)===parseFloat(this.options.attributeValue.value)&&(this.options.attributeValue.displayValue=this.formatNumber(this.options.attributeValue.value)),"read"===this.getMode()&&this.options.renderOptions.format&&(this.options.attributeValue.formatValue=i.render(this.options.renderOptions.format||"",this.options.attributeValue)),t.dcp.dcpAttribute.prototype._initDom.apply(this,[]),this.kendoWidget=this.element.find(".dcpAttribute__value--edit"),this.kendoWidget&&(this.options.hasAutocomplete?this.activateAutocomplete(this.kendoWidget):this._activateNumber(this.kendoWidget)),0===this.element.find(".dcpAttribute__content__buttons button").length&&this.element.find(".k-numeric-wrap").addClass("dcpAttribute__content__nobutton")},_initChangeEvent:function(){this.options.hasAutocomplete&&this._super()},setValue:function(i){if(i=e.clone(i),e.has(i,"value")&&!e.has(i,"displayValue")?i.displayValue=this.formatNumber(i.value):parseFloat(i.displayValue)===parseFloat(i.value)&&(i.displayValue=this.formatNumber(i.value)),t.dcp.dcpAttribute.prototype.setValue.apply(this,[i]),"write"===this.getMode()){this.kendoWidget.data("kendoNumericTextBox").value()!=i.value&&(this.kendoWidget.data("kendoNumericTextBox").value(i.value),this.flashElement())}else{if("read"!==this.getMode())throw new Error("Attribute "+this.options.id+" unkown mode "+this.getMode());this.getContentElements().text(i.displayValue)}},_activateNumber:function(t){var e,i=t.attr("class");return t.removeClass(i),t.css("display","inline-block"),(e=t.kendoNumericTextBox(this.getKendoNumericOptions())).closest(".k-widget").addClass(i),e},formatNumber:function(t){try{t=kendo.toString(t,this.getKendoNumericOptions().format)}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t),console.error("Unable to format the number "+t)}return t},getKendoNumericOptions:function(){var t=this,i={},n={decimals:0,downArrowText:t.options.labels.decreaseLabel,upArrowText:t.options.labels.increaseLabel,format:t.options.renderOptions.numberFormat,max:t.options.renderOptions.max,min:t.options.renderOptions.min,change:function(){t.setValue({value:this.value()})}};return e.isObject(t.options.renderOptions.kendoNumericConfiguration)&&(i=t.options.renderOptions.kendoNumericConfiguration),e.extend(n,i)},getType:function(){return"int"},testValue:function(t){if(this._super(t),!e.isNumber(t.value))throw new Error("The value must be a number for (attrid : "+this.options.id+")")},_destroy:function(){this.kendoWidget&&this.kendoWidget.data("kendoNumericTextBox")&&this.kendoWidget.data("kendoNumericTextBox").destroy(),this._super()}}),t.fn.dcpInt})},"07b96fa8c545aab31dad":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i('external "jQuery"'),i("1858b45bf48591489d06"),i("bcd31d01884fc294fd69"),i("e3b629bb5804c565e69e"),i("30f8a357b2168c64d123"),i("652c2ab97314f0cc36e3"),i("7a4c946b6dd0337fa34b"),i("4eae4dcce004a8d344d8"),i("b3a839c4520ca8b4b597"),i("593c8c94ba4399020f79"),i("97de2f4cc762b1768ee2"),i("0ce7df67ddafeaa3e32e"),i("278ba7757aa1904087c6"),i("67953bae88ec8fa1ab26"),i("e6944ecc13b0862a73e7")],void 0===(o=function(t,e,n,o,r,s,a,l,d,c,u,p,h,f){return n.View.extend({className:"dcpDocument container-fluid",events:{'click .dcpDocument__body a[href^="#action/"], .dcpDocument__body a[data-action], .dcpDocument__body button[data-action]':"propagateActionClick",'click .dcpDocument__body a[href^="#"]':"handleHashClick"},initialize:function(){this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"displayLoading",this.displayLoading),this.listenTo(this.model,"invalid",this.showView),this.listenTo(this.model,"displayNetworkError",this.displayNetworkError),this.listenTo(this.model,"actionAttributeLink",this.doStandardAction),this.listenTo(this.model,"loadDocument",this.loadDocument),this.listenTo(this.model,"dduiDocumentReady",this.cleanAndRender),this.listenTo(this.model,"dduiDocumentDisplayView",this.showView)},cleanAndRender:function(){this.trigger("loaderShow",f.___("Rendering","ddui"),70),e(".dcpStaticErrorMessage").attr("hidden",!0),this.$el.show(),this.$el[0].className=this.$el[0].className.replace(/\bdcpFamily.*\b/g,""),this.$el.removeClass("dcpDocument--view").removeClass("dcpDocument--edit");try{this.historyWidget&&this.historyWidget.destroy(),this.propertiesWidget&&this.propertiesWidget.destroy(),this.helpWidget&&this.helpWidget.destroy(),this.transitionGraph&&this.transitionGraph.view&&this.transitionGraph.view.remove()}catch(t){console.error(t)}this.render()},render:function(){console.time("render document view");var i,n,r=[],p=this.model,h=this.$el,f=this,m=this.model.get("locale"),g=this,v=this.model.getOption("tabPlacement")||"top",b={prevent:!1},_=[];if(this.$el.removeClass("dcpTouch"),function(){var t=!1;return("ontouchstart"in window||window.DocumentTouch&&window.document instanceof window.DocumentTouch)&&(t=!0),t}()&&this.$el.addClass("dcpTouch"),this.selectedTab=this.model.getOption("openFirstTab"),this.model.trigger("beforeRender",b),b.prevent)return this;this.template=this.getTemplates("body").trim(),this.partials=this.getTemplates("sections"),this.$el.find("[aria-describedby*='tooltip']").tooltip("hide"),this.$el.empty(),this.renderCss(),this.publishMessages(),this.updateTitle(),this.updateIcon(),m||(m="fr-FR"),e(window).off(".v"+this.model.cid),e(window).on("resize.v"+this.model.cid,t.bind(this.resizeForFooter,this)),e(window).on("scroll.v"+this.model.cid,t.bind(this.fixedTab,this)),kendo.culture(m);try{var y=this.model.toData();y.document=u.getTemplateModelInfo(this.model),this.$el.append(e(o.render(this.template||"",y,this.partials))),u.completeCustomContent(this.$el,this.model,null,{initializeContent:!0}),n=this.$el.find(".dcpDocument__body").append('<div class="dcpDocument__form form-horizontal"><div class="dcpDocument__frames"></div><div style="display:none" class="dcpDocument__tabs"><ul class="dcpDocument__tabs__list"></ul></div></div>').addClass("container-fluid")}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}this.$el.removeClass("dcpDocument--create"),this.model.get("creationFamid")&&this.$el.addClass("dcpDocument--create"),this.$el.addClass("dcpDocument dcpDocument--"+this.model.get("renderMode")),this.$el.addClass("dcpFamily--"+this.model.get("properties").get("family").name),this.trigger("loading",10);try{this.$el.find(".dcpDocument__menu").each(function(){var t=new s({model:f.model,el:this});r.push(t.render()),_.push(t)})}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}try{this.$el.find(".dcpDocument__header").each(function(){r.push(new a({model:f.model,el:this}).render())})}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}if(this.trigger("loading",20,this.model.get("attributes").length),i=this.$el.find(".dcpDocument__frames"),n&&n.length>0){if(this.model.get("attributes").each(function(e){var n,o,s;if(e.isDisplayable()){if("frame"===e.get("type")&&t.isEmpty(e.get("parent")))try{n=new l({model:p.get("attributes").get(e.id)}),r.push(n.render()),i.append(n.$el)}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}if("tab"===e.get("type")&&t.isEmpty(e.get("parent")))try{var a,u=p.get("attributes").get(e.id);o=new d({model:u}),s=new c({model:u}),r.push(s.render()),a=s.$el,h.find(".dcpDocument__tabs__list").append(o.render().$el),h.find(".dcpDocument__tabs").append(a),h.find(".dcpDocument__tabs").show()}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}f.trigger("partRender")}else f.trigger("partRender")}),this.kendoTabs=this.$(".dcpDocument__tabs").kendoTabStrip({tabPosition:v,animation:{open:{duration:100,effects:"fadeIn"}},activate:function(e){this._dcpNotFirstactivate||(t.delay(t.bind(g.scrollTobVisibleTab,g),500),this._dcpNotFirstactivate=!0)},show:function(i){var n=e(i.item).data("attrid"),o=e(window).scrollTop();f.$(".dcpTab__label").removeClass("dcpLabel--active").addClass("dcpLabel--default"),f.$('.dcpLabel[data-attrid="'+n+'"]').addClass("dcpLabel--active").removeClass("dcpLabel--default"),g.selectedTab!==n&&(g.selectedTab=n,g.recordSelectedTab(n)),t.defer(function(){if(f&&f.model&&f.model.get("attributes")){var i=f.model.get("attributes").get(n);i&&(f.$el.find("[aria-describedby*='tooltip']").tooltip("hide"),i.trigger("showTab"),t.each(_,function(t){t.refresh()}),t.defer(function(){e(window).scrollTop(o)}))}})}}),"topProportional"===v){var w=h.find(".dcpDocument__tabs__list li");w.length>1?w.css("width",Math.floor(100/w.length)-.5+"%"):w.css("width","80%")}if("left"===v&&(this.$(".dcpTab__content").css("min-height",this.$(".dcpDocument__tabs__list").height()+"px"),this.$(".dcpDocument__tabs").addClass("dcpDocument__tabs--left")),"topFix"===v&&this.kendoTabs&&(this.$(".dcpDocument__tabs").addClass("dcpDocument__tabs--fixed"),e(window).on("resize.v"+this.model.cid,t.debounce(t.bind(this.responsiveTabMenu,this),100,!1))),"top"===v&&this.kendoTabs&&(this.$(".dcpDocument__tabs").addClass("dcpDocument__tabs--fixed"),e(window).on("resize.v"+this.model.cid,t.debounce(t.bind(this.scrollTabList,this),100,!1)),t.delay(t.bind(this.scrollTabList,this),500)),this.kendoTabs.length>0&&this.kendoTabs.data("kendoTabStrip")){var k="li[data-attrid="+this.selectedTab+"]";this.selectedTab&&e(k).length>0?this.kendoTabs.data("kendoTabStrip").select(k):this.kendoTabs.data("kendoTabStrip").select(0)}}return e(window.document).on("drop.v"+this.model.cid+" dragover."+this.model.cid,function(t){t.preventDefault()}).on("redrawErrorMessages.v"+this.model.cid,function(){g.model.redrawErrorMessages()}),e(window).on("resize.v"+this.model.cid,t.debounce(function(){g.model.redrawErrorMessages(),g.scrollTobVisibleTab()},100,!1)),e(window).on("resize.v"+this.model.cid,t.debounce(function(){g.model.get("attributes")&&g.model.get("attributes").each(function(t){t.trigger("closeWidget")})},100,!1)),this.$el.addClass("dcpDocument--show"),this.resizeForFooter(),console.timeEnd("render document view"),Promise.all(r).then(t.bind(function(){this.trigger("renderDone")},this)),this.$el.show(),"topFix"===v&&this.kendoTabs&&t.defer(t.bind(this.responsiveTabMenu,this)),"left"===v&&this.$(".dcpTab__content").css("width","calc(100% - "+(e(".dcpDocument__tabs__list").width()+30)+"px)"),t.delay(function(){e(".dcpLoading--init").removeClass("dcpLoading--init"),"topFix"===v&&g.kendoTabs&&g.responsiveTabMenu()},500),this},resizeForFooter:function(){var t=this.$el.find(".dcpDocument__footer");if(t.length>0){var i=t.height();i>0&&e("body").css("margin-bottom",i+"px")}},scrollTobVisibleTab:function(){var t=this.kendoTabs?this.kendoTabs.data("kendoTabStrip"):null;t&&t._scrollableModeActive&&t._scrollTabsToItem(this.kendoTabs.find("li.k-state-active"))},fixedTab:function(t){return},scrollTabList:function(e){var i=this.kendoTabs.data("kendoTabStrip");this.$el.find(".dcpDocument__tabs").hasClass("tab--fixed")?t.defer(t.bind(this.fixedTab,this,e)):i&&i.resize()},responsiveTabMenu:function(){var i,n,r=this.$(".dcpDocument__tabs__list li"),s=this.$(".dcpDocument__tabs").width()-12,a=0,l=[],d=null,c=this.kendoTabs.data("kendoTabStrip"),u=0,p=this.$(".dcpDocument__tabs"),h=this.selectedTab,f=!1,m=null,g=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);r.show(),r.each(function(){(a+=e(this).outerWidth())>s?(e(this).hide(),0===l.length&&l.push({tooltipLabel:e(d).data("tooltipLabel"),label:e(d).find(".k-link").text(),id:e(d).data("attrid"),index:u-1}),l.push({tooltipLabel:e(this).data("tooltipLabel"),label:e(this).find(".k-link").text(),id:e(this).data("attrid"),index:u})):(c.enable&&c.enable(e(this)),d=this),u++}),e(".dcpLabel__select-hide:visible").each(function(){var t=e(this).closest(".k-list-container"),i=t.offset().left,n=e("body").width()-i-20+"px";t.css("max-width",n),t.closest(".k-animation-container").css("max-width",n),e(this).css("max-width","")}),p.data("hiddenTabsLength")!==l.length?(p.data("hiddenTabsLength",l.length),r.find(".k-link").show(),n=p.find(".dcpTab__label__select.k-combobox").hide(),p.find("input.dcpTab__label__select[data-role=combobox]").each(function(){e(this).data("kendoComboBox")&&e(this).data("kendoComboBox").close&&e(this).data("kendoComboBox").close()}),p.find(".dcpLabel--select").removeClass("dcpLabel--select k-state-active"),p.find(".dcpLabel[data-attrid="+h+"]").addClass("k-state-active"),l.length>0&&(d&&c.disable(e(d)),e(d).find(".k-link").hide(),(f=t.some(l,function(t){return t.id===h}))?e(d).addClass("k-state-active"):e(d).data("attrid")!==h&&e(d).removeClass("k-state-active"),e(d).addClass("dcpLabel--select"),0===n.length?(i=e('<input class="dcpTab__label__select" />'),e(d).append(i),i.kendoComboBox({value:f?h:l[0].id,dataSource:l,dataTextField:"label",dataValueField:"id",dataBound:function(){var t=e(this.element).closest("li"),i=p.find("li[data-attrid="+this.value()+"]");t.data("tooltipLabelSelect",i.data("tooltipLabel"))},select:function(t){var i=this.dataSource.at(t.item.index()),n=p.find("li[data-attrid="+i.id+"]"),o=e(this.element).closest("li");o.data("tooltipLabelSelect",i.tooltipLabel),o.removeClass("k-state-active"),c.enable(o),c.select(n),c.disable(o),o.addClass("k-state-active"),o.find(".k-input").blur()},open:function(){var i=e(this.ul),n=e(this.element).closest("li"),o=n.offset().left,r=e("body").width();i.css("max-width",Math.max(r-o-20,e(d).width())+"px"),i.css("min-width",n.width()),t.defer(function(){i.closest(".k-animation-container").addClass("menu__select_container")})},template:function(t){return t.tooltipLabel?o.render('<span class="dcpLabel__select--tooltip" data-tooltipLabel="{{tooltipLabel}}">{{label}}</span>',t):t.label}}),i.data("kendoComboBox").ul.addClass("dcpLabel__select-hide"),i.data("kendoComboBox").list.width("auto"),e(d).find("input").attr("aria-readonly","true").prop("readonly",!0),e(d).find(".k-select").prepend(e("<span/>").addClass("dcpLabel__count")),i.data("kendoComboBox").ul.tooltip({selector:"li.k-item ",placement:"left",container:".dcpDocument",html:!0,title:function(){return e(this).find(".dcpLabel__select--tooltip").attr("data-tooltipLabel")}}),i.parent().find(".k-input").css("width","")):(n.show(),i=p.find("input.dcpTab__label__select[data-role=combobox]"),e(d).append(n),i.data("kendoComboBox")&&(i.data("kendoComboBox").value(f?h:l[0].id),m=new kendo.data.DataSource({data:l}),i.data("kendoComboBox").setDataSource(m))),e(d).find(".dcpLabel__count").text(l.length),p.data("selectFixOn")||(p.on("click",".dcpLabel--select .k-dropdown-wrap .k-input",function(t){var i=c.select().data("attrid"),n=p.data("selectFixOn").data("kendoComboBox").value(),o=p.find("li[data-attrid="+n+"]"),r=e(this).closest("li");n!==i&&(r.removeClass("k-state-active"),c.enable(r),c.select(o),c.disable(r),r.addClass("k-state-active"))}),p.on("focus",".dcpLabel--select .k-dropdown-wrap .k-input",function(){e(this).blur()})),p.data("selectFixOn",i)),"ontouchstart"in document.documentElement&&g&&e("body").off("show.bs.tooltip").on("show.bs.tooltip","[data-original-title]",function(i){var n=e(this),o=n.data("bs.tooltip");o&&!1===o.inState.click&&!1===o.inState.focus&&!1===o.inState.hover||"ontouchstart"in document.documentElement&&(n.data("showios")||(i.preventDefault(),n.data("showios",!0),t.delay(function(){n.tooltip("show"),n.data("showios",!1),t.delay(function(){n.tooltip("hide")},2e3)},500)))})):l.length>0&&c&&c.disable&&c.disable(e(d))},recordSelectedTab:function(t){if(this.model.get("initid")){new r({initid:this.model.get("initid"),tabId:t}).save()}},publishMessages:function(){var e=this;t.each(this.model.get("messages"),function(t){e.trigger("showMessage",{type:t.type,title:t.contentText,htmlMessage:t.contentHtml})})},renderCss:function(i){var n=e("head"),o=t.template('<link rel="stylesheet" type="text/css" href="<%= path %>" data-id="<%= key %>" data-view="true">'),r=this.model.get("customCSS");!0!==i&&t.each(e("link[data-view=true]"),function(i){void 0===t.find(r,function(t){return e(i).data("id")===t.key})&&e(i).remove()}),t.each(r,function(t){0===e("link[rel=stylesheet][data-id="+t.key+"]").length&&(document.createStyleSheet&&document.createStyleSheet(t.path),n.append(o(t)))})},showHelp:function(n,o,r){var s=e(this.el),a=this,l=s.data("dcpHelpDocument-"+o),d=n.originalEvent?n.originalEvent.currentTarget:n.currentTarget,c={target:"_dialog",windowWidth:"400px",windowHeight:"300px",windowTitle:'<span class="fa fa-question-circle"></span> '+f.___("Info","ddui")};i.e("wDocument").then(function(){i("a2b1083ba5d095ec0632");var n,u,p,h,f;l&&!1!==l.is(":visible")?l.document("triggerEvent","custom:helppageSelect",r):(a.helpWidget&&a.helpWidget.destroy(),(l=e("<div/>").addClass("dcpHelp-wrapper")).kendoWindow({title:c.windowTitle,width:c.windowWidth,height:c.windowHeight,iframe:!0,content:"about:blank",actions:["Maximize","Close"],close:function(){e(".dcpLabel__help__link--selected").removeClass("dcpLabel__help__link--selected")}}),l.on("documentcreate",function(){l.find("> iframe").addClass("k-content-frame")}),l.document({initid:o,withoutResize:!0}).on("documentloaded",function(){t.defer(function(){l.document("triggerEvent","custom:helppageSelect",r)})}),s.data("dcpHelpDocument-"+o,l)),a.helpWidget=l.data("kendoWindow"),e(".dcpLabel__help__link--selected").removeClass("dcpLabel__help__link--selected"),e(d).length>0?(e(d).addClass("dcpLabel__help__link--selected"),n=e(d).offset().left,u=e(d).offset().top,p=e("body").height(),h=e(a.helpWidget.wrapper).closest(".k-window").height(),n>(f=e(a.helpWidget.wrapper).closest(".k-window").width())+50?n=n-f-30:n+=30,u>p-h&&(u=p-h-50),u=u<0?0:u,e(a.helpWidget.wrapper).css({top:u+"px",left:n+"px"})):a.helpWidget.center(),a.helpWidget.open()}.bind(null,i)).catch(i.oe)},showHistory:function(t){var i=this,n=e('<div class="document-history"/>');this.historyWidget=n.dcpDocumentHistory({documentId:t||this.model.get("properties").get("initid"),window:{width:"80%",height:"80%",title:f.___("Document History","historyUi")},labels:{version:f.___("Version","historyUi"),revision:f.___("Rev","historyUi"),state:f.___("State","historyUi"),activity:f.___("Activity","historyUi"),owner:f.___("Owner","historyUi"),code:f.___("Code","historyUi"),date:f.___("Date","historyUi"),diff:f.___("Diff","historyUi"),level:f.___("Level","historyUi"),message:f.___("Message","historyUi"),pastRevision:f.___("past Revision","historyUi"),showDetail:f.___("Show details","historyUi"),hideDetail:f.___("Hide details","historyUi"),showNotice:f.___("Show notices","historyUi"),noOneNotice:f.___("No one notices","historyUi"),hideNotice:f.___("Hide notices","historyUi"),filterMessages:f.___("Filter messages","historyUi"),linkRevision:f.___("See revision number #","historyUi"),historyTitle:f.___("History for {{title}}","historyUi"),loading:f.___("Loading ...","historyUi"),revisionDiffLabels:{title:f.___("Difference between two revisions","historyDiffUi"),first:f.___("First document","historyDiffUi"),second:f.___("Second document","historyDiffUi"),attributeId:f.___("Attribute id","historyDiffUi"),attributeLabel:f.___("Attribute label","historyDiffUi"),documentHeader:f.___("{{title}}  (Revision : {{revision}}). <br/>Created on <em>{{revdate}}</em>","historyDiffUi"),filterMessages:f.___("Filter data","historyDiffUi"),showOnlyDiff:f.___("Show only differences","historyDiffUi"),showAll:f.___("Show all","historyDiffUi")}}}).data("dcpDocumentHistory"),this.historyWidget.open(),this.historyWidget.element.on("viewRevision",function(t,e){i.model.fetchDocument({initid:e.initid,revision:e.revision})})},lockDocument:function(){this.model.lockDocument()},unlockDocument:function(){this.model.unlockDocument()},showtransition:function(t,e){this.model.trigger("showTransition",e,t)},showTransitionGraph:function(){var t=this,i={},n=e('<div class="dcpTransitionGraph"/>');i.model=new p({documentId:this.model.id,state:this.model.get("properties").get("state")}),i.model.fetch({success:function(){i.view=new h({model:i.model,el:n}),i.view.render(),i.view.$el.on("viewTransition",function(e,n){i.view.remove(),t.model.trigger("showTransition",n)})}}),this.transitionGraph=i},showProperties:function(t){var i=this,n=e('<div class="document-properties"/>');this.propertiesWidget=n.dcpDocumentProperties({documentId:t||this.model.get("properties").get("initid"),window:{width:"500px",height:"80%",title:f.___("Document properties","propertyUi")},labels:{identifier:f.___("Identifier","propertyUi"),title:f.___("Title","propertyUi"),logicalName:f.___("Logical name","propertyUi"),revision:f.___("Revision number","propertyUi"),version:f.___("Version","propertyUi"),family:f.___("Family","propertyUi"),lockedBy:f.___("Locked by","propertyUi"),createdBy:f.___("Created by","propertyUi"),notLocked:f.___("Not locked","propertyUi"),confidential:f.___("Confidential","propertyUi"),notConfidential:f.___("Not confidential","propertyUi"),creationDate:f.___("Creation date","propertyUi"),lastModificationDate:f.___("Last modification date","propertyUi"),lastAccessDate:f.___("Last access date","propertyUi"),profil:f.___("Profil","propertyUi"),profilReference:f.___("Profil reference","propertyUi"),viewController:f.___("View controller","propertyUi"),property:f.___("Property","propertyUi"),propertiesTitle:f.___("Properties for {{title}}","propertyUi"),propertyValue:f.___("Value","propertyUi"),workflow:f.___("Workflow","propertyUi"),activity:f.___("Activity","propertyUi")}}).data("dcpDocumentProperties"),this.propertiesWidget.open(),this.propertiesWidget.element.on("viewDocument",function(t,e){i.model.fetchDocument({initid:e})})},updateTitle:function(){var e=this.model.get("properties").get("title");t.isEmpty(e)||(document.title=e)},updateIcon:function(){e("link[rel='shortcut icon']").attr("href",this.model.get("properties").get("icon"))},deleteDocument:function(){this.model.deleteDocument()},displayLoading:function(t){var e=f.___("Loading","ddui"),i=50;t=t||{},0===this.$el.find(".dcpDocument--disabled")&&this.$el.append('<div class="dcpDocument--disabled"/>'),t.isSaving&&(e=f.___("Recording","ddui"),i=70),t.text&&(e=t.text),this.trigger("cleanNotification"),this.trigger("loaderShow",e,i)},showView:function(){this.$el.hide(),this.$el.find(".dcpDocument--disabled").remove(),this.trigger("loaderHide"),this.$el.show(),this.model.redrawErrorMessages()},closeDocument:function(t){t||(t="edit"===this.model.get("renderMode")?"!defaultEdition":"!defaultConsultation"),this.loadDocument({initid:this.model.get("initid"),viewId:t})},saveDocument:function(){this.trigger("cleanNotification");var t=this,e=this.model.saveDocument();e&&e.then&&e.then(function(){t.trigger("showSuccess",{title:f.___("Document Recorded","ddui")})})},saveAndCloseDocument:function(t){this.trigger("cleanNotification");var e=this,i=this.model.saveDocument();i&&i.then&&i.then(function(){var i=e.model.get("initid");e.model.fetchDocument({initid:i,viewId:t||"!defaultConsultation"})})},createDocument:function(){var t=this,e=this.model.saveDocument();e&&e.then&&e.then(function(){t.trigger("showSuccess",{title:f.___("Document Created","ddui")})})},createAndCloseDocument:function(t){var e=this,i=this.model.saveDocument();i&&i.then&&i.then(function(){var i=e.model.get("initid");e.model.fetchDocument({initid:i,viewId:t||"!defaultConsultation"})})},loadDocument:function(i,n){var o=this;n=n||{},this.model.hasAttributesChanged()?e("body").dcpConfirm({title:f.___("Confirm close document","ddui"),width:"45rem",height:"12rem",maxWidth:e(window).width(),messages:{okMessage:f.___("Abort modification","ddui"),cancelMessage:f.___("Stay on the form","ddui"),htmlMessage:f.___("The form has been modified without saving","ddui"),textMessage:""},confirm:function(){o.model.fetchDocument({initid:i.initid,viewId:i.viewId,revision:i.revision}).then(n.success,n.error)},cancel:function(){n&&t.isFunction(n.error)&&n.error({errorMessage:{code:"USERCANCEL",contentText:f.___("User has cancelled the action.","ddui")}})},templateData:{templates:this.model.get("templates")}}).data("dcpWindow").open():this.model.fetchDocument({initid:i.initid,viewId:i.viewId,revision:i.revision}).then(n.success,n.error)},restoreDocument:function(){this.model.restoreDocument()},propagateActionClick:function(t){var i,n,o,r=e(t.currentTarget),s={prevent:!1};return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),i=r.data("action")||r.attr("href"),n=i.substring(8).split(":"),o={target:t.target,eventId:n.shift(),options:n},this.model.trigger("internalLinkSelected",s,o),s.prevent?this:this.doStandardAction(s,o)},handleHashClick:function(t){var i=e(t.currentTarget).attr("href");i&&i.substring&&"#action"!==i.substring(0,7)&&(t.preventDefault(),t.stopPropagation&&t.stopPropagation(),window.location.hash=i)},doStandardAction:function(t,e){var i=e.options;return"document.save"===e.eventId?this.saveDocument():"document.saveAndClose"===e.eventId?this.saveAndCloseDocument(i[0]):"document.history"===e.eventId?this.showHistory(i[0]):"document.transition"===e.eventId?this.showtransition(i[0],i[1]):"document.transitionGraph"===e.eventId?this.showTransitionGraph():"document.properties"===e.eventId?this.showProperties(i[0]):"document.delete"===e.eventId?this.deleteDocument():"document.close"===e.eventId?this.closeDocument(i[0]):"document.edit"===e.eventId?this.closeDocument("!defaultEdition"):"document.create"===e.eventId?this.createDocument():"document.createAndClose"===e.eventId?this.createAndCloseDocument(i[0]):"document.load"===e.eventId?this.loadDocument({initid:i[0],viewId:i[1],revision:i[2]}):"document.lock"===e.eventId?this.lockDocument():"document.unlock"===e.eventId?this.unlockDocument():"document.restore"===e.eventId?this.restoreDocument():"document.help"===e.eventId?this.showHelp(t,i[0],i[1]):void 0},displayNetworkError:function(){this.$el.hide(),e(".dcpStaticErrorMessage").removeAttr("hidden")},getTemplates:function(t){var e={};if(this.model&&this.model.get("templates")&&(e=this.model.get("templates")),e[t])return e[t];if(window.dcp&&window.dcp.templates&&window.dcp.templates[t])return window.dcp.templates[t];throw new Error("Unknown template  "+t)},remove:function(){try{this.kendoTabs&&this.kendoTabs.data("kendoTabStrip")&&this.kendoTabs.data("kendoTabStrip").destroy()}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}return e(window).off("."+this.model.cid),e(window.document).off("."+this.model.cid),n.View.prototype.remove.call(this)}})}.apply(e,n))||(t.exports=o)},"0a26bdc45fd66878f3b9":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i('external "jQuery"'),i("1858b45bf48591489d06")],void 0===(o=function(t,e,i){return i.Model.extend({typeModel:"ddui:attribute",defaults:{title:null,isValueAttribute:!1,parent:void 0,mode:"read",errorMessage:null},initialize:function(){this.listenTo(this,"change:documentMode",this._computeMode),this.listenTo(this,"change:visibility",this._computeMode),this._computeValueMode(),this._computeMode(),this.set("title",this.id+"("+this.get("label")+")"),this.set("errorMessage",null)},toData:function(e,i){var n=this.toJSON();if(void 0!==e&&null!==e&&!1===this.get("multiple"))throw new Error("You need to be multiple");return t.isNumber(e)&&(n.attributeValue=n.attributeValue?n.attributeValue[e]:null,n.index=e),n.isDisplayable=this.isDisplayable(),n.content=[],this.get("content")&&t.isFunction(this.get("content").toData)&&(n.content=this.get("content").toData(e,i)),i&&(n.renderOptions=this.getOptions(),n.labels=n.labels||{},n.locale=this.getDocumentModel().get("locale"),n.templates={},this.getTemplates().attribute&&(this.getTemplates().attribute[this.get("type")]?n.templates=this.getTemplates().attribute[this.get("type")]:n.templates=this.getTemplates().attribute.default),n.deleteButton=!0,n.sourceValues=this.get("enumItems"),n.sourceUri=this.get("enumUrl"),n.templates.label||(n.templates.label=this.getTemplates().attribute.label)),n},isDisplayable:function(){var e;if("hidden"===this.get("mode"))return!1;if(this.get("isValueAttribute")){if("read"===this.get("mode"))return null!==this.getOption("showEmptyContent")||(e=this.get("attributeValue")&&null!==this.get("attributeValue").value,t.isArray(this.get("attributeValue"))&&(e=t.isArray(this.get("attributeValue"))&&this.get("attributeValue").length>0),e);if("write"===this.get("mode"))return!0}return 0!==this.get("content").length&&(null!==this.getOption("showEmptyContent")||!!this.get("content").some&&this.get("content").some(function(t){return t.isDisplayable()}))},hasMultipleOption:function(){return this.attributes.options&&"yes"===this.attributes.options.multiple},isDoubleMultiple:function(){return this.hasMultipleOption()&&"array"===this.getParent().get("type")},getParent:function(){return this.attributes.parent?this.getDocumentModel().get("attributes").get(this.attributes.parent):null},hasValueChanged:function(){return this.get("attributeValue")&&(void 0!==this.get("attributeValue").value&&((this._initialAttributeValue||{}).value||"")!==(this.get("attributeValue").value||"")||!t.isEqual(t.pluck(t.flatten(this._initialAttributeValue),"value"),t.pluck(t.flatten(this.get("attributeValue")),"value")))},_computeMode:function(){var e=this.get("visibility"),i=this.collection.renderMode;if("H"!==e&&"I"!==e){if("view"===i)return"O"===e?void this.set("mode","hidden"):this.get("isValueAttribute")&&(t.isEmpty(this.get("attributeValue"))||t.isUndefined(this.get("attributeValue")||null===this.get("attributeValue").value))&&null===this.getOption("showEmptyContent")?void this.set("mode","hidden"):void this.set("mode","read");if("edit"===i){if("W"===e||"O"===e)return void this.set("mode","write");if("R"===e)return void this.set("mode","hidden");if("R"===e||"S"===e)return void this.set("mode","read");if("U"===e)return this.set("mode","write"),void this.set("addTool",!1)}throw new Error("unkown mode "+i+" or visibility "+e+" "+this.get("id"))}this.set("mode","hidden")},_computeValueMode:function(){var t=this.get("type"),e=this.get("visibility");"frame"!==t&&"array"!==t&&"tab"!==t&&"I"!==e||this.set("isValueAttribute",!1)},getOptions:function(){var e,i={},n={},o={},r={};return this._options=this._options||!1,!1===this._options&&((e=this.collection.renderOptions).common&&(i=e.common||{},r=t.clone(i.translatedLabels)||{}),e.types&&(n=e.types[this.get("type")]||{},r=t.extend(r,t.clone(n.translatedLabels))),e.attributes&&(o=e.attributes[this.id]||{}),o.labels=t.extend(r,o.translatedLabels),this._options={}),t.extend(this._options,i,n,o),this._options},getOption:function(t){var e=this.getOptions();return void 0!==e[t]?e[t]:null},setOption:function(t,e){var i=this.getOptions();return i[t]=e,this._options=i,this.trigger("optionModified",t),this},getDocumentModel:function(){return this.collection.documentModel},getTemplates:function(){var t=this.getDocumentModel().get("templates");return t||(t=window.dcp.templates),t},setErrorMessage:function(e,i){var n=this.get("parent");if(this.get("multiple")&&void 0!==i){var o=this.get("errorMessage")||[];t.reject(o,function(t){return t.index===i}),this.set("errorMessage",[{message:e,index:i}].concat(o))}else this.set("errorMessage",e);if(n){var r=this.getDocumentModel().get("attributes").get(n);r&&r.setErrorMessage(e)}},checkConstraint:function(){return!0},haveView:function(){var t={haveView:!1,elements:e()};return this.trigger("haveView",t),t},isNew:function(){return!0}})}.apply(e,n))||(t.exports=o)},"0bd0aa4c1909a49f67bb":function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("f562ab9f022eef93542c")],void 0===(o=function(t,e){t.widget("dcp.dcpDialog",{options:{window:{modal:!0,actions:["Maximize","Close"],visible:!1,height:"300px",width:"500px",title:"-"},maximizeWidth:768},dialogWindow:null,_create:function(){var i=this;this.element.data("dcpDialog",this),this.options.window.close?this.options.window.close=e.wrap(this.options.window.close,function(t,n){var o=arguments[1];t.apply(this,e.rest(arguments)),o.isDefaultPrevented()||e.defer(e.bind(i.destroy,i))}):this.options.window.close=function(){e.defer(e.bind(i.destroy,i))},t(window).width()<=this.options.maximizeWidth&&(this.options.window.width="auto",this.options.window.heigth="auto"),this.dialogWindow=this.element.kendoWindow(this.options.window).data("kendoWindow")},open:function(){var i=this.dialogWindow;t(window).width()<=this.options.maximizeWidth?(i.setOptions({actions:["Close"],animation:!1}),i.open(),e.delay(function(){i.maximize()},100)):(i.setOptions({actions:this.options.window.actions}),i.center(),i.open())},close:function(){var t=this.dialogWindow;t&&t.close()},_destroy:function(){this.element&&this.dialogWindow&&this.element.data("kendoWindow")?(this.dialogWindow.destroy(),this.dialogWindow=null):this._super()}})}.apply(e,n))||(t.exports=o)},"0ce7df67ddafeaa3e32e":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i('external "jQuery"'),i("1858b45bf48591489d06"),i("bcd31d01884fc294fd69"),i("278ba7757aa1904087c6"),i("0bd0aa4c1909a49f67bb")],void 0===(o=function(t,e,i,n,o){return i.View.extend({messages:[],remove:function(){this.transitionGraphWindow&&this.$el.data("kendoWindow")&&this.transitionGraphWindow.destroy(),i.View.prototype.remove.apply(this,arguments)},render:function(){var t=this;this.$el.append(e('<div class="dcpTransitionGraph--from"/><div class="dcpTransitionGraph--to"/>')),this.displayCurrentState(),this.$el.on("mouseover",".dcpTransitionGraph--to .dcpTransitionGraph_state",function(){var i=e(this).data("to");e(this).hasClass("dcpTransitionGraph_state--error")||t.$el.find(".dcpTransitionGraph__arrow--"+i).addClass("dcpTransitionGraph__arrow--selected")}),this.$el.on("mouseout",".dcpTransitionGraph--to .dcpTransitionGraph_state",function(){t.$el.find(".dcpTransitionGraph__arrow").removeClass("dcpTransitionGraph__arrow--selected")}),this.$el.on("click",".dcpTransitionGraph--to .dcpTransitionGraph_state",function(){var i=e(this).data("to");e(this).hasClass("dcpTransitionGraph_state--error")||t.$el.trigger("viewTransition",i)}),this.$el.find(".dcpTransitionGraph_state ").tooltip({placement:"top",html:!0}),this.transitionGraphWindow||(this.transitionGraphWindow=this.$el.dcpDialog({window:{height:"auto",width:"600px",close:function(){t.remove()},activate:function(){t.displayArrows(),t.previousHeight=t.$el.height()},resize:function(){var e=t.$el.data("kendoWindow").options.isMaximized;!e&&t.isMaximizedNow&&(t.$el.find(".dcpTransitionGraph--to").height(t.previousHeight),t.$el.find(".dcpTransitionGraph--from").height(t.previousHeight),t.isMaximizedNow=!1),t.displayArrows(),e?t.isMaximizedNow=!0:t.previousHeight=t.$el.height()}}}).data("dcpDialog"),this.$el.kendoWindow("title",o.___("Transition Graph","ddui")),this.transitionGraphWindow.open())},displayCurrentState:function(){var e='<div class="dcpTransitionGraph_state {{#transition.error}}dcpTransitionGraph_state--error{{/transition.error}}" data-to="{{id}}" {{^transition.error}}title="{{title}}{{transition.error}}"{{/transition.error}} style="border-color:{{color}}">{{displayValue}}{{#transition.error}}<div class="dcpTransitionGraph_state_message">{{transition.error}}</div>{{/transition.error}}</div>',i=this.model.get("workflowStates"),r=this.model.get("state"),s=this;this.$el.find(".dcpTransitionGraph--from").append(n.render(e,t.extend(r,{title:o.___("Current workflow activity","ddui")}))),t.each(i,function(t){t.transition&&!1!==t.transition.authorized&&(t.title=n.render(o.___("Next step. Apply transition {{label}}","ddui"),{label:t.transition.label}),s.$el.find(".dcpTransitionGraph--to").append(n.render(e,t)))})},displayArrows:function(){var e,i=this.model.get("workflowStates"),n=this,o=this.$el.find(".dcpTransitionGraph--from .dcpTransitionGraph_state");this.$el.find(".dcpTransitionGraph__arrow").remove(),this.$el.find(".dcpTransitionGraph--to").height(this.$el.height()),this.$el.find(".dcpTransitionGraph--from").height(this.$el.height()),t.each(i,function(t){t.transition&&!1!==t.transition.authorized&&(e=n.$el.find(".dcpTransitionGraph--to .dcpTransitionGraph_state[data-to="+t.id+"]"),n.connect(o.get(0),e.get(0),2,t))})},getOffset:function(t){var i=e(t).offset();return i.width=e(t).outerWidth(),i.height=e(t).outerHeight(),i},connect:function(t,e,i,o){var r=this.getOffset(t),s=this.getOffset(e),a=this.getOffset(this.$el.get(0)),l=r.left+r.width-a.left,d=r.top+r.height/2-a.top,c=s.left-a.left,u=s.top+s.height/2-a.top,p=Math.sqrt((l-c)*(l-c)+(d-u)*(d-u)),h=(c+l)/2-p/2,f=(u+d)/2-i/2,m=Math.atan2(u-d,c-l)*(180/Math.PI);this.$el.append(n.render("<div class='dcpTransitionGraph__arrow dcpTransitionGraph__arrow--{{id}} {{#error}}dcpTransitionGraph__arrow--error{{/error}}' style=' height:{{height}}px;left:{{left}}px; top:{{top}}px; width:{{width}}px; -moz-transform:rotate({{angle}}deg); -webkit-transform:rotate({{angle}}deg); -o-transform:rotate({{angle}}deg); -ms-transform:rotate({{angle}}deg); transform:rotate({{angle}}deg);' ><div class='dcpTransitionGraph__arrow__label'>{{text}}</div><span class='dcpTransitionGraph__arrow__end fa fa-2x fa-caret-right'></span> </div>",{error:o.transition.error,id:o.id,height:i,width:p,top:f,left:h,angle:m,text:o.transition.label}))}})}.apply(e,n))||(t.exports=o)},"0ed68aa34b095f87d8dd":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("512dac7279589ee7db96")],void 0===(o=function(t,e){return e.extend({typeModel:"ddui:attributeArray",removeIndexedLine:function(t){this.trigger("removeWidgetLine",{index:t},{silent:!0}),this.trigger("array","remove",this,t)},addIndexedLine:function(t){this.trigger("addWidgetLine",{index:t}),this.trigger("array","add",this,t)}})}.apply(e,n))||(t.exports=o)},"102a2812abe6ba802db9":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58")],void 0===(o=function(t){var e=function(){this.id=this._attributeModel.id};e.prototype.getProperties=function(){var e=t.clone(this._attributeModel.attributes),n=e.content;return e=t.omit(e,"isValueAttribute","title","attributeValue","content"),e.content=[],n&&n.length&&(e.content=n.map(function(t){return new i(t)})),e},e.prototype.setLabel=function(t){this._attributeModel.set("label",t)},e.prototype.getWidgetData=function(e){return t.clone(this._attributeModel.toData(e,!0))},e.prototype.getOptions=function(){var e=this._attributeModel.getOptions();return t.clone(e)},e.prototype.getOption=function(t){return this._attributeModel.getOption(t)},e.prototype.setOption=function(t,e){this._attributeModel.setOption(t,e)},e.prototype.getValue=function(e){if(t.isUndefined(e)||"current"===e)return this._attributeModel.get("attributeValue");if("previous"===e)return this._attributeModel.previous("attributeValue");if("initial"===e)return this._attributeModel._initialAttributeValue;if("all"===e)return{current:this._attributeModel.get("attributeValue"),previous:this._attributeModel.previous("attributeValue"),initial:this._attributeModel._initialAttributeValue};throw new Error("Unknown type of getValue (current, previous, initial, all")},e.prototype.setValue=function(e,i){var n,o;if(this._attributeModel.get("multiple"))if(t.isArray(e))t.each(e,function(e){if(!t.isObject(e)||t.isUndefined(e.value))throw new Error("Each values must be an object with at least value properties")});else{if(!t.isObject(e)||t.isUndefined(e.value)||t.isUndefined(e.index)||null===e.index)throw new Error("Value must be an object with at least value and index properties");if((n=parseInt(e.index))<0)throw new Error("Index value must be positive or null");if(this._attributeModel.isDoubleMultiple()){if(!t.isArray(e.value))throw new Error("Value must be an array for multiple in arrays");e=e.value}else e=t.defaults(e,{displayValue:e.value});(o=this._attributeModel.get("attributeValue").slice())[n]=t.clone(e),e=o}else{if(!t.isObject(e)||t.isUndefined(e.value))throw new Error("Value must be an object with at least value properties");e=t.defaults(e,{displayValue:e.value})}i||this._attributeModel.set("attributeValue",e)},e.prototype.toJSON=function(){return{id:this._attributeModel.id,properties:t.omit(this._attributeModel.attributes,"isValueAttribute","title","options","attributeValue"),options:this._attributeModel.getOptions()}};var i=function(t){this._attributeModel=t,e.call(this)};return i.prototype=Object.create(e.prototype),i.prototype.constructor=e,i}.apply(e,n))||(t.exports=o)},"11e1c9c4ee0385434097":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06")],void 0===(o=function(t,e){return e.Model.extend({typeModel:"ddui:properties"})}.apply(e,n))||(t.exports=o)},"1858b45bf48591489d06":function(t,e,i){"use strict";(function(n){var o,r,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a){var l="object"==("undefined"==typeof self?"undefined":s(self))&&self.self===self&&self||"object"==(void 0===n?"undefined":s(n))&&n.global===n&&n;o=[i("8e08e542008e4aef1f58"),i('external "jQuery"'),e],void 0===(r=function(t,e,i){l.Backbone=a(l,i,t,e)}.apply(e,o))||(t.exports=r)}(function(t,e,i,n){var o=t.Backbone,r=Array.prototype.slice;e.VERSION="1.3.3",e.$=n,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=function(t,e,n){i.each(e,function(e,o){i[o]&&(t.prototype[o]=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,o){return i[e](this[n],l(t,this),o)};case 4:return function(t,o,r){return i[e](this[n],l(t,this),o,r)};default:return function(){var t=r.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}}(e,o,n))})},l=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?d(t):i.isString(t)?function(e){return e.get(t)}:t},d=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},c=e.Events={},u=/\s+/,p=function t(e,n,o,r,a){var l,d=0;if(o&&"object"===(void 0===o?"undefined":s(o))){void 0!==r&&"context"in a&&void 0===a.context&&(a.context=r);for(l=i.keys(o);d<l.length;d++)n=t(e,n,l[d],o[l[d]],a)}else if(o&&u.test(o))for(l=o.split(u);d<l.length;d++)n=e(n,l[d],r,a);else n=e(n,o,r,a);return n};c.on=function(t,e,i){return h(this,t,e,i)};var h=function(t,e,i,n,o){if(t._events=p(f,t._events||{},e,i,{context:n,ctx:t,listening:o}),o){(t._listeners||(t._listeners={}))[o.id]=o}return t};c.listenTo=function(t,e,n){if(!t)return this;var o=t._listenId||(t._listenId=i.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),s=r[o];if(!s){var a=this._listenId||(this._listenId=i.uniqueId("l"));s=r[o]={obj:t,objId:o,id:a,listeningTo:r,count:0}}return h(t,e,n,this,s),this};var f=function(t,e,i,n){if(i){var o=t[e]||(t[e]=[]),r=n.context,s=n.ctx,a=n.listening;a&&a.count++,o.push({callback:i,context:r,ctx:r||s,listening:a})}return t};c.off=function(t,e,i){return this._events?(this._events=p(m,this._events,t,e,{context:i,listeners:this._listeners}),this):this},c.stopListening=function(t,e,n){var o=this._listeningTo;if(!o)return this;for(var r=t?[t._listenId]:i.keys(o),s=0;s<r.length;s++){var a=o[r[s]];if(!a)break;a.obj.off(e,n,this)}return this};var m=function(t,e,n,o){if(t){var r,s=0,a=o.context,l=o.listeners;if(e||n||a){for(var d=e?[e]:i.keys(t);s<d.length;s++){var c=t[e=d[s]];if(!c)break;for(var u=[],p=0;p<c.length;p++){var h=c[p];n&&n!==h.callback&&n!==h.callback._callback||a&&a!==h.context?u.push(h):(r=h.listening)&&0==--r.count&&(delete l[r.id],delete r.listeningTo[r.objId])}u.length?t[e]=u:delete t[e]}return t}for(var f=i.keys(l);s<f.length;s++)delete l[(r=l[f[s]]).id],delete r.listeningTo[r.objId]}};c.once=function(t,e,n){var o=p(g,{},t,e,i.bind(this.off,this));return"string"==typeof t&&null==n&&(e=void 0),this.on(o,e,n)},c.listenToOnce=function(t,e,n){var o=p(g,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,o)};var g=function(t,e,n,o){if(n){var r=t[e]=i.once(function(){o(e,r),n.apply(this,arguments)});r._callback=n}return t};c.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;n<e;n++)i[n]=arguments[n+1];return p(v,this._events,t,void 0,i),this};var v=function(t,e,i,n){if(t){var o=t[e],r=t.all;o&&r&&(r=r.slice()),o&&b(o,n),r&&b(r,[e].concat(n))}return t},b=function(t,e){var i,n=-1,o=t.length,r=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<o;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<o;)(i=t[n]).callback.call(i.ctx,r,s);return;case 3:for(;++n<o;)(i=t[n]).callback.call(i.ctx,r,s,a);return;default:for(;++n<o;)(i=t[n]).callback.apply(i.ctx,e);return}};c.bind=c.on,c.unbind=c.off,i.extend(e,c);var _=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var o=i.result(this,"defaults");n=i.defaults(i.extend({},o,n),o),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(_.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var o;if("object"===(void 0===t?"undefined":s(t))?(o=t,n=e):(o={})[t]=e,n||(n={}),!this._validate(o,n))return!1;var r=n.unset,a=n.silent,l=[],d=this._changing;this._changing=!0,d||(this._previousAttributes=i.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,p=this._previousAttributes;for(var h in o)e=o[h],i.isEqual(c[h],e)||l.push(h),i.isEqual(p[h],e)?delete u[h]:u[h]=e,r?delete c[h]:c[h]=e;if(this.idAttribute in o&&(this.id=this.get(this.idAttribute)),!a){l.length&&(this._pending=n);for(var f=0;f<l.length;f++)this.trigger("change:"+l[f],this,c[l[f]],n)}if(d)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,n={};for(var o in t){var r=t[o];i.isEqual(e[o],r)||(n[o]=r)}return!!i.size(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){var e=this,n=(t=i.extend({parse:!0},t)).success;return t.success=function(i){var o=t.parse?e.parse(i,t):i;if(!e.set(o,t))return!1;n&&n.call(t.context,e,i,t),e.trigger("sync",e,i,t)},$(this,t),this.sync("read",this,t)},save:function(t,e,n){var o;null==t||"object"===(void 0===t?"undefined":s(t))?(o=t,n=e):(o={})[t]=e;var r=(n=i.extend({validate:!0,parse:!0},n)).wait;if(o&&!r){if(!this.set(o,n))return!1}else if(!this._validate(o,n))return!1;var a=this,l=n.success,d=this.attributes;n.success=function(t){a.attributes=d;var e=n.parse?a.parse(t,n):t;if(r&&(e=i.extend({},o,e)),e&&!a.set(e,n))return!1;l&&l.call(n.context,a,t,n),a.trigger("sync",a,t,n)},$(this,n),o&&r&&(this.attributes=i.extend({},d,o));var c=this.isNew()?"create":n.patch?"patch":"update";"patch"!==c||n.attrs||(n.attrs=o);var u=this.sync(c,this,n);return this.attributes=d,u},destroy:function(t){var e=this,n=(t=t?i.clone(t):{}).success,o=t.wait,r=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){o&&r(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var s=!1;return this.isNew()?i.defer(t.success):($(this,t),s=this.sync("delete",this,t)),o||r(),s},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||P();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});a(_,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var y=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},w={add:!0,remove:!0,merge:!0},k={add:!0,remove:!1},C=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var n,o=Array(t.length-i),r=e.length;for(n=0;n<o.length;n++)o[n]=t[n+i];for(n=0;n<r;n++)t[n+i]=e[n];for(n=0;n<o.length;n++)t[n+r+i]=o[n]};i.extend(y.prototype,c,{model:_,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,k))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:t.slice();var o=this._removeModels(t,e);return!e.silent&&o.length&&(e.changes={added:[],merged:[],removed:o},this.trigger("update",this,e)),n?o[0]:o},set:function(t,e){if(null!=t){(e=i.extend({},w,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!i.isArray(t);t=n?[t]:t.slice();var o=e.at;null!=o&&(o=+o),o>this.length&&(o=this.length),o<0&&(o+=this.length+1);var r,s,a=[],l=[],d=[],c=[],u={},p=e.add,h=e.merge,f=e.remove,m=!1,g=this.comparator&&null==o&&!1!==e.sort,v=i.isString(this.comparator)?this.comparator:null;for(s=0;s<t.length;s++){r=t[s];var b=this.get(r);if(b){if(h&&r!==b){var _=this._isModel(r)?r.attributes:r;e.parse&&(_=b.parse(_,e)),b.set(_,e),d.push(b),g&&!m&&(m=b.hasChanged(v))}u[b.cid]||(u[b.cid]=!0,a.push(b)),t[s]=b}else p&&(r=t[s]=this._prepareModel(r,e))&&(l.push(r),this._addReference(r,e),u[r.cid]=!0,a.push(r))}if(f){for(s=0;s<this.length;s++)u[(r=this.models[s]).cid]||c.push(r);c.length&&this._removeModels(c,e)}var y=!1,k=!g&&p&&f;if(a.length&&k?(y=this.length!==a.length||i.some(this.models,function(t,e){return t!==a[e]}),this.models.length=0,C(this.models,a,0),this.length=this.models.length):l.length&&(g&&(m=!0),C(this.models,l,null==o?this.length:o),this.length=this.models.length),m&&this.sort({silent:!0}),!e.silent){for(s=0;s<l.length;s++)null!=o&&(e.index=o+s),(r=l[s]).trigger("add",r,this,e);(m||y)&&this.trigger("sort",this,e),(l.length||c.length||d.length)&&(e.changes={added:l,removed:c,merged:d},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return r.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){var e=(t=i.extend({parse:!0},t)).success,n=this;return t.success=function(i){var o=t.reset?"reset":"set";n[o](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},$(this,t),this.sync("read",this,t)},create:function(t,e){var n=(e=e?i.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;n||this.add(t,e);var o=this,r=e.success;return e.success=function(t,e,i){n&&o.add(t,i),r&&r.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;(e=e?i.clone(e):{}).collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var o=this.get(t[n]);if(o){var r=this.indexOf(o);this.models.splice(r,1),this.length--,delete this._byId[o.cid];var s=this.modelId(o.attributes);null!=s&&delete this._byId[s],e.silent||(e.index=r,o.trigger("remove",o,this,e)),i.push(o),this._removeReference(o,e)}}return i},_isModel:function(t){return t instanceof _},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,n),"change"===t){var o=this.modelId(e.previousAttributes()),r=this.modelId(e.attributes);o!==r&&(null!=o&&delete this._byId[o],null!=r&&(this._byId[r]=e))}}this.trigger.apply(this,arguments)}});a(y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var x=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,D)),this._ensureElement(),this.initialize.apply(this,arguments)},T=/^(\S+)\s*(.*)$/,D=["model","collection","el","id","attributes","className","tagName","events"];i.extend(x.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var o=e.match(T);this.delegate(o[1],o[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,o){var r=A[t];i.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:r,dataType:"json"};if(o.url||(s.url=i.result(n,"url")||P()),null!=o.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",o.emulateJSON&&(s.data._method=r);var a=o.beforeSend;o.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",r),a)return a.apply(this,arguments)}}"GET"===s.type||o.emulateJSON||(s.processData=!1);var l=o.error;o.error=function(t,e,i){o.textStatus=e,o.errorThrown=i,l&&l.call(o.context,t,e,i)};var d=o.xhr=e.ajax(i.extend(s,o));return n.trigger("request",n,d,o),d};var A={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,V=/(\(\?)?:\w+/g,O=/\*\w+/g,S=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(E.prototype,c,{initialize:function(){},route:function(t,n,o){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var r=this;return e.history.route(t,function(i){var s=r._extractParameters(t,i);!1!==r.execute(o,s,n)&&(r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),e.history.trigger("route",r,n,s))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(S,"\\$&").replace(M,"(?:$1)?").replace(V,function(t,e){return e?t:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var L=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,W=/#.*$/;L.started=!1,i.extend(L.prototype,c,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(I,"")},start:function(t){if(L.started)throw new Error("Backbone.history has already been started");if(L.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(N,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,o=n.insertBefore(this.iframe,n.firstChild).contentWindow;o.document.open(),o.document.close(),o.location.hash="#"+this.fragment}var r=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),L.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!L.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(W,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new L;_.extend=y.extend=E.extend=x.extend=L.extend=function(t,e){var n,o=this;return n=t&&i.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)},i.extend(n,o,e),n.prototype=i.create(o.prototype,t),n.prototype.constructor=n,n.__super__=o.prototype,n};var P=function(){throw new Error('A "url" property or function must be specified')},$=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e})}).call(e,i("698d75b157f24ae829cc"))},"20a5662e33e2c3e5a9d8":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i('external "jQuery"'),i("f562ab9f022eef93542c")],void 0===(o=function(t,e){e.widget("dcp.dcpWindow",{intervalId:0,options:{animation:{open:{effects:"fade:in",duration:1e3},close:{effects:"fade:out",duration:1e3}},actions:["Maximize","Close"],visible:!1,height:"300px",width:"400px",open:function(){if(!this.options.title)try{var i=this;void 0===this.element.find("iframe").contents().find("title").html()?t.defer(function(){var t="",n=i.element.find("iframe").contents();i.element.find("iframe").on("load",function(){try{var n=e(this).contents();i.setOptions({title:t}),n.find("body").addClass("window-dialog")}catch(t){}}),i.intervalId=window.setInterval(function(){try{var o=(n=i.element.find("iframe").contents()).find("title").html(),r=n.find('link[rel="shortcut icon"]').attr("href");o&&(n.find("body").addClass("window-dialog"),r&&(o='<img src="'+r+'" /> '+o),o!==t&&(t=o,e(i.element).closest(".k-window").find(".k-window-title").html(o)))}catch(t){}},1e3)}):i.setOptions({title:e(this).contents().find("title").html()})}catch(t){}},close:function(){window.clearInterval(this.intervalId)},destroy:function(){window.clearInterval(this.intervalId)}},currentWidget:null,_create:function(){this.currentWidget=e('<div class="dialog-window"/>'),this.element.append(this.currentWidget),this.element.data("dcpWindow",this),this.currentWidget.kendoWindow(this.options)},_getWindowTemplate:function(t){if(this.options.templateData&&this.options.templateData.templates&&this.options.templateData.templates.window&&this.options.templateData.templates.window[t])return this.options.templateData.templates.window[t];if(window.dcp&&window.dcp.templates&&window.dcp.templates.window&&window.dcp.templates.window[t])return window.dcp.templates.window[t];throw new Error("Unknown window template  "+t)},destroy:function(){window.clearInterval(this.intervalId),this.currentWidget&&this.currentWidget.data("kendoWindow")&&this.currentWidget.data("kendoWindow").destroy(),this._super()},open:function(){this.currentWidget.data("kendoWindow").open()},close:function(){window.clearInterval(this.intervalId),this.currentWidget.data("kendoWindow").close()},kendoWindow:function(){return this.currentWidget.data("kendoWindow")}})}.apply(e,n))||(t.exports=o)},"2396a71337586706882f":function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("bcd31d01884fc294fd69"),i("fde693488ffc947d1881"),i("35dd456a4962187f103a"),i("593c8c94ba4399020f79"),i("3e588fcfb2b891e35e39")],void 0===(o=function(t,e,i,n,o,r,s){return i.View.extend({className:"row dcpArray",displayLabel:!0,customView:!1,customRowView:!1,events:{dcparraylineadded:"addLine",dcparraylineremoved:"removeLine",dcparraylinemoved:"moveLine",dcparrayexternallinkselected:"externalLinkSelected","dcpattributechange .dcpArray__content__cell":"updateValue"},columnViews:{},initialize:function(t){!1!==t.displayLabel&&"none"!==this.model.getOption("labelPosition")||(this.displayLabel=!1),this.listenTo(this.model,"change:label",this.updateLabel),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"cleanView",this.remove),this.listenTo(this.model,"change:errorMessage",this.setArrayError),this.listenTo(this.model,"errorMessage",this.setError),this.listenTo(this.model,"hide",this.hide),this.listenTo(this.model,"show",this.show),this.listenTo(this.model,"removeWidgetLine",this.removeWidgetLine),this.listenTo(this.model,"addWidgetLine",this.addWidgetLine),this.listenTo(this.model,"haveView",this._identifyView),this.options=t},render:function(){var t=this;return new Promise(e.bind(function(i,n){var o,a=t.model.toData(null,!0),l={prevent:!1},d=[];if(t.model.trigger("beforeRender",l,{model:t.model,$el:t.$el}),l.prevent)return i(t),t;!0!==t.options.originalView&&t.model.getOption("template")&&(o=s.renderCustomView(t.model),t.customView=o.$el,o.promise.then(i),t.model.getOption("template").match("dcpArray__table")&&(t.customRowView=!0)),a.content=e.filter(a.content,function(t){return t.isDisplayable}),a.nbLines=t.getNbLines(),t.padValues(a.nbLines),a.renderOptions=t.model.getOptions(),a.templates={},a.displayLabel=t.displayLabel,t.model.getTemplates().attribute[t.model.get("type")]&&(a.templates=t.model.getTemplates().attribute[t.model.get("type")]),0===a.nbLines&&"read"===a.mode?a.showEmpty=t.model.getOption("showEmptyContent"):t.customView&&!t.customRowView||(t.columnViews=[],t.model.get("content").each(function(i){if(i.isDisplayable())try{i.getOption("attributeLabel")&&(a.content=e.map(a.content,function(t){return t.id===i.id&&(t.label=i.getOption("attributeLabel")),t})),i.get("isValueAttribute")&&(t.columnViews[i.id]=new r({el:t.el,els:function(){return t.$el.find('.dcpArray__cell[data-attrid="'+i.id+'"],.dcpCustomTemplate--row[data-attrid="'+i.id+'"]')},originalView:!0,model:i,parentElement:t.$el}),d.push(t.columnViews[i.id].render()))}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}})),t.customView&&(a.customTemplate=t.customView,a.customLineCallback=function(e){return s.customArrayRowView(e,t.model,t)});try{d.push(new Promise(e.bind(function(e,i){t.$el.dcpArray(a).one("dcparraywidgetready",e),s.insertDescription(t)},this)))}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}return Promise.all(d).then(function(){t.$el.attr("data-attrid",t.model.id),t.model.trigger("renderDone",{model:t.model,$el:t.$el}),i(t)}),this},this))},getNbLines:function(){var t=this.nbLines||0;return this.model.get("content").each(function(i){i.get("attributeValue")&&t<e.size(i.get("attributeValue"))&&(t=e.size(i.get("attributeValue")))}),t},padValues:function(t){t>0&&this.model.get("content").each(function(i){var n=i.get("attributeValue");if(null!==n&&void 0!==n&&e.size(n)<t)for(var o=n.length;o<t;o++)n.push({value:null,displayValue:""})})},updateLabel:function(){this.$el.find(".dcpArray__label").text(this.model.get("label"))},updateValue:function(t,e){var i=this.model.get("content").get(e.id);if(!i)throw new Error("Unknown attribute "+e.id);i.setValue(e.value,e.index)},refresh:function(){this.nbLines=this.$el.dcpArray("option","nbLines"),this.$el.dcpArray("destroy"),this.render()},removeLine:function(t,e){this.model.get("content").each(function(t){t.removeIndexValue(e.line)}),this.model.trigger("array","removeLine",this.model,e.line)},removeWidgetLine:function(t){this.$el.dcpArray("removeLine",t.index,{silent:!0})},addWidgetLine:function(t){this.$el.dcpArray("addLine",t.index)},addLine:function(i,n){var o=this,r=null,a=[];this.model.get("content").each(function(i){var l;(n.needAddValue||n.copyValue)&&i.createIndexedValue(n.line,n.copyValue),(l=o.columnViews[i.id])&&(r=null,i.getOption("template")&&(r=s.renderCustomView(i,function(){var o=t(this),r=l.getData(n.line);if(o.data("attrid")!==i.id)throw Error("An attribute template in an array cannot asked for another attribute than the current ("+o.data("attrid")+" asked instead of "+i.id+")");r.viewCid=e.uniqueId(r.viewCid),l.widgetInit(o,r),l.moveValueIndex({})},{index:n.line}),a.push(r.promise)),r&&r.$el?a.push(l.addNewWidget(n.line,r.$el)):a.push(l.addNewWidget(n.line)))}),Promise.all(a).then(e.bind(function(){this.model.trigger("array","addLine",this.model,n.line),n.resolve()},this)).catch(n.reject)},moveLine:function(t,e){this.model.get("content").each(function(t){t.moveIndexValue(e.fromLine,e.toLine)}),this.model.trigger("array","moveLine",this.model,e)},getAttributeModel:function(t){return this.model.getDocumentModel().get("attributes").get(t)},setError:function(t,e){var i=this.model.get("parent");if(e?this.$el.find(".dcpArray__label").addClass("has-error"):this.$el.find(".dcpArray__label").removeClass("has-error"),i){var n=this.getAttributeModel(i);n&&n.trigger("errorMessage",t,e)}},setArrayError:function(t,e){this.setError(t,e),this.$el.dcpArray("setError",e)},hide:function(){this.$el.hide()},show:function(){this.$el.show()},_identifyView:function(t){t.haveView=!0,t.elements=t.elements.add(this.$el)},externalLinkSelected:function(t,e){var i=this.model.getDocumentModel();if(e.attrid=this.model.id,this.model.trigger("internalLinkSelected",t,e),t.prevent)return this;i.trigger("actionAttributeLink",t,e)}})}.apply(e,n))||(t.exports=o)},"25094ffcb8bcd2bb587c":function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("f562ab9f022eef93542c")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e,i){return t.widget("dcp.dcpLabel",{options:{renderOptions:{helpLinkIdentifier:0},labels:{helpTitle:"Info"}},_create:function(){this._initDom(),this._initActionClickEvent()},_initDom:function(){this.element.addClass("dcpAttribute__label control-label dcpLabel"),this.element.append(i.render(this._getTemplate()||"",this.options)),this.options.renderOptions&&this.options.renderOptions.attributeLabel&&this.setLabel(this.options.renderOptions.attributeLabel)},_initActionClickEvent:function(){var e=this;this.element.on("click."+this.eventNamespace,'a[href^="#action/"], a[data-action], button[data-action]',function(i){var n,o,r,s=t(this);return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),n=s.data("action")||s.attr("href"),o=n.substring(8).split(":"),r={target:i.target,index:-1,eventId:o.shift(),options:o},e._trigger("externalLinkSelected",i,r),this})},setLabel:function(t){this.element.find("label").text(t)},setError:function(t){t?this.element.addClass("has-error"):this.element.removeClass("has-error")},_getTemplate:function(){if(this.options.templates&&this.options.templates.label)return this.options.templates.label;if(window.dcp&&window.dcp.templates&&window.dcp.templates.label)return window.dcp.templates.label;throw new Error("Unknown label template ")}}),t.fn.dcpLabel})},"278ba7757aa1904087c6":function(t,e,i){"use strict";var n,o,r;window.dcp=window.dcp||{},function(s,a){o=[i("6d281ded32c7dc89e58d")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t){return window.dcp.documentCatalog=t(window.dcp.i18n),window.dcp.documentCatalog})},"2b8c963e23b3e828472e":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i('external "jQuery"'),i("1858b45bf48591489d06"),i("bcd31d01884fc294fd69"),i("07b96fa8c545aab31dad"),i("0bd0aa4c1909a49f67bb")],void 0===(o=function(t,e,i,n,o){return o.extend({messages:[],templates:{htmlContent:'<div class="dcpTransition--content-activity" > <span class="dcpTransition--activity" style="border-color:{{transition.beginState.color}}">{{transition.beginState.displayValue}}</span><span class="dcpTransition--transition {{^transition.id}}dcpTransition--transition--invalid{{/transition.id}}" >{{transition.label}}</span><span class="dcpTransition--arrow"><span class="fa fa-caret-right fa-2x {{^transition.id}}dcpTransition--transition--invalid{{/transition.id}}"></span></span><span class="dcpTransition--activity" style="border-color:{{transition.endState.color}}">{{transition.endState.displayValue}}</span> </div>',htmlStateContent:'<div class="dcpTransition--content-activity"><span class="dcpTransition--success" >{{labels.success}}</span></div>',htmlStateButtons:'<button title="{{labels.close}}" class="dcpTransition-button-close btn btn-outline-secondary btn-sm">{{labels.close}} </button>',htmlLoading:'<div class="dcpTransition--loading"><span class="fa fa-2x fa-spinner fa-spin"></span> {{labels.inprogress}}</div>',htmlButtons:'{{#hasAttributes}}<button class="dcpTransition-button-cancel btn btn-outline-secondary btn-sm">{{labels.cancel}}</button><button title="{{transition.label}}" class="dcpTransition-button-ok btn {{#transition.id}}btn-primary{{/transition.id}}  {{^transition.id}}btn-danger{{/transition.id}} btn-sm">{{labels.confirm}}</button>{{/hasAttributes}}'},events:{"click .dcpTransition-button-ok ":"clickOnOk","click .dcpTransition-button-cancel":"clickOnCancel","click .dcpTransition-button-close":"clickOnClose"},initialize:function(t){o.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"showError",this.displayError),this.listenTo(this.model,"request",this.transitionDisplayLoading),this.listenTo(this.model,"hide",function(){this.$el.hide()}),this.listenTo(this.model,"show",function(){this.$el.show()}),this.listenTo(this.model,"close",function(){this.transitionWindow&&this.transitionWindow.close()}),this.options=t},remove:function(){this.transitionWindow&&this.transitionWindow.close(),o.prototype.remove.apply(this,arguments);var i=t.pluck(this.model.get("customCSS"),"key");i.length>0&&t.each(i,function(t){e('link[data-view=true][data-id="'+t+'"]').remove()})},displayError:function(i){var o,r=this.model.get("workflow"),s=this.model.get("attributes"),a=this.$el.find(".dcpTransition-button-ok"),l=this.$el.find(".dcpTransition-button-cancel");this.reactiveWidget(),t.isObject(i)&&(o="offline"===i.errorCode?'<div class="dcpTransition--error">{{{htmlMessage}}}</div>':'<div class="dcpTransition--error">{{title}} {{{htmlMessage}}}</div>',e(n.render(o||"",i)).insertBefore(this.$el.find(".dcpTransition--buttons"))),0===s.length?(a.hide(),l.text(r.labels.close)):a.text(r.labels.retry)},cleanAndRender:function(){var t=this.model.get("workflow"),e=t.transition,i=t.state;this.render(),this.displayMessages(this.model.get("messages")),this.clearError(),this.reactiveWidget(),!e&&i&&this.model.trigger("success",this.messages)},renderCss:function(){o.prototype.renderCss.apply(this,[!0])},updateTitle:function(){},updateIcon:function(){},clearError:function(){this.$el.find(".dcpTransition--error").remove()},reactiveWidget:function(){var t=this.model.get("workflow"),e=this.model.get("attributes"),i=this.$el.find(".dcpTransition--loading"),n=this.$el.find(".dcpTransition-button-ok"),o=this.$el.find(".dcpTransition-button-cancel");e.length>0&&(t&&t.labels.confirm&&n.text(t.labels.confirm),n.prop("disabled",!1)),o.prop("disabled",!1),this.$el.find(".dcpDocument--disabled").remove(),i.hide()},transitionDisplayLoading:function(){var t=this.$el.find(".dcpTransition--loading"),e=this.$el.find(".dcpTransition-button-ok"),i=this.$el.find(".dcpTransition-button-cancel");t.show(),this.clearError(),e.prop("disabled",!0),i.prop("disabled",!0)},displayMessages:function(i){var o=this,r=this.$el.find(".dcpTransition--messages");this.messages=[],t.each(i,function(t){r.append(e(n.render('<div class="dcpTransition--message dcpTransition--message--{{type}}">{{contentText}} {{{contentHtml}}}</div>',t))),o.messages.push({title:t.contentText,type:t.type,htmlMessage:t.contentHtml})})},render:function(){var i=this,r=this.model.get("workflow"),s=this.model.get("attributes"),a=r.transition,l=r.state;o.prototype.render.apply(this,arguments),r.hasAttributes=s.length>0,a?(this.$el.find(".dcpTransition--header").append(n.render(this.templates.htmlContent||"",r)),this.$el.find(".dcpTransition--messages").append(n.render(this.templates.htmlLoading||"",r)),this.$el.find(".dcpTransition--buttons").append(n.render(this.templates.htmlButtons||"",r)),this.$el.find(".dcpTransition-button-ok").tooltip(),0===s.length&&t.defer(function(){var e,n={prevent:!1};i.model.trigger("beforeChangeState",n),!1===n.prevent&&(e=i.model.save())&&e.then(function(){i.model.trigger("success",i.getMessages())}).fail(function(e,n,o){e.responseJSON?t.each(e.responseJSON.messages,function(t){i.displayError({title:t.contentText})}):o&&!o.title&&o.message?(o.title=o.message,i.displayError(o)):t.isString(o)&&i.displayError({title:o})})}),this.$el.attr("data-state",l.id),a.id&&this.$el.attr("data-transition",a.id),t.defer(function(){i.$el.find(".dcpTransition--activity").each(function(){i.$el.css("background-color")===e(this).css("border-color")&&e(this).css("border-color","")})})):l&&(this.$el.find(".dcpTransition--header").append(n.render(this.templates.htmlStateContent||"",r)),this.$el.find(".dcpTransition--buttons").append(n.render(this.templates.htmlStateButtons||"",r)),this.$el.find(".dcpTransition-button-close").tooltip()),this.transitionWindow||(this.transitionWindow=this.$el.dcpDialog({window:{height:"auto",close:function(t){var e={prevent:!1};i.model.trigger("beforeChangeStateClose",e),!1!==e.prevent&&t.preventDefault()}}}).data("dcpDialog"),this.$el.kendoWindow("title",r.transition.label),this.transitionWindow.open()),this.trigger("renderTransitionWindowDone")},clickOnOk:function(){var e,i={prevent:!1},n=this;this.model.trigger("beforeChangeState",i),!1===i.prevent&&(e=this.model.save())&&e.then(function(){n.model.trigger("success",n.getMessages())}).fail(function(e,i,o){e.responseJSON?t.each(e.responseJSON.messages,function(t){n.displayError({title:t.contentText})}):o&&!o.title&&o.message?(o.title=o.message,n.displayError(o)):t.isString(o)&&n.displayError({title:o})})},clickOnCancel:function(){this.transitionWindow.close()},clickOnClose:function(){this.transitionWindow.close()},getMessages:function(){var e=[];return t.each(this.model.get("messages"),function(t){e.push({type:t.type,title:t.contentText,htmlMessage:t.contentHtml})}),e}})}.apply(e,n))||(t.exports=o)},"2ea670d287981a202ee6":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06")],void 0===(o=function(t,e){return e.Model.extend({typeModel:"ddui:familyStructure",idAttribute:"familyId",url:function(){return t.template("api/v1/families/<%- familyId %>/views/structure")({familyId:this.get("familyId")})}})}.apply(e,n))||(t.exports=o)},"30f8a357b2168c64d123":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("bcd31d01884fc294fd69"),i("87c09356a22ec84292bb")],void 0===(o=function(t,e,i,n){return e.View.extend({className:"dcpDocument",events:{dcpmenuexternallinkselected:"externalLinkSelected"},menuModel:null,initialize:function(){this.listenTo(this.model.get("properties"),"change",this.updateWidget),this.listenTo(this.model.get("menus"),"change",this.updateWidget),this.listenTo(this.model.get("menus"),"reload",this.updateWidget),this.listenTo(this.model.get("attributes"),"changeMenuVisibility",this.changeVisibility),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"cleanView",this.remove),this.menuModel=this.model.get("menus")},render:function(){var e=this;return new Promise(t.bind(function(t,i){return e.$el.dcpMenu(e.model.toData()),e.refresh(),t(e)},this))},externalLinkSelected:function(t,e){var i={prevent:!1};return e.attrid=this.model.id,this.model.trigger("internalLinkSelected",i,e),t.prevent?this:(this.model.trigger("actionAttributeLink",i,e),this)},changeVisibility:function(t,e){var i,n=this.menuModel.get(e.id),o=!!e.onlyIfVisible;n&&(i=n.get("visibility"),o&&"hidden"===i||n.set("visibility",e.visibility))},updateWidget:function(){return this.$el.dcpMenu&&this._findWidgetName(this.$el)&&this.$el.dcpMenu("destroy"),this.render()},remove:function(){return this.$el.dcpMenu&&this._findWidgetName(this.$el)&&this.$el.dcpMenu("destroy"),e.View.prototype.remove.call(this)},_findWidgetName:function(e){return t.find(t.keys(e.data()),function(t){return-1!==t.indexOf("dcpDcp")})},refresh:function(){this.$el.dcpMenu&&this._findWidgetName(this.$el)&&this.$el.dcpMenu("updateResponsiveMenu")}})}.apply(e,n))||(t.exports=o)},"35dd456a4962187f103a":function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("bcd31d01884fc294fd69"),i("fde693488ffc947d1881"),i("593c8c94ba4399020f79")],void 0===(o=function(t,e,i,n,o,r){return o.extend({attributeEvents:function(){var t={};return this._mergeEvent(t,"delete","deleteValue"),this._mergeEvent(t,"changeattrmenuvisibility","changeMenuVisibility"),this._mergeEvent(t,"changeattrsvalue","changeAttributesValue"),this._mergeEvent(t,"fetchdocument","loadDocument"),this._mergeEvent(t,"externallinkselected","externalLinkSelected"),this._mergeEvent(t,"downloadfile","downloadFileSelect"),this._mergeEvent(t,"uploadfile","uploadFileSelect"),this._mergeEvent(t,"uploadfiledone","uploadFileDone"),this._mergeEvent(t,"anchorclick","anchorClick"),this.listenTo(this.model,"change:label",this.changeLabel),t},_mergeEvent:function(t,e,i){t["dcpattribute"+e+' .dcpArray__content__cell[data-attrid="'+this.model.id+'"]']=i},render:function(){var t=this;return!1===this.displayLabel?e.defer(function(){t.$el.find('.dcpArray__head__cell[data-attrid="'+t.model.id+'"]').hide()}):e.defer(function(){var e=t.$el.find('.dcpArray__head__cell[data-attrid="'+t.model.id+'"]');r.insertDescription(t,e)}),this.model.trigger("renderColumnDone",{model:this.model,$el:this.$el}),this},changeLabel:function(){this.$el.find('.dcpArray__head__cell[data-attrid="'+this.model.id+'"]').text(this.model.get("label"))},addNewWidget:function(i,n){return new Promise(e.bind(function(o,s){if(this.options){var a,l=this.options.parentElement.find('.dcpArray__content__cell[data-attrid="'+this.model.id+'"]'),d=this.getData(i),c={prevent:!1};if(l[i])try{if(a=t(l[i]),this.model.trigger("beforeRender",c,{model:this.model,$el:a,index:i}),c.prevent)return this;n?(a.append(n),this.model.trigger("renderDone",{model:this.model,$el:a,index:i}),this.moveValueIndex({}),o(a)):(a.one("dcpattributewidgetready .dcpAttribute__content",e.bind(function(){this.model.trigger("renderDone",{model:this.model,$el:a,index:i}),this.moveValueIndex({}),o()},this)),this.widgetInit(a,d),r.insertDescription(this,a.parent()))}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}}},this))},loadDocument:function(t,i){var n,o=i.tableLine,r=i.index,s=this.model.get("attributeValue")[o],a=this.model.getDocumentModel();if(n=e.isUndefined(r)?s.value:s[r].value,this.model.trigger("internalLinkSelected",t,{eventId:"document.load",target:t.target,attrid:this.model.id,options:[n,"!defaultConsultation"],index:i.index,row:o}),t.prevent)return this;a.fetchDocument({initid:n,revision:-1,viewId:"!defaultConsultation"})},hide:function(){this.getDOMElements().each(function(){var e=t(this),i=e.prop("tagName").toLowerCase();"td"!==i&&"th"!==i&&(e=e.closest("td.dcpArray__cell, th.dcpArray__head")),e.hide()}),this.$el.find('thead th[data-attrid="'+this.model.id+'"]').hide()},show:function(){this.getDOMElements().each(function(){var e=t(this),i=e.prop("tagName").toLowerCase();"td"!==i&&"th"!==i&&(e=e.closest("td.dcpArray__cell, th.dcpArray__head")),e.show()}),this.$el.find('thead th[data-attrid="'+this.model.id+'"]').show()}})}.apply(e,n))||(t.exports=o)},"37746b3b205813560cd8":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06")],void 0===(o=function(t,e){var i=t.template("api/v1/documents/<%- initid %>/locks/<%- type %>"),n=t.template("api/v1/documents/<%- initid %>/views/<%- viewId %>/locks/<%- type %>");return e.Model.extend({typeModel:"ddui:lock",idAttribute:"initid",viewId:"",url:function(){return this.get("viewId")?n({initid:this.get("initid"),type:this.get("type"),viewId:this.get("viewId")}):i({initid:this.get("initid"),type:this.get("type")})}})}.apply(e,n))||(t.exports=o)},"3e588fcfb2b891e35e39":function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("f562ab9f022eef93542c")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e,i){return t.widget("dcp.dcpArray",{options:{tools:!0,nbLines:0,renderOptions:{rowCountThreshold:-1,rowAddDisable:!1,rowDelDisable:!1,rowMoveDisable:!1,rowMinLimit:-1,rowMinDefault:0,rowMaxLimit:-1,collapse:!1,arrayBreakPoints:{transpositionRule:"@media (max-width: 768px)",upRule:"@media (max-width: 1200px)"}},displayLabel:!0,customTemplate:!1,labels:{closeErrorMessage:"Close message",limitMaxMessage:"Row count limit to {{limit}}",limitMinMessage:"Min row limit is {{limit}}"}},getSelectedLineElement:function(){return this.element.find(".dcpArray__content__line--selected.active")},getSelectedLineIndex:function(){var t=this.getSelectedLineElement().data("line");return e.isUndefined(t)||e.isNull(t)?null:t},_create:function(){this.options.tools="write"===this.options.mode&&"U"!==this.options.visibility,!0===this.options.renderOptions.rowAddDisable&&!0===this.options.renderOptions.rowDelDisable&&!0===this.options.renderOptions.rowMoveDisable&&(this.options.tools=!1),this.options.renderOptions.attributeLabel&&(this.options.label=this.options.renderOptions.attributeLabel),this.initializing=!0,this._initDom().then(e.bind(function(){this._trigger("widgetReady")},this)),this._initActionClickEvent(),this._bindEvents(),"collapse"===this.options.renderOptions.collapse&&this.toggleCollapse(null,!0),this.initializing=!1},_initDom:function(){return new Promise(e.bind(function(n,o){var r,s=this;if("read"===this.options.mode&&0===this.options.nbLines&&!0!==this.options.showEmpty)this.options.showEmpty&&(this.element.addClass("card card-default"),!1!==this.options.displayLabel&&(this.element.append(i.render(this._getTemplate("label")||"",this.options)),"left"===this.options.renderOptions.labelPosition&&this.element.find(".dcpLabel").addClass("dcpArray__label--left")),this.element.append(this.options.showEmpty));else{if(this.element.addClass("card card-default"),!1!==this.options.displayLabel&&this.element.append(i.render(this._getTemplate("label")||"",e.extend(this.options,{collapsable:"none"!==this.options.renderOptions.collapse,displayCount:this.options.renderOptions.rowCountThreshold>=0&&this.options.nbLines>=this.options.renderOptions.rowCountThreshold}))),this.options.customTemplate?(this.element.append(this.options.customTemplate),this.element.find(".dcpCustomTemplate table.dcpArray__table tbody tr").addClass("dcpArray__content__line"),this._indexLine(),this.element.find(".dcpArray__content__line").attr("data-attrid",this.options.id),this.element.find(".dcpCustomTemplate").addClass("dcpArray__content dcpArray__content--open")):(e.each(this.options.content,function(t){t.contentRenderOptions=t.renderOptions}),this.element.append(i.render(this._getTemplate("content")||"",this.options)),"write"===this.options.mode&&(this.element.find(".dcpArray__content").addClass("dcpArray--tooltips"),this.element.tooltip({selector:".dcpArray--tooltips .dcpArray__content__toolCell span, .dcpArray--tooltips .dcpArray__tools .dcpArray__button",placement:function(i,n){return e.delay(function(){t(n).tooltip("hide")},3e3),t(n).closest(".dcpArray__tools").length>0?"bottom":"top"},container:".dcpDocument",delay:{hide:0,show:500}}))),!1!==this.options.displayLabel){var a=this.options.renderOptions.labelPosition;"auto"!==a&&"left"!==a||(this.element.find(".dcpArray__label").addClass("dcpAttribute__left"),this.element.find(".dcpArray__content").addClass("dcpAttribute__right"),this.element.addClass("dcpArray--left")),this.element.find(".dcpAttribute__right").addClass("dcpAttribute__labelPosition--"+a),this.element.find(".dcpAttribute__left").addClass("dcpAttribute__labelPosition--"+a),this.element.addClass("dcpAttribute__labelPosition--"+a)}!0===this.options.renderOptions.rowAddDisable&&this.element.find(".dcpArray__button--add, .dcpArray__button--copy").hide(),(r=this.element.find(".dcpArray__table")).addClass("table table-condensed table-hover table-bordered responsive"),r.find("> tbody").addClass("dcpArray__body").attr("data-attrid",this.options.id),r.find("> thead").attr("data-attrid",this.options.id).find("tr").addClass("dcpArray__head").attr("data-attrid",this.options.id),"write"===this.options.mode&&!0!==this.options.renderOptions.rowMoveDisable&&(this.element.find("tbody").kendoDraggable({axis:"y",container:s.element.find("tbody"),filter:".dcpArray__content__toolCell__dragDrop",hint:function(e){var i=e.closest("tr"),n=i.width(),o=e.closest("table").attr("class");return s._hideTooltips(),s._disableTooltips(),t("<table/>").addClass("dcpArray__dragLine "+o).css("width",n).css("margin-left","-"+(e.offset().left-i.offset().left)+"px").append(i.clone())},dragstart:function(e){if(e.currentTarget){var i=t(e.currentTarget).closest("tr");i.css("opacity","0"),i.data("fromLine",i.data("line"))}},dragend:function(e){if(e.currentTarget){var i=t(e.currentTarget).closest("tr");i.css("opacity",""),s._trigger("lineMoved",{},{fromLine:i.data("fromLine"),toLine:i.data("line")})}s._enableTooltips()}}),this.element.find("tbody").kendoDropTargetArea({filter:'.dcpArray__content__line[data-attrid="'+this.options.id+'"]',dragenter:function(t){if(t.currentTarget){var e=t.draggable.currentTarget.closest("tr"),i=t.dropTarget;e.data("line")>i.data("line")?e.insertBefore(i):e.insertAfter(i),s._indexLine()}}})),this.element.on("click"+this.eventNamespace,".button-close-error",function(){s.element.find(".dcpArray__content table.table").tooltip("destroy")})}e.delay(e.bind(this._initCSSResponsive,this),10),this.addAllLines(this.options.nbLines).then(n).catch(o)},this))},_initActionClickEvent:function(){var e=this;this.element.on("click."+this.eventNamespace,'a[href^="#action/"], a[data-action], button[data-action]',function(i){var n,o,r,s=t(this);return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),n=s.data("action")||s.attr("href"),o=n.substring(8).split(":"),r={target:i.target,index:-1,eventId:o.shift(),options:o},e._trigger("externalLinkSelected",i,r),this})},_initCSSResponsive:function(){var n=0===t("html.k-ie9").length;if(this.element.append(i.render(this._getTemplate("responsive")||"",e.extend(this.options,{useTransposition:n}))),n){this.element.find("table.dcpArray__table").addClass("responsive");var o,r,s=e.map(this.element.find("table.responsive > thead th"),function(e,i){var n=t(e),o=n.find(".dcpArray__head__label");return 0===o.length&&(o=n),o.attr("data-responsiveKey","rk"+i),{key:o.attr("data-responsiveKey"),attrid:o.data("attrid"),label:o.text().trim()}});o="<style>"+this.options.renderOptions.arrayBreakPoints.transpositionRule+" { ",r=e.template(".dcpArray__content[data-attrid="+this.options.id+'] .dcpAttribute__content[data-responsiveKey=<%= key %>]:before { content: "<%= label %>"; }'),e.each(s,function(t){t.label=t.label.replace(/([\\"])/g,"\\$1").replace(/\n/g," "),o+=r(t)}),o+=" }</style>",this.element.append(o)}},_hideTooltips:function(){var t=this.element;t.find("[aria-describedby^=tooltip]").tooltip("hide"),e.delay(function(){t.find("[aria-describedby^=tooltip]").tooltip("hide")},500)},_disableTooltips:function(){this.element.find(".dcpArray__content").removeClass("dcpArray--tooltips")},_enableTooltips:function(){this.element.find(".dcpArray__content").addClass("dcpArray--tooltips")},_bindEvents:function(){var i=this;this.element.on("click"+this.eventNamespace,".dcpArray__content__toolCell__check input",function(){var e=t(this),n=e.closest(".dcpArray__content__line").hasClass("dcpArray__content__line--selected");i._hideTooltips(),i._unSelectLines(),n?(i.element.find(".dcpArray__copy").prop("disabled",!0),t(this).prop("checked",!1).removeAttr("checked")):(e.find(".fa-check").show(),e.closest(".dcpArray__content__line").addClass("dcpArray__content__line--selected active"),i.element.find(".dcpArray__copy").prop("disabled",!1),t(this).prop("checked",!0).attr("checked","checked"))}),this.element.on("click"+this.eventNamespace,".dcpArray__add",function(){var t=i.getSelectedLineIndex();i._hideTooltips(),(i.options.renderOptions.rowMaxLimit<0||i.options.nbLines<i.options.renderOptions.rowMaxLimit)&&(null===t||e.isUndefined(t)?(i.options.nbLines+=1,i.addLine(i.options.nbLines-1,{needAddValue:!0,useSelectedLine:!0})):(i.options.nbLines+=1,i.addLine(t,{needAddValue:!0,useSelectedLine:!0})))}),this.element.on("click"+this.eventNamespace,".dcpArray__copy",function(){var t=i.getSelectedLineIndex();i._hideTooltips(),(i.options.renderOptions.rowMaxLimit<0||i.options.nbLines<i.options.renderOptions.rowMaxLimit)&&(i.options.nbLines+=1,i.copyLine(t,{needAddValue:!0,useSelectedLine:!0}))}),this.element.on("click"+this.eventNamespace,".dcpArray__content__toolCell__delete button",function(){i._hideTooltips(),i.removeLine(t(this).closest(".dcpArray__content__line").data("line")),i.element.find(".dcpArray__copy").prop("disabled",!0)}),this.element.on("click"+this.eventNamespace,".dcpArray--collapsable",function(){i.toggleCollapse.apply(i)})},toggleCollapse:function(t,e){this._hideTooltips();var i=this.element.find(".dcpArray__content");this.element.find(".dcp__array__caret").toggleClass("fa-caret-right fa-caret-down"),i.toggleClass("dcpArray__content--open dcpArray__content--close"),e?i.hide():i.slideToggle(200)},redrawLabel:function(){this.element.find(".dcpArray__label").html(t(i.render(this._getTemplate("label")||"",e.extend(this.options,{displayCount:this.options.renderOptions.rowCountThreshold>=0&&this.options.nbLines>=this.options.renderOptions.rowCountThreshold}))).html())},setLines:function(t,i){return new Promise(e.bind(function(e,n){var o=[];if(this.initializing)e();else{var r,s=this.options.nbLines;if(t>s){for(r=0;r<t-s;r+=1)o.push(this.addLine(s+r,i));Promise.all(o).then(e).catch(n)}else if(t<s){for(r=0;r<s-t;r+=1)this.removeLine(this.options.nbLines-1,i);e()}}},this))},addAllLines:function(t){var i,n,o=[];for(this.element.find(".dcpArray__body").empty(),i=0;i<t;i+=1)this.addLine(i);if((n=Math.max(this.options.renderOptions.rowMinLimit,this.options.renderOptions.rowMinDefault))>0&&this.options.nbLines<n)for(i=this.options.nbLines;i<n;i+=1)o.push(this.addLine(i,{needAddValue:!0}));return Promise.all(o).then(e.bind(function(){this._trigger("linesGenerated")},this))},_getLineContent:function(n){var o="NULL LINE";return this.options.lineCid=e.uniqueId(this.options.id),this.options.customTemplate?((o=this.options.customLineCallback.apply(this,[n])).addClass("dcpArray__content__line"),o.attr("data-attrid",this.options.id)):o=t(i.render(this._getTemplate("line")||"",e.extend({lineNumber:n},this.options))),o.find(".dcpArray__content__toolCell").closest("td").addClass("dcpArray__toolCell"),!0===this.options.renderOptions.rowDelDisable&&o.find(".dcpArray__content__toolCell__delete").hide(),!0===this.options.renderOptions.rowMoveDisable&&o.find(".dcpArray__content__toolCell__dragDrop").hide(),e.each(o.find(">td"),function(e,i){t(e).find(".dcpArray__content__cell").attr("data-responsiveKey","rk"+i).closest("td").addClass("dcpArray__cell")}),o},_addNewLine:function(t,i){if(!e.isNumber(t))throw new Error("You need to indicate the line number");var n=this._getLineContent(t),o=[];return i&&i.useSelectedLine&&(o=this.getSelectedLineElement()),1===o.length?n.insertBefore(o):this.element.find(".dcpArray__body").append(n),this._indexLine(),this.redrawLabel(),this._activateRowLimits(),n},_activateRowLimits:function(){var e=this;this.options.renderOptions.rowMaxLimit>=0&&(this.options.nbLines>=this.options.renderOptions.rowMaxLimit?(this.element.find(".dcpArray__add, .dcpArray__copy").prop("disabled",!0),this.element.find(".dcpArray__button--add, .dcpArray__button--copy").each(function(){var n=t(this);n.data("originalTitle")||n.data("originalTitle",n.attr("title")),n.tooltip("hide").data("bs.tooltip",null),n.attr("title",i.render(e.options.labels.limitMaxMessage||"",{limit:e.options.renderOptions.rowMaxLimit}))})):(this.element.find(".dcpArray__add, .dcpArray__copy").prop("disabled",!1),this.element.find(".dcpArray__button--add, .dcpArray__button--copy").each(function(){t(this).tooltip("hide").data("bs.tooltip",null),t(this).attr("title",t(this).data("originalTitle"))}))),this.options.renderOptions.rowMinLimit>=0&&(this.options.nbLines<=this.options.renderOptions.rowMinLimit?(this.element.find(".dcpArray__content__toolCell__delete button").prop("disabled",!0),this.element.find(".dcpArray__content__toolCell__delete").each(function(){t(this).data("originalTitle")||t(this).data("originalTitle",t(this).attr("title")),t(this).tooltip("hide").data("bs.tooltip",null),t(this).attr("title",i.render(e.options.labels.limitMinMessage||"",{limit:e.options.renderOptions.rowMinLimit}))})):(this.element.find(".dcpArray__content__toolCell__delete button").prop("disabled",!1),this.element.find(".dcpArray__content__toolCell__delete").each(function(){t(this).tooltip("hide").data("bs.tooltip",null),t(this).attr("title",t(this).data("originalTitle"))})))},addLine:function(t,i){return new Promise(e.bind(function(n,o){var r=this._addNewLine(t,i);r&&!0!==(i=e.defaults(i||{},{silent:!1,needAddValue:!1})).silent&&this._trigger("lineAdded",{},{line:t,element:r,needAddValue:i.needAddValue,resolve:n,reject:o})},this))},copyLine:function(t,i){return new Promise(e.bind(function(e,n){var o=this._addNewLine(t,i);o&&this._trigger("lineAdded",{},{line:t,element:o,copyValue:!0})},this))},removeLine:function(t,e){e=e||{},this.element.find("[data-line="+t+"]").remove(),this._indexLine(),!0!==e.silent&&this._trigger("lineRemoved",{},{line:t}),this.redrawLabel(),this._activateRowLimits()},_destroy:function(){var t=this.element.find("tbody");t&&t.data("kendoDropTargetArea")&&t.data("kendoDropTargetArea").destroy(),t&&t.data("kendoDraggable")&&t.data("kendoDraggable").destroy(),this.element.empty(),this._super()},_indexLine:function(){var e=0;this.element.find(".dcpArray__content__line").each(function(){t(this).attr("data-line",e).data("line",e),e+=1}),this.options.nbLines=e},_unSelectLines:function(){this.element.find(".dcpArray__content__toolCell__check .fa-check").hide(),this.element.find(".dcpArray__content__line--selected").removeClass("dcpArray__content__line--selected active")},setError:function(e){var i=this,n=this.element.find(".dcpArray__content table.table");e?n.tooltip({placement:"top",trigger:"manual",animation:!1,html:!0,title:function(){var n=t("<div/>").text(e).html();return'<div><span title="'+i.options.labels.closeErrorMessage+'" class="btn fa fa-times button-close-error"> XY &nbsp;</span>'+i.options.id+n+"</div>"}}).one("shown.bs.tooltip",function(){var e=t(this).data("bs.tooltip").tip;e&&t(e).addClass("has-error")}).tooltip("show").addClass("dcpArray--error"):n.tooltip("hide").removeClass("dcpArray--error")},_getTemplate:function(t){if(this.options.templates&&this.options.templates[t])return this.options.templates[t];if(window.dcp&&window.dcp.templates&&window.dcp.templates[this.getType()]&&window.dcp.templates[this.getType()][t])return window.dcp.templates[this.getType()][t];if(window.dcp&&window.dcp.templates&&window.dcp.templates.default&&window.dcp.templates.default[t])return window.dcp.templates.default[t];throw new Error("Unknown template  "+t+"/"+this.options.type)},getType:function(){return"array"}}),t.fn.dcpArray})},"3fc27e9e68117b665919":function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("20a5662e33e2c3e5a9d8")],void 0===(o=function(t,e,i){t.widget("dcp.dcpConfirm",t.dcp.dcpWindow,{options:{modal:!0,templateData:{templates:{window:{confirm:'<div class="confirm--body"> <div class="confirm--content">  <div>{{messages.textMessage}}</div><div>{{{messages.htmlMessage}}}</div> </div> <div class="confirm--buttons"> <button class="button--cancel" type="button">{{messages.cancelMessage}}</button> <button class="button--ok k-primary" type="button">{{messages.okMessage}}</button> </div> </div>'}}},messages:{textMessage:"Are you sure ?",htmlMessage:"",okMessage:"Ok",cancelMessage:"Cancel"},cancel:function(){},confirm:function(){},actions:["Close"],height:"150px"},_create:function(){var n=this,o=e.bind(this.options.cancel,this);this.options.close=o,this.options.templateData.messages=this.options.messages||[],this.currentWidget=t(i.render(this._getWindowTemplate("confirm")||"",this.options.templateData)),this.element.append(this.currentWidget),this.currentWidget.kendoWindow(this.options),this.currentWidget.data("kendoWindow").center(),this.currentWidget.find(".button--cancel").kendoButton({click:function(){o(),n.destroy()}});var r=e.bind(this.options.confirm,this);this.currentWidget.find(".button--ok").kendoButton({click:function(){r(),n.destroy()}}),this.element.data("dcpWindow",this)}})}.apply(e,n))||(t.exports=o)},"44a0b71fc2e02754c2f8":function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("61b480911316cdda77a4")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e){return t.widget("dcp.dcpLongtext",t.dcp.dcpText,{options:{type:"longtext",renderOptions:{displayedLineNumber:5}},_initDom:function(){var t=this.options.renderOptions.displayedLineNumber;this._super(),this._maxLinesNumber(t)},_initEvent:function(){"write"===this.getMode()&&this._initAutoFit(),this._super()},_maxLinesNumber:function(t){if((t=parseInt(t,10))>0){var i=this;e.defer(function(){var e=i.getContentElements(),n=parseFloat(e.css("padding-top"))+parseFloat(e.css("padding-bottom")),o=e.css("line-height");o&&(o.indexOf("px")>0?e.css("max-height",t*parseFloat(o)+n+"px"):e.css("max-height",1.1*t+"em"))})}},_getFocusInput:function(){return this.element.find('textarea[name="'+this.options.id+'"]')},_fitToContent:function(t){var e=parseFloat(t.css("padding-top"))+parseFloat(t.css("padding-bottom")),i=t.get(0),n=parseFloat(t.css("max-height"));i&&i.scrollHeight>i.clientHeight&&(t.height(i.scrollHeight-e+1),n>0&&(i.scrollHeight>n?t.css("resize","none"):t.css("resize","")))},_initAutoFit:function(){var i=this;e.defer(function(){i._fitToContent(i.getContentElements())}),this.getContentElements().on("keyup"+this.eventNamespace,function(e){i._fitToContent(t(this))}).on("focus"+this.eventNamespace,function(e){i._fitToContent(t(this))}),this.element.on("show"+this.eventNamespace,function(t){i._fitToContent(i.getContentElements())})},getType:function(){return"longtext"}}),t.fn.dcpLongtext})},"4eae4dcce004a8d344d8":function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("bcd31d01884fc294fd69"),i("593c8c94ba4399020f79")],void 0===(o=function(t,e,i,n,o){return i.View.extend({tagName:"li",className:"dcpTab__label dcpLabel",events:{'click a[href^="#action/"], a[data-action], button[data-action]':"externalLinkSelected"},displayLabel:!0,initialize:function(t){!1!==t.displayLabel&&"none"!==this.model.getOption("labelPosition")||(this.displayLabel=!1),this.listenTo(this.model,"change:label",this.updateLabel),this.listenTo(this.model.get("content"),"add",this.render),this.listenTo(this.model.get("content"),"remove",this.render),this.listenTo(this.model.get("content"),"reset",this.render),this.listenTo(this.model,"errorMessage",this.setError),this.listenTo(this.model,"change:errorMessage",this.setError),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"cleanView",this.remove),this.listenTo(this.model,"hide",this.hide),this.listenTo(this.model,"show",this.show)},render:function(){var e=this.model.get("label"),i=this.model.getOption("tooltipLabel"),r=this.model.attributes,s=this.model.getOption("helpLinkIdentifier");this.model.getDocumentModel();return this.$el.empty(),!1!==this.displayLabel&&(this.model.getOption("attributeLabel")&&(e=this.model.getOption("attributeLabel")),s?this.$el.append(n.render('<span class="dcpLabel__text">{{label}} <a class="dcpLabel__help__link" href="#action/document.help:{{helpId}}:{{attrid}}"><span class="fa fa-question-circle"></span></a></span>',{helpId:s,attrid:this.model.id,label:e})):this.$el.html(t('<span class="dcpLabel__text" />').text(e)),o.insertDescription(this),i&&(i=n.render(i||"",r),this.model.getOption("tooltipHtml")||(i=t("<div/>").text(i).html()),this.$el.data("tooltipLabel",n.render(i||"",r)),this.$el.tooltip({placement:"top",container:".dcpDocument",html:!0,title:function(){return t(this).find(".k-input.dcpTab__label__select").length>0?t(this).data("tooltipLabelSelect"):t(this).data("tooltipLabel")}}))),this.$el.attr("data-attrid",this.model.id),this},setError:function(t,e){e?this.$el.addClass("has-error"):this.$el.removeClass("has-error")},updateLabel:function(){this.$el.text(this.model.get("label"))},hide:function(){this.$el.hide()},show:function(){this.$el.show()},externalLinkSelected:function(e){var i,n,o,r,s=t(e.currentTarget),a={prevent:!1};return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),i=s.data("action")||s.attr("href"),n=i.substring(8).split(":"),o={target:e.target,index:scopeWidget._getIndex(),eventId:n.shift(),options:n},r=this.model.getDocumentModel(),this.model.trigger("internalLinkSelected",a,o),e.prevent?this:(r.trigger("actionAttributeLink",a,n),this)}})}.apply(e,n))||(t.exports=o)},"512dac7279589ee7db96":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("0a26bdc45fd66878f3b9"),i("72eda5b0d863ce233971")],void 0===(o=function(t,e,i){return e.extend({typeModel:"ddui:structureAttribute",defaults:{content:[]},setContentCollection:function(e){var n=new i;t.each(e,function(t){n.push(t)}),this.set("content",n)}})}.apply(e,n))||(t.exports=o)},"568d4145cebb6959279c":function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bd13ec831aaf61fba460")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e){return t.widget("dcp.dcpTime",t.dcp.dcpDate,{options:{type:"time",renderOptions:{kendoTimeConfiguration:{timeDataFormat:["HH:mm","HH:mm:ss"]}}},kendoWidgetClass:"kendoTimePicker",_initDom:function(){this.options.renderOptions.kendoTimeConfiguration.format&&(this.options.attributeValue.displayValue=this.formatDate(this.parseDate(this.options.attributeValue.value))),this._super()},_activateDate:function(t){var e=this,i=this.getKendoOptions();i.change=function(){var i=e.convertDateToPseudoIsoString(this.value());e.setValue({value:i,displayValue:t.val()})},t.kendoTimePicker(i),this._controlDate(t),this.options.attributeValue&&this.options.attributeValue.value&&this.setValue(this.options.attributeValue)},setValue:function(i){if(i=e.clone(i),e.has(i,"value")&&!e.has(i,"displayValue")&&(i.displayValue=this.formatDate(this.parseDate(i.value))),t.dcp.dcpAttribute.prototype.setValue.call(this,i),"write"===this.getMode())this.convertDateToPseudoIsoString(this.kendoWidget.data(this.kendoWidgetClass).value())!=i.value&&(i.value?this.kendoWidget.data(this.kendoWidgetClass).value(i.value):this.getContentElements().val(""),this.flashElement());else{if("read"!==this.getMode())throw new Error("Attribute "+this.options.id+" unkown mode "+this.getMode());this.getContentElements().text(i.displayValue)}},getValue:function(){var t=this._super();return t.value&&e.isDate(t.value)&&(t.value=this.convertDateToPseudoIsoString(t.value)),t},convertDateToPseudoIsoString:function(t){return e.isDate(t)?this.padNumber(t.getHours())+":"+this.padNumber(t.getMinutes()):""},formatDate:function(t){return this.options.renderOptions.kendoTimeConfiguration.format?kendo.toString(t,this.options.renderOptions.kendoTimeConfiguration.format):kendo.toString(t,"T")},parseDate:function(t){return kendo.parseDate(t,this.options.renderOptions.kendoTimeConfiguration.timeDataFormat)},getKendoOptions:function(){var t={},i={min:this.options.minDate};return e.isObject(this.options.renderOptions.kendoTimeConfiguration)&&(t=this.options.renderOptions.kendoTimeConfiguration),e.extend(i,t)},getType:function(){return"time"}}),t.fn.dcpTime})},"570ca0403ab6bea71f8b":function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("f562ab9f022eef93542c")],void 0===(o=function(t,e){t.widget("dcp.dcpLoading",{pc:0,rest:0,restItem:0,currentWidget:null,doneItems:0,original:null,_create:function(){this.stack=0,this.initBar=this.element.find(".progress"),this.$title=this.element.find(".dcpLoading--title"),this.$header=this.element.find(".dcpLoading--header")},reset:function(){this.initBar.show()},setTitle:function(t){this.element.find(".dcpLoading--title").html(t)},isDisplayed:function(){return this.stack>0},hide:function(t){if(this.stack-=1,!t&&this.stack>0)return this;this.stack=0,this.element.hide(),this.element.removeClass("dcpLoading--hide"),this.setPercent(0)},show:function(t,e){this.stack+=1,t&&this.setLabel(t),e&&this.setPercent(e),this.element.show(),this.$header.show().removeClass("dcpLoading--hide")},setLabel:function(t){t?this.$title.text(t):this.$header.addClass("dcpLoading--hide")},setPercent:function(t){var e=this.initBar.find(".progress-bar"),i=Math.round(t);this.pc=t,window&&window.requestAnimationFrame&&window.requestAnimationFrame(function(){e.css("width",i+"%")})},setNbItem:function(t){this.rest=100-this.pc,this.restItem=t},addItem:function(t){t=t||1,t=parseInt(t,10),this.doneItems+=t;var e=this.rest/this.restItem*t;this.setPercent(this.pc+e)},_destroy:function(){this._trigger("destroy"),this._super()}})}.apply(e,n))||(t.exports=o)},"593c8c94ba4399020f79":function(t,e,i){"use strict";var n;void 0===(n=function(t){var e=i("8e08e542008e4aef1f58"),n=i('external "jQuery"'),o=i("bcd31d01884fc294fd69");return{customLineTemplate:"",getTemplateModelInfo:function(t){var i=t.getDocumentData(),n={properties:i.properties,attributes:{}},o=this;return n.properties.isWriteMode="edit"===n.properties.renderMode,n.properties.isReadMode="view"===n.properties.renderMode,e.each(i.attributeValues,function(t,e){n.attributes[e]={attributeValue:t}}),e.each(i.attributeLabels,function(i,r){var s=t.get("attributes").get(r);s.getOption("attributeLabel")&&(i=s.getOption("attributeLabel")),n.attributes[r]?n.attributes[r].label=i:n.attributes[r]={label:i},n.attributes[r].id=r,n.attributes[r].isEmpty=o._isEmptyAttribute(s),n.attributes[r].htmlContent=e.bind(o.getCustomTemplate,o,s,!1,!1),n.attributes[r].htmlView=e.bind(o.getCustomTemplate,o,s,!0,!1),n.attributes[r].htmlDefaultContent=e.bind(o.getCustomTemplate,o,s,!1,!0),n.attributes[r].htmlDefaultView=e.bind(o.getCustomTemplate,o,s,!0,!0),n.attributes[r].isReadMode="read"===s.get("mode"),n.attributes[r].isWriteMode="write"===s.get("mode"),n.attributes[r].renderOptions=s.getOptions(),"array"===s.get("type")&&(n.attributes[r].toolsEnabled=n.attributes[r].isWriteMode&&"U"!==s.get("visibility")&&(!0!==s.getOption("rowAddDisable")||!0!==s.getOption("rowDelDisable")||!0!==s.getOption("rowMoveDisable")),n.attributes[r].rows=e.bind(o.getArrayRowInfo,o,s),n.attributes[r].tableTools=e.bind(o.getArrayTools,o,s))}),n},_isEmptyAttribute:function(t){var i=this;if(t.get("isValueAttribute")){var n=t.get("attributeValue");return e.isEmpty(n)||""===n.value||null===n.value}return!t.get("content")||0===t.get("content").length||(t.get("content").some?!t.get("content").some(function(t){return!i._isEmptyAttribute(t)}):void 0)},getTemplateInfo:function(t){var i=this.getTemplateModelInfo(t.getDocumentModel()),n=t.id,o=t.getOption("templateKeys");if(i.attribute=i.attributes[n],o){var r=e.clone(o);r.attribute&&r.attribute.rows&&(r.attribute=e.clone(o.attribute),delete r.attribute.rows),i=this._deepExtend(i,r)}return i},_deepExtend:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(i in t?this._deepExtend(t[i],e[i]):t[i]=e[i]);return t},renderCustomView:function(t,i,r){var s,a,l='<div class="dcpCustomTemplate" data-attrid="'+t.id+'">'+t.getOption("template")+"</div>",d=this.getTemplateInfo(t);return r&&!e.isUndefined(r.index)&&r.index>=0&&(d.attribute.attributeValue=d.attribute.attributeValue[r.index]),s=n(o.render(l||"",d)),a=this.completeCustomContent(s,t.getDocumentModel(),i,r),{$el:s,promise:a}},completeCustomContent:function(t,o,r,s){var a=[];return t.find(".dcpCustomTemplate--content").each(function(){var t=n(this).data("attrid"),l=!0===n(this).data("displaylabel"),d=o.get("attributes").get(t),c="NO VIEW FOR "+t,u="",p=null,h=!0===n(this).data("originalview");if(d)if(e.isFunction(r))r.apply(n(this)),c="";else try{switch(d.get("type")){case"array":p=i("2396a71337586706882f");break;case"tab":p=i("b3a839c4520ca8b4b597");break;case"frame":p=i("7a4c946b6dd0337fa34b");break;default:p=i("fde693488ffc947d1881")}if(d.getOption("template")||(h=!0),!1===h&&!0===d.customViewRended)throw new Error('Cannot use "htmlView" / "htmlContent" for itself on own custom view for '+d.id+'. Use "htmlDefaultView" / "htmlDefaultContent" instead');!1===h&&(d.customViewRended=!0),u=new p({model:d,originalView:h,initializeContent:s&&s.initializeContent||!1,displayLabel:l}),a.push(u.render()),c=u.$el}catch(t){c=n("<div/>").addClass("bg-danger").text(t.message)}n(this).append(c)}),Promise.all(a)},getLineInfo:function(t,i){var n=t.getDocumentModel().getDocumentData(),o=this.getTemplateInfo(t),r=t.getOption("templateKeys");return e.each(n.attributeLabels,function(e,i){"array"===t.getDocumentModel().get("attributes").get(i).get("type")&&(o.attributes[i].rows=[],o.attributes[i].tableTools="NO TABLE TOOL ALLOWED HERE")}),o.rowTools=this.getRowTool(t),o.content={},t.get("content").each(function(t){var e=t.id,i=t.get("label");t.isDisplayable()&&(t.getOption("attributeLabel")&&(i=t.getOption("attributeLabel")),o.content[e]={},o.content[e].attributeValue={value:null,displayValue:""},o.content[e].label=i,o.content[e].htmlContent='<div class="dcpCustomTemplate--row dcpArray__content__cell dcpAttribute__content" data-displaylabel="false" data-attrid="'+e+'"/>')}),r&&r.attribute&&r.attribute.rows&&e.each(r.attribute.rows,function(t,e){o[e]=t[i]}),o},extractRow:function(t){var e,i=this;return e={attribute:{rows:function(){return function(t){i.customLineTemplate=t.trim()}}}},e.attributes={},e.attributes[t.id]=e.attributes,e},customArrayRowView:function(t,e){return o.render(e.getOption("template")||"",this.extractRow(e)),n(o.render(this.customLineTemplate||"",this.getLineInfo(e,t)))},getCustomTemplate:function(t,e,i){return'<div class="dcpCustomTemplate--content '+(e?"dcpCustomTemplate--content--view":"dcpCustomTemplate--content--value")+'" data-displaylabel="'+(e?"true":"false")+'" data-originalview="'+(i?"true":"false")+'" data-attrid="'+t.id+'"/>'},getArrayTools:function(t){var e=t.getTemplates().attribute[t.get("type")];return e&&e.content?n(o.render(e.content||"",{tools:!0})).find(".dcpArray__tools").get(0).outerHTML:"no tools"},getRowTool:function(t){var i=t.getTemplates().attribute[t.get("type")],r="";return i&&i.line&&(r=n(o.render(i.line||"",{tools:!0,lineCid:e.uniqueId(t.id)})).find(".dcpArray__toolCell").html()),r},getArrayRowInfo:function(t){var i=[],n=this.getRowTool(t);return t.get("content").each(function(t){var o,r=t.id,s=t.get("label");t.isDisplayable()&&(t.getOption("attributeLabel")&&(s=t.getOption("attributeLabel")),o=t.get("attributeValue"),e.each(o,function(o,a){e.isUndefined(i[a])&&(i[a]={content:{}}),i[a].index=a,i[a].content[r]={label:s,attributeValue:o,htmlContent:'<div class="dcpCustomTemplate--row dcpArray__content__cell dcpAttribute__content"  data-attrid="'+t.id+'"/>'},i[a].rowTools=n}))}),i},renderClickDesc:function(t,e){t.on("click"+e,function(t){t.stopPropagation(),n(this).tooltip("toggle")}).one("show.bs.tooltip",function(){var t=n(this).data("bs.tooltip").tip;t&&n(t).addClass("dcpAttribute__description-info")}).one("shown.bs.tooltip",function(){var t=n(this).data("bs.tooltip").tip;t&&(n(t).find(".tooltip-inner").prepend('<span class="btn btn-secondary button-close-error"><span class="fa fa-times" />&nbsp;</span>'),n(t).on("click"+e,".button-close-error",function(e){e.stopPropagation(),n(t).tooltip("hide")}))})},insertDescription:function(t,e){var i=t.model.toData(null,!0);if(i.renderOptions.description){var r,s,a,l=".v"+t.model.cid,d=e||t.$el,c=d.hasClass("dcpFrame"),u=d.hasClass("dcpArray"),p=d.hasClass("dcpArray__head__cell"),h=d.hasClass("dcpArray__cell"),f=d.hasClass("dcpAttribute"),m=d.hasClass("dcpTab__content"),g=d.hasClass("dcpTab__label");if(r=t.model.getTemplates().attribute.description,i.renderOptions.description.htmlContentRender=o.render(i.renderOptions.description.htmlContent,i),i.renderOptions.description.htmlTitleRender=o.render(i.renderOptions.description.htmlTitle,i),a=n(o.render(r||"",i)),c)switch(i.renderOptions.description.position){case"bottom":d.append(a);break;case"top":case"topLabel":d.prepend(a);break;case"left":d.find(".dcpFrame__content").addClass("dcpFrame__content--left-description"),a.insertAfter(d.find(".dcpFrame__label"));break;case"right":d.append(a),d.find(".dcpFrame__content").addClass("dcpFrame__content--right-description");break;case"bottomLabel":a.insertAfter(d.find(".dcpFrame__label"));break;case"topValue":d.find(".dcpFrame__content").prepend(a);break;case"bottomValue":d.find(".dcpFrame__content").append(a);break;case"click":d.append(a),d.find(".dcpFrame__label").prepend('<a class="dcpAttribute__label_description"><span class="fa fa-info-circle"></span></a>'),s=d.find(".dcpFrame__label > .dcpAttribute__label_description").tooltip({html:!0,container:d,title:a,placement:"auto",trigger:"manual"}),this.renderClickDesc(s,l)}if(m||g)switch(i.renderOptions.description.position){case"top":case"topValue":m&&d.prepend(a);break;case"bottom":case"bottomValue":m&&d.append(a);break;case"click":g&&(d.append(a),d.find(".dcpLabel__text").prepend('<a class="dcpAttribute__label_description"><span class="fa fa-info-circle"></span></a>'),s=d.find(".dcpAttribute__label_description").tooltip({html:!0,container:".dcpDocument",title:a,placement:"auto",trigger:"manual"}),this.renderClickDesc(s,l));break;case"bottomLabel":case"topLabel":case"left":case"right":console.error('Cannot use "'+i.renderOptions.description.position+'" description position in tab attribute : '+i.id)}if(u)switch(i.renderOptions.description.position){case"top":d.prepend(a);break;case"topLabel":d.find(".dcpArray__label").prepend(a);break;case"bottomLabel":d.find(".dcpArray__label").append(a);break;case"topValue":d.find(".dcpArray__content").prepend(a);break;case"bottomValue":a.insertAfter(d.find(".dcpArray__table"));break;case"bottom":d.append(a);break;case"click":d.append(a),d.find(".dcpArray__label").prepend('<a class="dcpAttribute__label_description"><span class="fa fa-info-circle"></span></a>'),s=d.find(".dcpArray__label > .dcpAttribute__label_description").tooltip({html:!0,container:d,title:a,placement:"auto",trigger:"manual"}),this.renderClickDesc(s,l);break;case"left":case"right":console.error('Cannot use "'+i.renderOptions.description.position+'" description position in array attribute : '+i.id)}if(f)switch(i.renderOptions.description.position){case"bottom":d.append(a);break;case"top":d.prepend(a);break;case"left":d.find(".dcpAttribute__label").append(a);break;case"right":d.find(".dcpAttribute__content").append(a);break;case"topValue":d.prepend(a),a.addClass("dcpAttribute__right");break;case"topLabel":d.prepend(a),a.addClass("dcpAttribute__left");break;case"bottomValue":d.append(a),a.addClass("dcpAttribute__right");break;case"bottomLabel":d.append(a),a.addClass("dcpAttribute__left");break;case"click":d.append(a),d.find(".dcpAttribute__label").append('<a class="dcpAttribute__label_description"><span class="fa fa-info-circle"></span></a>'),s=d.find(".dcpAttribute__label_description").tooltip({html:!0,container:d,placement:"auto",title:a,trigger:"manual"}),this.renderClickDesc(s,l)}if(h||p)switch(i.renderOptions.description.position){case"topLabel":case"top":p&&d.prepend(a);break;case"topValue":h&&d.prepend(a);break;case"bottomValue":h&&d.append(a);break;case"bottom":case"bottomLabel":p&&d.append(a);break;case"click":p&&(d.append(a),d.prepend('<a class="dcpAttribute__label_description"><span class="fa fa-info-circle"></span></a>'),s=d.find(".dcpAttribute__label_description").tooltip({html:!0,container:d,placement:"auto",title:d.find("> .dcpAttribute__description"),trigger:"manual"}),this.renderClickDesc(s,l));break;case"left":case"right":console.error('Cannot use "'+i.renderOptions.description.position+'" description position in column attribute : '+i.id)}i.renderOptions.description.htmlContent&&(d.on("click"+l,".dcpAttribute__description__title",function(){var t=n(this).closest(".dcpAttribute__description").find(".dcpAttribute__description__content");n(this).find(".dcpAttribute__description__title__expand").toggleClass("fa-caret-right fa-caret-down"),t.slideToggle(200)}),!0===i.renderOptions.description.collapsed&&(d.find(".dcpAttribute__description__title__expand").toggleClass("fa-caret-right fa-caret-down"),d.find(".dcpAttribute__description__content").hide()))}}}}.call(e,i,e,t))||(t.exports=n)},"5d1c50599007150199da":function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("f562ab9f022eef93542c"),i("0bd0aa4c1909a49f67bb")],void 0===(o=function(t,e,n){t.widget("dcp.dcpRevisionDiff",t.dcp.dcpDialog,{options:{documentId:0,firstRevision:0,secondRevision:0,window:{modal:!0,animation:{open:{effects:"fade:in",duration:1e3},close:{effects:"fade:out",duration:1e3}},actions:["Maximize","Close"],visible:!1,height:"300px",width:"500px",title:"Document difference"},labels:{first:"First document",second:"Second document",attributeId:"Attribute id",attributeLabel:"Attribute label",documentHeader:'"{{title}}"  (Revision : {{revision}}). <br/>Created on <em>{{revdate}}</em>',filterMessages:"Filter data",showOnlyDiff:"Show only differences",showAll:"Show all"}},firstDocument:null,secondDocument:null,_create:function(){var e=this,n=t(this);this.element.html(this.htmlCaneva()),i.e("ensureDatatables").then(function(){var t=[i("7006cf2c262b498f6c83")];(function(){i("ac0cf2e8e04136065d45"),i("7006cf2c262b498f6c83"),e._initDatatable()}).apply(null,t)}).catch("ensureDatatables".bind(this)),this.element.data("dcpRevisionDiff",this),this._super(),this.element.on("click"+this.eventNamespace,".revision-diff-button-showonlydiff",function(){n.data("showOnlyDiff")?(n.data("showOnlyDiff",!1),t(this).text(e.options.labels.showOnlyDiff).removeClass("btn-primary"),e.element.find(".revision-diff-equal").show()):(n.data("showOnlyDiff",!0),e.element.find(".revision-diff-equal").hide(),t(this).text(e.options.labels.showAll).addClass("btn-primary"))})},htmlCaneva:function(){return'<table class="revision-diff-main"><thead><tr class="revision-diff-header"><th class="revision-diff-header--attribute-id"/><th class="revision-diff-header--attribute-label"/><th class="revision-diff-header--first"/><th class="revision-diff-header--second"/></tr></thead></table>'},_initDatatable:function(){var i=this;this.element.find(".revision-diff-main").dataTable({autoWidth:!1,ordering:!1,paging:!1,dom:"<'revision-head'<'revision-diff-buttons'>f>rtip",scrollCollapse:!1,info:!1,language:{search:" "},columns:[{data:"attributeId",name:"attributeId",title:i.options.labels.attributeId,className:"revision-diff-attributeid",visible:!1},{data:"attributeLabel",name:"attributeLabel",title:i.options.labels.attributeLabel,className:"revision-diff-attributelabel"},{data:"first",name:"first",title:i.options.labels.first,className:"revision-diff-first",render:function(t){return e.isArray(t)?e.pluck(t,"displayValue").join(", "):t.displayValue}},{data:"second",name:"second",title:i.options.labels.second,className:"revision-diff-second",render:function(t){return e.isArray(t)?e.pluck(t,"displayValue").join(", "):t.displayValue}}],initComplete:function(){var e=this.api();t(e.columns("first:name").header()).html(i._getDocHeader(i.firstDocument)),t(e.columns("second:name").header()).html(i._getDocHeader(i.secondDocument)),i.element.find(".dataTables_filter input").attr("placeholder",i.options.labels.filterMessages),i.element.find(".dataTables_filter input").addClass("form-control form-control-sm");var n=i.element.find(".revision-diff-buttons");0===n.find(".revision-diff-button-showonlydiff").length&&n.append(t('<button class="revision-diff-button-showonlydiff btn btn-secondary btn-sm" >'+i.options.labels.showOnlyDiff+"</button>"))},ajax:function(n,o){var r=[];t.getJSON("api/v1/documents/"+i.options.documentId+"/revisions/"+i.options.firstRevision+".json?fields=family.structure,document.properties.revdate,document.properties.revision,document.attributes").done(function(n){i.firstDocument=n.data.revision,t.getJSON("api/v1/documents/"+i.options.documentId+"/revisions/"+i.options.secondRevision+".json?fields=document.properties.revdate,document.properties.revision,document.attributes").done(function(t){i.secondDocument=t.data.revision,e.each(n.data.revision.attributes,function(e,o){var s=t.data.revision.attributes[o];r.push({attributeId:o,attributeLabel:i._findAttributeLabel(n.data.family.structure,o),first:e,second:s,DT_RowClass:i.isEqualAttributeValue(e,s)?"revision-diff-equal":"revision-diff-not-equal"})}),o({data:r})}).fail(function(t){var e=JSON.parse(t.responseText);window.alert(e.exceptionMessage)})}).fail(function(t){var e=JSON.parse(t.responseText);window.alert(e.exceptionMessage)})}}).addClass("table table-condensed table-bordered table-hover")},isEqualAttributeValue:function(t,i){if(e.isEqual(t,i))return!0;if(e.isArray(t)&&e.isArray(i)){var n=e.pluck(t,"value"),o=e.pluck(i,"value");return e.isEqual(n,o)}return!1},_findAttributeLabel:function(t,i){var n=this,o=null;return e.some(t,function(t,r){if(r===i)return o=t.label,!0;if(e.isObject(t.content)){var s=n._findAttributeLabel(t.content,i);if(null!==s)return o=s,!0}return!1}),o},_getDocHeader:function(t){var e=this.options.labels.documentHeader;return n.render(e||"",t.properties)},_destroy:function(){var t=this.element.find(".revision-diff-main");t.DataTable&&t.DataTable().destroy(),this._super()}})}.apply(e,n))||(t.exports=o)},"61b480911316cdda77a4":function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("d1cffa31e143773735c0")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e,i){return t.widget("dcp.dcpText",t.dcp.dcpAttribute,{options:{type:"text",renderOptions:{maxLength:0,placeHolder:"",format:"",kendoAutoCompleteConfiguration:{filter:"contains",minLength:1,template:'<div class="dcpAutocomplete"><span class="k-state-default">#= data.title#</span>#if (data.message) {#<div class="dcpAutocomplete--#= data.message.type#">#: data.message.contentText# #= data.message.contentHtml#</div>#}# </div>'}}},kendoWidget:null,_initDom:function(){"read"===this.getMode()&&this.options.renderOptions.format&&(this.options.attributeValue.formatValue=i.render(this.options.renderOptions.format||"",this.options.attributeValue)),this._super(),this.kendoWidget=this.element.find(".dcpAttribute__value--edit"),this.kendoWidget&&this.options.hasAutocomplete?this.activateAutocomplete(this.kendoWidget):"text"===this.getType()&&this.kendoWidget.addClass("k-textbox")},_initEvent:function(){"write"===this.getMode()&&this._initChangeEvent(),this._super()},_initChangeEvent:function(){var i=this;"write"===this.getMode()&&this.getContentElements().on("change"+this.eventNamespace,function(){var n=e.clone(i.options.attributeValue);n.value=t(this).val(),n.displayValue=n.value,i.setValue(n)})},activateAutocomplete:function(i){var n=this,o={dataTextField:"title",dataSource:{serverFiltering:!0,transport:{read:function(t){return t.data.index=n._getIndex(),n.options.autocompleteRequest.call(null,t)}}},filtering:function(t){" "===t.filter.value&&(t.filter.value="")},select:function(t){var e=n._getIndex(),i=this.dataSource.at(t.item.index());i.toJSON&&(i=i.toJSON()),t.preventDefault(),n._trigger("changeattrsvalue",t,{dataItem:i,valueIndex:e})}};i.kendoAutoComplete(e.extend({},this.options.renderOptions.kendoAutoCompleteConfiguration,o)),this.element.on("click"+this.eventNamespace,".dcpAttribute__value--autocomplete--button",function(t){t.preventDefault(),i.data("kendoAutoComplete").search(" ")}),this.element.find(".dcpAttribute__value--autocomplete--button[title]").tooltip({html:!0,container:this.element}).each(function(){t(this).data("bs.tooltip").tip().addClass("dcpAttribute__autocomplete")})},setValue:function(t){var i;if(t=e.clone(t),e.has(t,"value")&&!e.has(t,"displayValue")&&(t.displayValue=t.value),this._super(t),i=this.getWidgetValue(),"write"===this.getMode())null===t.value&&""===i&&(i=null),i!==t.value&&(this.getContentElements().val(t.value),this.flashElement());else{if("read"!==this.getMode())throw new Error("Attribute "+this.options.id+" unkown mode "+this.getMode());this.redraw()}},getType:function(){return"text"},_destroy:function(){this.kendoWidget&&this.kendoWidget.data("kendoAutoComplete")&&this.kendoWidget.data("kendoAutoComplete").destroy(),this._super()}}),t.fn.dcpText})},"63e285088893d0390ab6":function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("f845389cd549ce7299bb"),i("ab4ce4f91706f6c2712e"),i("102a2812abe6ba802db9"),i("ae9a1dffcb7d80ee2f61"),i("72700e7eabedfcaa8458"),i("07b96fa8c545aab31dad"),i("e795383f953f8380d242"),i("2b8c963e23b3e828472e"),i("8c1928b0f0f644cba374"),i("278ba7757aa1904087c6"),i("f562ab9f022eef93542c"),i("3fc27e9e68117b665919"),i("570ca0403ab6bea71f8b"),i("77d7ff9509612d0e239e")],void 0===(o=function(t,e,i,n,o,r,s,a,l,d,c,u,p){var h=function(t){this.name="ErrorModelNonInitialized",this.message=t||"The widget model is not initialized, use fetchDocument to initialise it.",this.stack=(new Error).stack};(h.prototype=Object.create(Error.prototype)).constructor=h;var f=["beforeRender","ready","change","displayMessage","displayError","validate","attributeBeforeRender","attributeReady","attributeHelperSearch","attributeHelperResponse","attributeHelperSelect","attributeArrayChange","actionClick","attributeAnchorClick","beforeClose","close","beforeSave","afterSave","attributeDownloadFile","attributeUploadFile","attributeUploadFileDone","beforeDelete","afterDelete","beforeRestore","afterRestore","failTransition","successTransition","beforeDisplayTransition","afterDisplayTransition","beforeTransition","beforeTransitionClose","destroy","attributeCreateDialogDocumentBeforeSetFormValues","attributeCreateDialogDocumentBeforeSetTargetValue","attributeCreateDialogDocumentReady","attributeCreateDialogDocumentBeforeClose","attributeCreateDialogDocumentBeforeDestroy"];return t.widget("dcp.documentController",{options:{eventPrefix:"document",initid:null,viewId:void 0,revision:void 0,constraintList:[],eventListener:[],_model:null,activatedConstraint:{},activatedEventListener:{},_initializedModel:!1,_initializedView:!1},_create:function(){this.options.constraintList={},this.options.eventListener={},this.activatedConstraint={},this.activatedEventListener={},this._initializedModel=!1,this._initializedView=!1,this._customClientData={},this.options.initid?(this._initializeWidget({},this.options.customClientData),this._super()):console.log("Widget initialised without document")},tryToDestroy:function(){var t=this;return new Promise(function(e,i){var n={prevent:!1};t._model?t._model&&t._model.isModified()&&!window.confirm(t._model.get("properties").get("title")+"\n"+p.___("The form has been modified without saving, do you want to close it ?","ddui"))?i("Unable to destroy because user refuses it"):(t._triggerControllerEvent("beforeClose",n,t._model.getServerProperties()),n.prevent?i("Unable to destroy because before close refuses it"):e()):e()})},_destroy:function(){this._triggerControllerEvent("destroy",this.getProperties()),this.options.constraintList={},this.options.eventListener={},this.activatedConstraint={},this.activatedEventListener={},this._initializedModel=!1,this._initializedView=!1,this.element.removeData("document"),this._model&&this._model.trigger("destroy"),this._trigger("destroy"),this._super()},_initializeWidget:function(t,i){var n,o=this,r=function(){o._initializedModel=!0};return t=t||{},this._initExternalElements(),this._initModel(this._getModelValue()),this._initView(),t.success&&(t.success=e.wrap(t.success,function(t){return r.apply(this,e.rest(arguments)),t.apply(this,e.rest(arguments))})),i&&(this._model._customClientData=i),n=this._model.fetchDocument(this._getModelValue(),t),t.success||n.then(r),this._initRouter({useHistory:!this.options.noRouter}),n},_getModelValue:function(){return e.pick(this.options,"initid","viewId","revision")},_initDom:function(){var t=this.element.find(".dcpDocument");this.$document&&0!==t.length||(this.element.append('<div class="dcpDocument"></div>'),this.$document=this.element.find(".dcpDocument"))},_initModel:function(t){var e;return this._model?this._reinitModel():(e=new o(t),this._model=e,this._initModelEvents()),e},_initView:function(){var t;return this.view||(this._initDom(),t=new l({model:this._model,el:this.$document[0]}),this.view=t,this._initViewEvents()),this.view},_reinitModel:function(){this._model.set(this._getModelValue())},_initExternalElements:function(){this.$loading=t(".dcpLoading").dcpLoading(),this.$notification=t("body").dcpNotification(window.dcp.notifications)},_initModelEvents:function(){var i=this;this._model.listenTo(this._model,"invalid",function(t,e){i._triggerControllerEvent("displayError",i.getProperties(),e)&&i.$notification.dcpNotification("showError",e)}),this._model.listenTo(this._model,"showError",function(t){i._triggerControllerEvent("displayError",i.getProperties(),t)&&i.$notification.dcpNotification("showError",t)}),this._model.listenTo(this._model,"showMessage",function(t){i._triggerControllerEvent("displayMessage",i.getProperties(),t)&&i.$notification.dcpNotification("show",t.type,t)}),this._model.listenTo(this._model,"sync",function(){i._initializedModel=!0,i.options.initid=i._model.id,i.options.viewId=i._model.get("viewId"),i.options.revision=i._model.get("revision"),i.element.data("document",i._getModelValue()),i._initActivatedConstraint(),i._initActivatedEventListeners({launchReady:!1})}),this._model.listenTo(this._model,"beforeRender",function(t){t.prevent=!i._triggerControllerEvent("beforeRender",i.getProperties(),i._model.getModelProperties())}),this._model.listenTo(this._model,"beforeClose",function(t,e,n){!1!==i._initializedView&&(t.prevent=!i._triggerControllerEvent("beforeClose",i.getProperties(),e,n))}),this._model.listenTo(this._model,"close",function(t){!1!==i._initializedView&&i._triggerControllerEvent("close",i.getProperties(),t),i._initializedView=!1}),this._model.listenTo(this._model,"getCustomClientData",function(){try{i._model._customClientData=i.getCustomClientData()}catch(t){}}),this._model.listenTo(this._model,"beforeSave",function(t,e){t.prevent=!i._triggerControllerEvent("beforeSave",i.getProperties(),i._model.getModelProperties(),e)}),this._model.listenTo(this._model,"afterSave",function(t){i._triggerControllerEvent("afterSave",i.getProperties(),t)}),this._model.listenTo(this._model,"beforeRestore",function(t){t.prevent=!i._triggerControllerEvent("beforeRestore",i.getProperties())}),this._model.listenTo(this._model,"afterRestore",function(t){i._triggerControllerEvent("afterRestore",i.getProperties(),t)}),this._model.listenTo(this._model,"beforeDelete",function(t,e){t.prevent=!i._triggerControllerEvent("beforeDelete",i.getProperties(),i._model.getModelProperties(),e)}),this._model.listenTo(this._model,"afterDelete",function(t){i._triggerControllerEvent("afterDelete",i.getProperties(),t)}),this._model.listenTo(this._model,"validate",function(t){t.prevent=!i._triggerControllerEvent("validate",i.getProperties())}),this._model.listenTo(this._model,"changeValue",function(t){try{var n=i.getAttribute(t.attributeId),o=0,r=n.getValue("all");"array"!==i._getAttributeModel(t.attributeId).getParent().get("type")?o=-1:(e.find(r.current,function(t){var i,n=r.previous[o];return n?(e.isArray(t)&&(t=t.join(",")),t=e.has(t,"value")?t.value:t,e.isArray(n)&&(n=n.join(",")),n=e.has(n,"value")?n.value:n,i=n!==t,o++,i):(o++,!0)}),o--),i._triggerAttributeControllerEvent("change",n,i.getProperties(),n,n.getValue("all"),o)}catch(t){t instanceof h||console.error(t)}}),this._model.listenTo(this._model,"beforeAttributeRender",function(t,e,n,o){try{var r=i.getAttribute(e);t.prevent=!i._triggerAttributeControllerEvent("attributeBeforeRender",r,i.getProperties(),r,n,o)}catch(t){t instanceof h||console.error(t)}}),this._model.listenTo(this._model,"attributeRender",function(t,e,n){try{var o=i.getAttribute(t);i._triggerAttributeControllerEvent("attributeReady",o,i.getProperties(),o,e,n)}catch(t){t instanceof h||console.error(t)}}),this._model.listenTo(this._model,"arrayModified",function(t){try{var e=i.getAttribute(t.attributeId);i._triggerAttributeControllerEvent("attributeArrayChange",e,i.getProperties(),e,t.type,t.options)}catch(t){t instanceof h||console.error(t)}}),this._model.listenTo(this._model,"internalLinkSelected",function(t,e){t.prevent=!i._triggerControllerEvent("actionClick",i.getProperties(),e)}),this._model.listenTo(this._model,"downloadFile",function(t,e,n){try{var o=i.getAttribute(e);t.prevent=!i._triggerControllerEvent("attributeDownloadFile",i.getProperties(),o,n.$el,n.index)}catch(t){t instanceof h||console.error(t)}}),this._model.listenTo(this._model,"uploadFile",function(t,e,n){try{var o=i.getAttribute(e);t.prevent=!i._triggerControllerEvent("attributeUploadFile",i.getProperties(),o,n.$el,n.index,{file:n.file,hasUploadingFiles:i._model.hasUploadingFile()})}catch(t){t instanceof h||console.error(t)}}),this._model.listenTo(this._model,"uploadFileDone",function(t,e,n){try{var o=i.getAttribute(e);t.prevent=!i._triggerControllerEvent("attributeUploadFileDone",i.getProperties(),o,n.$el,n.index,{file:n.file,hasUploadingFiles:i._model.hasUploadingFile()})}catch(t){t instanceof h||console.error(t)}}),this._model.listenTo(this._model,"helperSearch",function(t,e,n){try{var o=i.getAttribute(e);t.prevent=!i._triggerAttributeControllerEvent("attributeHelperSearch",o,i.getProperties(),o,n)}catch(t){t instanceof h||console.error(t)}}),this._model.listenTo(this._model,"helperResponse",function(t,e,n){try{var o=i.getAttribute(e);t.prevent=!i._triggerAttributeControllerEvent("attributeHelperResponse",o,i.getProperties(),o,n)}catch(t){t instanceof h||console.error(t)}}),this._model.listenTo(this._model,"helperSelect",function(t,e,n){try{var o=i.getAttribute(e);t.prevent=!i._triggerAttributeControllerEvent("attributeHelperSelect",o,i.getProperties(),o,n)}catch(t){t instanceof h||console.error(t)}}),this._model.listenTo(this._model,"anchorClick",function(t,e,n){try{var o=i.getAttribute(e);t.prevent=!i._triggerAttributeControllerEvent("attributeAnchorClick",o,i.getProperties(),o,n.$el,n.index,n.options)}catch(t){t instanceof h||console.error(t)}}),this._model.listenTo(this._model,"createDialogListener",function(t,e,n){try{var o=i.getAttribute(e),r="attributeCreateDialogDocument";r+=n.triggerId.charAt(0).toUpperCase()+n.triggerId.slice(1),t.prevent=!i._triggerAttributeControllerEvent(r,o,i.getProperties(),o,n)}catch(t){t instanceof h||console.error(t)}}),this._model.listenTo(this._model,"constraint",function(n,o){try{var r=i.getAttribute(n),s=i.getProperties(),a=t(i.element),l=function(t){e.isString(t)&&o.addConstraintMessage(t),e.isObject(t)&&t.message&&e.isNumber(t.index)&&o.addConstraintMessage(t.message,t.index)};e.each(i.activatedConstraint,function(t){try{if(t.attributeCheck.apply(a,[r,s])){var i=t.constraintCheck.call(a,s,r,r.getValue("all"));e.isArray(i)?e.each(i,l):l(i)}}catch(t){console.error(t)}})}catch(t){t instanceof h||console.error(t)}}),this._model.listenTo(this._model,"showTransition",e.bind(i._initAndDisplayTransition,this)),this._model.listenTo(this._model,"beforeParse",e.bind(function(){try{i.getCustomClientData(!0)}catch(t){}},this))},_initViewEvents:function(){var t=this;this.view.on("cleanNotification",function(){t.$notification.dcpNotification("clear")}),this.view.on("loading",function(e,i){t.$loading.dcpLoading("setPercent",e),i&&t.$loading.dcpLoading("setNbItem",i)}),this.view.on("loaderShow",function(e,i){console.time("xhr+render document view"),t.$loading.dcpLoading("show",e,i)}),this.view.on("loaderHide",function(){t.$loading.dcpLoading("hide")}),this.view.on("partRender",function(){t.$loading.dcpLoading("addItem")}),this.view.on("renderDone",function(){console.timeEnd("xhr+render document view"),t.$loading.dcpLoading("setPercent",100),t.$loading.dcpLoading("setLabel",null),t._initializedView=!0,t._triggerControllerEvent("ready",t.getProperties()),e.delay(function(){t.$loading.dcpLoading("hide",!0),console.timeEnd("main")})}),this.view.on("showMessage",function(e){t._triggerControllerEvent("displayMessage",t.getProperties(),e)&&t.$notification.dcpNotification("show",e.type,e)}),this.view.on("showSuccess",function(e){t._triggerControllerEvent("displayMessage",t.getProperties(),e)&&t.$notification.dcpNotification("showSuccess",e)}),this.view.on("reinit",function(){t._initModel(t._getModelValue()),t._initView(),t._model.fetchDocument()})},_initRouter:function(t){if(this.router)return this.router;try{window.history&&history.pushState?i.history.start({pushState:!0}):i.history.start()}catch(t){console.error(t)}this.router=new n({document:this._model,useHistory:!t||t.useHistory})},_initAndDisplayTransition:function(i,n,o,r,s){var l,u,p=t('<div class="dcpTransition"/>'),h={},f=this,m=this.getProperties();return new Promise(function(t,g){if(l=!f._triggerControllerEvent("beforeDisplayChangeState",f.getProperties(),new a(null,p,i,n)))return g(),this;h.model=new d({documentId:f._model.id,documentModel:f._model,state:i,transition:n}),!0!==r&&(h.view=new c({model:h.model,el:p})),u=new a(h.model,p,i,n),h.view&&h.view.once("renderTransitionWindowDone",function(){f._triggerControllerEvent("afterDisplayTransition",f.getProperties(),u)}),h.model.listenTo(h.model,"beforeChangeState",function(t){t.prevent=!f._triggerControllerEvent("beforeTransition",f.getProperties(),u)}),h.model.listenTo(h.model,"beforeChangeStateClose",function(t){t.prevent=!f._triggerControllerEvent("beforeTransitionClose",f.getProperties(),u)}),h.model.listenTo(h.model,"showError",function(t){event.prevent=!f._triggerControllerEvent("failTransition",f.getProperties(),u,t),g({documentProperties:m})}),h.model.listenTo(h.model,"success",function(i){h.view&&(h.view.$el.hide(),f.view.once("renderDone",function(){h.view.remove(),e.each(i,function(t){f.view.trigger("showMessage",t)})})),f._triggerControllerEvent("successTransition",f.getProperties(),u),s=s||{revision:-1},e.has(s,"revision")||(s.revision=-1),f.reinitDocument(s).then(function(){t({documentProperties:m})},function(){g({documentProperties:m})})}),h.model.listenTo(f._model,"sync",function(){this.trigger("close")}),h.model.fetch({success:function(){o&&h.model.setValues(o),!0===r?h.model._loadDocument(h.model).then(function(){h.model.save({},{success:function(){h.model.trigger("success"),t({documentProperties:m})},error:function(){g({documentProperties:m})}})}).catch(function(){g({documentProperties:m})}):h.model._loadDocument(h.model).then(function(){h.model.trigger("dduiDocumentReady")}).catch(function(){g({documentProperties:m})})},error:function(t,e,i){var n={title:"Transition Error"};i&&i.errorThrown&&(n.message=i.errorThrown),f.$notification.dcpNotification("showError",n),h.model.trigger("showError",n)}})})},_getAttributeModel:function(t){var e;if(!this._model.get("attributes"))throw new Error('Attribute models not initialized yet : The attribute "'+t+'" cannot be found.');if(e=this._model.get("attributes").get(t))return e},_getMenuModel:function(t){var i=this._model.get("menus"),n=i.get(t);return!n&&i&&i.each(function(i){i.get("content")&&e.each(i.get("content"),function(e){e.id===t&&(n=new u(e))})}),n},_getRenderedAttributes:function(){return this._model.get("attributes").chain().map(function(t){return{view:t.haveView(),id:t.id}}).filter(function(t){return t.view.haveView}).value()},_getMaxIndex:function(t){return e.size(t.get("content").max(function(t){return e.size(t.get("attributeValue"))}).get("attributeValue"))},_initActivatedConstraint:function(){var i=this.getProperties(),n=this;this.activatedConstraint={},e.each(this.options.constraintList,function(e){e.documentCheck.call(t(n.element),i)&&(n.activatedConstraint[e.name]=e)})},_initActivatedEventListeners:function(i){var n=this.getProperties(),o=this;i=i||{},this.activatedEventListener={},e.each(this.options.eventListener,function(i){e.isFunction(i.documentCheck)?i.documentCheck.call(t(o.element),n)&&(o.activatedEventListener[i.name]=i):o.activatedEventListener[i.name]=i}),!1!==this._initializedView&&!1!==i.launchReady&&(this._triggerControllerEvent("ready",n),e.each(this._getRenderedAttributes(),function(t){var e=o.getAttribute(t.id);o._triggerAttributeControllerEvent("attributeReady",t,n,e,t.view.elements)}))},_addAndInitNewEvents:function(i){var n,o,r,s=this,a=t(s.element);if(r=(i.externalEvent?"external_":"internal_")+i.name,this.options.eventListener[r]=i,!this._initializedModel)return this;if(n=this.getProperties(),(!e.isFunction(i.documentCheck)||i.documentCheck.call(a,n))&&(this.activatedEventListener[i.name]=i,!1!==this._initializedView)){if("ready"===i.eventType){(o=t.Event(i.eventType)).target=s.element;try{i.eventCallback.call(a,o,n)}catch(t){console.error(t)}}"attributeReady"===i.eventType&&((o=t.Event(i.eventType)).target=s.element,e.each(this._getRenderedAttributes(),function(t){var r=s.getAttribute(t.id);if(!e.isFunction(i.attributeCheck)||i.attributeCheck.apply(a,[r]))try{i.eventCallback.call(a,o,n,r,t.view.elements)}catch(t){console.error(t)}}))}},_triggerAttributeControllerEvent:function(i,n){var o,r=this,s=Array.prototype.slice.call(arguments,2),a=t.Event(i),l=t(r.element);return a.target=r.element,s.unshift(a),e.chain(this.activatedEventListener).filter(function(t){return t.eventType===i&&(!e.isFunction(t.attributeCheck)||t.attributeCheck.apply(l,[n,r.getProperties()]))}).each(function(t){try{t.eventCallback.apply(l,s)}catch(t){window.dcp&&window.dcp.logger?window.dcp.logger(t):console.error(t)}}),(o=Array.prototype.slice.call(arguments,0)).splice(1,1),r._triggerExternalEvent.apply(r,o),!a.isDefaultPrevented()},_triggerControllerEvent:function(i){var n=this,o=Array.prototype.slice.call(arguments,1),r=t.Event(i);return r.target=n.element,o.unshift(r),e.chain(this.activatedEventListener).filter(function(t){return t.eventType===i}).each(function(e){try{e.eventCallback.apply(t(n.element),o)}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}}),n._triggerExternalEvent.apply(n,arguments),!r.isDefaultPrevented()},_triggerExternalEvent:function(e){var i=Array.prototype.slice.call(arguments,1),n=t.Event(e);i.unshift(n),i.unshift(e),i[2]=i.slice(2),i=i.slice(0,3),this._trigger.apply(this,i)},_checkEventName:function(t){if(e.isString(t)&&(0===t.indexOf("custom:")||e.find(f,function(e){return e===t})))return!0;throw new Error("The event type "+t+" is not known. It must be one of "+f.sort().join(" ,"))},_checkInitialisedView:function(){if(!this._initializedView)throw new h("The widget view is not initialized, use fetchDocument to initialise it.")},_checkInitialisedModel:function(){if(!this._initializedModel)throw new h},_registerOutputPromise:function(i,n){var o=this;return new Promise(function(r,s){i.then(function(i){if(n&&e.isFunction(n.success))try{window.console.warn&&window.console.warn('Callback "success" is deprecated use promise instead'),n.success.call(t(o.element),i.documentProperties||{},o.getProperties())}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}r({element:t(o.element),previousDocument:i.documentProperties||{},nextDocument:o.getProperties()})},function(i){var r=i.arguments,a={contentText:"Undefined error"};if(i.arguments){try{r&&r[1]&&r[1].responseJSON&&(a=r[1].responseJSON.messages[0])}catch(t){}r&&r[0]&&r[0].eventPrevented&&(a={contentText:"Event prevented"}),r&&r[0]&&r[0].errorMessage&&(a=r[0].errorMessage)}if(n&&e.isFunction(n.error))try{window.console.warn&&window.console.warn('Callback "error" is deprecated use promise instead'),n.error.call(t(o.element),i.documentProperties||{},null,a)}catch(t){window.dcp.logger(t)}s({element:t(o.element),previousDocument:i.documentProperties||{},nextDocument:null,errorMessage:a})})})},reinitDocument:function(t,i){var n=this.getProperties();return this._checkInitialisedModel(),t=t||{},e.defaults(t,{revision:n.revision,viewId:n.viewId,initid:n.initid}),this.fetchDocument(t,i)},fetchDocument:function(t,i){var n,o,r=this;if(t=e.isUndefined(t)?{}:t,i=i||{},!e.isObject(t))throw new Error('Fetch argument must be an object {"initid":, "revision": , "viewId": }');if(!t.initid)throw new Error("initid argument is mandatory");return isNaN(t.initid)||(t.initid=parseInt(t.initid)),e.defaults(t,{revision:-1,viewId:"!defaultConsultation"}),e.defaults(i,{force:!1}),e.each(e.pick(t,"initid","revision","viewId"),function(t,e){r.options[e]=t}),this._model?(t.customClientData&&(this._model._customClientData=t.customClientData),this._model.isModified()&&!1===i.force?(o=this._model._promiseCallback(),this._model.trigger("loadDocument",this._getModelValue(),{success:o.success,error:o.error}),n=o.promise):n=this._model.fetchDocument(this._getModelValue())):n=this._initializeWidget(i,t.customClientData),this._registerOutputPromise(n,i)},saveDocument:function(t){var e;return t=t||{},this._checkInitialisedModel(),t.customClientData&&(this._model._customClientData=t.customClientData),e=this._model.saveDocument(),this._registerOutputPromise(e,t)},changeStateDocument:function(t,i,n){var o;if(this._checkInitialisedModel(),!e.isObject(t))throw new Error('changeStateDocument first argument must be an object {"nextState":, "transition": , "values":, "unattended":, "" }');if(!e.isString(t.nextState)||!e.isString(t.transition))throw new Error("nextState and transition arguments are mandatory");return o=this._initAndDisplayTransition(t.nextState,t.transition,t.values||null,t.unattended||!1,i),this._registerOutputPromise(o,n)},deleteDocument:function(t){var e;return t=t||{},this._checkInitialisedModel(),t.customClientData&&(this._model._customClientData=t.customClientData),e=this._model.deleteDocument(),this._registerOutputPromise(e,t)},restoreDocument:function(t){var e;return t=t||{},this._checkInitialisedModel(),t.customClientData&&(this._model._customClientData=t.customClientData),e=this._model.restoreDocument(),this._registerOutputPromise(e,t)},getProperty:function(t){return this._checkInitialisedModel(),"isModified"===t?this._model.isModified():this._model.getServerProperties()[t]},getProperties:function(){var t,e=!0;try{this._checkInitialisedModel()}catch(i){e=!1,t={notLoaded:!0}}return e&&((t=this._model.getServerProperties()).isModified=this._model.isModified(),t.url=window.location.href),t},hasAttribute:function(t){this._checkInitialisedModel();return!!this._model.get("attributes").get(t)},getAttribute:function(t){this._checkInitialisedModel();if(this._getAttributeModel(t))return new r(this._getAttributeModel(t))},getAttributes:function(){return this._checkInitialisedModel(),this._model.get("attributes").map(function(t){return new r(t)})},hasMenu:function(t){this._checkInitialisedModel();return!!this._getMenuModel(t)},getMenu:function(t){this._checkInitialisedModel();var e=this._getMenuModel(t);return e?new s(e):null},getMenus:function(){return this._checkInitialisedModel(),this._model.get("menus").map(function(t){return new s(t)})},getValue:function(t,e){this._checkInitialisedModel();var i=this._getAttributeModel(t);return i?new r(i).getValue(e):null},getValues:function(){return this._checkInitialisedModel(),this._model.getValues()},getCustomServerData:function(){return this._checkInitialisedModel(),this._model.get("customServerData")},addCustomClientData:function(t,i){var n=this;if(this._checkInitialisedModel(),e.isUndefined(i)&&(i=t,t={}),e.isFunction(t)&&e.isObject(i)&&(t={documentCheck:t}),!e.isObject(i)||!e.isObject(t))throw new Error("Constraint must be an value or a function and a value");t=e.defaults(t,{documentCheck:function(){return!0},once:!0}),e.each(i,function(e,i){n._customClientData[i]={value:e,documentCheck:t.documentCheck,once:t.once}})},setCustomClientData:function(t,e){return console.error("this function (setCustomClientData) is deprecated"),this.addCustomClientData(t,e)},getCustomClientData:function(i){var n,o,r={},s={};return this._checkInitialisedModel(),o=this.getProperties(),n=t(this.element),e.each(this._customClientData,function(t,e){t.documentCheck.call(n,o)?(r[e]=t.value,!0!==i||t.once||(s[e]=t)):!0===i&&(s[e]=t)}),!0===i&&(this._customClientData=s),r},removeCustomClientData:function(t){return this._customClientData[t]&&delete this._customClientData[t],this},setValue:function(t,i){this._checkInitialisedModel();var n=this._getAttributeModel(t);if(!n)throw new Error("Unable to find attribute "+t);var o,s,a=new r(n);if("array"===n.getParent().get("type"))for(a.setValue(i,!0),o=e.isArray(i)?i.length-1:i.index,s=a.getValue().length;s<=o;s++)this.appendArrayRow(n.getParent(),{});return a.setValue(i)},appendArrayRow:function(t,i){this._checkInitialisedModel();var n=this._getAttributeModel(t);if(!n)throw new Error("Unable to find attribute "+t);if("array"!==n.get("type"))throw new Error("Attribute "+t+" must be an attribute of type array");if(!e.isObject(i))throw new Error("Values must be an object where each properties is an attribute of the array for "+t);n.get("content").each(function(t){var n=i[t.id],o=t.getValue();e.isUndefined(n)?t.createIndexedValue(o.length,!1,e.isEmpty(i)):(n=e.defaults(n,{value:"",displayValue:n.value}),t.addValue(n))})},insertBeforeArrayRow:function(t,i,n){this._checkInitialisedModel();var o,r=this._getAttributeModel(t);if(!r)throw new Error("Unable to find attribute "+t);if("array"!==r.get("type"))throw new Error("Attribute "+t+" must be an attribute of type array");if(!e.isObject(i))throw new Error("Values must be an object where each properties is an attribute of the array for "+t);if(o=this._getMaxIndex(r),n<0||n>o)throw new Error("Index must be between 0 and "+o);r.get("content").each(function(t){var o=i[t.id];e.isUndefined(o)?(o=t.attributes.defaultValue)||(o={value:"",displayValue:""}):o=e.defaults(o,{value:"",displayValue:o.value}),t.addIndexedValue(o,n)})},removeArrayRow:function(t,e){this._checkInitialisedModel();var i,n=this._getAttributeModel(t);if(!n)throw new Error("Unable to find attribute "+t);if("array"!==n.get("type"))throw Error("Attribute "+t+" must be an attribute of type array");if(i=this._getMaxIndex(n)-1,e<0||e>i)throw Error("Index must be between 0 and "+i+" for "+t);n.get("content").each(function(t){t.removeIndexValue(e)}),n.removeIndexedLine(e)},addConstraint:function(t,i){var n,o,r=this;if(e.isUndefined(i)&&e.isFunction(t)&&(i=t,t={}),e.isObject(t)&&e.isUndefined(i)){if(!t.name)throw new Error("When a constraint is initiated with a single object, this object needs to have the name property ".JSON.stringify(t))}else e.defaults(t,{documentCheck:function(){return!0},attributeCheck:function(){return!0},constraintCheck:i,name:e.uniqueId("constraint"),externalConstraint:!1,once:!1});if(n=t,!e.isFunction(n.constraintCheck))throw new Error("An event need a callback");return!0===n.once&&(n.eventCallback=e.wrap(n.constraintCheck,function(t){try{t.apply(this,e.rest(arguments))}catch(t){console.error(t)}r.removeConstraint(n.name,n.externalConstraint)})),o=(n.externalConstraint?"external_":"internal_")+n.name,this.options.constraintList[o]=n,this._initActivatedConstraint(),n.name},listConstraints:function(){return this.options.constraintList},removeConstraint:function(t,i){var n,o,r=[],s=new RegExp("\\"+t+"$");return i=!!i,n=e.filter(this.options.constraintList,function(e){return!!(!i&&e.externalConstraint||e.name!==t&&!s.test(e.name))||(r.push(e),!1)}),o={},e.each(n,function(t){var e=(t.externalConstraint?"external_":"internal_")+t.name;o[e]=t}),this.options.constraintList=o,this._initActivatedConstraint(),r},addEventListener:function(t,i,n){var o,r=this;if(e.isUndefined(n)&&e.isFunction(i)&&(n=i,i={}),e.isObject(t)&&e.isUndefined(i)&&e.isUndefined(n)){if(!(o=t).name)throw new Error("When an event is initiated with a single object, this object needs to have the name property "+JSON.stringify(o))}else o=e.defaults(i,{name:e.uniqueId("event_"+t),eventType:t,eventCallback:n,externalEvent:!1,once:!1});if(this._checkEventName(o.eventType),!e.isFunction(o.eventCallback))throw new Error("An event needs a callback that is a function");return!0===o.once&&(o.eventCallback=e.wrap(o.eventCallback,function(t){r.removeEventListener(o.name,o.externalEvent);try{t.apply(this,e.rest(arguments))}catch(t){console.error(t)}})),this._addAndInitNewEvents(o),o.name},listEventListeners:function(){return this.options.eventListener},removeEventListener:function(t,i){var n,o,r=[],s=new RegExp("\\"+t+"$");return i=!!i,n=e.filter(this.options.eventListener,function(e){return!!(!i&&e.externalEvent||e.name!==t&&!s.test(e.name))||(r.push(e),!1)}),o={},e.each(n,function(t){var e=(t.externalEvent?"external_":"internal_")+t.name;o[e]=t}),this.options.eventListener=o,this._initActivatedEventListeners({launchReady:!1}),r},triggerEvent:function(t){return this._checkInitialisedModel(),this._checkEventName(t),this._triggerControllerEvent.apply(this,arguments)},hideAttribute:function(t){this._checkInitialisedView();var e=this._getAttributeModel(t);e?e.trigger("hide"):console.log("Unable find and hide the attribute "+t)},showAttribute:function(t){this._checkInitialisedView();var e=this._getAttributeModel(t);e?e.trigger("show"):console.log("Unable find and show the attribute "+t)},showMessage:function(t){this._checkInitialisedView(),e.isString(t)&&(t={type:"info",message:t}),e.isObject(t)&&(t=e.defaults(t,{type:"info"})),this.$notification.dcpNotification("show",t.type,t)},maskDocument:function(t,e){this.$loading.dcpLoading("show"),t&&this.$loading.dcpLoading("setTitle",t),e&&this.$loading.dcpLoading("setPercent",e)},unmaskDocument:function(t){this.$loading.dcpLoading("hide",t)},setAttributeErrorMessage:function(t,e,i){this._checkInitialisedView();var n=this._getAttributeModel(t);n?n.setErrorMessage(e,i):console.log("Unable find and show the attribute "+t)},cleanAttributeErrorMessage:function(t,e){this._checkInitialisedView();var i=this._getAttributeModel(t);i?i.setErrorMessage(null,e):console.log("Unable find and show the attribute "+t)},injectCSS:function(t){if(this._checkInitialisedView(),!e.isArray(t)&&!e.isString(t))throw new Error("The css to inject must be an array string or a string");e.isString(t)&&(t=[t]),this._model.injectCSS(t)},injectJS:function(t){if(this._checkInitialisedView(),!e.isArray(t)&&!e.isString(t))throw new Error("The js to inject must be an array string or a string");return e.isString(t)&&(t=[t]),this._model.injectJS(t)}}),t.fn.documentController}.apply(e,n))||(t.exports=o)},"652c2ab97314f0cc36e3":function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("bcd31d01884fc294fd69")],void 0===(o=function(t,e,i,n){return i.View.extend({className:"dcpDocument",headerTemplate:null,initialize:function(){this.listenTo(this.model.get("properties"),"change",this.updateHeader),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"cleanView",this.remove),this.listenTo(this.model,"changeValue",this.documentHasChanged),this.headerTemplate=this.getTemplates("sections").header},render:function(){var i=this;return new Promise(e.bind(function(o,r){var s=i.model.toData(),a=i.model.getModelProperties(),l=a.security||!1;s.document.properties=a,s.document.properties.security=l||{lock:{lockedBy:null}},s.document.properties.security.lock.isLocked=s.document.properties.security.lock.lockedBy&&s.document.properties.security.lock.lockedBy.id>0;var d=t(n.render(i.headerTemplate||"",s)),c=i.$el;return c.empty(),e.each(d.children(),function(t){c.append(t)}),c.find(".dcpDocument__header__lock, .dcpDocument__header__readonly, .dcpDocument__header__modified").tooltip({placement:"bottom",html:!0}),o(i)},this))},updateHeader:function(){var t=this.model.get("properties").get("title");return t&&(window.document.title=t),this.render()},getTemplates:function(t){var e={};if(this.model&&this.model.get("templates")&&(e=this.model.get("templates")),e[t])return e[t];if(window.dcp&&window.dcp.templates&&window.dcp.templates[t])return window.dcp.templates[t];throw new Error("Unknown template  "+t)},documentHasChanged:function(){var t=window.document.title.replace(/^\*+/g,"");this.model.hasAttributesChanged()?(this.$el.find(".dcpDocument__header__modified").show(),window.document.title="*"+t):(this.$el.find(".dcpDocument__header__modified").hide(),window.document.title=t),this.model.hasUploadingFile()?this.$el.find(".dcpDocument__header__modified").addClass("fa-spin"):this.$el.find(".dcpDocument__header__modified").removeClass("fa-spin")}})}.apply(e,n))||(t.exports=o)},"67953bae88ec8fa1ab26":function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("f562ab9f022eef93542c"),i("5d1c50599007150199da"),i("0bd0aa4c1909a49f67bb")],void 0===(o=function(t,e,n){t.widget("dcp.dcpDocumentHistory",t.dcp.dcpDialog,{options:{documentId:0,window:{modal:!0,title:"Document history"},labels:{version:"Version",revision:"Rev",state:"State",activity:"Activity",owner:"Owner",code:"Code",date:"Date",diff:"Diff",level:"Level",message:"Message",pastRevision:"",showDetail:"Show details",hideDetail:"Hide details",showNotice:"Show notices",hideNotice:"Hide notices",noOneNotice:"No one notices",filterMessages:"Filter messages",linkRevision:"See revision number #",historyTitle:"History for {{title}}",loading:"Loading ...",revisionDiffLabels:{}}},htmlCaneva:function(){return'<table class="history-main"><thead><tr class="history-header"><th class="history-header--date"/><th class="history-header--message"/><th class="history-header--owner"/><th class="history-header--version"/><th class="history-header--revision"/><th class="history-header--code"/><th class="history-header--level"/><th class="history-header--diff"/></tr></thead></table>'},element:null,_create:function(){var e=this,n=t(this);this.element.html(this.htmlCaneva()),i.e("ensureDatatables").then(function(){i("ac0cf2e8e04136065d45"),i("7006cf2c262b498f6c83"),e._initDatatable()}.bind(null,i)).catch(i.oe),this.element.data("dcpDocumentHistory",this),this._super(),this.element.on("click"+this.eventNamespace,".history-button-showdetail",function(){var i=e.element.find(".history-button-shownotice"),o=i.data("showNotice");n.data("showDetail")?(n.data("showDetail",!1),n.data("showNotice",!1),t(this).text(e.options.labels.showDetail).removeClass("btn-primary"),e.element.find(".history-comment").hide(),i.attr("disabled","disabled").removeClass("btn-primary").text(e.options.labels.showNotice)):(n.data("showDetail",!0),e.element.find(".history-comment").show(),o||e.element.find(".history-level--notice").hide(),t(this).text(e.options.labels.hideDetail).addClass("btn-primary"),i.removeAttr("disabled"))}),this.element.on("click"+this.eventNamespace,".history-button-shownotice",function(){var i=e.element.find(".history-level--notice");n.data("showNotice")?(n.data("showNotice",!1),t(this).text(e.options.labels.showNotice).removeClass("btn-primary"),e.element.find(".history-level--notice").hide()):(n.data("showNotice",!0),i.length>0?(i.show(),t(this).text(e.options.labels.hideNotice).addClass("btn-primary")):t(this).text(e.options.labels.noOneNotice))}),this.element.on("click"+this.eventNamespace,".history-diff-input",function(){var i=e.element.find(".history-diff-input:checked");if(2===i.length){e.element.find(".history-diff-input:not(:checked)").attr("disabled","disabled");t('<div class="revision-diff"/>').dcpRevisionDiff({documentId:e.options.documentId,firstRevision:t(i.get(1)).data("revision"),secondRevision:t(i.get(0)).data("revision"),window:{width:"70%",height:"70%",title:e.options.labels.revisionDiffLabels.title},labels:e.options.labels.revisionDiffLabels}).data("dcpRevisionDiff").open()}else i.length<2&&e.element.find(".history-diff-input").removeAttr("disabled","disabled")}),this.element.on("click"+this.eventNamespace,"a[data-document-id]",function(t){var i=n.data("document-id");i&&(t.preventDefault(),e.element.trigger("viewRevision",{initid:i,revision:parseInt(n.data("revision"))}))})},_fillDataTable:function(t){var i=[];return this.dialogWindow.setOptions({title:n.render(this.options.labels.historyTitle,t.data.history[0].properties)}),e.each(t.data.history,function(t){i.push({version:t.properties.version,revision:t.properties.revision,code:"",level:"revision",message:t.properties,owner:t.properties.owner.title,date:t.properties.revisionDate,diff:1,color:t.properties.state.color,DT_RowClass:"history-level--revision"}),e.each(t.messages,function(e){i.push({version:"",revision:"",code:e.code,level:e.level,message:e.comment,owner:e.uname,date:e.date,diff:0,DT_RowClass:"history-comment history-level--"+e.level+("fixed"===t.properties.status?" history-comment--fixed":"")})})}),i},_initDatatable:function(){var i=this;this.element.find(".history-main").dataTable({autoWidth:!1,ordering:!1,dom:"<'history-head'<'history-buttons'>f>rtip",paging:!1,scrollCollapse:!1,info:!1,language:{search:" ",loadingRecords:this.options.labels.loading},columns:[{data:"date",name:"date",title:i.options.labels.date,className:"history-date",render:function(t){var e=new Date(t.substr(0,10));return kendo.toString(e,"D")+" "+t.substr(11,8)}},{data:"message",name:"message",title:i.options.labels.message,className:"history-message",render:function(i){return e.isObject(i)?i.state.reference?'<div class="history-state"><span class="history-state-color" style="background-color:'+i.state.color+'" >&nbsp;</span><span class="history-state-label">'+("fixed"===i.status?i.state.stateLabel:i.state.activity)+"</span></div>":t("<div/>").text(i.title).html():t("<div/>").text(i).html()}},{data:"owner",name:"owner",title:i.options.labels.owner,className:"history-owner",render:function(e){return t("<div/>").text(e).html()}},{data:"version",name:"version",title:i.options.labels.version,className:"history-version",visible:!1,render:function(e){return t("<div/>").text(e).html()}},{data:"revision",name:"revision",title:i.options.labels.revision,className:"history-revision",render:function(t){return""!==t?'<a class="history-revision-link btn btn-default" href="api/v1/documents/'+i.options.documentId+"/revisions/"+t+'.html"data-document-id="'+i.options.documentId+'" data-revision="'+t+'">'+i.options.labels.linkRevision.replace("#",t)+"</a>":t}},{data:"code",name:"code",title:i.options.labels.code,className:"history-code",visible:!1,render:function(e){return t("<div/>").text(e).html()}},{data:"level",name:"level",title:i.options.labels.level,className:"history-level",visible:!1,render:function(e){return t("<div/>").text(e).html()}},{data:"diff",name:"diff",title:i.options.labels.diff,className:"history-diff",render:function(t,e,i){return 1===t?'<input class="history-diff-input" data-revision="'+i.revision+'" type="checkbox"/>':""}}],drawCallback:function(){var t=i.element.find(".history-button-shownotice").data("showNotice");i.element.find(".history-button-showdetail").data("showDetail")?(i.element.find(".history-comment").show(),t||i.element.find(".history-level--notice").hide()):i.element.find(".history-comment").hide()},initComplete:function(){for(var e=this.api(),n=e.rows({page:"current"}).data(),o=!1,r=!1,s=!0,a=0;a<n.length;a++)n[a].version&&(o=!0),n[a].revision>0&&(s=!1),n[a].message&&n[a].message.state&&n[a].message.state.reference&&(r=!0);s&&i.element.find(".history-diff-input").attr("disabled","disabled"),o&&e.column("version:name").visible(!0),r&&i.element.find(".history-header--message").html(i.options.labels.activity);var l=i.element.find(".history-level--revision").get(1);if(l){var d=i.element.find(".history-header").clone();t('<tr class="history-separator"><td class="history-separator-cell" colspan="'+t(d).find("th").length+'"><span>'+i.options.labels.pastRevision+"</span></td></tr>").insertBefore(l),t(d).insertBefore(l),r&&t(t(".history-header--message").get(1)).html(i.options.labels.state)}if(i.element.find(".history-comment").hide(),i.element.find(".odd").removeClass("odd"),i.element.find(".even").removeClass("even"),i.element.find(".dataTables_filter input").addClass("form-control form-control-sm"),0===i.element.find(".history-button-shownotice").length){var c=i.element.find(".history-buttons");c.append(t('<button class="history-button-showdetail btn btn-secondary btn-sm" >'+i.options.labels.showDetail+"</button>")),c.append(t('<button disabled="disabled" class="history-button-shownotice btn btn-outline-secondary btn-sm" >'+i.options.labels.showNotice+"</button>")),i.element.find(".dataTables_filter input").attr("placeholder",i.options.labels.filterMessages)}},ajax:function(n,o){t.getJSON("api/v1/documents/"+i.options.documentId+"/history/").done(function(t){var e=i._fillDataTable(t);o({data:e})}).fail(function(n){var r=JSON.parse(n.responseText);e.each(r.messages,function(n){"CRUD0219"===n.code&&n.uri?t.getJSON(n.uri.replace(".json","")+"/history/").done(function(t){var e=i._fillDataTable(t);o({data:e})}).fail(function(i){var n=JSON.parse(i.responseText);e.each(n.messages,function(e){"error"===e.type&&t("body").trigger("notification",{type:e.type,message:e.contentText})}),console.error("fail",i)}):"error"===n.type&&t("body").trigger("notification",{type:n.type,message:n.contentText})}),console.error("fail",n)})}}).addClass("table table-condensed table-bordered table-hover")},_destroy:function(){var t=this.element.find(".history-main");t.DataTable&&t.DataTable().destroy(),this._super()}})}.apply(e,n))||(t.exports=o)},"698d75b157f24ae829cc":function(t,e,i){"use strict";var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(n=window)}t.exports=n},"6ae127aafe284bc9addc":function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("bcd31d01884fc294fd69"),i("af25306fd60189c120f8")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e){return t.widget("dcp.dcpImage",t.dcp.dcpFile,{options:{type:"image",labels:{dropFileHere:"Drop image here",placeHolder:"Click to upload an image",tooltipLabel:"Choose image",downloadLabel:"Download the image"},renderOptions:{thumbnailSize:"100x100"}},_initDom:function(){if("read"===this.getMode()&&this.options.attributeValue.url&&!this.options.renderOptions.htmlLink.url)if(this.options.renderOptions.thumbnailSize){var t=/sizes\/([^\/]+)/;this.options.attributeValue.thumbnail=this.options.attributeValue.thumbnail.replace(t,"sizes/"+this.options.renderOptions.thumbnailSize)+".png"}else this.options.renderOptions.thumbnailSize||(this.options.attributeValue.thumbnail=this.options.attributeValue.url);this.options.attributeValue.thumbnail&&(this.options.attributeValue.hash=this.options.attributeValue.creationDate.replace(/[ :-]/g,""),this.options.attributeValue.thumbnail+="?c="+this.options.attributeValue.hash),this._super()},_initEvent:function(){this._super(),"read"===this.getMode()&&this._initDisplayEvent()},_initDisplayEvent:function(){var e=this,i=this.getLink();this.element.off("click"),this.element.on("click"+this.eventNamespace,".dcpAttribute__content__link",function(n){if("_dialog"===i.target){n.preventDefault();t(this).data("index");var o=t('<div class="dcpImage-window"><img class="img-responsive" src="'+t(this).attr("href")+'"/></div>');t("body").append(o);o.kendoWindow({title:e.options.attributeValue.displayValue,width:i.windowWidth,height:i.windowHeight,iframe:!1,actions:["Maximize","Close"]}).data("kendoWindow").center().open()}})},uploadCondition:function(t){return"image"!==t.type.substr(0,5)?(this.setError("Invalid image file"),!1):(this.setError(null),!0)},getType:function(){return"image"}}),t.fn.dcpImage})},"6d281ded32c7dc89e58d":function(t,e,i){"use strict";var n,o,r;window.dcp=window.dcp||{},function(i,s){o=[],void 0===(r="function"==typeof(n=s)?n.apply(e,o):n)||(t.exports=r),i.dcp.translatorFactory=s([])}(window,function(){return function(t){if(function(t){return"string"==typeof t}(t))try{t=JSON.parse(t)}catch(e){t={data:{catalog:{}}},console.error("Locale catalog error : "+e.message)}return{_catalog:t.data.catalog,_locale:t.data.locale,_:function(t){return t&&this._catalog[t]?this._catalog[t]:t},___:function(t,e){return t&&this._catalog&&this._catalog._msgctxt_&&this._catalog._msgctxt_[e]&&this._catalog._msgctxt_[e][t]?this._catalog._msgctxt_[e][t]:t},getLocale:function(){return this._locale}}}})},"6dbe3b90603a8175dd85":function(t,e,i){"use strict";var n,o,r,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s,a){o=[i('external "jQuery"'),i("bd13ec831aaf61fba460")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t){return t.widget("dcp.dcpTimestamp",t.dcp.dcpDate,{options:{type:"timestamp",minDate:new Date(1700,0,1),renderOptions:{kendoDateConfiguration:{timeFormat:"HH:mm",parseFormats:["yyyy-MM-dd HH:mm:ss","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"],format:null}}},kendoWidgetClass:"kendoDateTimePicker",_initDom:function(){this.options.attributeValue.value&&(this.options.attributeValue.value=this.replaceAt(this.options.attributeValue.value,10,"T")),this._super()},replaceAt:function(t,e,i){return t.substring(0,e)+i+t.substring(e+1)},setValue:function(t){t.value&&(t.value=this.replaceAt(t.value,10,"T")),this._super(t)},_activateDate:function(t){var e=this,i=this.getKendoOptions();i.change=function(){if(null!==this.value()){var i=e.convertDateToPseudoIsoString(this.value());e.setValue({value:i,displayValue:t.val()})}},t.kendoDateTimePicker(i),this._controlDate(t)},convertDateToPseudoIsoString:function(t){return t&&"object"===(void 0===t?"undefined":s(t))?t.getFullYear()+"-"+this.padNumber(t.getMonth()+1)+"-"+this.padNumber(t.getDate())+"T"+this.padNumber(t.getHours())+":"+this.padNumber(t.getMinutes())+":"+this.padNumber(t.getSeconds()):""},formatDate:function(t){return this.options.renderOptions.kendoDateConfiguration.format?kendo.toString(t,this.options.renderOptions.kendoDateConfiguration.format):kendo.toString(t,"g")},getType:function(){return"timestamp"}}),t.fn.dcpTimestamp})},"72335e037ab5116fdf0c":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("0a26bdc45fd66878f3b9"),i("e10c73398bdea22dc801")],void 0===(o=function(t,e,i){return e.extend({typeModel:"ddui:attributeData",defaults:{isValueAttribute:!0,multiple:!1,attributeValue:null},initialize:function(){this.listenTo(this,"change:attributeValue",this.checkConstraint),this._initialAttributeValue=this.get("attributeValue")||{value:null},e.prototype.initialize.apply(this,arguments)},getValue:function(){return this.get("attributeValue")},setValue:function(e,i){var n,o;if(this.get("multiple")&&!t.isNumber(i)&&!t.isArray(e))throw new Error("You need to add an index to set value for a multiple id "+this.id);if(this.get("multiple")&&i>=0){if((n=t.clone(this.get("attributeValue"))).length<i)for(o=n.length;o<i;o++)n.push({value:null,displayValue:""});n[i]=e,this.set("attributeValue",n)}else this.set("attributeValue",e)},addValue:function(e,i,n){var o;if(this.hasMultipleOption()&&!t.isNumber(i))throw new Error("You need to add an index to set value for a multiple id "+this.id);o=t.toArray(t.map(this.get("attributeValue"),t.clone)),this.hasMultipleOption()&&i>=0?(o[i]||(o[i]=[]),o[i].push(e),this.set("attributeValue",o,n)):(o.push(e),this.set("attributeValue",o,n))},removeIndexValue:function(e,i){var n,o;if(!this.get("multiple")||!t.isNumber(e))throw new Error("You need to add an index to set value for a multiple id "+this.id);o=this.get("attributeValue"),n=t.clone(this.get("attributeValue")),t.each(n,function(t,i){(i=parseInt(i,10))===e&&delete n[e],i>e&&o[i]&&(delete n[i],n[i-1]=o[i])}),n=t.filter(n,function(e){return!t.isUndefined(e)}),this.set("attributeValue",n,{notUpdateArray:!0})},createIndexedValue:function(e,i,n){var o,r,s;if(!this.get("multiple")||!t.isNumber(e))throw new Error("You need to add an index to set value for a multiple id "+this.id);o=t.toArray(t.map(this.get("attributeValue"),t.clone)),r=this.attributes.defaultValue,s=i?t.clone(o[e]):r||(this.hasMultipleOption()?[]:{value:null,displayValue:""}),e>o.length?o.push(s):o.splice(e,0,s),this.set("attributeValue",o,{notUpdateArray:!n})},addIndexedValue:function(e,i){var n;if(!t.isNumber(i))throw new Error("You need to add an index to set value indexed value "+this.id);i>(n=t.toArray(t.map(this.get("attributeValue"),t.clone))).length?n.push(e):n.splice(i,0,e),this.set("attributeValue",n)},moveIndexValue:function(e,i){var n,o;if(!this.get("multiple"))throw new Error("Move only multiple attribute : "+this.id);n=t.toArray(this.get("attributeValue")),o=t.clone(n[e]),n.splice(e,1),n.splice(i,0,o),this.set("attributeValue",n),this.trigger("moved",{from:e,to:i})},getNbLines:function(){var e=0;return this.get("multiple")?(t.each(this.get("attributeValue"),function(t,i){i>e&&(e=i)}),e):-1},isInArray:function(){var t=this.getParent();return t&&t.attributes&&"array"===t.attributes.type},checkConstraint:function(e){var n=new i,o={},r=this;return e=t.extend({clearError:this.hasInternalError,displayError:!0},e),this.trigger("constraint",{model:this,response:n,value:this.get("attributeValue")}),n.hasConstraintMessages()?(t.each(n.getConstraintMessages(),function(t){o[t.index]=o[t.index]||"",o[t.index]+=t.message+" "}),e.displayError&&(this.hasInternalError=!0,r.setErrorMessage(null),t.each(o,function(t,e){e=parseInt(e),r.setErrorMessage(t,e)})),!1):(e.clearError&&(this.setErrorMessage(null),this.hasInternalError=!1),!0)}})}.apply(e,n))||(t.exports=o)},"72700e7eabedfcaa8458":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58")],void 0===(o=function(t){var e=function(){};e.prototype.getValues=function(){return this._TransitionModel?this._TransitionModel.toJSON():null},e.prototype.hide=function(){return this._TransitionModel?this._TransitionModel.trigger("hide"):null},e.prototype.show=function(){return this._TransitionModel?this._TransitionModel.trigger("show"):null},e.prototype.close=function(){return this._TransitionModel?this._TransitionModel.trigger("close"):null};var i=function(t,i,n,o){this._TransitionModel=t,this.$el=i,this.nextState=n,this.transition=o,e.call(this)};return i.prototype=Object.create(e.prototype),i.prototype.constructor=e,i}.apply(e,n))||(t.exports=o)},"72eda5b0d863ce233971":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06")],void 0===(o=function(t,e){return e.Collection.extend({comparator:"logicalOrder",toData:function(t,e){var i=[];return this.each(function(n){i.push(n.toData(t,e))}),i},destroy:function(){for(var t;t=this.first();)t.destroy()},propageEvent:function(t){this.each(function(e){e.trigger(t),e.get("content")&&e.get("content").propageEvent(t)})}})}.apply(e,n))||(t.exports=o)},"77d7ff9509612d0e239e":function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("f562ab9f022eef93542c")],void 0===(o=function(t,e){t.widget("dcp.dcpNotification",{options:{autoHideAfter:5e3,appendTo:"#dcpNotificationContainer",position:{top:60,right:100},templates:[{type:"error",template:'<div class="dcpNotification--content dcpNotification--error"><span class="dcpNotification--symbol fa-stack fa-lg"><span class="fa fa-bolt"></span></span><div class="dcpNotification--message"><h1>#: title #</h1><p>#: message #</p><p> #= htmlMessage #</p></div></div>'},{type:"warning",template:'<div class="dcpNotification--content dcpNotification--warning"><span class="dcpNotification--symbol fa-stack fa-lg"><span class="fa fa-warning fa-inverse"></span></span><div class="dcpNotification--message"><h1>#: title #</h1><p>#: message #</p><p> #= htmlMessage #</p></div></div>'},{type:"info",template:'<div class="dcpNotification--content dcpNotification--info"><span class="dcpNotification--symbol fa-stack fa-lg"><span class="fa fa-info fa-inverse fa-flip-horizontal"></span></span><div class="dcpNotification--message"><h1>#: title #</h1><p>#: message #</p><p> #= htmlMessage #</p></div></div>'},{type:"notice",template:'<div class="dcpNotification--content dcpNotification--notice"><span class="dcpNotification--symbol fa-stack fa-lg"><span class="fa fa-info fa-inverse fa-flip-horizontal"></span></span><div class="dcpNotification--message"><h1>#: title #</h1><p>#: message #</p><p> #= htmlMessage #</p></div></div>'},{type:"success",template:'<div class="dcpNotification--content dcpNotification--info"><span class="dcpNotification--symbol fa-stack fa-lg"><span class="fa fa-check fa-inverse"></span></span><div class="dcpNotification--message"><h1>#: title #</h1><p>#: message #</p><p> #= htmlMessage #</p></div></div>'}],labels:{moreButton:"View more ...",moreWindowTitle:"Notification"}},notificationElement:null,_create:function(){var i=this;this.notificationElement=t('<div class="dcpNotification--widget" />'),this.element.append(t('<div id="dcpNotificationContainer" class="dcpNotifications"/>')),this.element.append(this.notificationElement),this.options.show=e.bind(this.showMore,this),this.notificationElement.kendoNotification(this.options),this.element.on("notification",function(t,e){i.show(e.type,e)})},showMore:function(e){var i,n=e.element,o=n.find(".dcpNotification--message"),r=this;o.prop("scrollHeight")>o.height()&&(i=t('<div class="dcpNotification--more"/>').text(this.options.labels.moreButton),n.append(i),i.on("click",function(t){var e,i=n.clone();r.cloneWindow&&(r.cloneWindow.destroy(),r.cloneWindow=null),n.append(i),i.find(".dcpNotification--more").remove(),i.find(".dcpNotification--message").prepend(i.find(".dcpNotification--symbol")),t.stopPropagation(),(e=i.kendoWindow({title:r.options.labels.moreWindowTitle,width:"400px"}).data("kendoWindow")).center(),r.cloneWindow=e}))},show:function(e,i){i.title=i.title||"",i.message=i.message||"",i.htmlMessage=i.htmlMessage||"",-1===t.inArray(e,["error","info","warning","success","notice"])&&(e="info"),this.notificationElement.data("kendoNotification").show({title:i.title,message:i.message,htmlMessage:i.htmlMessage},e)},showError:function(t){this.show("error",t)},showInfo:function(t){this.show("info",t)},showWarning:function(t){this.show("warning",t)},showSuccess:function(t){this.show("success",t)},clear:function(){this.notificationElement.kendoNotification("hide"),this.cloneWindow&&(this.cloneWindow.destroy(),this.cloneWindow=null)}})}.apply(e,n))||(t.exports=o)},"7a4c946b6dd0337fa34b":function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("bcd31d01884fc294fd69"),i("fde693488ffc947d1881"),i("2396a71337586706882f"),i("593c8c94ba4399020f79")],void 0===(o=function(t,e,i,n,o,r,s){return i.View.extend({className:"card card-default dcpFrame",customView:!1,displayLabel:!0,events:{"click .dcpFrame--collapsable":"toggle",'click a[href^="#action/"], a[data-action], button[data-action]':"externalLinkSelected"},initialize:function(t){!1!==t.displayLabel&&"none"!==this.model.getOption("labelPosition")||(this.displayLabel=!1),this.listenTo(this.model,"change:label",this.updateLabel),this.listenTo(this.model.get("content"),"add",this.render),this.listenTo(this.model.get("content"),"remove",this.render),this.listenTo(this.model.get("content"),"reset",this.render),this.listenTo(this.model,"errorMessage",this.setError),this.listenTo(this.model,"change:errorMessage",this.setError),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"resize",this.setResponsiveClasse),this.listenTo(this.model,"cleanView",this.remove),this.listenTo(this.model,"hide",this.hide),this.listenTo(this.model,"show",this.show),this.listenTo(this.model,"haveView",this._identifyView),this.options=t},render:function(){var i=this;return new Promise(e.bind(function(e,a){var l,d,c,u,p="",h=null,f={prevent:!1},m=[];if(i.model.trigger("beforeRender",f,{model:i.model,$el:i.$el}),f.prevent)return e(i),i;!0!==i.options.originalView&&i.model.getOption("template")&&(l=s.renderCustomView(i.model),i.customView=l.$el,m.push(l.promise)),u=i.model.toData(null,!0),i.model.getOption("attributeLabel")&&(u.label=i.model.getOption("attributeLabel")),u.collapsable="none"!==u.renderOptions.collapse,i.templateLabel=i.model.getTemplates().attribute.frame.label,c=t(n.render(i.templateLabel||"",u)),i.customView?(p=i.customView).addClass("dcpFrame__content dcpFrame__content--open"):(i.templateContent=i.model.getTemplates().attribute.frame.content,p=t(n.render(i.templateContent||"",u))),i.$el.empty(),!0===i.displayLabel&&i.$el.append(c),i.$el.append(p),i.$el.attr("data-attrid",i.model.id),d=i.$el.find(".dcpFrame__content");var g=i.model.get("content").some(function(t){return t.isDisplayable()});i.customView||(g?i.model.get("content").each(function(t){var e;if(t.isDisplayable())try{if(h=null,t.get("isValueAttribute"))return e=new o({model:t,customView:h}),m.push(e.render()),void d.append(e.$el);"array"===t.get("type")&&(e=new r({model:t}),m.push(e.render()),d.append(e.$el))}catch(e){d.append('<h1 class="bg-danger"><span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span>Unable to render '+t.id+"</h1>"),window.dcp.logger?window.dcp.logger(e):console.error(e)}}):d.append(i.model.getOption("showEmptyContent")),s.insertDescription(i)),"collapse"===i.model.getOption("collapse")&&i.toggle(null,!0),Promise.all(m).then(function(){i.model.trigger("renderDone",{model:i.model,$el:i.$el}),i.model.getOption("responsiveColumns")&&i.responsiveColumns(),e(i)}).catch(a)}),this)},setResponsiveClasse:function(){var i=this,n=0,o=0,r=this.model.getOption("responsiveColumns")||[],s=!1,a=!1;if(r.length>0){if((n=t(this.$el).width())<=0)return;var l=this.$el.find("> .dcpFrame__content > .row");e.each(r,function(t){if(n>=t.minAbsWidth&&n<t.maxAbsWidth){if(o=t.number,!0===t.grow?(i.$el.addClass("dcp-column--grow"),a=!0):(i.$el.removeClass("dcp-column--grow"),a=!1),s="topBottom"===t.direction,a)if(l.length<o)o=l.length;else if(s)for(var e=Math.ceil(l.length/o),r=o;r--;r>1)Math.ceil(l.length/r)===e&&(o=r);o>1&&i.$el.addClass("dcp-column--"+o)}else i.$el.removeClass("dcp-column--"+t.number)}),o>1?(i.$el.addClass("dcp-column"),o!==this.frameColumnNumber&&(this.frameColumnNumber=o,s?(this.$el.addClass("dcp-column--topbottom"),this.$el.removeClass("dcp-column--leftright")):(this.$el.removeClass("dcp-column--topbottom"),this.$el.addClass("dcp-column--leftright")))):(this.frameColumnNumber=o,this.$el.removeClass("dcp-column"),this.$el.removeClass("dcp-column--topbottom"),this.$el.removeClass("dcp-column--leftright"),this.$el.removeClass("dcp-column--grow"))}},responsiveColumns:function(){var i=this.model.getOption("responsiveColumns")||[],n=t("<div/>").css({position:"absolute",top:0,overflow:"hidden"}),o=t("<div/>");t("body").append(n.append(o)),e.each(i,function(t){t.minWidth?(o.width(t.minWidth),t.minAbsWidth=o.width()):t.minAbsWidth=0,t.maxWidth?(o.width(t.maxWidth),t.maxAbsWidth=o.width()):t.maxAbsWidth=1/0}),n.remove(),t(window).on("resize.v"+this.model.cid,e.bind(this.setResponsiveClasse,this)),e.defer(e.bind(this.setResponsiveClasse,this))},getAttributeModel:function(t){return this.model.getDocumentModel().get("attributes").get(t)},setError:function(t,e){e?this.$el.find(".dcpFrame__label").addClass("has-error"):this.$el.find(".dcpFrame__label").removeClass("has-error")},updateLabel:function(){this.$el.find(".dcpFrame__label").text(this.model.get("label"))},toggle:function(t,e){var i=this.$(".dcpFrame__content");this.$(".dcp__frame__caret").toggleClass("fa-caret-right fa-caret-down"),i.toggleClass("dcpFrame__content--open dcpFrame__content--close"),e?i.hide():(i.slideToggle(200),i.hasClass("dcpFrame__content--open")&&this.model.getDocumentModel().redrawErrorMessages())},hide:function(){this.$el.hide()},show:function(){this.$el.show()},externalLinkSelected:function(e){var i,n,o,r,s=t(e.currentTarget),a={prevent:!1};return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),i=s.data("action")||s.attr("href"),n=i.substring(8).split(":"),o={target:e.target,index:-1,eventId:n.shift(),options:n},r=this.model.getDocumentModel(),this.model.trigger("internalLinkSelected",a,o),e.prevent?this:(r.trigger("actionAttributeLink",a,o),this)},_identifyView:function(t){t.haveView=!0,t.elements=t.elements.add(this.$el)},remove:function(){return t(window).off(".v"+this.model.cid),i.View.prototype.remove.call(this)}})}.apply(e,n))||(t.exports=o)},"7bf0c39069ca070152a3":function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("61b480911316cdda77a4")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t){return t.widget("dcp.dcpPassword",t.dcp.dcpText,{options:{type:"password",renderOptions:{hideValue:"*****"},labels:{}},_initDom:function(){this.options.attributeValue.value&&(this.options.attributeValue.displayValue=this.options.renderOptions.hideValue),this._super(),"write"===this.getMode()&&this._getFocusInput().attr("type","password")},setValue:function(t){t.value&&(t.displayValue=this.options.renderOptions.hideValue),this._super(t)},getType:function(){return"password"}}),t.fn.dcpPassword})},"87c09356a22ec84292bb":function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("278ba7757aa1904087c6"),i("f562ab9f022eef93542c")],void 0===(o=function(t,e,i,n){t.widget("dcp.dcpMenu",{options:{eventPrefix:"dcpmenu"},kendoMenuWidget:null,_create:function(){this._tooltips=[],this.popupWindows=[],this._initStructure()},_initStructure:function(){var o,r,s=this;r=t(i.render(this._getTemplate("menu")||"",e.extend({uuid:this.uuid},this.options))),o=r.find(".menu__content"),this._insertMenuContent(this.options.menus,o),this.element.append(r),o.kendoMenu({openOnClick:!0,closeOnClick:!0,select:function(e){var n,o,r,a,l,d,c,u,p,h,f=t(e.item),m="";if(f.hasClass("menu__element--item")&&(o=t(e.item).find("a"),""!=(r=o.data("url"))))if(o.hasClass("menu--confirm"))a=i.render(o.data("confirm-message")||"",s.options),l=f.data("menuConfiguration").confirmationOptions||{},d=t("body").dcpConfirm({title:i.render(l.title||"",s.options),width:l.windowWidth,height:l.windowHeight,messages:{okMessage:i.render(l.confirmButton||"",s.options),cancelMessage:i.render(l.cancelButton||"",s.options),htmlMessage:a,textMessage:""},confirm:function(){o.removeClass("menu--confirm"),o.trigger("click"),o.addClass("menu--confirm")},templateData:s.options}),s.popupWindows.push(d.data("dcpWindow")),d.data("dcpWindow").open();else if(s.element.data("menu-opening",!1),"#action/"===r.substring(0,8))e.preventDefault(),e.stopPropagation&&e.stopPropagation(),n=r.substring(8).split(":"),s._trigger("externalLinkSelected",e,{target:e.target||e.item,eventId:n.shift(),options:n});else{var g=t("base"),v=new RegExp("^(?:[a-z]+:)?//","i");c=o.attr("target")||"_self",o.attr("href")&&"#"===o.attr("href").substring(0,1)&&(r=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+(window.location.pathname?window.location.pathname:"/")+(window.location.search?window.location.search:"")+o.attr("href")),"_self"===c?v.test(r)?window.location.href=r:window.location.href=g.attr("href")+r:(u=f.data("menuConfiguration").targetOptions||{},"_dialog"===c?(h=t("<div/>"),t("body").append(h),p=h.dcpWindow({title:i.render(u.title||"",window.dcp.documentData),width:u.windowWidth,height:u.windowHeight,modal:u.modal,content:r,iframe:!0}),s.popupWindows.push(p.data("dcpWindow")),p.data("dcpWindow").kendoWindow().center(),p.data("dcpWindow").open()):(u&&(u.windowWidth||u.windowHeight)&&(u.windowWidth&&(m+="width="+parseInt(u.windowWidth,10)+","),u.windowHeight&&(m+="height="+parseInt(u.windowHeight,10)+","),m+="resizable=yes,scrollbars=yes"),v.test(r)||(r=g.attr("href")+r),window.open(r,c,m)))}},deactivate:function(e){var i=t(e.item);i.data("menu-openAgain")&&(i.data("menu-openAgain",!1),i.data("menu-noQuery",!0),o.data("kendoMenu").open(i))},open:function(e){var i=t(e.item);if(s.element.data("menu-opening",!0),i.data("bodyWidth",t("body").width()),!i.hasClass("menu__element--item")){var n=i.data("menu-url");if(n){if(!i.data("menu-noQuery")){var r=i.find(".menu__loading");r.length>0&&i.data("menu-loading",r),0===r.length&&i.data("menu-loading")&&i.find(".listmenu__content").html("").append(i.data("menu-loading")),t.get(n,function(t){var e=t.data;i.find(".listmenu__content").html(""),s._insertMenuContent(e.content,i.find(".listmenu__content"),s,i),i.kendoMenu({openOnClick:!0,closeOnClick:!0}),0!==parseInt(i.find(".k-animation-container").css("left"))&&0!==parseInt(i.find(".k-animation-container").css("right"))&&(i.data("menu-openAgain",!0),o.data("kendoMenu").close(i))}).fail(function(e){try{var n=e.responseText;i.find(".listmenu__content").html(t("<div/>").text(n).addClass("menu--error"))}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}})}i.data("menu-noQuery",!1)}}},activate:function(i){var n=t(i.item),o=n.find(".k-animation-container"),r=n.data("bodyWidth"),a=n.outerWidth(),l=n.offset().left,d=o.outerWidth(),c=o.offset().left;(t("body").width()>r||window.document.documentElement.scrollHeight>window.document.documentElement.clientHeight)&&c+d>r&&o.css("left","auto").css("right",l-r+a+"px"),e.delay(function(){s.element.data("menu-opening",!1)},2e3)}}),this.element.find(".menu--left").last().addClass("menu--lastLeft"),t(window).off("scroll.ddui"),"NAV"===this.element.prop("nodeName").toUpperCase()&&t(window).on("scroll.ddui",function(){t(window).scrollTop()>r.position().top?r.data("isFixed")||(r.data("isFixed","1"),r.parent().addClass("menu--fixed"),t(window.document).trigger("redrawErrorMessages")):r.data("isFixed")&&(r.data("isFixed",null),r.parent().removeClass("menu--fixed"),t(window.document).trigger("redrawErrorMessages"))}),this.kendoMenuWidget=o.data("kendoMenu"),this.kendoMenuWidget.append([{text:n.___("Other","UImenu")+'<span class="menu--count" />',cssClass:"menu__element  menu_element--hamburger ",encoded:!1,items:[]}]),t(window).on("resize.dcpMenu",e.bind(this.inhibitBarMenu,this)),t(window).on("resize.dcpMenu",e.debounce(e.bind(this.updateResponsiveMenu,this),100,!1))},inhibitBarMenu:function(){var e=this;e.element.data("menu-opening")||"hidden"===this.element.css("overflow")||this.element.find("li.k-state-border-down").each(function(){e.kendoMenuWidget.close(t(this))})},getScrollBarWidth:function(){if(!this.scrollBarWidth){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;i===n&&(n=e.clientWidth),document.body.removeChild(e),this.scrollBarWidth=i-n}return this.scrollBarWidth},updateResponsiveMenu:function(){var i,n=this.element,o=n.find("ul.k-menu > .menu__element:not(.menu--important,.menu_element--hamburger)"),r=n.find("ul.k-menu > .menu__element.menu--important"),s=[],a=0,l=0,d=0,c=n.width()-2,u=this.kendoMenuWidget,p=t(".menu_element--hamburger"),h=t(p.find("ul").get(0)).find("> li.k-item"),f=h.length;n.data("menu-opening")||(this.inhibitBarMenu(),r.each(function(){c-=t(this).outerWidth()}),c-=p.outerWidth(),window.document.documentElement.scrollHeight<=window.document.documentElement.clientHeight&&(c-=this.getScrollBarWidth()),i=o.length,o.each(function(){(a+=t(this).outerWidth())>c?(t(this).data("original-width",t(this).outerWidth()),s.push(this)):l+=t(this).outerWidth(),i--}),d=c-l,0===f&&1===s.length&&t(s[0]).outerWidth()<d+p.outerWidth()&&(s=[]),e.each(s.reverse(),function(e){0===p.find("li.k-item").length?u.append(t(e),p):u.insertBefore(t(e),t(p.find("li.k-item").get(0)))}),0===s.length&&(h=t(p.find("ul").get(0)).find("> li.k-item"),f=h.length,h.each(function(){d>0&&(1===f&&(d+=p.width()),(a=t(this).data("original-width"))<d?(u.insertBefore(t(this),p),d-=t(this).outerWidth()):d=-1)})),0===t(p.find("ul").get(0)).find("> li.k-item").length&&p.hide(),s.length>0&&p.show(),n.css("overflow","").css("max-height",""))},_insertMenuContent:function(n,o,r,s){var a,l=!1;r=r||this,s&&(e.each(n,function(t){(t.iconUrl||t.beforeContent)&&(l=!0)}),l&&e.each(n,function(t){t.iconUrl||t.beforeContent||"separatorMenu"!==t.type&&(t.beforeContent=" ")})),e.each(n,function(n){var s;"hidden"!==n.visibility&&(n.htmlAttr=[],e.each(n.htmlAttributes,function(t,e){"class"===e?n.cssClass=t:n.htmlAttr.push({attrId:e,attrValue:t}),n.htmlLabel&&(n.htmlLabel=i.render(n.htmlLabel||"",{document:r.options.document})),n.label&&(n.label=i.render(n.label||"",{document:r.options.document})),n.tooltipLabel&&(n.tooltipLabel=i.render(n.tooltipLabel||"",{document:r.options.document}))}),n.contentLabel=n.htmlLabel||n.label,n.disabled="disabled"===n.visibility,"listMenu"===n.type?(a="listMenu",s=t(i.render(r._getTemplate(a)||"",n)),r._insertMenuContent(n.content||"",s.find(".listmenu__content"),r,n)):"dynamicMenu"===n.type?(a="dynamicMenu",n.url&&(n.document=r.options.document,n.url=i.render(n.url||"",n)),s=t(i.render(r._getTemplate(a)||"",n))):(n.document=r.options.document,n.url&&(n.url=i.render(n.url||"",n)),s=t(i.render(r._getTemplate(n.type)||"",n))),n.tooltipLabel&&r._tooltips.push(s.tooltip({trigger:"hover",html:n.tooltipHtml,placement:n.tooltipPlacement?n.tooltipPlacement:"bottom",container:".dcpDocument__menu"})),n.important&&s.addClass("menu--important"),s.data("menuConfiguration",n),o.append(s))})},_getTemplate:function(t){if(this.options.templates&&this.options.templates.menu&&this.options.templates.menu[t])return this.options.templates.menu[t];if(window.dcp.templates&&window.dcp.templates.menu&&window.dcp.templates.menu[t])return window.dcp.templates.menu[t];throw new Error("Menu unknown template "+t)},_destroy:function(){var i=this.element.find(".menu__content").data("kendoMenu");i&&i.destroy(),t(window).off(".dcpMenu"),e.each(this.popupWindows,function(t){t.destroy()}),e.each(this._tooltips,function(t){t.tooltip("dispose")}),this.element.empty(),this._super()}})}.apply(e,n))||(t.exports=o)},"8c1928b0f0f644cba374":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06")],void 0===(o=function(t,e){return e.Model.extend({typeModel:"ddui:menu",isNew:function(){return!0}})}.apply(e,n))||(t.exports=o)},"8df78adf9774feae5b6e":function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("d1cffa31e143773735c0")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e,i,n){var o=function(){try{"foo".localeCompare("bar","i")}catch(t){return"RangeError"===t.name}return!1}();return t.widget("dcp.dcpEnum",t.dcp.dcpAttribute,{options:{type:"enum",sourceValues:[],sourceUri:null,labels:{invalidEntry:"Invalid Entry",invertSelection:"Click to answer {{displayValue}}",selectMessage:"Select",unselectMessage:"UnSelect",chooseAnotherChoice:"Choose another choice",selectAnotherChoice:"Select choice",displayOtherChoice:"** {{value}} **"},renderOptions:{kendoDropDownConfiguration:{filter:"none",autoBind:!0},kendoComboBoxConfiguration:{filter:"startswith"},kendoMultiSelectConfiguration:{filter:"startswith"},editDisplay:"list",useFirstChoice:!1,useSourceUri:!1,useOtherChoice:!1,placeHolder:"Select",orderBy:!1}},_initDom:function(){var t=this;if("write"===this.getMode()&&this.options.renderOptions&&this.options.renderOptions.orderBy)switch(this.options.renderOptions.orderBy){case"key":this.options.sourceValues&&this.options.sourceValues.sort&&(this.options.sourceValues=this.options.sourceValues.sort(function(t,e){return t.key===e.key?0:t.key<e.key?-1:1}));break;case"label":this.options.sourceValues&&this.options.sourceValues.sort&&(this.options.sourceValues=this.options.sourceValues.sort(function(e,i){return o?String(e.label).localeCompare(String(i.label),t.options.locale,{numeric:!0,caseFirst:!1}):String(e.label).localeCompare(String(i.label))}))}if(this._isMultiple()?(this.options.isMultiple=!0,e.each(this.options.attributeValue,function(e){e&&(e.exists=!1!==e.exists,!1===e.exists&&(e.displayValue=i.render(t.options.labels.displayOtherChoice,e)))})):!1===this.options.attributeValue.exists&&(this.options.attributeValue.displayValue=i.render(this.options.labels.displayOtherChoice,this.options.attributeValue)),"read"===this.getMode()&&(this._isMultiple()?(this.options.attributeValues=e.toArray(this.options.attributeValue),this.options.isMultiple=!0):(this.options.attributeValues=[this.options.attributeValue],this.options.isMultiple=!1),this._super()),"write"===this.getMode()){if(this.options.options&&"auto"===this.options.options.eformat&&(this.options.renderOptions.useSourceUri=!0),!0===this.options.renderOptions.useOtherChoice&&(this.options.otherUuid=e.uniqueId("enum")),this.options.index>=0){var n=this.element.closest("table").data("enumIndex");n||(n={}),n[this.options.id]||(n[this.options.id]=0),this.options.inArray=!0,this.options.enumIndex=n[this.options.id],n[this.options.id]++,this.element.closest("table").data("enumIndex",n)}if(this._initMainElementClass(),this._isMultiple()){switch(this.options.renderOptions.editDisplay){case"autoCompletion":case"list":this.multipleSelect();break;case"horizontal":case"vertical":this.checkboxButtons();break;case"bool":throw new Error("Enum bool display cannot be applied to a multiple attribute : "+this.options.id);default:this.multipleSelect()}this.element.on("click"+this.eventNamespace,".dcpAttribute__value--enum--button",function(e){e.preventDefault(),t.kendoWidgetObject.search("")})}else switch(this.options.renderOptions.editDisplay){case"autoCompletion":this.singleCombobox();break;case"list":this.singleDropdown();break;case"bool":this.boolButtons();break;case"horizontal":case"vertical":this.radioButtons();break;default:this.singleDropdown()}}this.noButtonDisplay()},getSingleEnumData:function(){var t,i=[],n=this,o=-1;return this.options.renderOptions.useSourceUri?(i=[this.options.attributeValue],o=this.options.attributeValue.value):(e.each(this.options.sourceValues,function(r){""!==r.key&&" "!==r.key&&((t={}).value=r.key,t.displayValue=r.label||"",t.exists=!1!==r.exists,t.enumUuid=e.uniqueId("enum"),r.key==n.options.attributeValue.value?(o=i.length,t.selected=!0):t.selected=!1,i.push(t))}),-1===o&&this.options.attributeValue&&!e.isUndefined(this.options.attributeValue.value)&&null!==this.options.attributeValue.value&&(o=i.length,i.push({value:this.options.attributeValue.value,displayValue:this.options.attributeValue.displayValue||"",selected:!0,exists:!1,enumUuid:e.uniqueId("enum")}))),{data:i,index:o}},getMultipleEnumData:function(){var t,i=[],n=[],o=!1,r=[];return this.options.attributeValue&&null!==this.options.attributeValue.value&&(r=e.toArray(this.options.attributeValue)),this.options.renderOptions.useSourceUri?(i=r,n=e.pluck(r,"value")):(e.each(this.options.sourceValues,function(n){(t={}).value=n.key,t.displayValue=n.label||"",t.selected=!1,t.exists=!1!==n.exists,t.enumUuid=e.uniqueId("enum"),(o=e.some(r,function(t){return t.value==n.key}))&&(t.selected=!0),i.push(t)}),e.each(r,function(o){null!==o.value&&""!==o.value&&(!1===o.exists&&((t={}).value=o.value,t.displayValue=o.displayValue,t.selected=!0,t.exists=!1,t.enumUuid=e.uniqueId("enum"),i.push(t)),n.push(o.value))})),{data:i,selectedValues:n}},retrieveItems:function(e){var i=this,n={};this.options.renderOptions.orderBy&&(n.orderBy=this.options.renderOptions.orderBy),t.ajax({type:"GET",url:this.options.sourceUri,dataType:"json",data:n}).done(function(t){i.options.sourceValues=t.data.enumItems,i.options.renderOptions.useSourceUri=!1,e(i)}).fail(function(e){t("body").trigger("notification",{htmlMessage:"Enumerate "+i.options.id,message:e.statusText,type:"error"})})},noButtonDisplay:function(){0===this.element.find(".dcpAttribute__content__buttons button").length&&(this.element.find(".dcpAttribute__value--enumbuttons").addClass("dcpAttribute__content__nobutton"),this.element.find(".dcpAttribute__content__buttons").hide())},boolButtons:function(){var n,o=this.options,r=this;if(this.options.renderOptions.useSourceUri)this.retrieveItems(function(t){t.boolButtons()});else if(n=this.getSingleEnumData(),o.enumValues=n.data,o.enumValues.length>1&&(o.enumValues[0].off=!0,o.enumValues[1].on=!0),this.options.isMultiple=!0,this.options.renderOptions.useOtherChoice=!1,this.element.append(i.render(this._getTemplate("writeToggle")||"",this.options)),this.options.isMultiple=!1,r.options.labels.invertSelection&&this.element.find(".dcpAttribute__value--toggle").each(function(e){o.enumValues[e]&&t(this).tooltip({trigger:"hover",container:r.element,title:i.render(r.options.labels.invertSelection||"",o.enumValues[(e+1)%2])})}),this.noButtonDisplay(),this.element.on("click"+this.eventNamespace,".dcpAttribute__value--toggle",function(t){t.preventDefault(),e.some(o.enumValues,function(e){return(null===r.options.attributeValue.value||e.value!==r.options.attributeValue.value)&&(r.setValue(e,t),!0)})}),this.getContentElements().each(function(){t(this).closest(".dcpAttribute__value--enumlabel").addClass("k-button")}),null===r.options.attributeValue.value){var s=o.enumValues[0];s&&r.setValue({value:s.value,displayValue:s.displayValue})}},getContentElements:function(){return!this.options.inArray||"horizontal"!==this.options.renderOptions.editDisplay&&"vertical"!==this.options.renderOptions.editDisplay&&"bool"!==this.options.renderOptions.editDisplay?this._super():this.element.find('.dcpAttribute__value[name="'+this.options.id+"["+this.options.enumIndex+']"]')},radioButtons:function(){var n,o,r=this.options,s=this;if(this.options.renderOptions.useSourceUri)this.retrieveItems(function(t){t.radioButtons()});else{if(n=this.getSingleEnumData(),r.enumValues=n.data,!0===e.some(n.data,function(t){return!1===t.exists})&&(this.options.renderOptions.useOtherChoice=!1),this.element.append(i.render(this._getTemplate("writeRadio")||"",this.options)),o=this.element.find(".dcpAttribute__value--enumlabel"),this.noButtonDisplay(),o.on("change"+this.eventNamespace,"input[type=radio]",function(e){var i={};i.value=t(this).val(),i.displayValue=t(this).closest(".dcpAttribute__value--enumlabel").find("label").text().trim(),s.setValue(i,e)}),this.getContentElements().each(function(){t(this).closest("label").addClass("k-button")}),s.options.renderOptions.useFirstChoice&&null===s.options.attributeValue.value){var a=r.enumValues[0];a&&s.setValue({value:a.value,displayValue:a.displayValue})}s.options.labels.selectMessage&&this.element.find(".dcpAttribute__value--enumbuttons").tooltip({container:".dcpDocument",selector:".dcpAttribute__value--enumlabel--text",trigger:"hover",title:function(){return t(this).closest(".dcpAttribute__value--enumlabel").find("input").prop("checked")?null:i.render(s.options.labels.selectMessage,{displayValue:t(this).text(),value:t(this).parent().find("input").val()})}}),this._checkRadioOther()}},checkboxButtons:function(){var e,n=this.options,o=this;this.options.renderOptions.useSourceUri?this.retrieveItems(function(t){t.checkboxButtons()}):(e=this.getMultipleEnumData(),n.enumValues=e.data,this.element.append(i.render(this._getTemplate("writeRadio")||"",this.options)),this.noButtonDisplay(),this.element.on("change"+this.eventNamespace,".dcpAttribute__value--enumlabel input[type=checkbox]",function(e){var i=[];o.getContentElements().each(function(){var e=t(this);if(e.prop("checked")){var n={};n.value=e.val(),n.displayValue=e.closest("label").text().trim(),i.push(n)}}),o.setValue(i,e)}),this.getContentElements().each(function(){t(this).closest("label").addClass("k-button")}),this.options.labels.selectMessage&&this.element.find(".dcpAttribute__value--enumbuttons").tooltip({container:".dcpDocument",selector:".dcpAttribute__value--enumlabel--text",trigger:"hover",title:function(){return t(this).closest(".dcpAttribute__value--enumlabel").find("input").prop("checked")?i.render(o.options.labels.unselectMessage,{displayValue:t(this).text(),value:t(this).parent().find("input").val()}):i.render(o.options.labels.selectMessage,{displayValue:t(this).text(),value:t(this).parent().find("input").val()})}}),!0===this.options.renderOptions.useOtherChoice&&this._checkBoxOther())},_checkRadioOther:function(){this.element.find(".dcpAttribute__value--enum--other").on("focus"+this.eventNamespace,function(){t(this).trigger("change")}).on("change"+this.eventNamespace,function(){var e=t(this).closest(".dcpAttribute__value--enumlabel");e.find(".dcpAttribute__value--edit").val(t(this).val()),e.find("input[type=radio]").trigger("change")}).on("keyup"+this.eventNamespace,function(e){var i=e.keyCode?e.keyCode:e.which;13!==i&&10!==i||t(this).blur()})},_checkBoxOther:function(){this.element.on("focus"+this.eventNamespace,".dcpAttribute__value--enum--other",function(){t(this).trigger("change")}).on("change"+this.eventNamespace,".dcpAttribute__value--enum--other",function(){var i=t(this).closest(".dcpAttribute__value--enumlabel"),n=i.find(".dcpAttribute__value--edit"),o=i.find("input[type=checkbox]");if(n.val(t(this).val()),!e.some(t(this).closest(".dcpAttribute__value--enumbuttons").find(".dcpAttribute__value--enum--other"),function(e){return""===t(e).val()})){var r=i.clone(),s=e.uniqueId("enum");r.find("input[type=checkbox]").attr("id",s),r.find("label").attr("for",s),i.parent().append(r),r.find("input").val("").prop("checked",!1),o.prop("checked")||i.find("label").trigger("click")}o.trigger("change")}).on("keyup"+this.eventNamespace,".dcpAttribute__value--enum--other",function(e){var i=e.keyCode?e.keyCode:e.which;13!==i&&10!==i||t(this).blur()})},singleDropdown:function(){var t,e=this.getKendoOptions();this.element.append(i.render(this._getTemplate("write")||"",this.options)),this.kendoWidget=this.element.find(".dcpAttribute__value--edit"),t=this.kendoWidget.kendoDropDownList(e).data("kendoDropDownList"),this.kendoWidgetObject=this.kendoWidget.data("kendoDrobDownList"),t.list.find(".k-list-optionlabel").addClass("placeholder--clear")},multipleSelect:function(){var t=this.getKendoOptions();this.element.append(i.render(this._getTemplate("write")||"",this.options)),this.kendoWidget=this.element.find(".dcpAttribute__value--edit"),this.kendoWidget.kendoMultiSelect(t),this.kendoWidgetObject=this.kendoWidget.data("kendoMultiSelect")},singleCombobox:function(){var t,e=this.getKendoOptions(),n=this;this.element.append(i.render(this._getTemplate("write")||"",this.options)),this.kendoWidget=this.element.find(".dcpAttribute__value--edit"),t=this.kendoWidget.kendoComboBox(e).data("kendoComboBox"),this.kendoWidgetObject=t,this.options.renderOptions.useSourceUri?null===this.options.attributeValue.value?t.value(""):(t.dataSource.data([this.options.attributeValue]),t.value(this.options.attributeValue.value)):this.options.attributeValue.value&&t.value(this.options.attributeValue.value),this.element.on("click"+this.eventNamespace,".dcpAttribute__content__button--delete",function(){n.setError(null),t.dataSource.filter({}),t.value("")})},setValue:function(i,n){var o,r,s=this;if("bool"===this.options.renderOptions.editDisplay&&null===i.value&&this.options.enumValues[0]&&(i=this.options.enumValues[0]),this._super(i,n),"write"===this.getMode())if(this._isMultiple())switch(this.options.renderOptions.editDisplay){case"autoCompletion":case"list":o=this.kendoWidget.data("kendoMultiSelect"),r=e.map(i,function(t){return s.options.renderOptions.useSourceUri||o.dataSource.get(t.value)||o.dataSource.add(t),t.value}),e.isEqual(o.value(),r)||(this.flashElement(),this.options.renderOptions.useSourceUri&&r.length>0&&(e.each(i,function(t){t.exists=!1!==t.exists}),o.dataSource.data(i)),o.value(r));break;case"horizontal":case"vertical":this.getContentElements().each(function(){var n=t(this),o=n.val();e.some(i,function(t){return t.value==o})?(n.prop("checked",!0),n.closest(".dcpAttribute__value--enumlabel").addClass("selected")):(n.prop("checked",!1),n.closest(".dcpAttribute__value--enumlabel").removeClass("selected"))}),this.element.find(".dcpAttribute__value--enumlabel--text").tooltip("hide");break;default:throw new Error("Unknow Enum mode : "+this.options.renderOptions.editDisplay)}else switch(this.options.renderOptions.editDisplay){case"autoCompletion":o=this.kendoWidget.data("kendoComboBox"),e.isEqual(o.value(),i.value)||(this.flashElement(),null!==i.value?(this.options.renderOptions.useSourceUri?o.dataSource.data([i]):o.dataSource.get(i.value)||o.dataSource.add(i),this.setError(null),o.value(i.value)):o.value(""));break;case"list":o=this.kendoWidget.data("kendoDropDownList"),e.isEqual(o.value(),i.value||"")||(this.flashElement(),o.dataSource.get(i.value)||o.dataSource.add(i),o.value(i.value||""));break;case"bool":this.getContentElements().each(function(){var n,o=t(this);o.data("togglevalue").toString()===i.value?o.hasClass("selected")||(o.hasClass("on")?(n=!0,o.removeClass("on").addClass("off")):o.hasClass("off")&&(o.removeClass("off").addClass("on"),n=!1),o.addClass("selected").removeClass("unselected"),e.defer(function(){!0===n?o.addClass("on").removeClass("off"):o.addClass("off").removeClass("on")})):o.removeClass("selected").addClass("unselected")}),this.element.find(".dcpAttribute__value--enumlabel").tooltip("hide");break;case"horizontal":case"vertical":this.getContentElements().each(function(){var e=t(this);e.val()==i.value?(e.prop("checked",!0),e.closest(".dcpAttribute__value--enumlabel").addClass("selected")):(e.prop("checked",!1),e.closest(".dcpAttribute__value--enumlabel").removeClass("selected"))}),this.element.find(".dcpAttribute__value--enumlabel--text").tooltip("hide");break;default:throw new Error("Unknow Enum mode : "+this.options.renderOptions.editDisplay)}else this._super(i,n),this.redraw()},autocompleteRequestEnum:function(n){var o={},r=this;if(n.data.filter&&n.data.filter.filters&&n.data.filter.filters.length>0&&(o.keyword=n.data.filter.filters[0].value,o.operator=n.data.filter.filters[0].operator),this.options.renderOptions.orderBy&&(o.orderBy=this.options.renderOptions.orderBy),!this.options.sourceUri)throw new Error("Enum : sourceUri must be defined if renderOption useSourceUri is set to true");t.ajax({type:"GET",url:this.options.sourceUri,data:o,dataType:"json",success:function(t){var o=[];e.each(t.data.enumItems,function(t){o.push({value:t.key,displayValue:t.label||"",exists:!1!==t.exists})}),r._isMultiple()?e.each(r.options.attributeValue,function(t){e.some(o,function(e){return e.value===t.value})||o.push(t)}):null!==r.options.attributeValue.value&&(e.contains(e.pluck(o,"value"),r.options.attributeValue.value)||(r.options.attributeValue.displayValue===r.options.attributeValue.value&&(r.options.attributeValue.displayValue=i.render(r.options.labels.displayOtherChoice,r.options.attributeValue)),o.push(r.options.attributeValue))),n.success(o)},error:function(t){n.error(t)}})},getKendoOptions:function(){var i=this,n=null,o={},r={};return this._isMultiple()?(n=this.getMultipleEnumData(),r={dataTextField:"displayValue",dataValueField:"value",clearButton:!1,dataSource:this.options.renderOptions.useSourceUri?n.data:new kendo.data.DataSource({data:n.data,schema:{model:{id:"value"}}}),placeholder:this.options.renderOptions.placeHolder,value:n.selectedValues,change:function(t){t.preventDefault();var n=e.toArray(i.kendoWidget.data("kendoMultiSelect").dataItems()),o=[];e.each(n,function(t){o.push({value:t.value,displayValue:t.displayValue,exists:!1!==t.exists})}),i.setValue(o,t)},open:function(t){e.bind(i._kOpen,i,t,this)()},close:function(t){e.bind(i._kClose,i,t,this)()}},e.isObject(i.options.renderOptions.kendoMultiSelectConfiguration)&&(o=i.options.renderOptions.kendoMultiSelectConfiguration)):(n=this.getSingleEnumData(),r={dataTextField:"displayValue",dataValueField:"value",clearButton:!1,optionLabel:{displayValue:this.options.renderOptions.placeHolder+" ",value:"",exists:!0},optionLabelTemplate:'<span class="placeholder">#: displayValue #</span>',dataSource:this.options.renderOptions.useSourceUri?n.data:new kendo.data.DataSource({data:n.data,schema:{model:{id:"value"}}}),index:n.index<0?void 0:n.index,autoBind:!1,change:function(t){if(this.value()&&-1===this.selectedIndex)i.setError(i.options.labels.invalidEntry),i._getFocusInput().each(function(){this.focus()});else{i.setError(null);var e={value:this.value(),displayValue:this.text()};i.setValue(e,t)}},dataBound:function(){if(i.options.renderOptions.useFirstChoice&&null===i.options.attributeValue.value){var t=this.dataSource.at(0);t&&i.setValue({value:t.value,displayValue:t.displayValue})}},open:function(t){e.bind(i._kOpen,i,t,this)()},close:function(t){e.bind(i._kClose,i,t,this)()}},"autoCompletion"===this.options.renderOptions.editDisplay?(r.index=-1,r.value=this.options.attributeValue.value,r.placeholder=this.options.renderOptions.placeHolder,e.isObject(i.options.renderOptions.kendoComboBoxConfiguration)&&(o=i.options.renderOptions.kendoComboBoxConfiguration)):e.isObject(i.options.renderOptions.kendoDropDownConfiguration)&&(o=i.options.renderOptions.kendoDropDownConfiguration)),!0===i.options.renderOptions.useOtherChoice&&(r.headerTemplate=t('<div><div class="dcpAttribute__value--enum-other"><div class="input-group dcpAttribute__value--enum-other-content"><input class="form-control" type="text" placeholder="'+i.options.labels.chooseAnotherChoice+'"/><span class="input-group-btn"><button class="btn btn-primary dcpAttribute__value--enum-other-select">'+i.options.labels.selectAnotherChoice+"</button></span> </div></div></div>").html()),this.options.renderOptions.useSourceUri&&(r.dataSource={data:n.data,index:n.index,serverFiltering:!0,minLength:0,transport:{read:e.bind(i.autocompleteRequestEnum,i)}}),e.extend(r,o)},_kSelectOther:function(n,o,r){if(o.dataSource.filter({}),this._isMultiple()){var s=e.toArray(o.dataItems()),a=[];e.each(s,function(t){a.push({value:t.value,displayValue:t.displayValue,exists:t.exists})}),a.push({value:r,exists:!1,displayValue:i.render(this.options.labels.displayOtherChoice,{value:r})}),this.setValue(a,n)}else this.setValue({value:r,exists:!1,displayValue:i.render(this.options.labels.displayOtherChoice,{value:r})},n);t(".dcpAttribute__value--enum-other input").blur(),o.close()},_kClose:function(t,e){if(!0===this.options.renderOptions.useOtherChoice){var i=e.ul.closest(".k-list-container").find(".dcpAttribute__value--enum-other");(!1!==i.data("dcpEnumOtherFirstClose")||i.find("input").is(":focus"))&&(t.preventDefault(),i.data("dcpEnumOtherFirstClose",!1))}},_kOpen:function(i,n){var o=this;if(!0===this.options.renderOptions.useOtherChoice){var r=n.ul.closest(".k-list-container"),s=r.find(".dcpAttribute__value--enum-other");1===s.length&&!0!==s.data("dcpEnumOtherInitialized")&&(s.data("dcpEnumOtherInitialized",!0),s.find(".dcpAttribute__value--enum-other-select").prop("disabled",!0),r.prepend(s),s.on("click"+this.eventNamespace,"input",function(e){e.preventDefault(),t(this).focus(),t(this).data("dcpEnumOtherHasFocus",!0)}),r.on("click"+this.eventNamespace,"li.k-item",function(){r.find(".dcpAttribute__value--enum-other input").blur(),n.close()}),s.on("keyup"+this.eventNamespace,"input",function(t){var i=t.keyCode?t.keyCode:t.which,a=r.find(".dcpAttribute__value--enum-other input").val();13===i||10===i?a&&e.bind(o._kSelectOther,o,t,n,a)():n.search(a),s.find(".dcpAttribute__value--enum-other-select").prop("disabled",!a)}),s.on("click"+this.eventNamespace,".dcpAttribute__value--enum-other-select",function(t){var i=r.find(".dcpAttribute__value--enum-other input").val();i&&e.bind(o._kSelectOther,o,t,n,i)()})),r.find(".dcpAttribute__value--enum-other").data("dcpEnumOtherFirstClose",!0)}},close:function(){return this.kendoWidget&&this.kendoWidget.data("kendoDropDownList")&&this.kendoWidget.data("kendoDropDownList").close(),this.kendoWidget&&this.kendoWidget.data("kendoComboBox")&&this.kendoWidget.data("kendoComboBox").close(),this.kendoWidget&&this.kendoWidget.data("kendoMultiSelect")&&this.kendoWidget.data("kendoMultiSelect").close(),this._super()},getType:function(){return"enum"},_destroy:function(){this.kendoWidget&&this.kendoWidget.data("kendoDropDownList")&&this.kendoWidget.data("kendoDropDownList").destroy(),this.kendoWidget&&this.kendoWidget.data("kendoComboBox")&&this.kendoWidget.data("kendoComboBox").destroy(),this.kendoWidget&&this.kendoWidget.data("kendoMultiSelect")&&this.kendoWidget.data("kendoMultiSelect").destroy(),this._super()}}),t.fn.dcpEnum})},"8e08e542008e4aef1f58":function(t,e,i){var n,o;(function(){function i(t){return function(e,i,n,o){i=C(i,o,4);var r=!V(e)&&k.keys(e),s=(r||e).length,a=t>0?0:s-1;return arguments.length<3&&(n=e[r?r[a]:a],a+=t),function(e,i,n,o,r,s){for(;r>=0&&r<s;r+=t){var a=o?o[r]:r;n=i(n,e[a],a,e)}return n}(e,i,n,r,a,s)}}function r(t){return function(e,i,n){i=x(i,n);for(var o=M(e),r=t>0?0:o-1;r>=0&&r<o;r+=t)if(i(e[r],r,e))return r;return-1}}function s(t,e,i){return function(n,o,r){var s=0,a=M(n);if("number"==typeof r)t>0?s=r>=0?r:Math.max(r+a,s):a=r>=0?Math.min(r+1,a):r+a+1;else if(i&&r&&a)return r=i(n,o),n[r]===o?r:-1;if(o!=o)return(r=e(f.call(n,s,a),k.isNaN))>=0?r+s:-1;for(r=t>0?s:a-1;r>=0&&r<a;r+=t)if(n[r]===o)return r;return-1}}function a(t,e){var i=N.length,n=t.constructor,o=k.isFunction(n)&&n.prototype||u,r="constructor";for(k.has(t,r)&&!k.contains(e,r)&&e.push(r);i--;)(r=N[i])in t&&t[r]!==o[r]&&!k.contains(e,r)&&e.push(r)}var l=this,d=l._,c=Array.prototype,u=Object.prototype,p=Function.prototype,h=c.push,f=c.slice,m=u.toString,g=u.hasOwnProperty,v=Array.isArray,b=Object.keys,_=p.bind,y=Object.create,w=function(){},k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};void 0!==t&&t.exports&&(e=t.exports=k),e._=k,k.VERSION="1.8.3";var C=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)};case 4:return function(i,n,o,r){return t.call(e,i,n,o,r)}}return function(){return t.apply(e,arguments)}},x=function(t,e,i){return null==t?k.identity:k.isFunction(t)?C(t,e,i):k.isObject(t)?k.matcher(t):k.property(t)};k.iteratee=function(t,e){return x(t,e,1/0)};var T=function(t,e){return function(i){var n=arguments.length;if(n<2||null==i)return i;for(var o=1;o<n;o++)for(var r=arguments[o],s=t(r),a=s.length,l=0;l<a;l++){var d=s[l];e&&void 0!==i[d]||(i[d]=r[d])}return i}},D=function(t){if(!k.isObject(t))return{};if(y)return y(t);w.prototype=t;var e=new w;return w.prototype=null,e},A=function(t){return function(e){return null==e?void 0:e[t]}},E=Math.pow(2,53)-1,M=A("length"),V=function(t){var e=M(t);return"number"==typeof e&&e>=0&&e<=E};k.each=k.forEach=function(t,e,i){e=C(e,i);var n,o;if(V(t))for(n=0,o=t.length;n<o;n++)e(t[n],n,t);else{var r=k.keys(t);for(n=0,o=r.length;n<o;n++)e(t[r[n]],r[n],t)}return t},k.map=k.collect=function(t,e,i){e=x(e,i);for(var n=!V(t)&&k.keys(t),o=(n||t).length,r=Array(o),s=0;s<o;s++){var a=n?n[s]:s;r[s]=e(t[a],a,t)}return r},k.reduce=k.foldl=k.inject=i(1),k.reduceRight=k.foldr=i(-1),k.find=k.detect=function(t,e,i){var n;if(void 0!==(n=V(t)?k.findIndex(t,e,i):k.findKey(t,e,i))&&-1!==n)return t[n]},k.filter=k.select=function(t,e,i){var n=[];return e=x(e,i),k.each(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n},k.reject=function(t,e,i){return k.filter(t,k.negate(x(e)),i)},k.every=k.all=function(t,e,i){e=x(e,i);for(var n=!V(t)&&k.keys(t),o=(n||t).length,r=0;r<o;r++){var s=n?n[r]:r;if(!e(t[s],s,t))return!1}return!0},k.some=k.any=function(t,e,i){e=x(e,i);for(var n=!V(t)&&k.keys(t),o=(n||t).length,r=0;r<o;r++){var s=n?n[r]:r;if(e(t[s],s,t))return!0}return!1},k.contains=k.includes=k.include=function(t,e,i,n){return V(t)||(t=k.values(t)),("number"!=typeof i||n)&&(i=0),k.indexOf(t,e,i)>=0},k.invoke=function(t,e){var i=f.call(arguments,2),n=k.isFunction(e);return k.map(t,function(t){var o=n?e:t[e];return null==o?o:o.apply(t,i)})},k.pluck=function(t,e){return k.map(t,k.property(e))},k.where=function(t,e){return k.filter(t,k.matcher(e))},k.findWhere=function(t,e){return k.find(t,k.matcher(e))},k.max=function(t,e,i){var n,o,r=-1/0,s=-1/0;if(null==e&&null!=t)for(var a=0,l=(t=V(t)?t:k.values(t)).length;a<l;a++)(n=t[a])>r&&(r=n);else e=x(e,i),k.each(t,function(t,i,n){((o=e(t,i,n))>s||o===-1/0&&r===-1/0)&&(r=t,s=o)});return r},k.min=function(t,e,i){var n,o,r=1/0,s=1/0;if(null==e&&null!=t)for(var a=0,l=(t=V(t)?t:k.values(t)).length;a<l;a++)(n=t[a])<r&&(r=n);else e=x(e,i),k.each(t,function(t,i,n){((o=e(t,i,n))<s||o===1/0&&r===1/0)&&(r=t,s=o)});return r},k.shuffle=function(t){for(var e,i=V(t)?t:k.values(t),n=i.length,o=Array(n),r=0;r<n;r++)(e=k.random(0,r))!==r&&(o[r]=o[e]),o[e]=i[r];return o},k.sample=function(t,e,i){return null==e||i?(V(t)||(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,e))},k.sortBy=function(t,e,i){return e=x(e,i),k.pluck(k.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index}),"value")};var O=function(t){return function(e,i,n){var o={};return i=x(i,n),k.each(e,function(n,r){var s=i(n,r,e);t(o,n,s)}),o}};k.groupBy=O(function(t,e,i){k.has(t,i)?t[i].push(e):t[i]=[e]}),k.indexBy=O(function(t,e,i){t[i]=e}),k.countBy=O(function(t,e,i){k.has(t,i)?t[i]++:t[i]=1}),k.toArray=function(t){return t?k.isArray(t)?f.call(t):V(t)?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:V(t)?t.length:k.keys(t).length},k.partition=function(t,e,i){e=x(e,i);var n=[],o=[];return k.each(t,function(t,i,r){(e(t,i,r)?n:o).push(t)}),[n,o]},k.first=k.head=k.take=function(t,e,i){if(null!=t)return null==e||i?t[0]:k.initial(t,t.length-e)},k.initial=function(t,e,i){return f.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},k.last=function(t,e,i){if(null!=t)return null==e||i?t[t.length-1]:k.rest(t,Math.max(0,t.length-e))},k.rest=k.tail=k.drop=function(t,e,i){return f.call(t,null==e||i?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var S=function(t,e,i,n){for(var o=[],r=0,s=n||0,a=M(t);s<a;s++){var l=t[s];if(V(l)&&(k.isArray(l)||k.isArguments(l))){e||(l=S(l,e,i));var d=0,c=l.length;for(o.length+=c;d<c;)o[r++]=l[d++]}else i||(o[r++]=l)}return o};k.flatten=function(t,e){return S(t,e,!1)},k.without=function(t){return k.difference(t,f.call(arguments,1))},k.uniq=k.unique=function(t,e,i,n){k.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=x(i,n));for(var o=[],r=[],s=0,a=M(t);s<a;s++){var l=t[s],d=i?i(l,s,t):l;e?(s&&r===d||o.push(l),r=d):i?k.contains(r,d)||(r.push(d),o.push(l)):k.contains(o,l)||o.push(l)}return o},k.union=function(){return k.uniq(S(arguments,!0,!0))},k.intersection=function(t){for(var e=[],i=arguments.length,n=0,o=M(t);n<o;n++){var r=t[n];if(!k.contains(e,r)){for(var s=1;s<i&&k.contains(arguments[s],r);s++);s===i&&e.push(r)}}return e},k.difference=function(t){var e=S(arguments,!0,!0,1);return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){return k.unzip(arguments)},k.unzip=function(t){for(var e=t&&k.max(t,M).length||0,i=Array(e),n=0;n<e;n++)i[n]=k.pluck(t,n);return i},k.object=function(t,e){for(var i={},n=0,o=M(t);n<o;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},k.findIndex=r(1),k.findLastIndex=r(-1),k.sortedIndex=function(t,e,i,n){for(var o=(i=x(i,n,1))(e),r=0,s=M(t);r<s;){var a=Math.floor((r+s)/2);i(t[a])<o?r=a+1:s=a}return r},k.indexOf=s(1,k.findIndex,k.sortedIndex),k.lastIndexOf=s(-1,k.findLastIndex),k.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=Array(n),r=0;r<n;r++,t+=i)o[r]=t;return o};var L=function(t,e,i,n,o){if(!(n instanceof e))return t.apply(i,o);var r=D(t.prototype),s=t.apply(r,o);return k.isObject(s)?s:r};k.bind=function(t,e){if(_&&t.bind===_)return _.apply(t,f.call(arguments,1));if(!k.isFunction(t))throw new TypeError("Bind must be called on a function");var i=f.call(arguments,2),n=function(){return L(t,n,e,this,i.concat(f.call(arguments)))};return n},k.partial=function(t){var e=f.call(arguments,1),i=function(){for(var n=0,o=e.length,r=Array(o),s=0;s<o;s++)r[s]=e[s]===k?arguments[n++]:e[s];for(;n<arguments.length;)r.push(arguments[n++]);return L(t,i,this,this,r)};return i},k.bindAll=function(t){var e,i,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(e=1;e<n;e++)t[i=arguments[e]]=k.bind(t[i],t);return t},k.memoize=function(t,e){var i=function(n){var o=i.cache,r=""+(e?e.apply(this,arguments):n);return k.has(o,r)||(o[r]=t.apply(this,arguments)),o[r]};return i.cache={},i},k.delay=function(t,e){var i=f.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},k.defer=k.partial(k.delay,k,1),k.throttle=function(t,e,i){var n,o,r,s=null,a=0;i||(i={});var l=function(){a=!1===i.leading?0:k.now(),s=null,r=t.apply(n,o),s||(n=o=null)};return function(){var d=k.now();a||!1!==i.leading||(a=d);var c=e-(d-a);return n=this,o=arguments,c<=0||c>e?(s&&(clearTimeout(s),s=null),a=d,r=t.apply(n,o),s||(n=o=null)):s||!1===i.trailing||(s=setTimeout(l,c)),r}},k.debounce=function(t,e,i){var n,o,r,s,a,l=function(){var d=k.now()-s;d<e&&d>=0?n=setTimeout(l,e-d):(n=null,i||(a=t.apply(r,o),n||(r=o=null)))};return function(){r=this,o=arguments,s=k.now();var d=i&&!n;return n||(n=setTimeout(l,e)),d&&(a=t.apply(r,o),r=o=null),a}},k.wrap=function(t,e){return k.partial(e,t)},k.negate=function(t){return function(){return!t.apply(this,arguments)}},k.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},k.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},k.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}},k.once=k.partial(k.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];k.keys=function(t){if(!k.isObject(t))return[];if(b)return b(t);var e=[];for(var i in t)k.has(t,i)&&e.push(i);return I&&a(t,e),e},k.allKeys=function(t){if(!k.isObject(t))return[];var e=[];for(var i in t)e.push(i);return I&&a(t,e),e},k.values=function(t){for(var e=k.keys(t),i=e.length,n=Array(i),o=0;o<i;o++)n[o]=t[e[o]];return n},k.mapObject=function(t,e,i){e=x(e,i);for(var n,o=k.keys(t),r=o.length,s={},a=0;a<r;a++)s[n=o[a]]=e(t[n],n,t);return s},k.pairs=function(t){for(var e=k.keys(t),i=e.length,n=Array(i),o=0;o<i;o++)n[o]=[e[o],t[e[o]]];return n},k.invert=function(t){for(var e={},i=k.keys(t),n=0,o=i.length;n<o;n++)e[t[i[n]]]=i[n];return e},k.functions=k.methods=function(t){var e=[];for(var i in t)k.isFunction(t[i])&&e.push(i);return e.sort()},k.extend=T(k.allKeys),k.extendOwn=k.assign=T(k.keys),k.findKey=function(t,e,i){e=x(e,i);for(var n,o=k.keys(t),r=0,s=o.length;r<s;r++)if(n=o[r],e(t[n],n,t))return n},k.pick=function(t,e,i){var n,o,r={},s=t;if(null==s)return r;k.isFunction(e)?(o=k.allKeys(s),n=C(e,i)):(o=S(arguments,!1,!1,1),n=function(t,e,i){return e in i},s=Object(s));for(var a=0,l=o.length;a<l;a++){var d=o[a],c=s[d];n(c,d,s)&&(r[d]=c)}return r},k.omit=function(t,e,i){if(k.isFunction(e))e=k.negate(e);else{var n=k.map(S(arguments,!1,!1,1),String);e=function(t,e){return!k.contains(n,e)}}return k.pick(t,e,i)},k.defaults=T(k.allKeys,!0),k.create=function(t,e){var i=D(t);return e&&k.extendOwn(i,e),i},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t},k.isMatch=function(t,e){var i=k.keys(e),n=i.length;if(null==t)return!n;for(var o=Object(t),r=0;r<n;r++){var s=i[r];if(e[s]!==o[s]||!(s in o))return!1}return!0};var W=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var o=m.call(t);if(o!==m.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var r="[object Array]"===o;if(!r){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),r){if((l=t.length)!==e.length)return!1;for(;l--;)if(!W(t[l],e[l],i,n))return!1}else{var d,c=k.keys(t);if(l=c.length,k.keys(e).length!==l)return!1;for(;l--;)if(d=c[l],!k.has(e,d)||!W(t[d],e[d],i,n))return!1}return i.pop(),n.pop(),!0};k.isEqual=function(t,e){return W(t,e)},k.isEmpty=function(t){return null==t||(V(t)&&(k.isArray(t)||k.isString(t)||k.isArguments(t))?0===t.length:0===k.keys(t).length)},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=v||function(t){return"[object Array]"===m.call(t)},k.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},k.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){k["is"+t]=function(e){return m.call(e)==="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return k.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(k.isFunction=function(t){return"function"==typeof t||!1}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!==+t},k.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===m.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return null!=t&&g.call(t,e)},k.noConflict=function(){return l._=d,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.noop=function(){},k.property=A,k.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},k.matcher=k.matches=function(t){return t=k.extendOwn({},t),function(e){return k.isMatch(e,t)}},k.times=function(t,e,i){var n=Array(Math.max(0,t));e=C(e,i,1);for(var o=0;o<t;o++)n[o]=e(o);return n},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$=k.invert(P),F=function(t){var e=function(e){return t[e]},i="(?:"+k.keys(t).join("|")+")",n=RegExp(i),o=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(o,e):t}};k.escape=F(P),k.unescape=F($),k.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),k.isFunction(n)?n.call(t):n};var R=0;k.uniqueId=function(t){var e=++R+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\u2028|\u2029/g,H=function(t){return"\\"+j[t]};k.template=function(t,e,i){!e&&i&&(e=i),e=k.defaults({},e,k.templateSettings);var n=RegExp([(e.escape||U).source,(e.interpolate||U).source,(e.evaluate||U).source].join("|")+"|$","g"),o=0,r="__p+='";t.replace(n,function(e,i,n,s,a){return r+=t.slice(o,a).replace(B,H),o=a+e.length,i?r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?r+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),e}),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var s=new Function(e.variable||"obj","_",r)}catch(t){throw t.source=r,t}var a=function(t){return s.call(this,t,k)},l=e.variable||"obj";return a.source="function("+l+"){\n"+r+"}",a},k.chain=function(t){var e=k(t);return e._chain=!0,e};var z=function(t,e){return t._chain?k(e).chain():e};k.mixin=function(t){k.each(k.functions(t),function(e){var i=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),z(this,i.apply(k,t))}})},k.mixin(k),k.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=c[t];k.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],z(this,i)}}),k.each(["concat","join","slice"],function(t){var e=c[t];k.prototype[t]=function(){return z(this,e.apply(this._wrapped,arguments))}}),k.prototype.value=function(){return this._wrapped},k.prototype.valueOf=k.prototype.toJSON=k.prototype.value,k.prototype.toString=function(){return""+this._wrapped},void 0===(o=function(){return k}.apply(e,n=[]))||(t.exports=o)}).call(this)},"97640554fbb3ff20724f":function(t,e,i){"use strict";i("a022e26b8d4937e3ebdd");var n=function(t){return t&&t.__esModule?t:{default:t}}(i('external "jQuery"'));n.default.get("api/v1/i18n/DOCUMENT").done(function(t){window.dcp.i18n=t;var e=i("8e08e542008e4aef1f58");i("63e285088893d0390ab6"),i('external "kendo"'),console.timeEnd("js loading");var o,r=(0,n.default)(".document");if(window.dcp=window.dcp||{},window.dcp.documentReady=!1,!window.dcp.viewData&&window.location.hash&&("#"===(o=window.location.hash)[0]&&(o=o.slice(1)),0===o.indexOf("widgetValue")))try{window.dcp.viewData=JSON.parse(o.slice("widgetValue".length))}catch(t){try{window.dcp.viewData=JSON.parse(decodeURI(o.slice("widgetValue".length)))}catch(t){r.documentController("showMessage",{type:"error",message:"unable to retrieve document"})}}window.dcp.triggerReload=function(){window.documentLoaded&&e.isFunction(window.documentLoaded)&&!window.dcp.documentReady&&(window.documentLoaded(r,window.dcp.viewData),window.dcp.documentReady=!0)},!1!==window.dcp.viewData&&window.dcp.viewData.initid?(r.documentController(window.dcp.viewData),r.one("documentready",function(){window.dcp.triggerReload(),e.each(window.dcp.messages,function(t){r.documentController("showMessage",{type:t.type,message:t.contentText})})})):(r.documentController(),window.dcp.triggerReload()),window.dcp.document=r})},"97de2f4cc762b1768ee2":function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("ab4ce4f91706f6c2712e")],void 0===(o=function(t,e,i){return e.Model.extend({typeModel:"ddui:transitionGraph",defaults:{documentId:void 0,state:void 0},url:function(){var t="api/v1/documents/<%= documentId %>/workflows/states/?allStates=1";return t=t.replace("<%= documentId %>",encodeURIComponent(this.get("documentId")))},parse:function(t){if(!1===t.success)throw new Error("Unable to get the data from change state");return{state:this.get("state"),messages:t.messages,workflowStates:t.data.states}}})}.apply(e,n))||(t.exports=o)},"98221531f3fb9af2dff1":function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("61b480911316cdda77a4")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e){return t.widget("dcp.dcpHtmltext",t.dcp.dcpText,{options:{type:"htmltext",renderOptions:{anchors:{target:"_blank"},toolbar:"Basic",height:"100px",toolbarStartupExpanded:!0,ckEditorConfiguration:{},ckEditorAllowAllTags:!1},locale:"en"},ckEditorInstance:null,_initDom:function(){var t=this,n=e.bind(this._super,this),o=e.bind(this._initEvent,this);try{this.popupWindows={},"write"===this.getMode()?function(t){i.e("documentCkEditor").then(function(){i("2571284bb1a224a558e7"),t()}.bind(null,i)).catch(i.oe)}(function(){var i=e.extend(t.ckOptions(),t.options.renderOptions.ckEditorConfiguration);n(),t.options.renderOptions.ckEditorAllowAllTags&&(i.allowedContent={$1:{elements:window.CKEDITOR.dtd,attributes:!0,styles:!0,classes:!0}},i.disallowedContent="script; *[on*]"),t.ckEditorInstance=t.getContentElements().ckeditor(i).editor,t.options.attributeValue.value=t.ckEditorInstance.getData(),o()}):n()}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}},ckOptions:function(){var i=this.options.locale,n=t("head base").attr("href")||"";return this.options.renderOptions.toolbar&&(this.options.renderOptions.ckEditorConfiguration.toolbar=this.options.renderOptions.toolbar),this.options.renderOptions.height&&(this.options.renderOptions.ckEditorConfiguration.height=this.options.renderOptions.height),e.isUndefined(this.options.renderOptions.toolbarStartupExpanded)||(this.options.renderOptions.ckEditorConfiguration.toolbarStartupExpanded=this.options.renderOptions.toolbarStartupExpanded),{language:i.substring(0,2),contentsCss:["css/a4/document/ckeditor.css"],removePlugins:"elementspath",toolbarCanCollapse:!0,entities:!1,baseHref:n,filebrowserImageBrowseUrl:n+"?sole=Y&app=FDL&action=CKIMAGE",filebrowserImageUploadUrl:n+"?sole=Y&app=FDL&action=CKUPLOAD",toolbar_Full:[{name:"document",items:["Sourcedialog","-","NewPage","DocProps","Preview","Print","-","Templates"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",items:["Find","Replace","-","SelectAll","-"]},{name:"forms",items:["Form","Checkbox","Radio","TextField","Textarea","Select","Button","ImageButton","HiddenField"]},"/",{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","CreateDiv","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","BidiLtr","BidiRtl"]},{name:"links",items:["Link","Unlink"]},{name:"insert",items:["Image","Table","HorizontalRule","Smiley","SpecialChar","PageBreak","Iframe"]},"/",{name:"styles",items:["Styles","Format","Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize","ShowBlocks","-","About"]}],toolbar_Default:[{name:"document",items:["Sourcedialog"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",items:["Find","Replace","-","SelectAll"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","CreateDiv","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","BidiLtr","BidiRtl"]},{name:"links",items:["Link","Unlink"]},{name:"insert",items:["Image","Table","HorizontalRule","SpecialChar","PageBreak","Iframe"]},{name:"styles",items:["Styles","Format","Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize","ShowBlocks","-","About"]}],toolbar_Simple:[{name:"document",items:[]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"links",items:["Link","Unlink"]},{name:"insert",items:["Image","Table","SpecialChar"]},{name:"styles",items:["Format","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize","Sourcedialog","-","About"]}],toolbar_Basic:[{name:"links",items:["Bold","Italic","-","NumberedList","BulletedList","-","Link","Unlink","-","Maximize","About"]}],removeButtons:""}},_initEvent:function(){var i=this;this._super(),this.ckEditorInstance&&(this.ckEditorInstance.on("change",function(){i.setValue({value:this.getData()})}),this.ckEditorInstance.on("focus",function(){var t=i.element.find(".input-group");i.showInputTooltip(t),i.element.find(".cke").addClass("k-state-focused"),i.element.closest(".dcpAttribute__content").addClass("dcpAttribute--focus")}),this.ckEditorInstance.on("blur",function(){var t=i.element.find(".input-group");i.hideInputTooltip(t),i.element.find(".cke").removeClass("k-state-focused"),i.element.closest(".dcpAttribute__content").removeClass("dcpAttribute--focus")}),this.ckEditorInstance.on("instanceReady",function(){i._trigger("widgetReady")}),this.element.on("postMoved"+this.eventNamespace,function(t,e){e&&e.to===i.options.index&&i.redraw()})),"write"!==this.getMode()&&this.element.on("click."+this.eventNamespace,'a:not([href^="#action/"]):not([data-action])',function(n){var o,r,s,a,l=t(this),d="";if(n.stopPropagation&&n.stopPropagation(),n.preventDefault(),o=e.extend({},i.options.renderOptions.anchors),i._trigger("anchorClick",{prevent:!1},{$el:i.element,index:i._getIndex(),options:{anchor:this,anchorsConfig:o}})){var c=t("base"),u=new RegExp("^(?:[a-z]+:)?//","i");switch(r=o.target||"_blank",s=this.href,l.attr("href")&&"#"===l.attr("href").substring(0,1)&&(s=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+(window.location.pathname?window.location.pathname:"/")+(window.location.search?window.location.search:"")+l.attr("href")),r){case"_dialog":i.popupWindows[s]?a=i.popupWindows[s]:(a=t("<div/>").appendTo("body").dcpWindow({width:o.windowWidth,height:o.windowHeight,modal:o.modal,content:s,iframe:!0}),i.popupWindows[s]=a,a.data("dcpWindow").kendoWindow().center()),a.data("dcpWindow").open();break;case"_self":u.test(s)?window.location.href=s:window.location.href=c.attr("href")+s;break;default:(o.windowWidth||o.windowHeight)&&(o.windowWidth&&(d+="width="+parseInt(o.windowWidth,10)+","),o.windowHeight&&(d+="height="+parseInt(o.windowHeight,10)+","),d+="resizable=yes,scrollbars=yes"),u.test(s)||(s=c.attr("href")+s),window.open(s,r,d)}}})},_getFocusInput:function(){return this.element},_initChangeEvent:function(){},getWidgetValue:function(){return this.getContentElements().val()},setValue:function(i){if(null===(i=e.clone(i)).value&&(i.value=""),e.has(i,"value")&&!e.has(i,"displayValue")&&(i.displayValue=i.value),"write"===this.getMode()){this.ckEditorInstance.getData().trim()!=i.value.trim()&&(this.getContentElements().val(i.value),this.flashElement(this.element.find("iframe")))}else{if("read"!==this.getMode())throw new Error("Attribute "+this.options.id+" unknown mode "+this.getMode());this.getContentElements().html(i.displayValue)}t.dcp.dcpAttribute.prototype.setValue.call(this,i)},getType:function(){return"htmltext"},_destroy:function(){var t=this;if(this.ckEditorInstance&&this.ckEditorInstance.destroy){if("loaded"===this.ckEditorInstance.status||"ready"===this.ckEditorInstance.status)return this.ckEditorInstance.destroy(),void e.defer(function(){t._destroy()});if("unloaded"===this.ckEditorInstance.status)return void this.ckEditorInstance.on("loaded",function(){t._destroy()})}e.each(this.popupWindows,function(t){t.data("dcpWindow").destroy()}),this._super()},_triggerReady:function(){"write"!==this.getMode()&&this._super()}}),t.fn.dcpHtmltext})},"9bddf72f85a3a88d8c7b":function(t,e,i){"use strict";t.exports=function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}({0:function(t,e,i){i(313),t.exports=i(313)},313:function(t,e){kendo.cultures["fr-FR"]={name:"fr-FR",numberFormat:{pattern:["-n"],decimals:2,",":" ",".":",",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":" ",".":",",groupSize:[3],symbol:"%"},currency:{name:"Euro",abbr:"EUR",pattern:["-n $","n $"],decimals:2,",":" ",".":",",groupSize:[3],symbol:"€"}},calendars:{standard:{days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]},AM:[""],PM:[""],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",F:"dddd d MMMM yyyy HH:mm:ss",g:"dd/MM/yyyy HH:mm",G:"dd/MM/yyyy HH:mm:ss",m:"d MMMM",M:"d MMMM",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"HH:mm",T:"HH:mm:ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM yyyy",Y:"MMMM yyyy"},"/":"/",":":":",firstDay:1}}}}})},a022e26b8d4937e3ebdd:function(t,e){},ab4ce4f91706f6c2712e:function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("bcb63a5837345ee29aa0"),i("11e1c9c4ee0385434097"),i("37746b3b205813560cd8"),i("2ea670d287981a202ee6"),i("fb3f606ecd8a48d7cad0"),i("ff769b61d7927dad04ed"),i("278ba7757aa1904087c6")],void 0===(o=function(t,e,i,n,o,r,s,a,l,d){var c=function(t,i,n){return e.isArray(i)||(i=e.values(i)),n&&e.each(i,function(t){t.parent=n}),t=e.union(t,i),e.each(i,function(i){i.content&&(t=e.union(t,c(t,i.content,i.id)))}),t};return i.Model.extend({typeModel:"ddui:document",idAttribute:"initid",defaults:{revision:-1,viewId:void 0,renderMode:"view",properties:void 0,menus:void 0,attributes:void 0},_customClientData:{},_uploadingFile:0,url:function(){var t="api/v1/",i=this.get("viewId"),n=this._customClientData,o=this.get("currentHttpMethod"),r=this.get("revision");return this.get("creationFamid")&&null===this.id?t+="families/"+encodeURIComponent(this.get("creationFamid"))+"/documentsViews/":(t+="documents/"+encodeURIComponent(this.id),null!==r&&"delete"!==o&&(e.isObject(r)&&r.state?t+="/revisions/"+encodeURIComponent("state:"+r.state):r>=0&&(t+="/revisions/"+encodeURIComponent(r))),void 0===i&&(i="view"===this.get("renderMode")||"delete"===o?"!defaultConsultation":"edit"===this.get("renderMode")?"!defaultEdition":"!defaultConsultation"),"delete"===o&&"edit"===this.get("renderMode")&&(i="!defaultConsultation"),t+="/views/"+encodeURIComponent(i)),e.isEmpty(n)||"read"!==o&&"delete"!==o||(t+="?customClientData="+encodeURIComponent(JSON.stringify(n))),t},sync:function(t,e,n){return this.set("currentHttpMethod",t),i.Model.prototype.sync.apply(this,arguments)},initialize:function(){var e=this;this.listenTo(this,"dduiDocumentFail",this.propagateSynchroError),this.listenTo(this,"destroy",this.destroySubcollection),this.listenTo(this,"destroy",this.unbindLoadEvent),t(window).on("beforeunload."+this.cid,function(){var i=e.get("properties")?e.get("properties").get("security"):null,n={prevent:!1};return e.hasAttributesChanged()?d.___("The form has been modified and is is not saved","ddui"):(e.trigger("beforeClose",n,e.getServerProperties(),this._customClientData),n.prevent?d.___("Unable to close the document","ddui"):void("edit"===e.get("renderMode")&&i&&i.lock&&i.lock.temporary&&(t.ajax({url:"api/v1/documents/"+e.get("initid")+"/locks/temporary",type:"DELETE",async:!1}),e.set("unlocking",!0))))}),t(window).on("pagehide."+this.cid,function(i){var n=e.get("properties")?e.get("properties").get("security"):null,o=e.get("unlocking");e.trigger("close",i,e.getServerProperties(),this._customClientData),!o&&"edit"===e.get("renderMode")&&n&&n.lock&&n.lock.temporary&&t.ajax({url:"api/v1/documents/"+e.get("initid")+"/locks/temporary",type:"DELETE",async:!1})})},toData:function(){var t={document:{}};return t.document.properties=this.getServerProperties(),t.menus=this.get("menus").toJSON(),t.templates=this.get("templates"),t},getValues:function(){var t={};return this.get("attributes")?(this.get("attributes").each(function(i){var n,o=i.get("attributeValue"),r=[];if(i.get("isValueAttribute"))if(i.get("multiple")){if((o=e.toArray(o)).length>0)for(n=0;n<o.length;n+=1)r.push(o[n]||{value:null});else r=[];t[i.id]=r}else t[i.id]=o}),t):t},setValues:function(t){this.get("attributes").each(function(e){var i=t[e.id];e.get("isValueAttribute")&&(e.set("attributeValue",i),e.changed={})})},setProperties:function(t){var i=this;e.each(t,function(t,e){i.get("properties").set(e,t)})},lockDocument:function(){var t=this,e=new r({initid:this.get("initid"),type:"permanent"}),i=this.get("properties").get("security");e.save({},{success:function(e,n){var o=t.get("menus");i.lock=n.data.lock,t.get("properties").set("security,",i),o.setMenu("lock","visibility","hidden"),o.setMenu("unlock","visibility","visible"),t.get("properties").trigger("change")},error:function(e,i){var n=JSON.parse(i.responseText);t.trigger("showError",{title:n.exceptionMessage})}})},unlockDocument:function(){var t=this,e=new r({initid:this.get("initid"),type:""}),i=this.get("properties").get("security");e.destroy({success:function(){var e=t.get("menus");i.lock={lockedBy:{id:0}},t.get("properties").set("security,",i),e.setMenu("lock","visibility","visible"),e.setMenu("unlock","visibility","hidden"),t.get("properties").trigger("change")},error:function(e,i){var n=JSON.parse(i.responseText);t.trigger("showError",{title:n.exceptionMessage})}})},getModelProperties:function(){var t={};return this.get("properties")&&(t=this.get("properties").toJSON()),t.initid=this.get("initid"),t.revision=this.get("revision"),t.viewId=this.get("viewId"),t.renderMode=this.get("renderMode"),t},getServerProperties:function(){var t;return(t=this.initialProperties)&&(t.hasUploadingFiles=this.hasUploadingFile()),t},isModified:function(){return this.hasAttributesChanged()},getDocumentData:function(){var t={properties:this.getModelProperties(),attributeValues:this.getValues(),attributeLabels:{},createAttributeView:function(){return this.id}};return this.get("attributes").each(function(e){t.attributeLabels[e.id]=e.get("label")}),t},hasAttributesChanged:function(){return!!this.get("attributes")&&this.get("attributes").some(function(t){return t.hasValueChanged()})},hasUploadingFile:function(){return this._uploadingFile>0},propagateSynchroError:function(t,i){var n,o,r,s=this,a="",l=[];try{if(!i&&t.message)l.push({type:"error",contentText:t.message}),i={status:500,statusText:"Internal - No HTTP response"};else{l=JSON.parse(i.responseText).messages}}catch(t){return this.cleanErrorMessages(),window.dcp.logger?window.dcp.logger(t):console.error(t),(r=s.getServerProperties())&&r.initid?(i&&0===i.status?s.trigger("showError",{errorCode:"offline",title:d.___("Your navigator seems offline, try later","ddui")}):s.trigger("showError",{errorCode:"unableToParseJson",title:d.___("Server return unreadable","ddui")}),s.setProperties(r),void this.trigger("dduiDocumentDisplayView")):void s.trigger("displayNetworkError")}o={messages:l,responseText:"Unexpected error: "+i.status+" "+i.statusText},this.cleanErrorMessages(),0===o.messages.length&&(s.get("properties")&&(a=s.get("properties").get("title")),s.trigger("showError",{errorCode:null,title:d.___("Unexpected error ","ddui")+a,message:o.responseText})),e.each(o.messages,function(t){switch(t.code){case"CRUD0211":t.data&&t.data.id&&((n=s.get("attributes").get(t.data.id))?(n.setErrorMessage(t.data.err,t.data.index),s.trigger("showError",{title:t.contentText,htmlMessage:t.contentHtml,message:n.attributes.label+" : "+t.data.err,errorCode:t.code})):s.trigger("showError",{title:t.contentText,htmlMessage:t.contentHtml,message:t.data.err,errorCode:t.code}));break;case"CRUD0212":t.data&&t.data.constraint&&e.each(t.data.constraint,function(e){(n=s.get("attributes").get(e.id))?(n.setErrorMessage(e.err,e.index),s.trigger("showError",{title:t.contentText,htmlMessage:t.contentHtml,message:n.attributes.label+" : "+e.err,errorCode:t.code})):s.trigger("showError",{title:t.contentText,htmlMessage:t.contentHtml,message:e.err,errorCode:t.code})}),t.data&&t.data.preStore&&s.trigger("showError",{title:t.contentText,htmlMessage:t.contentHtml,message:t.data.preStore,errorCode:t.code});break;default:"error"===t.type&&t.contentText?s.trigger("showError",{title:t.contentText+" "+(t.code?t.code:""),htmlMessage:t.contentHtml,errorCode:t.code}):t.type&&t.contentText?s.trigger("showMessage",{title:t.contentText+" "+(t.code?t.code:""),type:t.type,htmlMessage:t.contentHtml,errorCode:t.code}):console.error("Error",t)}}),this.trigger("dduiDocumentDisplayView")},validate:function(t,i){var n,o,r=!0,s=this,a=[],l={prevent:!1};try{if(this.trigger("validate",l),l.prevent)return{title:"Unable to save"};if(this.get("attributes").each(function(t){var i=s.get("attributes").get(t.get("parent"));if(t.setErrorMessage(null),!0===t.get("needed")){var o=t.get("attributeValue"),l=!0;t.get("multiple")?"array"===i.get("type")?e.each(o,function(o,s){e.isArray(o)&&o.length>0||o&&o.value||0===o.value||(t.setErrorMessage(d.___("Empty value not allowed","ddui"),s),n=e.template(d.___("{{parentLabel}} / {{label}} (row # {{index}}) is needed","ddui"),{escape:/\{\{(.+?)\}\}/g}),a.push(n({parentLabel:i.get("label"),label:t.get("label"),index:s+1})),r=!1)}):o&&0!==o.length||(l=!1):o&&o.value||0===o.value||(t.setErrorMessage(d.___("Empty value not allowed","ddui")),l=!1),l||(n=e.template(d.___("{{parentLabel}} / {{label}} is needed","ddui"),{escape:/\{\{(.+?)\}\}/g}),a.push(n({parentLabel:i.get("label"),label:t.get("label")})),t.setErrorMessage(d.___("The field must not be empty","ddui")),r=!1)}t.checkConstraint({clearError:!1})||(r=!1,n=e.isArray(t.get("errorMessage"))?e.template("<%= parentLabel %> / <%= label %> <% for(var msg in errorMessage) { %>\n<%- rowText %> <%= errorMessage[msg].index + 1 %> : <%= errorMessage[msg].message %>\n <% } %> "):e.template("<%= parentLabel %> / <%= label %> <%= errorMessage %>"),a.push(n({parentLabel:i.get("label"),label:t.get("label"),rowText:d.___("Row #","ddui"),errorMessage:t.get("errorMessage")})))}),!r)return o={title:d.___("Unable to save","ddui"),message:a.join(", \n"),errorCode:"attributeNeeded"},i.error&&i.error(e.extend({eventPrevented:!0},o)),o}catch(t){console.error("Unable to validate"),console.error(t)}},redrawErrorMessages:function(){var t=this.get("attributes")||[];e.each(t.models,function(t){var e=t.get("errorMessage");e&&(t.setErrorMessage(null),t.setErrorMessage(e))})},cleanErrorMessages:function(){var t=this.get("attributes")||[];e.each(t.models,function(t){t.setErrorMessage(null)})},parse:function(t){var i,n="view",o=t.data.view;if(!1===t.success)throw new Error("Unable to get the data from documents");if(this.trigger("beforeParse"),o.renderOptions.mode)if("edit"===o.renderOptions.mode)n="edit";else{if("view"!==o.renderOptions.mode)throw new Error("Unkown render mode "+o.renderOptions.mode);n="view"}return this.initialProperties=e.defaults({renderMode:n||"view",viewId:t.data.properties.requestIdentifier},o.documentData.document.properties),this.get("attributes")instanceof a&&this.get("attributes").destroy(),i={initid:!0===t.data.properties.creationView?null:o.documentData.document.properties.initid,properties:o.documentData.document.properties,menus:o.menu,viewId:t.data.properties.requestIdentifier,revision:o.documentData.document.properties.revision,locale:o.locale.culture,renderMode:n||"view",attributes:void 0,templates:o.templates,renderOptions:o.renderOptions,customCSS:o.style.css,customJS:o.script.js,customServerData:o.customServerData,messages:t.messages,originalValues:o.documentData.document.attributes},this._customClientData={},!0===t.data.properties.creationView?i.creationFamid=o.documentData.document.properties.family.name:i.creationFamid=!1,i},set:function(t,n){var r=this;return void 0!==t.properties&&(r.get("properties")instanceof o&&r.get("properties").trigger("destroy"),t.properties=new o(t.properties)),void 0!==t.menus&&(r.get("menus")instanceof l&&r.get("menus").destroy(),t.menus=new l(t.menus)),"attributes"===t&&((n=new a(n,{documentModel:r,renderOptions:r.get("renderOptions"),renderMode:r.get("renderMode")})).each(function(t){if(!t.get("isValueAttribute")){var e=n.filter(function(e){return e.get("parent")===t.id});e.length>0&&t.setContentCollection(e)}}),r.listenTo(n,"change:attributeValue",function(t){e.defer(function(){r.trigger("changeValue",{attributeId:t.id})})}),r.listenTo(n,"constraint",function(t){r.trigger("constraint",t.model.id,t.response)}),r.listenTo(n,"renderDone",function(t){r.trigger("attributeRender",t.model.id,t.$el,t.index)}),r.listenTo(n,"beforeRender",function(t,e){r.trigger("beforeAttributeRender",t,e.model.id,e.$el,e.index)}),r.listenTo(n,"array",function(t,e,i){r.trigger("arrayModified",{attributeId:e.id,type:t,options:i})}),r.listenTo(n,"internalLinkSelected",function(t,e){r.trigger("internalLinkSelected",t,e)}),r.listenTo(n,"downloadFile",function(t,e,i){r.trigger("downloadFile",t,e,i)}),r.listenTo(n,"uploadFile",function(t,i,n){var o,s;r.trigger("uploadFile",t,i,n),t.prevent||(o=r.get("attributes").get(i),r._uploadingFile++,o&&(s=o.get("attributeValue"),n.index>=0?(s=e.clone(s))[n.index]={value:"-^-",displayValue:"Uploading"}:s={value:"--",displayValue:"Uploading"},o.set("attributeValue",s,{silent:!0}),r.trigger("changeValue",{attributeId:i})))}),r.listenTo(n,"uploadFileDone",function(t,e,i){r._uploadingFile--,r.trigger("uploadFileDone",t,e,i),r._uploadingFile<=0&&r.trigger("uploadFileFinished")}),r.listenTo(n,"helperSearch",function(t,e,i,n){r.trigger("helperSearch",t,e,i,n)}),r.listenTo(n,"helperResponse",function(t,e,i,n){r.trigger("helperResponse",t,e,i,n)}),r.listenTo(n,"helperSelect",function(t,e,i,n){r.trigger("helperSelect",t,e,i,n)}),r.listenTo(n,"anchorClick",function(t,e,i){r.trigger("anchorClick",t,e,i)})),i.Model.prototype.set.call(this,t,n)},unbindLoadEvent:function(){t(window).off("."+this.cid)},destroySubcollection:function(){this.get("menus")instanceof l&&this.get("menus").destroy(),this.get("properties")instanceof o&&this.get("properties").trigger("destroy"),this.get("attributes")instanceof a&&this.get("attributes").destroy()},injectCurrentDocJS:function(){var t=[],i=e.pluck(this.get("customJS"),"path");return e.each(i,function(e){t.push(new Promise(function(t,i){n(e,function(e){e?i(e):t()})}))}),Promise.all(t)},injectJS:function(t){var i=[];if(!e.isArray(t))throw new Error("The js to inject must be an array of string path");return e.each(t,function(t){i.push(new Promise(function(e,i){n(t,function(t){t?i(t):e()})}))}),Promise.all(i)},injectCSS:function(i){var n=t("head"),o=e.template('<link rel="stylesheet" type="text/css" href="<%= path %>" data-injected="true">');if(!e.isArray(i))throw new Error("The css to inject must be an array of string path");e.each(i,function(t){document.createStyleSheet&&document.createStyleSheet(t),n.append(o({path:t}))})},toJSON:function(){return{document:{properties:this.getModelProperties(),attributes:this.getValues()},customClientData:this._customClientData}},getOption:function(t){var e=this.get("renderOptions");if(e&&e.document)return e.document[t]},_promiseCallback:function(){var t,e,i,n=this.getServerProperties();return t=new Promise(function(t,o){e=function(e){var i=e;i=e&&i.arguments?e.arguments:arguments,e&&i.documentProperties&&(n=i.documentProperties),t({documentProperties:n,arguments:i})},i=function(t){var e=t;e=t&&e.arguments?t.arguments:arguments,t&&e.documentProperties&&(n=e.documentProperties),o({documentProperties:n,arguments:e})}}),{promise:t,success:e,error:i}},_loadDocument:function(t){var i=this.getServerProperties();return new Promise(function(n,o){t._completeStructure().then(function(){t.injectCurrentDocJS().then(function(t){n({documentProperties:i,successArguments:arguments})},function(n){o({documentProperties:i,arguments:arguments}),t.trigger.apply(t,e.union(["dduiDocumentFail"],n.arguments))})},function(n){o({documentProperties:i,arguments:arguments}),t.trigger.apply(t,e.union(["dduiDocumentFail"],n.arguments))})})},fetchDocument:function(t,i){var n,o=this._promiseCallback(),s=this._promiseCallback(),a=this.getServerProperties(),l=this,d={},c={prevent:!1},u=!1,p=this._promiseCallback();return i=i||{},t=t||{},e.isEmpty(this._customClientData)&&this.trigger("getCustomClientData"),s.promise.then(function(t){l._loadDocument(l).then(function(e){o.success.apply(t,e)},function(e){o.error.apply(t,e)})},function(t){o.error.call(a,t)}),o.promise.then(function(t){e.isFunction(i.success)&&i.success(t),l.trigger("close",a),l.trigger.apply(l,e.union(["dduiDocumentReady"],t.arguments))},function(t){e.isFunction(i.error)&&i.error(t),t.arguments&&t.arguments[0]&&t.arguments[0].eventPrevented||l.trigger.apply(l,e.union(["dduiDocumentFail"],t.arguments))}),e.defaults(t,{revision:-1,viewId:"!defaultConsultation",initid:this.get("initid")}),this.trigger("beforeClose",c,t,this._customClientData),!1===c.prevent?(this.trigger("displayLoading"),n=this.get("properties")?this.get("properties").get("security"):null,"edit"===this.get("renderMode")&&n&&n.lock&&n.lock.temporary&&(d={initid:a.initid}),(u=t.viewId)||(u="edit"===this.get("renderMode")?"!defaultEdition":"!defaultConsultation"),"!defaultConsultation"!==u&&"!coreCreation"!==u&&"!defaultCreation"!==u&&"create"!==this.get("renderMode")?(d.initid&&d.initid!==t.initid&&new r({initid:d.initid,type:"temporary"}).destroy(),new r({initid:t.initid,viewId:u,type:"temporary"}).save({},p)):d?d.initid===t.initid?new r({initid:d.initid,type:"temporary"}).destroy(p):(new r({initid:d.initid,type:"temporary"}).destroy(),p.success()):p.success(),p.promise.then(function(){e.each(e.pick(t,"initid","revision","viewId"),function(t,e){l.set(e,t)}),l.fetch(s)},function(){o.error.apply(l,arguments)})):(l.set(a),o.error({eventPrevented:!0})),o.promise},saveDocument:function(t,i){var n=this._promiseCallback(),o=this._promiseCallback(),r={prevent:!1},s=this,a=this.getServerProperties();return i=i||{},e.isEmpty(this._customClientData)&&this.trigger("getCustomClientData"),this.trigger("beforeSave",r,this._customClientData),!1!==r.prevent?n.error({eventPrevented:!0}):(o.promise.then(function(){s._loadDocument(s).then(function(){n.success()},function(){n.error.apply(s,arguments)})},function(){n.error.apply(s,arguments)}),s.hasUploadingFile()?(this.trigger("displayLoading",{isSaving:!0,text:d.___("Recording files in progress","ddui")}),s.trigger("showMessage",{title:d.___("Waiting uploads in progress","ddui"),type:"info"}),s.once("uploadFileFinished",function(e){this.trigger("displayLoading",{isSaving:!0}),s.save(t,o)})):(this.trigger("displayLoading",{isSaving:!0}),s.save(t,o))),n.promise.then(function(t){s.trigger("afterSave",a),s.trigger("close",a),e.isFunction(i.success)&&i.success(),s.trigger.apply(s,e.union(["dduiDocumentReady"],t.arguments))},function(t){e.isFunction(i.error)&&i.error(),t.arguments&&t.arguments[0]&&t.arguments[0].eventPrevented||s.trigger.apply(s,e.union(["dduiDocumentFail"],t.arguments))}),n.promise},deleteDocument:function(t){var i=this._promiseCallback(),n=this._promiseCallback(),o={prevent:!1},r=this,s=this.getServerProperties();return t=t||{},e.isEmpty(this._customClientData)&&this.trigger("getCustomClientData"),this.trigger("beforeDelete",o,this._customClientData),!1!==o.prevent?i.error({eventPrevented:!0}):(this.trigger("displayLoading"),n.promise.then(function(){r.fetchDocument({initid:r.get("initid")}).then(function(){i.success()},function(){i.error.apply(r,arguments)})},function(){i.error.apply(r,arguments)}),this.sync("delete",this,n)),i.promise.then(function(i){r.trigger("afterDelete",s),r.trigger("close",s),e.isFunction(t.success)&&t.success(),r.trigger.apply(r,e.union(["dduiDocumentReady"],i.arguments))},function(i){e.isFunction(t.error)&&t.error(),i.arguments&&i.arguments[0]&&i.arguments[0].eventPrevented||r.trigger.apply(r,e.union(["dduiDocumentFail",r],i.arguments))}),i.promise},restoreDocument:function(t){var i=this._promiseCallback(),n=this._promiseCallback(),o={prevent:!1},r=this,s=this.getServerProperties();return t=t||{},"deleted"===this.get("properties").get("status")?(e.isEmpty(this._customClientData)&&this.trigger("getCustomClientData"),this.trigger("beforeRestore",o,this._customClientData),!1!==o.prevent?i.error({eventPrevented:!0}):(this.trigger("displayLoading",{isSaving:!0}),n.promise.then(function(){r._loadDocument(r).then(function(){i.success()},function(){i.error.apply(r,arguments)})},function(){i.error.apply(r,arguments)}),this.get("properties").set("status","alive"),r.save({},n))):i.error({systemError:!0,errorMessage:"Unable to restore alive doc"}),i.promise.then(function(i){r.trigger("afterRestore",s),r.trigger("close",s),e.isFunction(t.success)&&t.success(),r.trigger.apply(r,e.union(["dduiDocumentReady"],i.arguments))},function(i){e.isFunction(t.error)&&t.error(),i.arguments&&i.arguments[0]&&(i.arguments[0].eventPrevented||i.arguments[0].systemError)||r.trigger.apply(r,e.union(["dduiDocumentFail"],i.arguments))}),i.promise},_completeStructure:function(){var t=this,i=this._promiseCallback(),n=this.get("renderOptions").needed,o=this.get("renderOptions").visibilities,r=this.get("originalValues");return"family"===this.get("properties").get("type")?(this.set("attributes",[]),i.success(),i.promise):e.isUndefined(this.get("attributes"))?(new s({familyId:this.get("properties").get("family").name,referencedocument:{initid:this.get("initid"),viewId:this.get("viewId"),revision:this.get("revision")}}).fetch({success:function(s,a){if(e.isEqual(s.get("referencedocument"),{initid:t.get("initid"),viewId:t.get("viewId"),revision:t.get("revision")})){var l=c(l,a.data.family.structure);e.each(l,function(t){t.id&&r[t.id]&&(t.attributeValue=r[t.id],t.needed=!0===n[t.id]),t.id&&o[t.id]&&(t.visibility=o[t.id])}),t.set("attributes",l),i.success()}},error:i.error}),i.promise):(this.set("attributes",this.get("attributes")),i.success(),i.promise)}})}.apply(e,n))||(t.exports=o)},ae9a1dffcb7d80ee2f61:function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58")],void 0===(o=function(t){var e=function(t){this.name="MenuError",this.message=t||"Default Message",this.stack=(new Error).stack};(e.prototype=Object.create(Error.prototype)).constructor=e;var i=function(){this._menuModel?this.id=this._menuModel.id:this.id=null};i.prototype._menuModel=null,i.prototype._set=function(t,i,n){if(n&&!0===n.strict&&!this.id)throw new e("This menu doesn't exist");(this.id||n&&!0===n.strict)&&this._menuModel.set(t,i,n)},i.prototype.getProperties=function(i){if(i&&!0===i.strict&&!this.id)throw new e("This menu doesn't exist");return this.id||i&&!0===i.strict?t.clone(this._menuModel.attributes):{}},i.prototype.disable=function(t){this._set("visibility","disabled",t)},i.prototype.enable=function(t){this._set("visibility","visible",t)},i.prototype.hide=function(t){this._set("visibility","hidden",t)},i.prototype.setLabel=function(t,e){this._set("label",t,e)},i.prototype.setHtmlLabel=function(t,e){this._set("htmlLabel",t,e)},i.prototype.setIconUrl=function(t,e){this._set("iconUrl",t,e)},i.prototype.setCssClass=function(t,e){this._set("cssClass",t,e)},i.prototype.setUrl=function(t,e){this._set("url",t,e)},i.prototype.redraw=function(){this._menuModel.trigger("reload")};var n=function(t){this._menuModel=t,i.call(this)};return n.prototype=Object.create(i.prototype),n.prototype.constructor=i,n}.apply(e,n))||(t.exports=o)},af25306fd60189c120f8:function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("61b480911316cdda77a4")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e,i){return t.widget("dcp.dcpFile",t.dcp.dcpText,{uploadingFiles:0,options:{type:"file",renderOptions:{contentDisposition:!1,htmlLink:{},placeHolder:"Click to upload file"},labels:{dropFileHere:"Drop file here",tooltipLabel:"Choose file",downloadLabel:"Download file",recording:"Recording",transferring:"Transferring",kiloByte:"kB",byte:"B"}},_initDom:function(){var t;if("read"===this.getMode()){var e="?";this.options.attributeValue.url&&(this.options.renderOptions.htmlLink.url||(this.options.attributeValue.url&&(e=this.options.attributeValue.url.indexOf("?")>=0?"&":"?","inline"===this.options.renderOptions.contentDisposition?(this.options.attributeValue.url=this.options.attributeValue.url.replace("&inline=no",""),this.options.attributeValue.url+=e+"inline=yes"):(this.options.attributeValue.url=this.options.attributeValue.url.replace("&inline=yes",""),this.options.attributeValue.url+=e+"inline=no")),this.options.renderOptions.htmlLink.url=this.options.attributeValue.url,this.options.renderOptions.htmlLink.title||(this.options.renderOptions.htmlLink.title=this.options.attributeValue.displayValue,this.options.attributeValue.size>=1024?this.options.renderOptions.htmlLink.title+="<br/>("+Math.round(this.options.attributeValue.size/1024)+" "+this.options.labels.kiloByte+")":this.options.renderOptions.htmlLink.title+="<br/>("+this.options.attributeValue.size+" "+this.options.labels.byte+")")))}if(this.options.renderOptions.mimeIconSize)if(-1!==["0","0x0","x0"].indexOf(this.options.renderOptions.mimeIconSize))this.options.attributeValue.icon=null;else{var i=/sizes\/([^\/]+)/;this.options.attributeValue.icon=this.options.attributeValue.icon.replace(i,"sizes/"+this.options.renderOptions.mimeIconSize)}this._super(),"write"===this.getMode()&&((t=this.element.find("input[type=text]")).attr("title",this.options.labels.tooltipLabel),t.attr("placeholder",this.options.renderOptions.placeHolder),this.element.find(".dcpAttribute__content__button--file").attr("title",this.options.labels.downloadLabel),t.tooltip({trigger:"hover",placement:"bottom",container:".dcpDocument"}),this.element.find("input[type=file]").attr("fileValue",this.options.attributeValue.value||null))},_initEvent:function(){var t=this;"write"===this.getMode()&&this._initUploadEvent(),this.element.on("click."+this.eventNamespace,".dcpAttribute__content__link",function(e){t._trigger("downloadFile",e,{$el:t.element,index:t._getIndex()})}),this._super()},_initChangeEvent:function(){this.options.hasAutocomplete&&this._super()},_initUploadEvent:function(){var i=this,n=this.element.find("input[type=file]"),o=this.element.find(".dcpAttribute__value"),r=this.options.attributeValue.url;r?this.element.on("click"+this.eventNamespace,".dcpAttribute__content__button--file",function(e){var n=i._trigger("downloadFile",e,{$el:i.element,index:i._getIndex()});if(n){var o=r,s=t("base");n&&(s.length>0&&(o=s.attr("href")+o),window.open(o))}}):this.element.find(".dcpAttribute__content__button--file").attr("disabled","disabled"),e.isUndefined(window.FormData)?(this.addOldBrowserForm(),this.element.on("change"+this.eventNamespace,"input[type=file]",function(){i.uploadFileForm()})):(this.element.on("dragenter"+this.eventNamespace,".dcpAttribute__dragTarget",function(t){o.val(i.options.attributeValue.displayValue),t.stopPropagation(),t.preventDefault()}),this.element.on("dragover"+this.eventNamespace,".dcpAttribute__dragTarget",function(t){o.val(i.options.labels.dropFileHere),t.stopPropagation(),t.preventDefault(),i.element.addClass("dcpAttribute__value--dropzone")}),this.element.on("dragleave"+this.eventNamespace,".dcpAttribute__dragTarget",function(t){o.val(i.options.attributeValue.displayValue),t.stopPropagation(),t.preventDefault(),i.element.removeClass("dcpAttribute__value--dropzone")}),this.element.on("drop"+this.eventNamespace,".dcpAttribute__dragTarget",function(t){o.val(i.options.attributeValue.displayValue),i.element.removeClass("dcpAttribute__value--dropzone"),t.stopPropagation(),t.preventDefault();var e=t.originalEvent.dataTransfer.files;e.length>0&&i.uploadFile(e[0])}),this.element.on("click"+this.eventNamespace,".dcpAttribute__value",function(){n.trigger("click")}),this.element.on("keydown"+this.eventNamespace,".dcpAttribute__value",function(t){9!==t.keyCode&&32!==t.keyCode&&13!==t.keyCode&&t.preventDefault()}),this.element.on("keyup"+this.eventNamespace,".dcpAttribute__value",function(t){9!==t.keyCode&&(t.preventDefault(),32!==t.keyCode&&13!==t.keyCode||n.trigger("click"))}),this.element.on("change"+this.eventNamespace,"input[type=file]",function(){this.files&&this.files.length>0&&i.uploadFile(this.files[0])}))},getWidgetValue:function(){return this.element.find("input[type=file]").attr("fileValue")||null},addOldBrowserForm:function(){var n=this.element.find("input[type=file]"),o=this.element.find(".dcpAttribute__value"),r=n.attr("id"),s="fileupload"+r+"-"+this.options.index,a=o.val(),l=this;t(i.render('<form id="form{{id}}" target="{{target}}" method="POST" enctype="multipart/form-data" action="api/v1/temporaryFiles/?alt=html"></form><iframe style="display:none" name="{{target}}"></iframe>',{id:r,target:s})).insertAfter(n);t('<div class="dcpFile__form"/>').insertAfter(o).append(o),this.element.find("form").append(n).css("display","inline"),this.element.find(".dcpFile__form").append(this.element.find("form")),n.show(),this.element.addClass("dcpFile--old-browser"),n.attr("title",o.attr("data-original-title")),n.tooltip({trigger:"hover",placement:"bottom",container:".dcpDocument"}),this.element.find("iframe").on("load",function(){if(0!==t(this).contents().find("textarea").length){var i=JSON.parse(t(this).contents().find("textarea").val());if(i.exceptionMessage)e.each(i.messages,function(e){t("body").trigger("notification",{htmlMessage:e.contentHtml,message:e.contentText,type:e.type})});else{var n=i.data.file;l.setValue({value:n.reference,size:n.size,fileName:n.fileName,displayValue:n.fileName,creationDate:n.cdate,thumbnail:n.thumbnailUrl,url:n.downloadUrl,icon:n.iconUrl})}o.val(a),o.removeClass("dcpAttribute__value--transferring"),l._setVisibilitySavingMenu("visible")}})},uploadCondition:function(t){return!0},uploadFileForm:function(){var t=this.element.find(".dcpAttribute__value"),e=this.element.find("input[type=file]");this._setVisibilitySavingMenu("disabled"),t.addClass("dcpAttribute__value--transferring"),t.val(this.options.labels.transferring+" "+e.val().split(/[\\/]/).pop()),this.element.find("form").submit()},uploadFile:function(i){var n=this.element.find(".dcpAttribute__value"),o=new FormData,r=i.name,s=n.val(),a=n.css("background-color"),l=this,d={prevent:!1},c=(this.options.attributeValue,this.element.find("input[type=file]"));if(this.uploadCondition(i)){if(l._trigger("uploadfile",d,{$el:l.element,index:l._getIndex(),file:i})){l.uploadingFiles++,o.append("dcpFile",i),c.prop("disabled",!0),n.addClass("dcpAttribute__value--transferring");var u=n.css("background-color");t.ajax({type:"POST",url:"api/v1/temporaryFiles/",processData:!1,contentType:!1,cache:!1,data:o,xhr:function(){var e=t.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(t){var e=0,i=t.loaded||t.position,o=t.total;t.lengthComputable&&(e=Math.ceil(i/o*100)),e>=100?(n.val(l.options.labels.recording+" "+r),n.removeClass("dcpAttribute__value--transferring"),n.addClass("dcpAttribute__value--recording progress-bar active progress-bar-striped"),n.css("background",""),n.css("background-image","")):(n.addClass("dcpAttribute__value--transferring"),n.val(l.options.labels.transferring+" "+r),n.css("background-color","red"),n.css("background","linear-gradient(to right,"+u+" 0%,"+u+" "+e+"%,"+a+(e+1)+"%,"+a+" 100%) "))},!1),e}}).done(function(t){var e=t.data.file,i={value:e.reference,size:e.size,fileName:e.fileName,displayValue:e.fileName,creationDate:e.cdate,thumbnail:e.thumbnailUrl,url:e.downloadUrl,icon:e.iconUrl};l.uploadingFiles--,l.setValue(i),l._trigger("uploadfiledone",{prevent:!1},{$el:l.element,index:l._getIndex(),file:i})}).fail(function(o){l.uploadingFiles--,l._trigger("uploadfiledone",d,{$el:l.element,index:l._getIndex(),file:null}),n.css("background-image","url("+l.options.attributeValue.icon+")");var r=JSON.parse(o.responseText);r?e.each(r.messages,function(e){t("body").trigger("notification",{htmlMessage:e.contentHtml,message:e.contentText,type:e.type})}):(n.css("background",""),t("body").trigger("notification",{htmlMessage:"File <b>"+i.name+"</b> cannot be uploaded",message:d.statusText,type:"error"}))}).always(function(){c.prop("disabled",!1),n.val(s),n.css("background",""),n.removeClass("progress-bar active progress-bar-striped dcpAttribute__value--transferring dcpAttribute__value--recording")})}}},setValue:function(t){var e=this.element.find("input[type=file]");this._super(t),"write"===this.getMode()&&0===this.uploadingFiles&&this.redraw(),e.attr("fileValue",t?t.value:null)},getLink:function(){var t=this._super();return!this.options.attributeValue.url||t&&t.url||(t.url=this.options.attributeValue.url),t},getType:function(){return"file"}}),t.fn.dcpFile})},b25f06ae111b578af6b0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function e(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function i(t){return(t[0]||t).nodeType}function n(e){var i=this,n=!1;return t(this).one(s.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||s.triggerTransitionEnd(i)},e),this}var o=!1,r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},s={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},getSelectorFromElement:function(e){var i=e.getAttribute("data-target");i&&"#"!==i||(i=e.getAttribute("href")||"");try{return t(i).length>0?i:null}catch(t){return null}},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(e){t(e).trigger(o.end)},supportsTransitionEnd:function(){return Boolean(o)},typeCheckConfig:function(t,n,o){for(var r in o)if(o.hasOwnProperty(r)){var s=o[r],a=n[r],l=a&&i(a)?"element":e(a);if(!new RegExp(s).test(l))throw new Error(t.toUpperCase()+': Option "'+r+'" provided type "'+l+'" but expected type "'+s+'".')}}};return o=function(){if(window.QUnit)return!1;var t=document.createElement("bootstrap");for(var e in r)if(void 0!==t.style[e])return{end:r[e]};return!1}(),t.fn.emulateTransitionEnd=n,s.supportsTransitionEnd()&&(t.event.special[s.TRANSITION_END]={bindType:o.end,delegateType:o.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}),s}(jQuery);e.default=n},b3a839c4520ca8b4b597:function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("bcd31d01884fc294fd69"),i("7a4c946b6dd0337fa34b"),i("593c8c94ba4399020f79"),i("278ba7757aa1904087c6")],void 0===(o=function(t,e,i,n,o,r,s){return i.View.extend({tagName:"div",className:"dcpTab__content",customView:!1,initialize:function(t){this.listenTo(this.model,"change:label",this.updateLabel),this.listenTo(this.model.get("content"),"add",this.render),this.listenTo(this.model.get("content"),"remove",this.render),this.listenTo(this.model.get("content"),"reset",this.render),this.listenTo(this.model,"cleanView",this.remove),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"showTab",this.renderContent),this.listenTo(this.model,"hide",this.hide),this.listenTo(this.model,"show",this.show),this.listenTo(this.model,"haveView",this._identifyView),this.initializeContent=t.initializeContent,this.initialized=!1,this.options=t},render:function(){var i=this;return new Promise(e.bind(function(e,n){i.$el.empty().append(t('<div class="dcpTab__content--loading"><span class="fa fa-spinner fa-spin"></span>'+s.___("Displaying","ddui")+"</div>")),i.$el.attr("id",i.model.id),i.$el.attr("data-attrid",i.model.id),i.model.get("content").some(function(t){return t.isDisplayable()})&&i.initializeContent?i.renderContent().then(function(){e(i)}):(i.$el.append(i.model.getOption("showEmptyContent")),i.$el.removeClass("dcpTab__content--loading"),i.model.trigger("renderDone",{model:i.model,$el:i.$el}),i.propageShowTab(),e(i))},this))},renderContent:function(i){var n=this;return new Promise(e.bind(function(e,i){var s,a=n.$el,l=n.model,d=[];!1===n.initialized&&(n.$el.empty(),!0!==n.originalView&&n.model.getOption("template")&&(s=r.renderCustomView(n.model),n.customView=s.$el,d.push(s.promise)),n.customView?a.append(n.customView):(n.model.get("content").each(function(t){var e;try{if(!t.isDisplayable())return;if("frame"!==t.get("type"))throw new Error("unkown type "+t.get("type")+" for id "+t.id+" for tab "+l.id);e=new o({model:t}),d.push(e.render()),a.append(e.$el)}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}}),r.insertDescription(this),n.model.getOption("responsiveColumns")&&n.responsiveColumns()),Promise.all(d).then(function(){n.$el.removeClass("dcpTab__content--loading"),n.model.trigger("renderDone",{model:n.model,$el:n.$el}),n.initialized=!0,e()}).catch(i)),t(window.document).trigger("redrawErrorMessages"),n.model.get("content").propageEvent("resize")},this))},responsiveColumns:function(){var i=this.model.getOption("responsiveColumns")||[],n=this,o=t("<div/>").css({position:"absolute",top:0,overflow:"hidden"}),r=t("<div/>"),s=function(){var o=t(n.$el).width(),r=0;e.each(i,function(t){o>=t.minAbsWidth&&o<t.maxAbsWidth?(n.$el.addClass("dcp-column--"+t.number),r=t.number,!0===t.grow?n.$el.addClass("dcp-column--grow"):n.$el.removeClass("dcp-column--grow")):n.$el.removeClass("dcp-column--"+t.number)}),r>1?n.$el.addClass("dcp-column"):n.$el.removeClass("dcp-column"),r!==n.frameIsResized&&(n.frameIsResized=r,n.model.get("content").propageEvent("resize"))};t("body").append(o.append(r)),e.each(i,function(t){t.minWidth?(r.width(t.minWidth),t.minAbsWidth=r.width()):t.minAbsWidth=0,t.maxWidth?(r.width(t.maxWidth),t.maxAbsWidth=r.width()):t.maxAbsWidth=1/0}),o.remove(),t(window).on("resize.v"+this.model.cid,s),e.defer(s)},propageShowTab:function(){this.model.get("content").propageEvent("showTab")},updateLabel:function(){this.$el.find(".dcpFrame__label").text(this.model.get("label"))},hide:function(){this.$el.hide()},show:function(){this.$el.show()},_identifyView:function(t){t.haveView=!0,t.elements=t.elements.add(this.$el)},remove:function(){return t(window).off(".v"+this.model.cid),i.View.prototype.remove.call(this)}})}.apply(e,n))||(t.exports=o)},b625c3d07db8baf045ff:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(i("b25f06ae111b578af6b0")),s=function(e){if(void 0===t)throw new Error("Bootstrap tooltips require Popper.js (https://popper.js.org)");var i="tooltip",s="bs.tooltip",a="."+s,l=e.fn.tooltip,d=new RegExp("(^|\\s)bs-tooltip\\S+","g"),c={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)"},u={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},p={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip"},h="show",f="out",m={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,INSERTED:"inserted"+a,CLICK:"click"+a,FOCUSIN:"focusin"+a,FOCUSOUT:"focusout"+a,MOUSEENTER:"mouseenter"+a,MOUSELEAVE:"mouseleave"+a},g="fade",v="show",b=".tooltip-inner",_=".arrow",y="hover",w="focus",k="click",C="manual",x=function(){function l(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}return o(l,[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(t){if(t){var i=this.constructor.DATA_KEY,n=e(t.currentTarget).data(i);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(i,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(e(this.getTipElement()).hasClass(v))return void this._leave(null,this);this._enter(null,this)}}},{key:"dispose",value:function(){clearTimeout(this._timeout),e.removeData(this.element,this.constructor.DATA_KEY),e(this.element).off(this.constructor.EVENT_KEY),e(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&e(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null}},{key:"show",value:function(){var i=this;if("none"===e(this.element).css("display"))throw new Error("Please use show on visible elements");var n=e.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){e(this.element).trigger(n);var o=e.contains(this.element.ownerDocument.documentElement,this.element);if(n.isDefaultPrevented()||!o)return;var s=this.getTipElement(),a=r.default.getUID(this.constructor.NAME);s.setAttribute("id",a),this.element.setAttribute("aria-describedby",a),this.setContent(),this.config.animation&&e(s).addClass(g);var d="function"==typeof this.config.placement?this.config.placement.call(this,s,this.element):this.config.placement,c=this._getAttachment(d);this.addAttachmentClass(c);var u=!1===this.config.container?document.body:e(this.config.container);e(s).data(this.constructor.DATA_KEY,this),e.contains(this.element.ownerDocument.documentElement,this.tip)||e(s).appendTo(u),e(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new t(this.element,s,{placement:c,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:_}},onCreate:function(t){t.originalPlacement!==t.placement&&i._handlePopperPlacementChange(t)},onUpdate:function(t){i._handlePopperPlacementChange(t)}}),e(s).addClass(v),"ontouchstart"in document.documentElement&&e("body").children().on("mouseover",null,e.noop);var p=function(){i.config.animation&&i._fixTransition();var t=i._hoverState;i._hoverState=null,e(i.element).trigger(i.constructor.Event.SHOWN),t===f&&i._leave(null,i)};r.default.supportsTransitionEnd()&&e(this.tip).hasClass(g)?e(this.tip).one(r.default.TRANSITION_END,p).emulateTransitionEnd(l._TRANSITION_DURATION):p()}}},{key:"hide",value:function(t){var i=this,n=this.getTipElement(),o=e.Event(this.constructor.Event.HIDE),s=function(){i._hoverState!==h&&n.parentNode&&n.parentNode.removeChild(n),i._cleanTipClass(),i.element.removeAttribute("aria-describedby"),e(i.element).trigger(i.constructor.Event.HIDDEN),null!==i._popper&&i._popper.destroy(),t&&t()};e(this.element).trigger(o),o.isDefaultPrevented()||(e(n).removeClass(v),"ontouchstart"in document.documentElement&&e("body").children().off("mouseover",null,e.noop),this._activeTrigger[k]=!1,this._activeTrigger[w]=!1,this._activeTrigger[y]=!1,r.default.supportsTransitionEnd()&&e(this.tip).hasClass(g)?e(n).one(r.default.TRANSITION_END,s).emulateTransitionEnd(150):s(),this._hoverState="")}},{key:"update",value:function(){null!==this._popper&&this._popper.scheduleUpdate()}},{key:"isWithContent",value:function(){return Boolean(this.getTitle())}},{key:"addAttachmentClass",value:function(t){e(this.getTipElement()).addClass("bs-tooltip-"+t)}},{key:"getTipElement",value:function(){return this.tip=this.tip||e(this.config.template)[0]}},{key:"setContent",value:function(){var t=e(this.getTipElement());this.setElementContent(t.find(b),this.getTitle()),t.removeClass(g+" "+v)}},{key:"setElementContent",value:function(t,i){var o=this.config.html;"object"===(void 0===i?"undefined":n(i))&&(i.nodeType||i.jquery)?o?e(i).parent().is(t)||t.empty().append(i):t.text(e(i).text()):t[o?"html":"text"](i)}},{key:"getTitle",value:function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t}},{key:"_getAttachment",value:function(t){return u[t.toUpperCase()]}},{key:"_setListeners",value:function(){var t=this;this.config.trigger.split(" ").forEach(function(i){if("click"===i)e(t.element).on(t.constructor.Event.CLICK,t.config.selector,function(e){return t.toggle(e)});else if(i!==C){var n=i===y?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,o=i===y?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;e(t.element).on(n,t.config.selector,function(e){return t._enter(e)}).on(o,t.config.selector,function(e){return t._leave(e)})}e(t.element).closest(".modal").on("hide.bs.modal",function(){return t.hide()})}),this.config.selector?this.config=e.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()}},{key:"_fixTitle",value:function(){var t=n(this.element.getAttribute("data-original-title"));(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))}},{key:"_enter",value:function(t,i){var n=this.constructor.DATA_KEY;(i=i||e(t.currentTarget).data(n))||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,i)),t&&(i._activeTrigger["focusin"===t.type?w:y]=!0),e(i.getTipElement()).hasClass(v)||i._hoverState===h?i._hoverState=h:(clearTimeout(i._timeout),i._hoverState=h,i.config.delay&&i.config.delay.show?i._timeout=setTimeout(function(){i._hoverState===h&&i.show()},i.config.delay.show):i.show())}},{key:"_leave",value:function(t,i){var n=this.constructor.DATA_KEY;(i=i||e(t.currentTarget).data(n))||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,i)),t&&(i._activeTrigger["focusout"===t.type?w:y]=!1),i._isWithActiveTrigger()||(clearTimeout(i._timeout),i._hoverState=f,i.config.delay&&i.config.delay.hide?i._timeout=setTimeout(function(){i._hoverState===f&&i.hide()},i.config.delay.hide):i.hide())}},{key:"_isWithActiveTrigger",value:function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}},{key:"_getConfig",value:function(t){return(t=e.extend({},this.constructor.Default,e(this.element).data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t.title&&"number"==typeof t.title&&(t.title=t.title.toString()),t.content&&"number"==typeof t.content&&(t.content=t.content.toString()),r.default.typeCheckConfig(i,t,this.constructor.DefaultType),t}},{key:"_getDelegateConfig",value:function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t}},{key:"_cleanTipClass",value:function(){var t=e(this.getTipElement()),i=t.attr("class").match(d);null!==i&&i.length>0&&t.removeClass(i.join(""))}},{key:"_handlePopperPlacementChange",value:function(t){this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))}},{key:"_fixTransition",value:function(){var t=this.getTipElement(),i=this.config.animation;null===t.getAttribute("x-placement")&&(e(t).removeClass(g),this.config.animation=!1,this.hide(),this.show(),this.config.animation=i)}}],[{key:"_jQueryInterface",value:function(t){return this.each(function(){var i=e(this).data(s),o="object"===(void 0===t?"undefined":n(t))&&t;if((i||!/dispose|hide/.test(t))&&(i||(i=new l(this,o),e(this).data(s,i)),"string"==typeof t)){if(void 0===i[t])throw new Error('No method named "'+t+'"');i[t]()}})}},{key:"VERSION",get:function(){return"4.0.0-beta"}},{key:"Default",get:function(){return p}},{key:"NAME",get:function(){return i}},{key:"DATA_KEY",get:function(){return s}},{key:"Event",get:function(){return m}},{key:"EVENT_KEY",get:function(){return a}},{key:"DefaultType",get:function(){return c}}]),l}();return e.fn.tooltip=x._jQueryInterface,e.fn.tooltip.Constructor=x,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=l,x._jQueryInterface},x}(jQuery);e.default=s}).call(e,i("05951c2f2bda4691bed3").default)},bcb63a5837345ee29aa0:function(t,e,i){"use strict";(function(t){var i,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){var r={},s=0,a=function(t){var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)},l=function(t,e,i){var n;e&&"function"!=typeof e&&(i=e.context||i,n=e.setup,e=e.callback);var o,l,d=document.createElement("script"),c=!1,u=function(){c||(c=!0,l(),e&&e.call(i,o))},p=function(){o=new Error(t||"EMPTY"),u()};if(!d.readyState||"async"in d)l=function(){d.onload=d.onerror=null},d.onerror=p,d.onload=u,d.async=!0,d.charset="utf-8",n&&n.call(i,d),d.src=t,a(d);else{var h=s++,f={loaded:!0,complete:!0},m=!1;l=function(){d.onreadystatechange=d.onerror=null,r[h]=void 0},d.onreadystatechange=function(){var t=d.readyState;if(!o){if(!m&&f[t]&&(m=!0,a(d)),"loaded"===t&&(d.children,"loading"===d.readyState))return p();"complete"===d.readyState&&u()}},d.onerror=p,r[h]=d,n&&n.call(i,d),d.src=t}};"object"===o(e)&&"object"===o(t)?t.exports=l:void 0===(n=function(){return l}.apply(e,i=[]))||(t.exports=n)}()}).call(e,i("f586cf5b9f4b7719b2c1")(t))},bcd31d01884fc294fd69:function(t,e,i){"use strict";var n,o,r,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i,a){"object"===s(e)&&e&&"string"!=typeof e.nodeName?a(e):(o=[e],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r))}(0,function(t){function e(t){return"function"==typeof t}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(t,e){return null!=t&&"object"===(void 0===t?"undefined":s(t))&&e in t}function o(t){return!function(t,e){return u.call(t,e)}(p,t)}function r(t){this.string=t,this.tail=t,this.pos=0}function a(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function l(){this.cache={}}var d=Object.prototype.toString,c=Array.isArray||function(t){return"[object Array]"===d.call(t)},u=RegExp.prototype.test,p=/\S/,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},f=/\s*/,m=/\s+/,g=/\s*=/,v=/\s*\}/,b=/#|\^|\/|>|\{|&|=|!/;r.prototype.eos=function(){return""===this.tail},r.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},r.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},a.prototype.push=function(t){return new a(t,this)},a.prototype.lookup=function(t){var i,o=this.cache;if(o.hasOwnProperty(t))i=o[t];else{for(var r,s,a=this,l=!1;a;){if(t.indexOf(".")>0)for(i=a.view,r=t.split("."),s=0;null!=i&&s<r.length;)s===r.length-1&&(l=n(i,r[s])),i=i[r[s++]];else i=a.view[t],l=n(a.view,t);if(l)break;a=a.parent}o[t]=i}return e(i)&&(i=i.call(this.view)),i},l.prototype.clearCache=function(){this.cache={}},l.prototype.parse=function(e,n){var s=this.cache,a=s[e];return null==a&&(a=s[e]=function(e,n){function s(){if(y&&!w)for(;_.length;)delete h[_.pop()];else _=[];y=!1,w=!1}function a(t){if("string"==typeof t&&(t=t.split(m,2)),!c(t)||2!==t.length)throw new Error("Invalid tags: "+t);l=new RegExp(i(t[0])+"\\s*"),d=new RegExp("\\s*"+i(t[1])),u=new RegExp("\\s*"+i("}"+t[1]))}if(!e)return[];var l,d,u,p=[],h=[],_=[],y=!1,w=!1;a(n||t.tags);for(var k,C,x,T,D,A,E=new r(e);!E.eos();){if(k=E.pos,x=E.scanUntil(l))for(var M=0,V=x.length;M<V;++M)o(T=x.charAt(M))?_.push(h.length):w=!0,h.push(["text",T,k,k+1]),k+=1,"\n"===T&&s();if(!E.scan(l))break;if(y=!0,C=E.scan(b)||"name",E.scan(f),"="===C?(x=E.scanUntil(g),E.scan(g),E.scanUntil(d)):"{"===C?(x=E.scanUntil(u),E.scan(v),E.scanUntil(d),C="&"):x=E.scanUntil(d),!E.scan(d))throw new Error("Unclosed tag at "+E.pos);if(D=[C,x,k,E.pos],h.push(D),"#"===C||"^"===C)p.push(D);else if("/"===C){if(!(A=p.pop()))throw new Error('Unopened section "'+x+'" at '+k);if(A[1]!==x)throw new Error('Unclosed section "'+A[1]+'" at '+k)}else"name"===C||"{"===C||"&"===C?w=!0:"="===C&&a(x)}if(A=p.pop())throw new Error('Unclosed section "'+A[1]+'" at '+E.pos);return function(t){for(var e,i=[],n=i,o=[],r=0,s=t.length;r<s;++r)switch((e=t[r])[0]){case"#":case"^":n.push(e),o.push(e),n=e[4]=[];break;case"/":o.pop()[5]=e[2],n=o.length>0?o[o.length-1][4]:i;break;default:n.push(e)}return i}(function(t){for(var e,i,n=[],o=0,r=t.length;o<r;++o)(e=t[o])&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(n.push(e),i=e));return n}(h))}(e,n)),a},l.prototype.render=function(t,e,i){var n=this.parse(t),o=e instanceof a?e:new a(e);return this.renderTokens(n,o,i,t)},l.prototype.renderTokens=function(t,e,i,n){for(var o,r,s,a="",l=0,d=t.length;l<d;++l)s=void 0,"#"===(r=(o=t[l])[0])?s=this.renderSection(o,e,i,n):"^"===r?s=this.renderInverted(o,e,i,n):">"===r?s=this.renderPartial(o,e,i,n):"&"===r?s=this.unescapedValue(o,e):"name"===r?s=this.escapedValue(o,e):"text"===r&&(s=this.rawValue(o)),void 0!==s&&(a+=s);return a},l.prototype.renderSection=function(t,i,n,o){function r(t){return a.render(t,i,n)}var a=this,l="",d=i.lookup(t[1]);if(d){if(c(d))for(var u=0,p=d.length;u<p;++u)l+=this.renderTokens(t[4],i.push(d[u]),n,o);else if("object"===(void 0===d?"undefined":s(d))||"string"==typeof d||"number"==typeof d)l+=this.renderTokens(t[4],i.push(d),n,o);else if(e(d)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(d=d.call(i.view,o.slice(t[3],t[5]),r))&&(l+=d)}else l+=this.renderTokens(t[4],i,n,o);return l}},l.prototype.renderInverted=function(t,e,i,n){var o=e.lookup(t[1]);if(!o||c(o)&&0===o.length)return this.renderTokens(t[4],e,i,n)},l.prototype.renderPartial=function(t,i,n){if(n){var o=e(n)?n(t[1]):n[t[1]];return null!=o?this.renderTokens(this.parse(o),i,n,o):void 0}},l.prototype.unescapedValue=function(t,e){var i=e.lookup(t[1]);if(null!=i)return i},l.prototype.escapedValue=function(e,i){var n=i.lookup(e[1]);if(null!=n)return t.escape(n)},l.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.3.0",t.tags=["{{","}}"];var _=new l;return t.clearCache=function(){return _.clearCache()},t.parse=function(t,e){return _.parse(t,e)},t.render=function(t,e,i){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+function(t){return c(t)?"array":void 0===t?"undefined":s(t)}(t)+'" was given as the first argument for mustache#render(template, view, partials)');return _.render(t,e,i)},t.to_html=function(i,n,o,r){var s=t.render(i,n,o);if(!e(r))return s;r(s)},t.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return h[t]})},t.Scanner=r,t.Context=a,t.Writer=l,t})},bd13ec831aaf61fba460:function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("61b480911316cdda77a4"),i("9bddf72f85a3a88d8c7b")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e,i){return t.widget("dcp.dcpDate",t.dcp.dcpText,{options:{type:"date",minDate:new Date(1700,0,1),renderOptions:{kendoDateConfiguration:{parseFormats:["yyyy-MM-dd"],format:null}},labels:{invalidDate:"Invalid Date"}},kendoWidgetClass:"kendoDatePicker",_initDom:function(){this.options.renderOptions.kendoDateConfiguration.format&&(this.options.attributeValue.displayValue=this.formatDate(this.parseDate(this.options.attributeValue.value))),"read"===this.getMode()&&this.options.renderOptions.format&&(this.options.attributeValue.formatValue=i.render(this.options.renderOptions.format||"",this.options.attributeValue)),this.element.addClass("dcpAttribute__content"),this.element.attr("data-type",this.getType()),this.element.attr("data-attrid",this.options.id),t.dcp.dcpAttribute.prototype._initDom.apply(this,[]),this.kendoWidget=this.element.find(".dcpAttribute__value--edit"),this.kendoWidget.length&&(this.options.hasAutocomplete?this.activateAutocomplete(this.kendoWidget):this._activateDate(this.kendoWidget)),0===this.element.find(".dcpAttribute__content__buttons button").length&&this.element.find(".k-picker-wrap").addClass("dcpAttribute__content__nobutton")},_initChangeEvent:function(){this.options.hasAutocomplete&&this._super()},setValue:function(i){var n,o;if(i=e.clone(i),e.has(i,"value")&&!e.has(i,"displayValue")?i.displayValue=this.formatDate(this.parseDate(i.value)):this.options.renderOptions.kendoDateConfiguration.format&&(i.displayValue=this.formatDate(this.parseDate(i.value))),t.dcp.dcpAttribute.prototype.setValue.call(this,i),"write"===this.getMode())(n=this.convertDateToPseudoIsoString(this.kendoWidget.data(this.kendoWidgetClass).value()))!=i.value&&(i.value?(o=new Date(i.value),isNaN(o.getTime())||this.kendoWidget.data(this.kendoWidgetClass).value(o)):this.getContentElements().val(""),(n||i.value)&&this.flashElement());else{if("read"!==this.getMode())throw new Error("Attribute "+this.options.id+" unkown mode "+this.getMode());this.getContentElements().text(i.displayValue)}},_activateDate:function(i){var n=this,o=this.getKendoOptions();o.change=function(){if(null!==this.value()){var t=n.convertDateToPseudoIsoString(this.value());n.setValue({value:t,displayValue:i.val()})}},i.kendoDatePicker(o),i.on("paste"+this.eventNamespace,function(){var n=t(this);e.defer(function(){i.data("kendoDatePicker").value(n.val().trim()),i.data("kendoDatePicker").trigger("change")})}),this._controlDate(i)},_controlDate:function(i){var n=this;i.on("blur"+this.eventNamespace,function(){var i=t(this).val().trim();n.invalidDate&&(n.setError(null),n.invalidDate=!1),n._setVisibilitySavingMenu("visible"),i&&(n.parseDate(i)||(n._setVisibilitySavingMenu("disabled"),e.defer(function(){n._getFocusInput().focus()}),n.invalidDate=!0,n.setError(n.options.labels.invalidDate)))})},formatDate:function(t){return this.options.renderOptions.kendoDateConfiguration.format?kendo.toString(t,this.options.renderOptions.kendoDateConfiguration.format):kendo.toString(t,"d")},parseDate:function(t){var e=this.options.renderOptions.kendoDateConfiguration.parseFormats,i=kendo.parseDate(t);return i||(this.options.renderOptions.kendoDateConfiguration.format&&e.push(this.options.renderOptions.kendoDateConfiguration.format),kendo.parseDate(t,e))},convertDateToPseudoIsoString:function(t){return t&&e.isDate(t)?t.getFullYear()+"-"+this.padNumber(t.getMonth()+1)+"-"+this.padNumber(t.getDate()):""},padNumber:function(t){return t<10?"0"+t:t},getKendoOptions:function(){var t={},i={min:this.options.minDate};return e.isObject(this.options.renderOptions.kendoDateConfiguration)&&(t=this.options.renderOptions.kendoDateConfiguration),e.extend(i,t)},close:function(){return this.kendoWidget.data(this.kendoWidgetClass)&&this.kendoWidget.data(this.kendoWidgetClass).close(),this._super()},_destroy:function(){this.kendoWidget.data(this.kendoWidgetClass)&&this.kendoWidget.data(this.kendoWidgetClass).destroy(),this._super()}}),t.fn.dcpDate})},c138e55a31f3f8960e99:function(t,e,i){"use strict";function n(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var o=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),r=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[i].concat(r).concat([o]).join("\n")}return[i].join("\n")}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=n(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(n[r]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),e.push(s))}},e}},d1cffa31e143773735c0:function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("f562ab9f022eef93542c"),i("b625c3d07db8baf045ff")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e,i){t.widget("dcp.dcpAttribute",{options:{eventPrefix:"dcpAttribute",id:null,type:"abstract",mode:"read",index:-1,labels:{deleteAttributeNames:"",deleteLabel:"",closeErrorMessage:"Close message"},template:null,deleteButton:!1,renderOptions:{displayDeleteButton:!0},locale:"fr_FR"},redraw:function(){return this.element.find("[aria-describedby*='tooltip']").tooltip("hide"),this.element.empty(),this._initDom(),this.element.off(this.eventNamespace),this._initEvent(),this},hasLink:function(){return Boolean(this.options.renderOptions&&this.options.renderOptions.htmlLink&&this.options.renderOptions.htmlLink.url)},getLink:function(){return this.options.renderOptions&&this.options.renderOptions.htmlLink?this.options.renderOptions.htmlLink:null},flashElement:function(t){t||(t=this.element),t.addClass("dcpAttribute__value--flash"),e.delay(function(){t.removeClass("dcpAttribute__value--flash").addClass("dcpAttribute__value--endflash"),e.delay(function(){t.removeClass("dcpAttribute__value--endflash")},600)},10)},setError:function(i){var n=this;if(i){var o;o=e.isArray(i)?e.toArray(i):[{message:i,index:-1}],e.each(o,function(i){-1!==i.index&&n.element.closest("tr").data("line")!==i.index||(n.element.addClass("has-error"),n.element.find(".input-group").tooltip({placement:"bottom",html:!0,animation:!1,container:n.element.parent(),title:function(){var e=t("<div/>").text(i.message).html();return'<div><span title="'+n.options.labels.closeErrorMessage+'" class="btn fa fa-times button-close-error">&nbsp;</span>'+e+"</div>"},trigger:"manual"}).one("shown.bs.tooltip",function(){var e=t(this).data("bs.tooltip").tip;e&&t(e).addClass("has-error")}),n.element.data("hasErrorTooltip",!0),n.element.find(".input-group").tooltip("show"),e.delay(function(){n.element.find(".input-group")},1))})}else this.element.removeClass("has-error"),this.element.data("hasErrorTooltip")&&(this.element.find(".input-group").tooltip("hide").data("bs.tooltip",null),this.element.data("hasErrorTooltip",!1))},getType:function(){return this.options.type},getMode:function(){if("read"!==this.options.mode&&"write"!==this.options.mode&&"hidden"!==this.options.mode)throw new Error("Attribute "+this.option.id+" have unknown mode "+this.options.mode);return this.options.mode},getValue:function(){return this.options.attributeValue},getContentElements:function(){return this.element.find('.dcpAttribute__value[name="'+this.options.id+'"]')},getWidgetValue:function(){return this.getContentElements().val()},setValue:function(t,i){this._checkValue(t);var n=!1;this._isMultiple()?(n=e.toArray(this.options.attributeValue).length===t.length)&&(n=e.isEqual(this.options.attributeValue,t)):n=e.isEqual(this.options.attributeValue.value,t.value),n||(this.options.attributeValue=t,this._trigger("change",i,{id:this.options.id,value:this.getValue(),index:this._getIndex()}))},hideInputTooltip:function(e){var i=t(e).closest(".input-group");return i.data("hasTooltip")&&i.tooltip("hide"),this},showInputTooltip:function(e){if(this.options.renderOptions.inputHtmlTooltip){var i=t(e).closest(".input-group");i.data("hasTooltip")||(i.tooltip({trigger:"manual",html:!0,title:this.options.renderOptions.inputHtmlTooltip,placement:"bottom"}).on("shown.bs.tooltip",function(){var e=t(this).data("bs.tooltip").tip;e&&t(e).addClass("dcpAttribute__editlabel")}),i.data("hasTooltip",!0)),i.tooltip("show")}return this},close:function(){return this},_create:function(){var t=this;null===this.options.id&&(this.options.id=e.uniqueId("widget_"+this.getType())),(e.isUndefined(this.options.attributeValue)||null===this.options.attributeValue)&&(this._isMultiple()?this.options.attributeValue=[]:this.options.attributeValue={value:null,displayValue:""}),this.options.helpOutputs&&(this.options.hasAutocomplete=!0),this.options.renderOptions&&this.options.renderOptions.buttons&&(this.options.renderOptions.buttons=e.map(this.options.renderOptions.buttons,function(e,n){return e.renderHtmlContent=i.render(e.htmlContent||"",t.options.attributeValue),e.index=n,e})),this.options.emptyValue=e.bind(this._getEmptyValue,this),this.options.hadButtons=this._hasButtons(),this.options.renderOptions&&this.options.renderOptions.labels&&(this.options.labels=e.extend(this.options.labels,this.options.renderOptions.labels)),this.options.renderOptions&&!1===this.options.renderOptions.displayDeleteButton&&(this.options.deleteButton=!1),"hidden"!==this.getMode()&&(this._initDom(),this._initEvent()),this._triggerReady()},_destroy:function(){this.element.removeClass("dcpAttribute__content"),this.element.removeAttr("data-type"),this.element.removeAttr("data-attrid"),this.element.empty(),this._trigger("destroy"),this._super()},_initDom:function(){var t=this.getLink(),n=this;if(this._initMainElementClass(),t){var o=i.escape;this._isMultiple()?this.options.attributeValues=e.map(this.options.attributeValue,function(e,r){var s=r;return i.escape=encodeURIComponent,n._completeRevisionData(e),n.options.index>=0&&(s=n.options.index),t.urls&&t.urls[s]?e.renderUrl=i.render(t.urls[s],e):e.renderUrl=i.render(t.url||"",e),i.escape=o,e.renderTitle=i.render(t.title||"",e),e.index=r,e}):(i.escape=encodeURIComponent,this._completeRevisionData(this.options.attributeValue),t.urls&&t.urls[this.options.index]?this.options.renderOptions.htmlLink.renderUrl=i.render(t.urls[this.options.index],this.options.attributeValue):this.options.renderOptions.htmlLink.renderUrl=i.render(t.url||"",this.options.attributeValue),i.escape=o,this.options.renderOptions.htmlLink.renderTitle=i.render(t.title||"",this.options.attributeValue))}this.element.append(i.render(this._getTemplate(this.options.mode)||"",this.options)),0===this.element.find(".dcpAttribute__content__buttons button").length&&(this.element.find(".dcpAttribute__content__buttons").hide(),this.element.find(".dcpAttribute__value").addClass("dcpAttribute__content__nobutton"))},_completeRevisionData:function(t){t.isRevision=-1!==t.revision&&null!==t.revision&&!e.isUndefined(t.revision),t.isRevision&&(t.revision.state?t.revisionTarget="state:"+t.revision.state:t.revisionTarget=t.revision)},_initMainElementClass:function(){this.element.addClass("dcpAttribute__content"),this.element.attr("data-type",this.getType()),this.element.attr("data-attrid",this.options.id)},_initEvent:function(){return"write"===this.getMode()&&(this._initDeleteEvent(),this._initButtonsEvent(),this._initFocusEvent(),this._initMoveEvent()),"read"===this.getMode()&&(this._initButtonsEvent(),this._initActionClickEvent(),this._initLinkEvent()),this._initErrorEvent(),this},_initFocusEvent:function(){if(this.options.renderOptions&&this.options.renderOptions.inputHtmlTooltip){var e=this,i=".dcpAttribute__value";this._getFocusInput().on("focus"+this.eventNamespace,function(n){var o=t(n.currentTarget).closest(i);e.showInputTooltip(o)}),this._getFocusInput().on("blur."+this.eventNamespace,function(n){var o=t(n.currentTarget).closest(i);e.hideInputTooltip(o)})}return this._getFocusInput().on("focus"+this.eventNamespace,function(e){t(e.currentTarget).closest(".dcpAttribute__content").addClass("dcpAttribute--focus")}),this._getFocusInput().on("blur"+this.eventNamespace,function(e){t(e.currentTarget).closest(".dcpAttribute__content").removeClass("dcpAttribute--focus")}),this},_initMoveEvent:function(){var t=this;return-1!==this.options.index&&this.element.on("postMoved"+this.eventNamespace,function(){var i=t.element.closest("tr").data("line");e.isUndefined(i)||(t.options.index=i)}),this},_initButtonsEvent:function(){var e=this;return this.element.on("click"+this.eventNamespace,".dcpAttribute__content__button--extra",function(n){var o=e.options.renderOptions.buttons[t(this).data("index")],r="";if(o&&o.url){var s=i.escape;i.escape=encodeURIComponent;var a=i.render(o.url||"",e.options.attributeValue);if(i.escape=s,"_dialog"!==o.target){var l=t("base"),d=new RegExp("^(?:[a-z]+:)?//","i");o&&(o.windowWidth||o.windowHeight)&&(o.windowWidth&&(r+="width="+parseInt(o.windowWidth,10)+","),o.windowHeight&&(r+="height="+parseInt(o.windowHeight,10)+","),r+="resizable=yes,scrollbars=yes"),d.test(a)||(a=l.attr("href")+a),window.open(a,o.target,r)}else{var c=t("<div/>");t("body").append(c);var u=i.render(o.windowTitle||"",e.options.attributeValue),p=c.dcpWindow({title:u,width:o.windowWidth,height:o.windowHeight,content:a,iframe:!0}).data("dcpWindow");p.kendoWindow().center(),p.open()}}e._trigger("click",n,{id:e.option.id,value:e.options.attributeValue,index:e._getIndex()})}),this.element.tooltip({selector:".dcpAttribute__content__buttons button",placement:"top",trigger:"hover",html:!0,title:function(){var n=t(this).data("title"),o=e.getValue();return i.render(n||"",o)},container:this.element.parent()}),this},_initErrorEvent:function(){var t=this;this.element.parent().on("click"+this.eventNamespace,".button-close-error",function(){t.element.data("hasErrorTooltip")&&(t.element.find(".input-group").tooltip("hide"),t.element.data("hasErrorTooltip",!1))})},_initDeleteEvent:function(){var t,i=this,n=this.element.find(".dcpAttribute__content__button--delete");return this.options.labels.deleteLabel?t=this.options.labels.deleteLabel:(t=n.attr("title"),t+=this.options.labels.deleteAttributeNames),n.attr("title",t),this.element.on("click"+this.eventNamespace,".dcpAttribute__content__button--delete",function(t){i._trigger("delete",t,{index:i._getIndex(),id:i.options.id}),e.defer(function(){i.element.find("input").focus()})}),this},_initActionClickEvent:function(){var e=this;this.element.on("click."+this.eventNamespace,'a[href^="#action/"], a[data-action], button[data-action]',function(i){var n,o,r,s=t(this);return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),n=s.data("action")||s.attr("href"),o=n.substring(8).split(":"),r={target:i.target,index:e._getIndex(),eventId:o.shift(),options:o},e._trigger("externalLinkSelected",i,r),this})},_initLinkEvent:function(){var e=this.getLink(),n=this;return e&&(this.element.on("click."+this.eventNamespace,".dcpAttribute__content__link",function(o){var r,s,a,l,d=t(this),c=d.attr("href");"#action/"===c.substring(0,8)||d.data("action")||"_dialog"===e.target&&(o.preventDefault(),r=void 0!==(s=t(this).data("index"))&&null!==s?i.render(e.windowTitle||"",n.options.attributeValue[s]):i.render(e.windowTitle||"",n.options.attributeValue),a=t("<div/>"),t("body").append(a),(l=a.dcpWindow({title:r,width:e.windowWidth,height:e.windowHeight,content:c,iframe:!0})).data("dcpWindow").kendoWindow().center(),l.data("dcpWindow").open())}),this.element.find(".dcpAttribute__content__link[title]").tooltip({placement:"top",container:this.element.parent(),html:!0,trigger:"hover"}).each(function(){t(this).data("bs.tooltip").tip&&t(this).data("bs.tooltip").tip().addClass("dcpAttribute__linkvalue")})),this},_getFocusInput:function(){return this.element.find('input[name="'+this.options.id+'"]')},_getIndex:function(){return-1!==this.options.index&&(this.options.index=this.element.closest(".dcpArray__content__line").data("line")),this.options.index},_getEmptyValue:function(){return(e.isEmpty(this.options.attributeValue)||null===this.options.attributeValue.value)&&this.options.renderOptions&&this.options.renderOptions.showEmptyContent?!0===this.options.renderOptions.showEmptyContent?" ":this.options.renderOptions.showEmptyContent:""},_getTemplate:function(t){if(this.options.templates&&this.options.templates[t])return this.options.templates[t];if(window.dcp&&window.dcp.templates&&window.dcp.templates[this.getType()]&&window.dcp.templates[this.getType()][t])return window.dcp.templates[this.getType()][t];if(window.dcp&&window.dcp.templates&&window.dcp.templates.default&&window.dcp.templates.default[t])return window.dcp.templates.default[t];throw new Error("Unknown template  "+t+"/"+this.options.type+" for "+this.options.id)},_checkValue:function(t){if(this._isMultiple());else if(!e.isObject(t)||!e.has(t,"value")||!e.has(t,"displayValue"))throw new Error("The value must be an object with value and displayValue properties (attrid id :"+this.options.id+")");return!0},_isMultiple:function(){return this.options.options&&"yes"===this.options.options.multiple},_hasButtons:function(){return"write"===this.getMode()?this.options.hasAutocomplete||this.options.deleteButton||this.options.renderOptions&&this.options.renderOptions.buttons&&!0:this.options.renderOptions&&this.options.renderOptions.buttons&&!0},_triggerReady:function(){this._trigger("widgetReady")},_setVisibilitySavingMenu:function(t){var e={prevent:!1};this._trigger("changeattrmenuvisibility",e,{id:"save",onlyIfVisible:!0,visibility:t}),this._trigger("changeattrmenuvisibility",e,{id:"saveAndClose",onlyIfVisible:!0,visibility:t}),this._trigger("changeattrmenuvisibility",e,{id:"createAndClose",onlyIfVisible:!0,visibility:t}),this._trigger("changeattrmenuvisibility",e,{id:"create",onlyIfVisible:!0,visibility:t})}})})},e10c73398bdea22dc801:function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58")],void 0===(o=function(t){return function(){var e=[];this.addConstraintMessage=function(i,n){n=t.isNumber(n)?n:-1,e.push({message:i,index:n})},this.getConstraintMessages=function(){return e.slice(0)},this.hasConstraintMessages=function(){return e.length>0},this.deleteConstaintMessages=function(){e=[]}}}.apply(e,n))||(t.exports=o)},e3b629bb5804c565e69e:function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06")],void 0===(o=function(t,e){var i=t.template("api/v1/documents/<%- initid %>/usertags/lasttab");return e.Model.extend({typeModel:"ddui:attributeTab",idAttribute:"initid",url:function(){return i({initid:this.get("initid")})},toJSON:function(){return this.get("tabId")}})}.apply(e,n))||(t.exports=o)},e6944ecc13b0862a73e7:function(t,e,i){"use strict";var n,o;n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("f562ab9f022eef93542c"),i("0bd0aa4c1909a49f67bb")],void 0===(o=function(t,e,i){t.widget("dcp.dcpDocumentProperties",t.dcp.dcpDialog,{options:{documentId:0,window:{modal:!0,title:"Document properties"},labels:{identifier:"Identifier",title:"Title",logicalName:"Logical name",revision:"Revision number",version:"Version",family:"Family",lockedBy:"Locked by",createdBy:"Created by",notLocked:"Not locked",confidential:"Confidential",notConfidential:"Not confidential",creationDate:"Creation date",lastModificationDate:"Last modification date",lastAccessDate:"Last access date",profil:"Profil",profilReference:"Profil reference",viewController:"View controller",propertiesTitle:"Properties of {{title}}",property:"Property",propertyValue:"Value",workflow:"Workflow",activity:"Activity"}},documentProperties:null,htmlCaneva:function(){return'<table class="properties-main table table-condensed table-hover"><thead><tr class="properties-header"><th class="properties-header--description">{{labels.property}}</th><th class="properties-header--value">{{labels.propertyValue}}</th></tr></thead><tbody><tr><td class="properties-description">{{labels.title}}</td><td class="properties-value">{{title}}</td></tr><tr><td class="properties-description">{{labels.identifier}}</td><td class="properties-value">{{initid}}</td></tr><tr><td class="properties-description">{{labels.logicalName}}</td><td class="properties-value">{{name}}</td></tr><tr><td class="properties-description">{{labels.revision}}</td><td class="properties-value">{{revision}}</td></tr><tr><td class="properties-description">{{labels.version}}</td><td class="properties-value">{{version}}</td></tr><tr><td class="properties-separator" colspan="2"></td></tr><tr><td class="properties-description">{{labels.workflow}}</td><td class="properties-value"><a  data-document-id="{{workflow.id}}" href="api/v1/documents/{{workflow.id}}.html">{{#workflow.icon}}<img src="{{workflow.icon}}"/>{{/workflow.icon}}{{workflow.title}}</a></td></tr><tr><td class="properties-description">{{labels.activity}}</td><td class="properties-value">{{#state.reference}}<div class="properties-value-statecolor" style="background-color:{{state.color}}"/>{{state.displayValue}}{{/state.reference}}</td></tr><tr><td class="properties-description">{{labels.family}}</td><td class="properties-value"><a data-document-id="{{family.id}}" href="api/v1/documents/{{family.id}}.html"><img src="{{family.icon}}"/>{{family.title}}</a><br/><div class="properties-value--famname">{{family.name}}</div></td></tr><tr><td class="properties-separator" colspan="2"></td></tr><tr><td class="properties-description">{{labels.createdBy}}</td><td class="properties-value"><a data-document-id="{{createdBy.id}}" href="api/v1/documents/{{createdBy.id}}.html"><img src="{{createdBy.icon}}"/>{{createdBy.title}}</a></td></tr><tr><td class="properties-description">{{labels.lockedBy}}</td><td class="properties-value">{{#security.lock.lockedBy.id}}<a data-document-id="{{security.lock.lockedBy.id}}" href="api/v1/documents/{{security.lock.lockedBy.id}}.html"><img src="{{security.lock.lockedBy.icon}}"/>{{security.lock.lockedBy.title}}</a>{{/security.lock.lockedBy.id}}{{^security.lock.lockedBy.id}}{{labels.notLocked}}{{/security.lock.lockedBy.id}}</td></tr><tr><td class="properties-description">{{labels.confidential}}</td><td class="properties-value">{{#confidential}}{{labels.confidential}}{{/confidential}}{{^confidential}}{{labels.notConfidential}}{{/confidential}}</td></tr><tr><td class="properties-separator" colspan="2"></td></tr><tr><td class="properties-description">{{labels.creationDate}}</td><td class="properties-value">{{#formatDate}}{{creationDate}}{{/formatDate}}</td></tr><tr><td class="properties-description">{{labels.lastModificationDate}}</td><td class="properties-value">{{#formatDate}}{{lastModificationDate}}{{/formatDate}}</td></tr><tr><td class="properties-description">{{labels.lastAccessDate}}</td><td class="properties-value">{{#formatDate}}{{lastAccessDate}}{{/formatDate}}</td></tr><tr><td class="properties-separator" colspan="2"></td></tr><tr><td class="properties-description">{{labels.profil}}</td><td class="properties-value"><a data-document-id="{{security.profil.id}}" href="api/v1/documents/{{security.profil.id}}.html">{{#security.profil.icon}}<img src="{{security.profil.icon}}"/>{{/security.profil.icon}}{{security.profil.title}}</a></td></tr><tr><td class="properties-description">{{labels.profilReference}}</td><td class="properties-value"><a data-document-id="{{security.profil.reference.id}}" href="api/v1/documents/{{security.profil.reference.id}}.html">{{#security.profil.reference.icon}}<img src="{{security.profil.reference.icon}}"/>{{/security.profil.reference.icon}}{{security.profil.reference.title}}</a></td></tr><tr><td class="properties-description">{{labels.viewController}}</td><td class="properties-value"><a data-document-id="{{viewController.id}}" href="api/v1/documents/{{viewController.id}}.html">{{#viewController.icon}}<img src="{{viewController.icon}}"/>{{/viewController.icon}}{{viewController.title}}</a></td></tr></tbody></table>'},_create:function(){var e=this;this._displayProperties(),this._super(),this.element.data("dcpDocumentProperties",this),this.element.on("click"+this.eventNamespace,"a[data-document-id]",function(i){var n=t(this).data("document-id");n&&(i.preventDefault(),e.element.trigger("viewDocument",n))})},_displayProperties:function(){var n=this;t.getJSON("api/v1/documents/"+this.options.documentId+".json?fields=document.properties.all").done(function(t){var o;n.documentProperties=t.data.document.properties,(o=e.extend(n.documentProperties,{labels:n.options.labels})).formatDate=function(){return function(t,e){return kendo.toString(new Date(e(t).replace(" ","T")),"G")}},n.element.html(i.render(n.htmlCaneva()||"",o)),n.dialogWindow.setOptions({title:i.render(n.options.labels.propertiesTitle,t.data.document.properties)})}).fail(function(t){var e=JSON.parse(t.responseText);window.alert(e.exceptionMessage)})}})}.apply(e,n))||(t.exports=o)},e795383f953f8380d242:function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("ab4ce4f91706f6c2712e")],void 0===(o=function(t,e,i){return i.extend({typeModel:"ddui:transition",defaults:{documentId:void 0,documentModel:void 0,state:void 0,attributes:[]},url:function(){var t="api/v1/documents/<%= documentId %>/views/states/<%= state %>";return t=t.replace("<%= documentId %>",encodeURIComponent(this.get("documentId"))),t=t.replace("<%= state %>",encodeURIComponent(this.get("state")))},parse:function(e){var i,n,o,r=this.get("documentModel");if(!1===e.success)throw new Error("Unable to get the data from change state");return i=[],(o=e.data.renderOptions)||(o=r.get("renderOptions")),e.data.transition&&e.data.transition.askAttributes.length>0&&t.each(e.data.transition.askAttributes,function(t){i.push(t)}),n=r.get("templates"),e.data.templates&&(n.body=e.data.templates.body,t.each(e.data.templates.sections,function(t,e){n.sections[e]=t})),this.initialProperties={renderMode:"edit",viewId:"!Transition"},{initid:null,properties:e.data.workflow.properties,menus:[],viewId:"!Transition",locale:r.get("locale").culture,renderMode:"edit",attributes:i,templates:r.get("templates"),renderOptions:o,customCSS:e.data.css,customJS:e.data.js,messages:e.messages,workflow:{transition:e.data.transition,state:e.data.state,labels:e.data.labels}}},toJSON:function(){var e=this.getValues(),i={parameters:{}};return t.each(e,function(e,n){"_workflow_comment_"===n?i.comment=t.isObject(e)?e.value:"":t.isArray(e)?e.length>0&&t.isArray(e[0])?i.parameters[n]=t.map(e,function(e){return t.pluck(e,"value")}):i.parameters[n]=t.pluck(e,"value"):t.isObject(e)?i.parameters[n]=e.value:i.parameters[n]=e}),i}})}.apply(e,n))||(t.exports=o)},ea039643a9587ce47509:function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("0627c604219b27e8bb7c")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t){return t.widget("dcp.dcpDouble",t.dcp.dcpInt,{options:{type:"double",renderOptions:{decimalPrecision:null,numberFormat:"#,#.######################"}},_initDom:function(){if(null!==this.options.renderOptions.decimalPrecision&&this.options.renderOptions.decimalPrecision>=0){this.options.renderOptions.numberFormat="#,#.";for(var t=0;t<this.options.renderOptions.decimalPrecision;t++)this.options.renderOptions.numberFormat+="0"}this._super()},getKendoNumericOptions:function(){var t=this._super();return null===t.max&&(t.max=999999e14),null===t.min&&(t.min=-99999e15),null!==this.options.renderOptions.decimalPrecision?t.decimals=this.options.renderOptions.decimalPrecision:t.decimals=20,t},getType:function(){return"double"}}),t.fn.dcpDouble})},'external "jQuery"':function(t,e){t.exports=jQuery},'external "kendo"':function(t,e){t.exports=kendo},f562ab9f022eef93542c:function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"')],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t){var e=function(t){this.name="noSuchMethodError",this.message=t||"No such method for current widget instance"};(e.prototype=Object.create(Error.prototype)).constructor=e,function(t,i){var n=0,o=Array.prototype.slice,r=t.cleanData;t.cleanData=function(e){var i,n,o=null;for(n=0;null!=(o=e[n]);n++)try{(i=t._data(o,"events"))&&i.remove&&t(o).triggerHandler("remove")}catch(t){}r(e)},t.widget=function(e,i,n){var o,r,s,a,l={},d=e.split(".")[0];return e=e.split(".")[1],o=d+"-"+e,n||(n=i,i=t.Widget),t.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr.pseudos[o.toLowerCase()]=function(e){return Boolean(t(e).data(o))},t[d]=t[d]||{},r=t[d][e],s=t[d][e]=function(t,e){if(!this._createWidget)return new s(t,e);arguments.length&&this._createWidget(t,e)},t.extend(s,r,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){t.isFunction(n)?l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},o=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,r=this._superApply;return this._super=t,this._superApply=o,e=n.apply(this,arguments),this._super=i,this._superApply=r,e}}():l[e]=n}),s.prototype=t.widget.extend(a,{},l,{constructor:s,namespace:d,widgetName:e,widgetFullName:o}),r?(t.each(r._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete r._childConstructors):i._childConstructors.push(s),t.widget.bridge(e,s),s},t.widget.extend=function(e){for(var n,r,s=o.call(arguments,1),a=0,l=s.length;a<l;a++)for(n in s[a])r=s[a][n],s[a].hasOwnProperty(n)&&r!==i&&(t.isPlainObject(r)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],r):t.widget.extend({},r):e[n]=r);return e},t.widget.bridge=function(n,r){var s=r.prototype.widgetFullName||n;t.fn[n]=function(a){var l="string"==typeof a,d=o.call(arguments,1),c=this;return a=!l&&d.length?t.widget.extend.apply(null,[a].concat(d)):a,l?this.each(function(){var o,r=t(this).data(s);if("instance"===a)return c=r,!1;if(!r)return t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'");if(!t.isFunction(r[a])||"_"===a.charAt(0))throw new e("no such method '"+a+"' for "+n+" widget instance");return(o=r[a].apply(r,d))!==r&&o!==i?(c=o&&o.jquery?c.pushStack(o.get()):o,!1):void 0}):(d.length&&(a=t.widget.extend.apply(null,[a].concat(d))),this.each(function(){var e=t(this).data(s);e?e.option(a||{})._init():t(this).data(s,new r(a,this))})),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",defaultElement:"<div>",options:{classes:{},disabled:!1,eventPrefix:null,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.classesElementLookup={},null===this.options.eventPrefix&&(this.options.eventPrefix=this.widgetName),i!==this&&(t(i).data(this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var o,r,s,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},o=e.split("."),e=o.shift(),o.length){for(r=a[e]=t.widget.extend({},this.options[e]),s=0;s<o.length-1;s++)r[o[s]]=r[o[s]]||{},r=r[o[s]];if(e=o.pop(),1===arguments.length)return r[e]===i?null:r[e];r[e]=n}else{if(1===arguments.length)return this.options[e]===i?null:this.options[e];a[e]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,this},_setOptionClasses:function(e){var i,n,o;for(i in e)o=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&o&&o.length&&(n=t(o.get()),this._removeClass(o,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_classes:function(e){var i,n=[],o=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),i=function(i,r){var s,a;for(a=0;a<i.length;a++){if(s=o.classesElementLookup[i[a]]||t(),e.add){var l=+t().jquery.split(".")[0];s=t(l>=3?t.uniqueSort(s.get().concat(e.element.get())):t.unique(s.get().concat(e.element.get())))}else s=t(s.not(e.element).get());o.classesElementLookup[i[a]]=s,n.push(i[a]),r&&e.classes[i[a]]&&n.push(e.classes[i[a]])}},e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),n.join(" ")},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var o="string"==typeof t||null===t,r={extra:o?e:i,keys:o?t:e,element:o?this.element:t,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(e,i,n){var o,r=this;"boolean"!=typeof e&&(n=i,i=e),n?(i=o=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),t.each(n,function(e,n){var s=function(){return("string"==typeof n?r[n]:n).apply(r,arguments)};"string"!=typeof n&&(s.guid=n.guid=n.guid||s.guid||t.guid++);var a=e.match(/^(\w+)\s*(.*)$/),l=a[1]+r.eventNamespace,d=a[2],c=+t().jquery.split(".")[0];d?c>=3?o.on(l,d,s):o.delegate(d,l,s):c>=3?i.on(l,s):i.bind(l,s)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_trigger:function(e,i,n){var o,r,s=this.options[e];if(n=n||{},i=t.Event(i),i.type=this.options.eventPrefix?this.options.eventPrefix+e:e,i.type=i.type.toLocaleLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(t.isFunction(s)&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}}}(t)})},f586cf5b9f4b7719b2c1:function(t,e,i){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},f845389cd549ce7299bb:function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06")],void 0===(o=function(t,e){return e.Router.extend({initialize:function(t){var e=this;this.useHistory=t.useHistory,this.document=t.document,this.route(/api\/v1\/documents\/([^\/]+)\.html/,"viewDocument"),this.route(/api\/v1\/documents\/(.+)\/revisions\/([^\/]+)\.html/,"viewRevision"),this.route(/api\/v1\/documents\/(.+)\/views\/([^\/]+)\.html/,"viewView"),this.route(/api\/v1\/documents\/(.+)\/revisions\/([^\/]+)\/views\/([^\/]+)\.html/,"viewRevisionView"),this.route(/[^?]*\?app=DOCUMENT([^#]+)/,"fetch"),this.document.listenTo(this.document,"sync",function(){var t,i=e.document.get("viewId"),n={path:window.location.pathname,initid:e.document.get("initid"),revision:e.document.get("revision")>=0?e.document.get("revision"):void 0,viewId:void 0},o=e.document.getServerProperties();n.initid||"edit"===o.renderMode&&(n.initid=o.family.name),n.viewId=i,o&&"alive"===o.status&&(n.revision=-1),(t=e.getUrlParameters(window.location.search)).app?e.rewriteAppUrl(t,n):e.rewriteApiUrl(n)})},rewriteAppUrl:function(e,i){var n,o,r="";e.app&&i.initid&&(t.each(e,function(t,i){["id","initid","app","viewId","revision"].indexOf(i)>=0&&(e[i]=null)}),n=t.compact(t.map(e,function(t,e){return null===t?null:e+"="+encodeURIComponent(t)})),"!defaultConsultation"!==i.viewId?(r="/views/"+encodeURIComponent(i.viewId),i.revision>=0&&(r+="/revisions/"+encodeURIComponent(i.revision))):i.revision>=0&&(r="/revisions/"+encodeURIComponent(i.revision)),o=window.location.pathname+"api/v1/documents/"+i.initid+r+".html",n.length>0&&(o+="?"+n.join("&")),o+=window.location.hash,this.navigate(o,{replace:!this.useHistory}))},rewriteApiUrl:function(t){var e,i=!1,n=!1,o="",r="",s=window.location.search,a=window.location.hash;if(t.initid&&(i=window.location.pathname.match("(.*)api\\/v1\\/documents\\/(.*)"))){if(o=i[1],"!defaultConsultation"!==t.viewId?(r="/views/"+encodeURIComponent(t.viewId),t.revision>=0&&(r+="/revisions/"+encodeURIComponent(t.revision))):t.revision>=0&&(r="/revisions/"+encodeURIComponent(t.revision)),e=/documents\/0\.html$/.test(t.path),n=/#widgetValue{(.*)}/.exec(a))try{var l=JSON.parse("{"+n[1]+"}");delete l.viewId,delete l.initid,delete l.revision,l.customClientData&&(s+=s?"&":"?",s+="customClientData=",s+=encodeURIComponent(JSON.stringify(l.customClientData)),delete l.customClientData),a=e?"":"#widgetValue"+JSON.stringify(l)}catch(t){}this.useHistory||(e=!0),this.navigate(o+"api/v1/documents/"+t.initid+r+".html"+s+a,{replace:e})}},viewDocument:function(t){this.document.fetchDocument({initid:t})},viewRevision:function(t,e){this.document.fetchDocument({initid:t,revision:e})},viewView:function(t,e){this.document.fetchDocument({initid:t,viewId:e})},viewRevisionView:function(t,e,i){this.document.fetchDocument({initid:t,revision:e,viewId:i})},fetch:function(e){var i,n={};i=this.getUrlParameters(e),t.isUndefined(i.id)||(n.initid=i.id),t.isUndefined(i.initid)||(n.initid=i.initid),t.isUndefined(i.revision)?n.revision=-1:n.revision=parseInt(i.revision,10),t.isUndefined(i.viewId)?n.viewId=void 0:n.viewId=i.viewId,this.document.fetchDocument(n)},getUrlParameters:function(t){for(var e,i=t.substr(1).split("&"),n={},o=0;o<i.length;o++)(e=i[o].match(/^([^=]+)=(.*)$/))?n[e[1]]=decodeURIComponent(e[2]):n[i[o]]="";return n}})}.apply(e,n))||(t.exports=o)},fb3f606ecd8a48d7cad0:function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("72335e037ab5116fdf0c"),i("512dac7279589ee7db96"),i("0ed68aa34b095f87d8dd")],void 0===(o=function(t,e,i,n,o){return e.Collection.extend({comparator:"logicalOrder",model:function(t,e){return"array"===t.type?new o(t,e):"tab"===t.type||"frame"===t.type?new n(t,e):new i(t,e)},initialize:function(t,e){this.documentModel=e.documentModel,this.renderOptions=e.renderOptions,this.renderMode=e.renderMode},destroy:function(){for(var t;t=this.first();)t.destroy();delete this.documentModel,delete this.renderOptions,delete this.renderMode}})}.apply(e,n))||(t.exports=o)},fb99e2d47db08d4c57e2:function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("ea039643a9587ce47509")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t){return t.widget("dcp.dcpMoney",t.dcp.dcpDouble,{options:{type:"money",renderOptions:{currency:"€",numberFormat:"#,#.00"}},getKendoNumericOptions:function(){var t=this._super();if(this.options.renderOptions.currency)switch(this.options.locale.substr(0,2)){case"en":case"ga":t.format=this.options.renderOptions.currency.replace("$","\\$")+t.format;break;default:t.format+=" "+this.options.renderOptions.currency.replace("$","\\$")}return t},getType:function(){return"money"}}),t.fn.dcpMoney})},fde693488ffc947d1881:function(t,e,i){"use strict";var n,o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("bcd31d01884fc294fd69"),i("593c8c94ba4399020f79"),i("25094ffcb8bcd2bb587c"),i("61b480911316cdda77a4"),i("0627c604219b27e8bb7c"),i("44a0b71fc2e02754c2f8"),i("98221531f3fb9af2dff1"),i("6dbe3b90603a8175dd85"),i("568d4145cebb6959279c"),i("6ae127aafe284bc9addc"),i("fb99e2d47db08d4c57e2"),i("8df78adf9774feae5b6e"),i("061678c35a7b82df6628"),i("7bf0c39069ca070152a3"),i("af25306fd60189c120f8"),i("ea039643a9587ce47509"),i("ff69e46ed202585764e9")],void 0===(o=function(t,e,n,o,s){return n.View.extend({className:"row dcpAttribute form-group",customView:!1,displayLabel:!0,attributeEvents:{"dcpattributechange .dcpAttribute__content,[data-dcpattribute_content]":"updateValue","dcpattributedelete .dcpAttribute__content":"deleteValue","dcpattributechangeattrmenuvisibility .dcpAttribute__content":"changeMenuVisibility","dcpattributechangeattrsvalue .dcpAttribute__content":"changeAttributesValue","dcpattributefetchdocument .dcpAttribute__content":"loadDocument","dcpattributeexternallinkselected .dcpAttribute__content":"externalLinkSelected",dcplabelexternallinkselected:"externalLinkSelected","dcpattributedownloadfile  .dcpAttribute__content":"downloadFileSelect","dcpattributeuploadfile  .dcpAttribute__content":"uploadFileSelect","dcpattributeuploadfiledone  .dcpAttribute__content":"uploadFileDone","dcpattributeanchorclick .dcpAttribute__content":"anchorClick","dcpattributewidgetready .dcpAttribute__content":"setWidgetReady"},initialize:function(t){var i;this.listenTo(this.model,"change:label",this.refreshLabel),this.listenTo(this.model,"change:attributeValue",this.refreshValue),this.listenTo(this.model,"change:errorMessage",this.refreshError),this.listenTo(this.model,"moved",this.moveValueIndex),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"showTab",this.afterShow),this.listenTo(this.model,"hide",this.hide),this.listenTo(this.model,"show",this.show),this.listenTo(this.model,"haveView",this._identifyView),this.listenTo(this.model,"closeWidget",this._closeWidget),this.templateWrapper=this.model.getTemplates().attribute.simpleWrapper,(t=t||{}).originalView=!1!==t.originalView,!1!==t.displayLabel&&"none"!==this.model.getOption("labelPosition")||(this.displayLabel=!1),!0===t.originalView&&(i=this.attributeEvents,e.isFunction(i)&&(i=i.apply(this)),this.delegateEvents(i)),this.options=t},getData:function(t){var i;return i=this.model.toData(t,!0),i.viewCid=this.cid+"-"+this.model.id,i.labels.deleteAttributeNames=this.getDeleteLabels(),i.autocompleteRequest=e.bind(this.autocompleteRequestRead,this),i},render:function(){var i=this;return new Promise(e.bind(function(e,n){var r,a,l={prevent:!1};return i.model.trigger("beforeRender",l,{model:i.model,$el:i.$el}),l.prevent?(e(),i):(r=i.getData(),i.$el.addClass("dcpAttribute--type--"+i.model.get("type")),i.$el.addClass("dcpAttribute--visibility--"+i.model.get("visibility")),i.$el.attr("data-attrid",i.model.get("id")),i.model.get("needed")&&i.$el.addClass("dcpAttribute--needed"),i.$el.append(t(o.render(i.templateWrapper||"",r))),s.insertDescription(i),!1===i.displayLabel?(i.$el.find(".dcpAttribute__label").remove(),i.$el.find(".dcpAttribute__right").addClass("dcpAttribute__right--full")):("left"===i.model.getOption("labelPosition")&&(i.$el.addClass("dcpAttribute__labelPosition--left"),i.$el.find(".dcpAttribute__right").not(".dcpAttribute__description").addClass("dcpAttribute__labelPosition--left"),i.$el.find(".dcpAttribute__left").not(".dcpAttribute__description").addClass("dcpAttribute__labelPosition--left")),"up"===i.model.getOption("labelPosition")&&(i.$el.addClass("dcpAttribute__labelPosition--up"),i.$el.find(".dcpAttribute__right").not(".dcpAttribute__description").addClass("dcpAttribute__labelPosition--up"),i.$el.find(".dcpAttribute__left").not(".dcpAttribute__description").addClass("dcpAttribute__labelPosition--up")),"auto"===i.model.getOption("labelPosition")&&(i.$el.addClass("dcpAttribute__labelPosition--auto"),i.$el.find(".dcpAttribute__right").addClass("dcpAttribute__labelPosition--auto"),i.$el.find(".dcpAttribute__left").addClass("dcpAttribute__labelPosition--auto")),i.$el.find(".dcpAttribute__label").dcpLabel(r)),!0!==i.options.originalView&&i.model.getOption("template")?(a=s.renderCustomView(i.model),i.customView=a.$el,i.$el.find(".dcpAttribute__content").append(i.customView),a.promise.then(e),a.promise.catch(n)):(i.$el.one("dcpattributewidgetready .dcpAttribute__content",function(){e()}),i.currentDcpWidget=i.widgetInit(i.$el.find(".dcpAttribute__content"),r)),i.renderDone=!0,i.customView&&(i.widgetReady=!0),i.triggerRenderDone(),i)},this))},refreshLabel:function(){var t=this.model.get("label"),e=this.getDOMElements().find(".dcpAttribute__label");this.model.getOption("attributeLabel")&&(t=this.model.getOption("attributeLabel")),e.data("dcpDcpLabel")&&this.getDOMElements().find(".dcpAttribute__label").dcpLabel("setLabel",t)},refreshValue:function(i,n,o){var r,s=this;if(o.notUpdateArray)return this;r=this.getDOMElements(),this.model.isInArray()?this.$el.dcpArray("setLines",n.length,o).then(e.bind(function(){n=e.toArray(n),e.each(n,function(n,o){if(!e.isUndefined(n)){var a='.dcpAttribute__content--widget[data-attrid="'+i.id+'"]';t(r[o]).find(a).addBack(a).each(function(e,i){s.widgetApply(t(i),"setValue",n)})}})},this)):this.widgetApply(r.find('.dcpAttribute__content--widget[data-attrid="'+i.id+'"]'),"setValue",n)},refreshError:function(e){this.$el.find(".dcpAttribute__label").dcpLabel("setError",this.model.get("errorMessage"));+t().jquery.split(".")[0]>=3?this.widgetApply(this.getDOMElements().find(".dcpAttribute__content--widget").addBack().filter(".dcpAttribute__content--widget"),"setError",this.model.get("errorMessage")):this.widgetApply(this.getDOMElements().find(".dcpAttribute__content--widget").andSelf().filter(".dcpAttribute__content--widget"),"setError",this.model.get("errorMessage"))},changeAttributesValue:function(t,i,n){var o,s={prevent:!1},a=this,l=i.dataItem,d=i.valueIndex;if(this.model.trigger("helperSelect",s,this.model.id,l,n),s.prevent)return this;e.each(l.values,function(t,i){if("object"===(void 0===t?"undefined":r(t))){if(null===t.value)return;var n=a.model.getDocumentModel().get("attributes").get(i);n?n.hasMultipleOption()?(o=n.getValue(),d>=0&&(o=o[d]),e.some(o,function(e){return e.value===t.value})||n.addValue({value:t.value,displayValue:t.displayValue},d)):n.setValue({value:t.value,displayValue:t.displayValue},d):console.error("Unable to find "+i)}})},loadDocument:function(t,i){var n=i.index,o=null,r=this.model.get("attributeValue"),s=this.model.getDocumentModel(),a=-1;if(e.isUndefined(n)?(o=r.value,a=r.revision):(o=r[n].value,a=r[n].revision),this.model.trigger("internalLinkSelected",t,{eventId:"document.load",target:t.target,attrid:this.model.id,options:[o,"!defaultConsultation"],index:i.index}),t.prevent)return this;s.trigger("loadDocument",{initid:o,viewId:"!defaultConsultation",revision:a})},displayFormDocument:function(n,o,r){var s=this.model.id;if(o.createLabel){var a=this.model.getDocumentModel();i.e("wCreateDocument").then(function(){i("eeea49593fdad50c9212");t('<div class="dcpDocid-create-window"/>').dcpCreateDocument(e.extend(o,{originDocumentModel:a,attributeId:s,index:r,listener:function(t,e,i){i.dialogDocument=this,i.triggerId=e,a.trigger("createDialogListener",t,s,i)}})).data("dcpCreateDocument").open()}.bind(null,i)).catch(i.oe)}},externalLinkSelected:function(t,e){var i=this.model.getDocumentModel();if(e.attrid=this.model.id,this.model.trigger("internalLinkSelected",t,e),t.prevent)return this;"attribute.createDocumentRelation"===e.eventId?this.displayFormDocument(t,e.buttonConfig,e.index):i.trigger("actionAttributeLink",t,e)},downloadFileSelect:function(t,e){var i={prevent:!1};this.model.trigger("downloadFile",i,this.model.id,e),i.prevent&&t.preventDefault()},uploadFileSelect:function(t,e){var i={prevent:!1};this.model.trigger("uploadFile",i,this.model.id,e),i.prevent&&t.preventDefault()},uploadFileDone:function(t,e){this.model.trigger("uploadFileDone",{prevent:!1},this.model.id,e)},anchorClick:function(t,e){var i={prevent:!1};this.model.trigger("anchorClick",i,this.model.id,e),i.prevent&&t.preventDefault()},deleteValue:function(t,i){if(i.id===this.model.id){var n=this.model.get("helpOutputs"),o=this.model.getDocumentModel();n=n&&void 0!==n?e.toArray(n):[this.model.id],e.each(n,function(t){var e=o.get("attributes").get(t);e&&(e.hasMultipleOption()?e.setValue([],i.index):e.setValue({value:null,displayValue:""},i.index))})}},getAttributeModel:function(t){return this.model.getDocumentModel().get("attributes").get(t)},getDeleteLabels:function(){var t=this.model.get("helpOutputs"),i=this;return t=t&&void 0!==t?e.toArray(t):[this.model.id],e.map(t,function(t){var e=i.getAttributeModel(t);return e?e.attributes.label:""})},moveValueIndex:function(t){this.getDOMElements().trigger("postMoved",t)},autocompleteRequestRead:function(i,n){var o,r=this,s=this.model.getDocumentModel(),a=i.success,l={setResult:function(t){e.each(t,function(t){t.message?(t.message.contentText=t.message.contentText||"",t.message.contentHtml=t.message.contentHtml||"",t.message.type=t.message.type||"message"):t.error&&(t.message={contentHtml:"",contentText:t.error,type:"error"}),t.title=t.title||""}),a(t)},data:i.data},d={prevent:!1};if(a=e.wrap(a,function(t,e){var i={},o={prevent:!1};if(i.data=e,r.model.trigger("helperResponse",o,r.model.id,i,n),o.prevent)return t([]);t(e)}),i.data.attributes=s.getValues(),this.model.trigger("helperSearch",d,this.model.id,l,n),d.prevent)return this;o="api/v1/documents/"+(s.id||"0")+"/autocomplete/"+this.model.id,i.data.fromid=s.get("properties").get("family").id,t.ajax({type:"POST",url:o,data:i.data,dataType:"json"}).pipe(function(e){return e.success?e:t.Deferred().reject(e)},function(t){return 0===t.status?{success:!1,error:"Your navigator seems offline, try later"}:{success:!1,error:"Unexpected error: "+t.status+" "+t.statusText}}).then(function(t){e.each(t.messages,function(e){e.contentText=e.contentText||"",e.contentHtml=e.contentHtml||"",t.data.unshift({message:e,title:""})}),a(t.data)},function(t){e.isArray(t.error)&&(t.error=t.error.join(" ")),a([{title:"",error:t.error}])})},changeMenuVisibility:function(t,e){this.model.trigger("changeMenuVisibility",t,e)},getDOMElements:function(){return this.options&&this.options.els?this.options.els():this.$el},afterShow:function(){this.getDOMElements().trigger("show")},updateValue:function(t,e){this.model.setValue(e.value,e.index)},widgetInit:function(t,e){return t.addClass("dcpAttribute__content--widget"),this.getWidgetClass(t).call(t,e)},widgetApply:function(t,i,n){try{e.isString(i)&&t&&this.getWidgetClass(t)&&this.getWidgetClass(t).call(t,i,n)}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}return this},getWidgetClass:function(t){return(t=t||this.$el).data("currentWidgetClass")||t.data("currentWidgetClass",this.getTypedWidgetClass(this.model.get("type"))),t.data("currentWidgetClass")},getTypedWidgetClass:function(e){switch(e){case"text":return t.fn.dcpText;case"int":return t.fn.dcpInt;case"double":return t.fn.dcpDouble;case"money":return t.fn.dcpMoney;case"longtext":return t.fn.dcpLongtext;case"htmltext":return t.fn.dcpHtmltext;case"date":return t.fn.dcpDate;case"timestamp":return t.fn.dcpTimestamp;case"time":return t.fn.dcpTime;case"image":return t.fn.dcpImage;case"color":return t.fn.dcpColor;case"file":return t.fn.dcpFile;case"enum":return t.fn.dcpEnum;case"password":return t.fn.dcpPassword;case"thesaurus":case"account":case"docid":return t.fn.dcpDocid;default:return t.fn.dcpText}},setWidgetReady:function(){this.widgetReady=!0,this.triggerRenderDone()},triggerRenderDone:function(){!1!==this.noRenderEvent&&this.renderDone&&this.widgetReady&&!this.triggerRender&&(this.model.trigger("renderDone",{model:this.model,$el:this.$el}),this.triggerRender=!0)},remove:function(){try{this.currentDcpWidget&&this.getWidgetClass(this.currentDcpWidget)&&this._findWidgetName(this.$el)&&this.getWidgetClass(this.currentDcpWidget).call(this.$el,"destroy")}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}return n.View.prototype.remove.call(this)},hide:function(){this.$el.hide()},show:function(){this.$el.show()},_closeWidget:function(){try{this.currentDcpWidget&&this.getWidgetClass(this.currentDcpWidget)&&this._findWidgetName(this.currentDcpWidget)&&this.getWidgetClass(this.currentDcpWidget).call(this.currentDcpWidget,"close")}catch(t){window.dcp.logger?window.dcp.logger(t):console.error(t)}},_findWidgetName:function(t){return e.find(e.keys(t.data()),function(t){return-1!==t.indexOf("dcpDcp")})},_identifyView:function(t){t.haveView=!0,t.elements=t.elements.add(this.$el)}})}.apply(e,n))||(t.exports=o)},ff69e46ed202585764e9:function(t,e,i){"use strict";var n,o,r;!function(s,a){o=[i('external "jQuery"'),i("8e08e542008e4aef1f58"),i("bcd31d01884fc294fd69"),i("d1cffa31e143773735c0")],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r)}(window,function(t,e,i){return t.widget("dcp.dcpDocid",t.dcp.dcpAttribute,{options:{type:"docid",renderOptions:{kendoMultiSelectConfiguration:{minLength:1,itemTemplate:'<div class="dcpAutocomplete"><span class="k-state-default">#= data.title#</span>#if (data.message) {#<div class="dcpAutocomplete--#= data.message.type#">#: data.message.contentText# #= data.message.contentHtml#</div>#}# </div>'},kendoComboBoxConfiguration:{template:'<div class="dcpAutocomplete"><span class="k-state-default">#= data.title#</span>#if (data.message) {#<div class="dcpAutocomplete--#= data.message.type#">#: data.message.contentText# #= data.message.contentHtml#</div>#}# </div>'},editDisplay:"autoCompletion"},labels:{allSelectedDocument:"No more matching"}},kendoWidget:null,_initDom:function(){var n=this;if(this.element.addClass("dcpAttribute__content"),this.element.attr("data-type",this.getType()),this.element.attr("data-attrid",this.options.id),this._isMultiple()&&(this.options.attributeValues=e.toArray(this.options.attributeValue),this.options.isMultiple=!0),"read"===this.getMode()){if(this.options.renderOptions.format&&(this._isMultiple()?e.each(this.options.attributeValues,function(t){t.formatValue=i.render(n.options.renderOptions.format,t)}):this.options.attributeValue.formatValue=i.render(this.options.renderOptions.format,this.options.attributeValue)),this.options.renderOptions.documentIconSize){var o=/sizes\/([0-9xcfs]+)/,r=-1!==["0","0x0","x0"].indexOf(this.options.renderOptions.documentIconSize);this._isMultiple()?e.each(this.options.attributeValues,function(t){r?t.icon=null:t.icon&&(t.icon=t.icon.replace(o,"sizes/"+n.options.renderOptions.documentIconSize))}):r?this.options.attributeValue.icon=null:this.options.attributeValue.icon&&(this.options.attributeValue.icon=this.options.attributeValue.icon.replace(o,"sizes/"+this.options.renderOptions.documentIconSize))}t.dcp.dcpAttribute.prototype._initDom.apply(this,[])}else if("write"===this.getMode()){if(t.dcp.dcpAttribute.prototype._initDom.apply(this,[]),this.kendoWidget=this.element.find(".dcpAttribute__value--docid"),this.options.renderOptions.placeHolder&&(this.options.renderOptions.kendoMultiSelectConfiguration.placeholder=this.options.renderOptions.placeHolder),this._isMultiple())this._decorateMultipleValue(this.kendoWidget);else switch(this.options.renderOptions.editDisplay){case"singleMultiple":this._decorateSingleValue(this.kendoWidget);break;case"autoCompletion":this.singleCombobox(this.kendoWidget);break;case"list":this.singleDropdown(this.kendoWidget);break;default:this.singleCombobox(this.kendoWidget)}this._updateCreateButton()}},_updateCreateButton:function(){var e=this.options.attributeValue,i=this.options.renderOptions.buttons;this.element.find(".dcpAttribute__content__button--create").each(function(){var n=t(this),o=n.data("index"),r=i[o];n.prop("disabled",!1),e.value?n.html(r.renderHtmlContent+r.htmlEditContent):n.html(r.renderHtmlContent+r.htmlCreateContent)})},_initLinkEvent:function(){this._super();var e=this.getLink(),i=this;return e&&this.element.on("click."+this.eventNamespace,".dcpAttribute__content__link",function(n){var o=t(this);"_render"===e.target&&(n.preventDefault(),i._trigger("fetchdocument",n,{index:o.data("index"),tableLine:o.closest(".dcpArray__content__line").data("line")}))}),this},_initButtonsEvent:function(){var e=this;return this._super(),this.element.on("click"+this.eventNamespace,".dcpAttribute__content__button--create",function(i){var n=e.options.renderOptions.buttons[t(this).data("index")];e._trigger("externalLinkSelected",i,{target:i.target,eventId:"attribute.createDocumentRelation",index:e._getIndex(),buttonConfig:n})}),this.element.tooltip({selector:".dcpAttribute__content__buttons button",placement:"top",trigger:"hover",html:!0,title:function(){var n=t(this).data("title"),o=e.getValue();return i.render(n||"",o)},container:this.element}),this},_getFocusInput:function(){return this.element.find("input")},getKendoOptions:function(i,n){var o=this,r={autoBind:!1,clearButton:!1,dataTextField:"docTitle",dataValueField:"docId",highlightFirst:!0,dataSource:{serverFiltering:!0,transport:{read:function(t){return o._hasBeenRequested=!0,t.data.index=o._getIndex(),o.options.autocompleteRequest.call(null,t,o._getIndex())}},schema:{data:function(t){return e.each(t,function(t){t.values&&t.values[o.options.id]&&(t.docId=t.values[o.options.id].value,t.docTitle=t.values[o.options.id].displayValue)}),e.uniq(t,!1,function(t){return t.docId||t.message})}}},select:function(t){if(t.item&&!e.isUndefined(t.item.index())){var i=o._getIndex(),n=this.dataSource.at(t.item.index()).toJSON();n.message?t.preventDefault():e.defer(function(){o._trigger("changeattrsvalue",t,{dataItem:n,valueIndex:i},o._getIndex())})}},change:function(t){var i,n=o.options.attributeValue,r=[],s=this,a=this.value();e.isArray(a)?(e.each(a,function(t){e.isUndefined(t)||(i=0===(i=e.where(n,{value:t})).length?(i=e.where(s.dataSource.data(),{docId:t})).length>0?i[0].docTitle:"-":i[0].displayValue,r.push({value:t,displayValue:i}))}),o._isMultiple()||(r=r.length>0?r[0]:{value:null,displayValue:""})):a&&(i=e.where(s.dataSource.data(),{docId:a})).length>0?(i=i[0].docTitle,r={value:a,displayValue:i}):r={value:null,displayValue:""},o.setValue(r,t)},open:function(t){!0!==o._hasBeenRequested&&(t.preventDefault(),o.kendoWidgetObject.search("")),this.ul.addClass("dcpAttribute__select--docid")},close:function(){o._hasBeenRequested=!1},filtering:function(){this._isFiltering=!0},dataBound:function(){if(this._isFiltering){if(0===this.ul.find("li:not(.k-state-selected)").length&&this.ul.find("li.k-state-selected").length>0){var e=t('<li class="k-item"/>').append('<span class="k-state-default"/>').append(t('<span class="k-state-error dcpAttribute__select--docid-none"/>').text(o.options.labels.allSelectedDocument));this.ul.append(e)}this._isFiltering=!1}}};return n&&(r=e.extend(r,n)),this.options.renderOptions.kendoComboBoxConfiguration&&(r=e.extend(this.options.renderOptions.kendoComboBoxConfiguration,r)),r},_decorateSingleValue:function(t){this.options.attributeValues=[],this.options.attributeValue&&this.options.attributeValues.push(this.options.attributeValue),this._decorateMultipleValue(t,{maxSelectedItems:1}),this.options.attributeValue&&null!==this.options.attributeValue.value&&(this.element.find(".dcpAttribute__value--docid--button").attr("disabled","disabled"),this.element.find("input.k-input").attr("disabled","disabled"))},_decorateMultipleValue:function(t,i){var n=this.getKendoOptions(t,{filter:"contains"}),o=this,r=e.map(this.options.attributeValues,function(t){var e={};return e.docTitle=t.displayValue,e.docId=t.value,e});i&&(n=e.extend(n,i)),this.options.renderOptions.kendoMultiSelectConfiguration&&(n=e.extend(this.options.renderOptions.kendoMultiSelectConfiguration,n)),t.kendoMultiSelect(n),this.kendoWidgetObject=t.data("kendoMultiSelect"),this.kendoWidgetObject.dataSource.data(r),null!==this.options.attributeValues.value&&this.kendoWidgetObject.value(e.filter(e.map(r,function(t){return t.docId}),function(t){return!e.isEmpty(t)})),this.element.on("click"+this.eventNamespace,".dcpAttribute__value--docid--button",function(t){t.preventDefault(),o.kendoWidgetObject.search("")}),this.element.find(".dcpAttribute__value--docid--button[title]").tooltip({html:!0})},singleDropdown:function(t){var e=this.getKendoOptions(t);this.kendoWidgetObject=t.kendoDropDownList(e).data("kendoDropDownList"),this.kendoWidgetObject.list.find(".k-list-optionlabel").addClass("placeholder--clear"),this.kendoWidgetObject.value(this.options.attributeValue.value),this.element.find(".dcpAttribute__value--docid--button").parent().hide()},singleCombobox:function(t){var e,i=this.getKendoOptions(t,{filter:"startswith"});this.kendoWidgetObject=t.kendoComboBox(i).data("kendoComboBox"),e=this.kendoWidgetObject,this.kendoWidgetObject.list.find(".k-list-optionlabel").addClass("placeholder--clear"),this.options.attributeValue&&this.options.attributeValue.value&&e.dataSource.add({docId:this.options.attributeValue.value,docTitle:this.options.attributeValue.displayValue}),this.options.attributeValue.value&&this.kendoWidgetObject.value(this.options.attributeValue.value),this.element.find(".dcpAttribute__value--docid--button").parent().hide()},hasMultipleOption:function(){return this.options.options&&"yes"===this.options.options.multiple},setValue:function(t,i){var n;if(this._super(t,i),"write"===this.getMode()){this.hasMultipleOption()||"singleMultiple"!==this.options.renderOptions.editDisplay||(e.isArray(t)?1===t.length&&null===t.value&&(t=[]):t=null!==t.value?[t]:[],0===t.length?(this.element.find(".dcpAttribute__value--docid--button").removeAttr("disabled"),this.element.find("input.k-input").removeAttr("disabled")):(this.element.find(".dcpAttribute__value--docid--button").attr("disabled","disabled"),this.element.find("input.k-input").attr("disabled","disabled"))),n=this.hasMultipleOption()||"singleMultiple"===this.options.renderOptions.editDisplay?e.map(t,function(t){return t.value}):t.value;var o=this.kendoWidgetObject,r=e.clone(o.value()),s=e.map(e.filter(o.dataSource.data(),function(t){return!e.isEmpty(t.docId)}),function(t){return{docId:t.docId,docTitle:t.docTitle}});e.isArray(t)||(t=[t]),e.each(t,function(t){var i={};e.some(s,function(e){return t&&e.docId===t.value})||null!==t.value&&(i.docTitle=t.displayValue,i.docId=t.value,o.dataSource.add(i))}),this._isEqual(r,n)||(o.value(n),this.flashElement()),this._updateCreateButton()}else{if("read"!==this.getMode())throw new Error("Attribute "+this.options.id+" unkown mode "+this.getMode());this.redraw()}},_isEqual:function(t,i){var n=function(t){return t&&t.toString||(t=""),t.toString()};return e.isArray(t)||(t=[t]),e.isArray(i)||(i=[i]),t=e.filter(e.uniq(e.map(t,n)),function(t){return!!t}),i=e.filter(e.uniq(e.map(i,n)),function(t){return!!t}),e.isEqual(t,i)},close:function(){this.kendoWidget&&this.kendoWidgetObject&&this.kendoWidgetObject.close()},getType:function(){return"docid"},_destroy:function(){this.kendoWidget&&this.kendoWidgetObject&&this.kendoWidgetObject.destroy(),t(".dcpDocid-create-window").each(function(){var e=t(this).data("dcpWindow");e&&e.destroy()}),this._super()}}),t.fn.dcpDocid})},ff769b61d7927dad04ed:function(t,e,i){"use strict";var n,o;n=[i("8e08e542008e4aef1f58"),i("1858b45bf48591489d06"),i("8c1928b0f0f644cba374")],void 0===(o=function(t,e,i){return e.Collection.extend({model:i,destroy:function(){for(var t;t=this.first();)t.destroy()},_deepSearchMenu:function(t,e,i,n){var o,r,s;if(t)for(r=0;r<t.length;r++){if((o=t[r]).id===e)return i&&(o[i]=n),o;if(s=this._deepSearchMenu(o.content,e,i,n))return s}return null},getMenu:function(t){var e=null,i=null,n=this;return this.get(t)?this.get(t).attributes:(this.each(function(o){o.get("content")&&(i=n._deepSearchMenu(o.get("content"),t))&&(e=i)}),e)},setMenu:function(t,e,i){var n=null,o=null,r=this,s=null,a={};return this.get(t)?((s=this.get(t)).set(e,i),s.attributes):(this.each(function(s){s.get("content")&&(o=r._deepSearchMenu(s.get("content"),t,e,i))&&(a=s.get("content"),s.set("content",a),n=a,s.trigger("change"))}),n)}})}.apply(e,n))||(t.exports=o)}});
//# sourceMappingURL=mainSmartElement-83ad802116719d1de095.js.map