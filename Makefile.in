PACKAGE = @PACKAGE@
VERSION = @VERSION@
utildir = @PUBRULE@
pubdir = @prefix@
srcdir = @srcdir@
applib = FDL
appname = @APPNAME@
localBuildRule = @LOCAL_BUILD_RULE@
TAR = tar
GZIP_ENV = --best

export pubdir utildir appname applib PACKAGE localBuildRule

SUBDIR= locale DOCUMENT HTTPAPI_V1 STYLE
pages_not_php = documentStub.php

include $(utildir)/PubRule
include $(localBuildRule)/localBuildRule

# For all families traduction
# TRANSCSV += $(shell find ./Families -name "STRUCT_*.csv")
stub:
	$(utildir)/genStubFamilyClass.php DOCUMENT/*STRUCT*csv > documentStub.php
publish-test:
	make -C Test publish RELEASE=$(RELEASE) PACKAGE=$(PACKAGE)-test VERSION=$(VERSION) appname=TEST_DOCUMENT

webinst-test:
	make -C Test webinst RELEASE=$(RELEASE) PACKAGE=$(PACKAGE)-test VERSION=$(VERSION) appname=TEST_DOCUMENT
	mv Test/*.webinst .

webinst: webinst-test

clean-test:
	make -C Test clean

clean: clean-test
	/bin/rm -f *.*~ config.* Makefile configure $(appname)_init.php info.xml *.webinst
	/bin/rm -fr autom4te.cache
