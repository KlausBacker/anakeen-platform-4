<?xml version="1.0" ?>
<module xmlns="urn:dynacase:webinst:module/1.0" name="@moduleName@" release="@release@" version="@version@">
    <description>Admin Center</description>


    <requires>
        <!-- To remove after refactor -->
        <module name="anakeen-legacy"/>
    </requires>

    <pre-install>
        <check type="phpclass" class="ZipArchive">
            <help>You might need to install a php-zip package from your distribution in order to have ZipArchive support in PHP.</help>
        </check>
    </pre-install>
    <post-install>

        <process command="programs/record_application CORE_ADMIN" />

        <process command="programs/record_application FUSERS I">
            <label>Record FUSERS application in database</label>
        </process>
        <process
        command="./wsh.php --api=importDocuments --file=./Apps/FUSERS/Data/Init.csv">
          <label>Initializing FUSERS roles and ACLs</label>
        </process>
        <process
        command="./wsh.php --api=importDocuments --file=./Apps/CORE_ADMIN/Data/Init.csv">
          <label>Initializing CORE_ADMIN roles and ACLs</label>
        </process>
        <process command="programs/record_application DCPDEVEL"/>
        <process command="programs/update_catalog"/>
    </post-install>
    <post-upgrade>
        <process command="programs/pre_migration CORE_ADMIN" />
        <process command="programs/record_application CORE_ADMIN" />
        <process command="programs/post_migration CORE_ADMIN" />


        <process command="programs/pre_migration FUSERS" />
        <process command="programs/record_application FUSERS U">
            <label>Update FUSERS application</label>
        </process>
        <process command="programs/post_migration FUSERS" />

        <process command="programs/pre_migration DCPDEVEL"/>
        <process command="programs/record_application DCPDEVEL"/>
        <process command="programs/post_migration DCPDEVEL"/>
        <process command="programs/update_catalog"/>
    </post-upgrade>
</module>
